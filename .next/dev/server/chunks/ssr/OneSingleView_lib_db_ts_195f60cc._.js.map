{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/lib/db.ts"],"sourcesContent":["import { supabase } from './supabase';\nimport {\n    MotorPolicy,\n    HealthPolicy,\n    CommercialPolicy,\n    Claim,\n    QuoteRequest,\n    Referral,\n    User,\n    UserAuditLog,\n    AuditLog,\n    AppSetting,\n    Banner,\n    Garage,\n    UserPreferences,\n    RMInfo,\n} from '@/types';\n\n// Helper to convert database rows to app types\nfunction convertDates(data: any): any {\n    const converted = { ...data };\n    Object.keys(converted).forEach((key) => {\n        if (converted[key] && typeof converted[key] === 'string') {\n            // Try to parse as date\n            const dateValue = new Date(converted[key]);\n            if (!isNaN(dateValue.getTime()) && key.includes('date') || key.includes('_at')) {\n                converted[key] = dateValue;\n            }\n        }\n    });\n    return converted;\n}\n\n/**\n * Check for duplicate policy number\n */\nasync function checkDuplicatePolicy(table: string, userId: string, policyNumber: string): Promise<void> {\n    const { data, error } = await supabase\n        .from(table)\n        .select('id')\n        .eq('user_id', userId)\n        .eq('policy_number', policyNumber)\n        .maybeSingle();\n\n    if (data) {\n        throw new Error('This policy number already exists in your account');\n    }\n}\n\n/**\n * Get all motor policies for a user\n */\nexport async function getUserMotorPolicies(userId: string): Promise<MotorPolicy[]> {\n    try {\n        const { data, error } = await supabase\n            .from('motor_policies')\n            .select('*')\n            .eq('user_id', userId)\n            .order('created_at', { ascending: false });\n\n        if (error) throw error;\n\n        return (data || []).map((row: any) => ({\n            ...convertDates(row),\n            id: row.id,\n            user_id: row.user_id,\n        })) as MotorPolicy[];\n    } catch (error: any) {\n        console.error('Error fetching motor policies:', error.message, error.details, error.hint);\n        return [];\n    }\n}\n\n/**\n * Get all GMC policies for a user\n */\nexport async function getUserHealthPolicies(userId: string): Promise<HealthPolicy[]> {\n    try {\n        const { data, error } = await supabase\n            .from('health_policies')\n            .select('*')\n            .eq('user_id', userId)\n            .order('created_at', { ascending: false });\n\n        if (error) throw error;\n\n        return (data || []).map((row: any) => convertDates(row)) as HealthPolicy[];\n    } catch (error: any) {\n        console.error('Error fetching health policies:', error.message, error.details, error.hint);\n        return [];\n    }\n}\n\n/**\n * Get all commercial policies for a user\n */\nexport async function getUserCommercialPolicies(\n    userId: string,\n    lobType?: 'GPA' | 'Fire' | 'Other'\n): Promise<CommercialPolicy[]> {\n    try {\n        let query = supabase\n            .from('commercial_policies')\n            .select('*')\n            .eq('user_id', userId);\n\n        if (lobType) {\n            query = query.eq('lob_type', lobType);\n        }\n\n        const { data, error } = await query.order('created_at', { ascending: false });\n\n        if (error) throw error;\n\n        return (data || []).map((row: any) => convertDates(row)) as CommercialPolicy[];\n    } catch (error: any) {\n        console.error('Error fetching commercial policies:', error.message, error.details, error.hint);\n        return [];\n    }\n}\n\n/**\n * Get all claims for a user\n */\nexport async function getUserClaims(userId: string): Promise<Claim[]> {\n    try {\n        const { data, error } = await supabase\n            .from('claims')\n            .select('*')\n            .eq('user_id', userId)\n            .order('created_at', { ascending: false });\n\n        if (error) throw error;\n\n        return (data || []).map((row: any) => convertDates(row)) as Claim[];\n    } catch (error: any) {\n        console.error('Error fetching claims:', error.message, error.details, error.hint);\n        return [];\n    }\n}\n\n/**\n * Get all quote requests for a user\n */\nexport async function getUserQuoteRequests(userId: string): Promise<QuoteRequest[]> {\n    try {\n        const { data, error } = await supabase\n            .from('quote_requests')\n            .select('*')\n            .eq('user_id', userId)\n            .order('created_at', { ascending: false });\n\n        if (error) throw error;\n\n        return (data || []).map((row: any) => convertDates(row)) as QuoteRequest[];\n    } catch (error: any) {\n        console.error('Error fetching quote requests:', error);\n        return [];\n    }\n}\n\n/**\n * Add a motor policy\n */\nexport async function addMotorPolicy(policy: Omit<MotorPolicy, 'id' | 'created_at' | 'updated_at'>): Promise<string> {\n    try {\n        await checkDuplicatePolicy('motor_policies', policy.user_id, policy.policy_number);\n\n        const { data, error } = await supabase\n            .from('motor_policies')\n            .insert({\n                user_id: policy.user_id,\n                policy_number: policy.policy_number,\n                vehicle_number: policy.vehicle_number,\n                vehicle_type: policy.vehicle_type,\n                manufacturer: policy.manufacturer,\n                model: policy.model,\n                fuel_type: policy.fuel_type,\n                manufacturing_year: policy.manufacturing_year,\n                number_plate_type: policy.number_plate_type,\n                insurer_name: policy.insurer_name,\n                premium_amount: policy.premium_amount,\n                policy_start_date: policy.policy_start_date,\n                policy_end_date: policy.policy_end_date,\n                rc_docs: policy.rc_docs || [],\n                previous_policy_docs: policy.previous_policy_docs || [],\n                dl_docs: policy.dl_docs || [],\n            })\n            .select()\n            .single();\n\n        if (error) throw error;\n        return data.id;\n    } catch (error: any) {\n        console.error('Error adding motor policy:', error);\n        throw new Error(error.message || 'Failed to add motor policy');\n    }\n}\n\n/**\n * Add a GMC policy\n */\nexport async function addHealthPolicy(policy: Omit<HealthPolicy, 'id' | 'created_at' | 'updated_at'>): Promise<string> {\n    try {\n        await checkDuplicatePolicy('health_policies', policy.user_id, policy.policy_number);\n\n        const { data, error } = await supabase\n            .from('health_policies')\n            .insert({\n                user_id: policy.user_id,\n                company_name: policy.company_name,\n                policy_number: policy.policy_number,\n                insurer_name: policy.insurer_name,\n                sum_insured: policy.sum_insured,\n                premium_amount: policy.premium_amount,\n                expiry_date: policy.expiry_date,\n                policy_docs: policy.policy_docs || [],\n                no_of_lives: policy.no_of_lives,\n            })\n            .select()\n            .single();\n\n        if (error) throw error;\n        return data.id;\n    } catch (error: any) {\n        console.error('Error adding health policy:', error);\n        throw new Error(error.message || 'Failed to add health policy');\n    }\n}\n\n/**\n * Add a commercial policy\n */\nexport async function addCommercialPolicy(policy: Omit<CommercialPolicy, 'id' | 'created_at' | 'updated_at'>): Promise<string> {\n    try {\n        await checkDuplicatePolicy('commercial_policies', policy.user_id, policy.policy_number);\n\n        const { data, error } = await supabase\n            .from('commercial_policies')\n            .insert({\n                user_id: policy.user_id,\n                lob_type: policy.lob_type,\n                company_name: policy.company_name,\n                policy_holder_name: policy.policy_holder_name,\n                policy_number: policy.policy_number,\n                insurer_name: policy.insurer_name,\n                premium_amount: policy.premium_amount,\n                sum_insured: policy.sum_insured,\n                expiry_date: policy.expiry_date,\n                policy_docs: policy.policy_docs || [],\n            })\n            .select()\n            .single();\n\n        if (error) throw error;\n        return data.id;\n    } catch (error: any) {\n        console.error('Error adding commercial policy:', error);\n        throw new Error(error.message || 'Failed to add commercial policy');\n    }\n}\n\n/**\n * Update a motor policy\n */\nexport async function updateMotorPolicy(id: string, updates: Partial<MotorPolicy>): Promise<void> {\n    try {\n        const { error } = await supabase\n            .from('motor_policies')\n            .update(updates)\n            .eq('id', id);\n\n        if (error) throw error;\n    } catch (error: any) {\n        console.error('Error updating motor policy:', error);\n        throw new Error(error.message || 'Failed to update motor policy');\n    }\n}\n\n/**\n * Delete a motor policy\n */\nexport async function deleteMotorPolicy(id: string): Promise<void> {\n    try {\n        const { error } = await supabase\n            .from('motor_policies')\n            .delete()\n            .eq('id', id);\n\n        if (error) throw error;\n    } catch (error: any) {\n        console.error('Error deleting motor policy:', error);\n        throw new Error(error.message || 'Failed to delete motor policy');\n    }\n}\n\n/**\n * Update a GMC policy\n */\nexport async function updateHealthPolicy(id: string, updates: Partial<HealthPolicy>): Promise<void> {\n    try {\n        const { error } = await supabase\n            .from('health_policies')\n            .update(updates)\n            .eq('id', id);\n\n        if (error) throw error;\n    } catch (error: any) {\n        console.error('Error updating health policy:', error);\n        throw new Error(error.message || 'Failed to update health policy');\n    }\n}\n\n/**\n * Delete a GMC policy\n */\nexport async function deleteHealthPolicy(id: string): Promise<void> {\n    try {\n        const { error } = await supabase\n            .from('health_policies')\n            .delete()\n            .eq('id', id);\n\n        if (error) throw error;\n    } catch (error: any) {\n        console.error('Error deleting health policy:', error);\n        throw new Error(error.message || 'Failed to delete health policy');\n    }\n}\n\n/**\n * Update a commercial policy\n */\nexport async function updateCommercialPolicy(id: string, updates: Partial<CommercialPolicy>): Promise<void> {\n    try {\n        const { error } = await supabase\n            .from('commercial_policies')\n            .update(updates)\n            .eq('id', id);\n\n        if (error) throw error;\n    } catch (error: any) {\n        console.error('Error updating commercial policy:', error);\n        throw new Error(error.message || 'Failed to update commercial policy');\n    }\n}\n\n/**\n * Delete a commercial policy\n */\nexport async function deleteCommercialPolicy(id: string): Promise<void> {\n    try {\n        const { error } = await supabase\n            .from('commercial_policies')\n            .delete()\n            .eq('id', id);\n\n        if (error) throw error;\n    } catch (error: any) {\n        console.error('Error deleting commercial policy:', error);\n        throw new Error(error.message || 'Failed to delete commercial policy');\n    }\n}\n\n/**\n * Add a claim\n */\nexport async function addClaim(claim: Omit<Claim, 'id' | 'created_at' | 'updated_at'>): Promise<string> {\n    try {\n        const { data, error } = await supabase\n            .from('claims')\n            .insert({\n                user_id: claim.user_id,\n                policy_id: claim.policy_id,\n                lob_type: claim.lob_type,\n                claim_type: claim.claim_type,\n                incident_date: claim.incident_date,\n                description: claim.description,\n                supporting_docs: claim.supporting_docs || [],\n                status: claim.status,\n            })\n            .select()\n            .single();\n\n        if (error) throw error;\n        return data.id;\n    } catch (error: any) {\n        console.error('Error adding claim:', error);\n        throw new Error(error.message || 'Failed to add claim');\n    }\n}\n\n/**\n * Update a claim\n */\nexport async function updateClaim(id: string, updates: Partial<Claim>): Promise<void> {\n    try {\n        const { error } = await supabase\n            .from('claims')\n            .update(updates)\n            .eq('id', id);\n\n        if (error) throw error;\n    } catch (error: any) {\n        console.error('Error updating claim:', error);\n        throw new Error(error.message || 'Failed to update claim');\n    }\n}\n\n/**\n * Add a quote request\n */\nexport async function addQuoteRequest(quote: Omit<QuoteRequest, 'id' | 'created_at'>): Promise<string> {\n    try {\n        const { data, error } = await supabase\n            .from('quote_requests')\n            .insert({\n                user_id: quote.user_id,\n                lob_type: quote.lob_type,\n                details: quote.details,\n                uploaded_quote: quote.uploaded_quote,\n                has_better_quote: quote.has_better_quote,\n                status: quote.status,\n            })\n            .select()\n            .single();\n\n        if (error) throw error;\n        return data.id;\n    } catch (error: any) {\n        console.error('Error adding quote request:', error);\n        throw new Error(error.message || 'Failed to add quote request');\n    }\n}\n\n/**\n * Update a quote request\n */\nexport async function updateQuoteRequest(id: string, updates: Partial<QuoteRequest>): Promise<void> {\n    try {\n        const { error } = await supabase\n            .from('quote_requests')\n            .update(updates)\n            .eq('id', id);\n\n        if (error) throw error;\n    } catch (error: any) {\n        console.error('Error updating quote request:', error);\n        throw new Error(error.message || 'Failed to update quote request');\n    }\n}\n\n/**\n * Get all referrals for a user\n */\nexport async function getUserReferrals(userId: string): Promise<Referral[]> {\n    try {\n        const { data, error } = await supabase\n            .from('referrals')\n            .select('*')\n            .eq('user_id', userId)\n            .order('created_at', { ascending: false });\n\n        if (error) throw error;\n\n        return (data || []).map((row: any) => convertDates(row)) as Referral[];\n    } catch (error: any) {\n        console.error('Error fetching referrals:', error.message, error.details, error.hint);\n        return [];\n    }\n}\n\n/**\n * Add a referral\n */\nexport async function addReferral(referral: Omit<Referral, 'id' | 'created_at'>): Promise<string> {\n    try {\n        const { data, error } = await supabase\n            .from('referrals')\n            .insert({\n                user_id: referral.user_id,\n                friend_name: referral.friend_name,\n                friend_mobile: referral.friend_mobile,\n                friend_email: referral.friend_email,\n                notes: referral.notes,\n            })\n            .select()\n            .single();\n\n        if (error) throw error;\n        return data.id;\n    } catch (error: any) {\n        console.error('Error adding referral:', error);\n        throw new Error(error.message || 'Failed to add referral');\n    }\n}\n\n/**\n * Log user field change for audit\n */\nexport async function logUserChange(\n    userId: string,\n    field: 'email' | 'mobile',\n    oldValue: string,\n    newValue: string\n): Promise<void> {\n    try {\n        const { error } = await supabase\n            .from('user_audit_log')\n            .insert({\n                user_id: userId,\n                field_changed: field,\n                old_value: oldValue,\n                new_value: newValue,\n            });\n\n        if (error) throw error;\n    } catch (error: any) {\n        console.error('Error logging user change:', error);\n    }\n}\n\n// --- Admin: User Management ---\n\n/**\n * Get all users (Admin only)\n */\nexport async function getAllUsers(): Promise<User[]> {\n    try {\n        const { data, error } = await supabase\n            .from('users')\n            .select('*')\n            .order('created_at', { ascending: false });\n\n        if (error) throw error;\n\n        return (data || []).map((row: any) => convertDates(row)) as User[];\n    } catch (error: any) {\n        console.error('Error fetching all users:', error);\n        return [];\n    }\n}\n\n/**\n * Get user details by ID (Admin)\n */\nexport async function getUserById(userId: string): Promise<User | null> {\n    try {\n        const { data, error } = await supabase\n            .from('users')\n            .select('*')\n            .eq('id', userId)\n            .single();\n\n        if (error) throw error;\n        return convertDates(data) as User;\n    } catch (error: any) {\n        console.error('Error fetching user details:', error);\n        return null;\n    }\n}\n\n\n\n/**\n * Update user status (Disable/Enable) - Mock implementation as 'status' field might not exist yet\n * In a real scenario, we would update a 'status' or 'is_active' column.\n * For now, we'll assume there's an 'is_active' column or similar in the 'users' table or just log it.\n */\nexport async function updateUserStatus(userId: string, status: 'active' | 'disabled'): Promise<void> {\n    try {\n        // TODO: Ensure 'status' column exists in users table.\n        // For now, we will just log this action as if it happened.\n        console.log(`Updating user ${userId} status to ${status}`);\n\n        // const { error } = await supabase\n        //     .from('users')\n        //     .update({ status })\n        //     .eq('id', userId);\n        // if (error) throw error;\n    } catch (error: any) {\n        console.error('Error updating user status:', error);\n        throw error;\n    }\n}\n\n\n\n// ... (keeping imports)\n\n/**\n * Get audit logs for a user (Admin)\n */\nexport async function getUserAuditLogs(userId: string): Promise<AuditLog[]> {\n    try {\n        const { data, error } = await supabase\n            .from('user_audit_log')\n            .select('*')\n            .eq('user_id', userId)\n            .order('created_at', { ascending: false });\n\n        if (error) throw error;\n\n        return (data || []).map((row: any) => convertDates(row)) as AuditLog[];\n    } catch (error: any) {\n        console.error('Error fetching audit logs:', error.message || error);\n        return [];\n    }\n}\n\n// --- Admin: Policy Management ---\n\n/**\n * Get all motor policies (Admin)\n */\nexport async function getAllMotorPolicies(): Promise<MotorPolicy[]> {\n    try {\n        const { data, error } = await supabase\n            .from('motor_policies')\n            .select('*, users(name, email)')\n            .order('created_at', { ascending: false });\n\n        if (error) throw error;\n\n        return (data || []).map((row: any) => ({\n            ...convertDates(row),\n            user_name: row.users?.name,\n            user_email: row.users?.email\n        })) as MotorPolicy[];\n    } catch (error: any) {\n        console.error('Error fetching all motor policies:', error);\n        return [];\n    }\n}\n\n/**\n * Get all GMC policies (Admin)\n */\nexport async function getAllHealthPolicies(): Promise<HealthPolicy[]> {\n    try {\n        const { data, error } = await supabase\n            .from('health_policies')\n            .select('*, users(name, email)')\n            .order('created_at', { ascending: false });\n\n        if (error) throw error;\n\n        return (data || []).map((row: any) => ({\n            ...convertDates(row),\n            user_name: row.users?.name,\n            user_email: row.users?.email\n        })) as HealthPolicy[];\n    } catch (error: any) {\n        console.error('Error fetching all health policies:', error);\n        return [];\n    }\n}\n\n/**\n * Get all commercial policies (Admin)\n */\nexport async function getAllCommercialPolicies(): Promise<CommercialPolicy[]> {\n    try {\n        const { data, error } = await supabase\n            .from('commercial_policies')\n            .select('*, users(name, email)')\n            .order('created_at', { ascending: false });\n\n        if (error) throw error;\n\n        return (data || []).map((row: any) => ({\n            ...convertDates(row),\n            user_name: row.users?.name,\n            user_email: row.users?.email\n        })) as CommercialPolicy[];\n    } catch (error: any) {\n        console.error('Error fetching all commercial policies:', error);\n        return [];\n    }\n}\n\n// --- Admin: Operations ---\n\n/**\n * Get all claims (Admin)\n */\nexport async function getAllClaims(): Promise<Claim[]> {\n    try {\n        const { data, error } = await supabase\n            .from('claims')\n            .select('*, users(name, email)')\n            .order('created_at', { ascending: false });\n\n        if (error) throw error;\n\n        return (data || []).map((row: any) => ({\n            ...convertDates(row),\n            user_name: row.users?.name,\n            user_email: row.users?.email\n        })) as Claim[];\n    } catch (error: any) {\n        console.error('Error fetching all claims:', error);\n        return [];\n    }\n}\n\n/**\n * Get all quote requests (Admin)\n */\nexport async function getAllQuoteRequests(): Promise<QuoteRequest[]> {\n    try {\n        const { data, error } = await supabase\n            .from('quote_requests')\n            .select('*, users(name, email)')\n            .order('created_at', { ascending: false });\n\n        if (error) throw error;\n\n        return (data || []).map((row: any) => ({\n            ...convertDates(row),\n            user_name: row.users?.name,\n            user_email: row.users?.email\n        })) as QuoteRequest[];\n    } catch (error: any) {\n        console.error('Error fetching all quote requests:', error);\n        return [];\n    }\n}\n\n// --- Admin: System Configuration ---\n\n/**\n * Get all app settings\n */\nexport async function getAppSettings(): Promise<AppSetting[]> {\n    try {\n        const { data, error } = await supabase\n            .from('app_settings')\n            .select('*')\n            .order('key');\n\n        if (error) throw error;\n\n        return (data || []).map((row: any) => convertDates(row)) as AppSetting[];\n    } catch (error: any) {\n        console.error('Error fetching app settings:', error);\n        return [];\n    }\n}\n\n/**\n * Update an app setting\n */\nexport async function updateAppSetting(key: string, value: any): Promise<void> {\n    try {\n        const { error } = await supabase\n            .from('app_settings')\n            .upsert({ key, value, updated_at: new Date() });\n\n        if (error) throw error;\n    } catch (error: any) {\n        console.error('Error updating app setting:', error);\n        throw error;\n    }\n}\n\n/**\n * Get all banners\n */\nexport async function getAllBanners(): Promise<Banner[]> {\n    try {\n        const { data, error } = await supabase\n            .from('banners')\n            .select('*')\n            .order('display_order');\n\n        if (error) throw error;\n\n        return (data || []).map((row: any) => convertDates(row)) as Banner[];\n    } catch (error: any) {\n        console.error('Error fetching banners:', error);\n        return [];\n    }\n}\n\n/**\n * Add a banner\n */\nexport async function addBanner(banner: Omit<Banner, 'id' | 'created_at' | 'updated_at'>): Promise<void> {\n    try {\n        const { error } = await supabase\n            .from('banners')\n            .insert(banner);\n\n        if (error) throw error;\n    } catch (error: any) {\n        console.error('Error adding banner:', error);\n        throw error;\n    }\n}\n\n/**\n * Delete a banner\n */\nexport async function deleteBanner(id: string): Promise<void> {\n    try {\n        const { error } = await supabase\n            .from('banners')\n            .delete()\n            .eq('id', id);\n\n        if (error) throw error;\n    } catch (error: any) {\n        console.error('Error deleting banner:', error);\n        throw error;\n    }\n}\n\n/**\n * Get all garages\n */\nexport async function getAllGarages(): Promise<Garage[]> {\n    try {\n        const { data, error } = await supabase\n            .from('garages')\n            .select('*')\n            .order('name');\n\n        if (error) throw error;\n\n        return (data || []).map((row: any) => convertDates(row)) as Garage[];\n    } catch (error: any) {\n        console.error('Error fetching garages:', error);\n        return [];\n    }\n}\n\n/**\n * Add a garage\n */\nexport async function addGarage(garage: Omit<Garage, 'id' | 'created_at' | 'updated_at'>): Promise<void> {\n    try {\n        const { error } = await supabase\n            .from('garages')\n            .insert(garage);\n\n        if (error) throw error;\n    } catch (error: any) {\n        console.error('Error adding garage:', error);\n        throw error;\n    }\n}\n\n/**\n * Delete a garage\n */\n/**\n * Delete a garage\n */\nexport async function deleteGarage(id: string): Promise<void> {\n    try {\n        const { error } = await supabase\n            .from('garages')\n            .delete()\n            .eq('id', id);\n\n        if (error) throw error;\n    } catch (error: any) {\n        console.error('Error deleting garage:', error);\n        throw error;\n    }\n}\n\n// ============================================\n// PROFILE MANAGEMENT FUNCTIONS\n// ============================================\n\n/**\n * Update user profile information\n */\nexport async function updateUserProfile(\n    userId: string,\n    updates: {\n        name?: string;\n        mobile?: string;\n        company_name?: string;\n        address?: string;\n        avatar_url?: string;\n    }\n): Promise<User> {\n    try {\n        const { data, error } = await supabase\n            .from('users')\n            .update(updates)\n            .eq('id', userId)\n            .select()\n            .single();\n\n        if (error) throw error;\n        return convertDates(data) as User;\n    } catch (error: any) {\n        console.error('Error updating user profile:', error);\n        throw error;\n    }\n}\n\n/**\n * Get Relationship Manager (RM) details for a user\n */\nexport async function getUserRM(userId: string): Promise<RMInfo | null> {\n    try {\n        // First get the user's rm_id\n        const { data: user, error: userError } = await supabase\n            .from('users')\n            .select('rm_id')\n            .eq('id', userId)\n            .single();\n\n        if (userError) {\n            // If user not found or error, return default RM for demo\n            console.log('Error fetching user for RM, returning default:', userError);\n            return {\n                name: 'Amit Sharma',\n                email: 'amit.sharma@onesingleview.com',\n                mobile: '+91 98765 43210'\n            };\n        }\n\n        if (!user?.rm_id) {\n            // Return default RM if none assigned\n            return {\n                name: 'Amit Sharma',\n                email: 'amit.sharma@onesingleview.com',\n                mobile: '+91 98765 43210'\n            };\n        }\n\n        // Then get the RM's details\n        const { data: rm, error: rmError } = await supabase\n            .from('users')\n            .select('name, email, mobile')\n            .eq('id', user.rm_id)\n            .single();\n\n        if (rmError) throw rmError;\n        return rm as RMInfo;\n    } catch (error: any) {\n        console.error('Error fetching user RM:', error);\n        // Return default RM on error to ensure UI shows something\n        return {\n            name: 'Amit Sharma',\n            email: 'amit.sharma@onesingleview.com',\n            mobile: '+91 98765 43210'\n        };\n    }\n}\n\n/**\n * Get user preferences, creating defaults if none exist\n */\nexport async function getUserPreferences(userId: string): Promise<UserPreferences> {\n    try {\n        const { data, error } = await supabase\n            .from('user_preferences')\n            .select('*')\n            .eq('user_id', userId)\n            .single();\n\n        if (error && error.code === 'PGRST116') {\n            // No preferences yet, create default\n            return await createDefaultPreferences(userId);\n        }\n\n        if (error) throw error;\n        return convertDates(data) as UserPreferences;\n    } catch (error: any) {\n        console.error('Error fetching user preferences:', error);\n        throw error;\n    }\n}\n\n/**\n * Create default preferences for a user\n */\nasync function createDefaultPreferences(userId: string): Promise<UserPreferences> {\n    try {\n        const defaultPrefs = {\n            user_id: userId,\n            email_notifications: true,\n            sms_notifications: false,\n            policy_expiry_alerts: true,\n            claim_updates: true,\n        };\n\n        const { data, error } = await supabase\n            .from('user_preferences')\n            .insert(defaultPrefs)\n            .select()\n            .single();\n\n        if (error) throw error;\n        return convertDates(data) as UserPreferences;\n    } catch (error: any) {\n        console.error('Error creating default preferences:', error);\n        throw error;\n    }\n}\n\n/**\n * Update user preferences\n */\nexport async function updateUserPreferences(\n    userId: string,\n    preferences: Partial<Omit<UserPreferences, 'id' | 'user_id' | 'created_at' | 'updated_at'>>\n): Promise<UserPreferences> {\n    try {\n        const { data, error } = await supabase\n            .from('user_preferences')\n            .upsert({\n                user_id: userId,\n                ...preferences,\n                updated_at: new Date().toISOString(),\n            })\n            .select()\n            .single();\n\n        if (error) throw error;\n        return convertDates(data) as UserPreferences;\n    } catch (error: any) {\n        console.error('Error updating user preferences:', error);\n        throw error;\n    }\n}\n\n// Life Policies\nexport async function getUserLifePolicies(userId: string) {\n    const { data, error } = await supabase\n        .from('life_policies')\n        .select('*')\n        .eq('user_id', userId)\n        .order('policy_end_date', { ascending: true });\n\n    if (error) throw error;\n    return (data || []).map((row: any) => convertDates(row));\n}\n\nexport async function addLifePolicy(policy: any) {\n    await checkDuplicatePolicy('life_policies', policy.user_id, policy.policy_number);\n    const { data, error } = await supabase\n        .from('life_policies')\n        .insert([policy])\n        .select()\n        .single();\n\n    if (error) throw error;\n    return data;\n}\n\n// Travel Policies\nexport async function getUserTravelPolicies(userId: string) {\n    const { data, error } = await supabase\n        .from('travel_policies')\n        .select('*')\n        .eq('user_id', userId)\n        .order('policy_end_date', { ascending: true });\n\n    if (error) throw error;\n    return (data || []).map((row: any) => convertDates(row));\n}\n\nexport async function addTravelPolicy(policy: any) {\n    await checkDuplicatePolicy('travel_policies', policy.user_id, policy.policy_number);\n    const { data, error } = await supabase\n        .from('travel_policies')\n        .insert([policy])\n        .select()\n        .single();\n\n    if (error) throw error;\n    return data;\n}\n\n/**\n * Get company's GMC policy by company name\n * Used by corporate employees to find their company's group health policy\n */\nexport async function getCompanyGMCPolicy(companyName: string) {\n    const { data, error } = await supabase\n        .from('health_policies')\n        .select('*')\n        .eq('company_name', companyName)\n        .maybeSingle();\n\n    if (error) throw error;\n    return data ? convertDates(data) : null;\n}\n\n// Cyber Policies\nexport async function getUserCyberPolicies(userId: string) {\n    const { data, error } = await supabase\n        .from('cyber_policies')\n        .select('*')\n        .eq('user_id', userId)\n        .order('policy_end_date', { ascending: true });\n\n    if (error) throw error;\n    return (data || []).map((row: any) => convertDates(row));\n}\n\nexport async function addCyberPolicy(policy: any) {\n    await checkDuplicatePolicy('cyber_policies', policy.user_id, policy.policy_number);\n    const { data, error } = await supabase\n        .from('cyber_policies')\n        .insert([policy])\n        .select()\n        .single();\n\n    if (error) throw error;\n    return data;\n}\n\n// Notifications\nexport async function getUserNotifications(userId: string) {\n    const { data, error } = await supabase\n        .from('notifications')\n        .select('*')\n        .eq('user_id', userId)\n        .order('created_at', { ascending: false })\n        .limit(20);\n\n    if (error) throw error;\n    return (data || []).map((row: any) => convertDates(row));\n}\n\nexport async function markNotificationAsRead(notificationId: string) {\n    const { error } = await supabase\n        .from('notifications')\n        .update({ is_read: true })\n        .eq('id', notificationId);\n\n    if (error) throw error;\n}\n\nexport async function markAllNotificationsAsRead(userId: string) {\n    const { error } = await supabase\n        .from('notifications')\n        .update({ is_read: true })\n        .eq('user_id', userId)\n        .eq('is_read', false);\n\n    if (error) throw error;\n}\n/**\n * Upload user avatar\n */\nexport async function uploadAvatar(userId: string, file: File): Promise<string | null> {\n    try {\n        const fileExt = file.name.split('.').pop();\n        const fileName = `${userId}-${Math.random()}.${fileExt}`;\n        const filePath = `${fileName}`;\n\n        // Upload file\n        const { error: uploadError } = await supabase.storage\n            .from('avatars')\n            .upload(filePath, file);\n\n        if (uploadError) {\n            throw uploadError;\n        }\n\n        // Get public URL\n        const { data } = supabase.storage\n            .from('avatars')\n            .getPublicUrl(filePath);\n\n        // Update user profile\n        const { error: updateError } = await supabase\n            .from('users')\n            .update({ avatar_url: data.publicUrl })\n            .eq('id', userId);\n\n        if (updateError) {\n            throw updateError;\n        }\n\n        return data.publicUrl;\n    } catch (error: any) {\n        console.error('Error uploading avatar:', error.message);\n        return null;\n    }\n}\n"],"names":[],"mappings":"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"}}]
}