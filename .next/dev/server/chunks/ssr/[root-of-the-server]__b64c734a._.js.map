{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/forms/FormInput.tsx"],"sourcesContent":["import React from 'react';\n\ninterface FormInputProps {\n    label: string;\n    name: string;\n    type?: 'text' | 'email' | 'tel' | 'number' | 'date' | 'select' | 'textarea';\n    value: string | number;\n    onChange: (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => void;\n    onBlur?: (e: React.FocusEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => void;\n    error?: string;\n    placeholder?: string;\n    required?: boolean;\n    disabled?: boolean;\n    min?: string | number;\n    max?: string | number;\n    step?: string | number;\n    options?: { value: string | number; label: string }[];\n    rows?: number;\n    className?: string;\n}\n\nexport default function FormInput({\n    label,\n    name,\n    type = 'text',\n    value,\n    onChange,\n    onBlur,\n    error,\n    placeholder,\n    required = false,\n    disabled = false,\n    min,\n    max,\n    step,\n    options = [],\n    rows = 4,\n    className = '',\n}: FormInputProps) {\n    const baseInputClass = `\n    w-full px-4 py-2 border rounded-lg\n    focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent\n    disabled:bg-gray-100 disabled:cursor-not-allowed\n    transition-colors\n    ${error ? 'border-red-500 focus:ring-red-500' : 'border-gray-300'}\n    ${className}\n  `;\n\n    const renderInput = () => {\n        if (type === 'select') {\n            return (\n                <select\n                    id={name}\n                    name={name}\n                    value={value}\n                    onChange={onChange}\n                    onBlur={onBlur}\n                    disabled={disabled}\n                    required={required}\n                    className={baseInputClass}\n                >\n                    <option value=\"\">Select {label}</option>\n                    {options.map((option) => (\n                        <option key={option.value} value={option.value}>\n                            {option.label}\n                        </option>\n                    ))}\n                </select>\n            );\n        }\n\n        if (type === 'textarea') {\n            return (\n                <textarea\n                    id={name}\n                    name={name}\n                    value={value}\n                    onChange={onChange}\n                    onBlur={onBlur}\n                    placeholder={placeholder}\n                    disabled={disabled}\n                    required={required}\n                    rows={rows}\n                    className={baseInputClass}\n                />\n            );\n        }\n\n        return (\n            <input\n                id={name}\n                name={name}\n                type={type}\n                value={value}\n                onChange={onChange}\n                onBlur={onBlur}\n                placeholder={placeholder}\n                disabled={disabled}\n                required={required}\n                min={min}\n                max={max}\n                step={step}\n                className={baseInputClass}\n            />\n        );\n    };\n\n    return (\n        <div className=\"space-y-1\">\n            <label htmlFor={name} className=\"block text-sm font-medium text-gray-700\">\n                {label}\n                {required && <span className=\"text-red-500 ml-1\">*</span>}\n            </label>\n            {renderInput()}\n            {error && (\n                <p className=\"text-sm text-red-600 flex items-center gap-1\">\n                    <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n                    </svg>\n                    {error}\n                </p>\n            )}\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;;AAqBe,SAAS,UAAU,EAC9B,KAAK,EACL,IAAI,EACJ,OAAO,MAAM,EACb,KAAK,EACL,QAAQ,EACR,MAAM,EACN,KAAK,EACL,WAAW,EACX,WAAW,KAAK,EAChB,WAAW,KAAK,EAChB,GAAG,EACH,GAAG,EACH,IAAI,EACJ,UAAU,EAAE,EACZ,OAAO,CAAC,EACR,YAAY,EAAE,EACD;IACb,MAAM,iBAAiB,CAAC;;;;;IAKxB,EAAE,QAAQ,sCAAsC,kBAAkB;IAClE,EAAE,UAAU;EACd,CAAC;IAEC,MAAM,cAAc;QAChB,IAAI,SAAS,UAAU;YACnB,qBACI,+PAAC;gBACG,IAAI;gBACJ,MAAM;gBACN,OAAO;gBACP,UAAU;gBACV,QAAQ;gBACR,UAAU;gBACV,UAAU;gBACV,WAAW;;kCAEX,+PAAC;wBAAO,OAAM;;4BAAG;4BAAQ;;;;;;;oBACxB,QAAQ,GAAG,CAAC,CAAC,uBACV,+PAAC;4BAA0B,OAAO,OAAO,KAAK;sCACzC,OAAO,KAAK;2BADJ,OAAO,KAAK;;;;;;;;;;;QAMzC;QAEA,IAAI,SAAS,YAAY;YACrB,qBACI,+PAAC;gBACG,IAAI;gBACJ,MAAM;gBACN,OAAO;gBACP,UAAU;gBACV,QAAQ;gBACR,aAAa;gBACb,UAAU;gBACV,UAAU;gBACV,MAAM;gBACN,WAAW;;;;;;QAGvB;QAEA,qBACI,+PAAC;YACG,IAAI;YACJ,MAAM;YACN,MAAM;YACN,OAAO;YACP,UAAU;YACV,QAAQ;YACR,aAAa;YACb,UAAU;YACV,UAAU;YACV,KAAK;YACL,KAAK;YACL,MAAM;YACN,WAAW;;;;;;IAGvB;IAEA,qBACI,+PAAC;QAAI,WAAU;;0BACX,+PAAC;gBAAM,SAAS;gBAAM,WAAU;;oBAC3B;oBACA,0BAAY,+PAAC;wBAAK,WAAU;kCAAoB;;;;;;;;;;;;YAEpD;YACA,uBACG,+PAAC;gBAAE,WAAU;;kCACT,+PAAC;wBAAI,WAAU;wBAAU,MAAK;wBAAe,SAAQ;kCACjD,cAAA,+PAAC;4BAAK,UAAS;4BAAU,GAAE;4BAAoH,UAAS;;;;;;;;;;;oBAE3J;;;;;;;;;;;;;AAKrB"}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/profile/EditProfileModal.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef } from 'react';\nimport { X, Upload, Loader2 } from 'lucide-react';\nimport { updateUserProfile, uploadAvatar } from '@/lib/db';\nimport { User } from '@/types';\nimport FormInput from '../forms/FormInput';\n\ninterface EditProfileModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    user: User;\n    onSuccess: (updatedUser: User) => void;\n}\n\nexport default function EditProfileModal({ isOpen, onClose, user, onSuccess }: EditProfileModalProps) {\n    const [formData, setFormData] = useState({\n        name: user.name || '',\n        mobile: user.mobile || '',\n        company_name: user.company_name || '',\n        address: user.address || '',\n    });\n    const [loading, setLoading] = useState(false);\n    const [uploadingAvatar, setUploadingAvatar] = useState(false);\n    const [avatarUrl, setAvatarUrl] = useState(user.avatar_url || '');\n    const [error, setError] = useState('');\n    const fileInputRef = useRef<HTMLInputElement>(null);\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\n        setFormData({\n            ...formData,\n            [e.target.name]: e.target.value,\n        });\n    };\n\n    const handleAvatarChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\n        const file = e.target.files?.[0];\n        if (!file) return;\n\n        // Validate file type\n        if (!file.type.startsWith('image/')) {\n            setError('Please select an image file');\n            return;\n        }\n\n        // Validate file size (max 5MB)\n        if (file.size > 5 * 1024 * 1024) {\n            setError('Image size must be less than 5MB');\n            return;\n        }\n\n        setUploadingAvatar(true);\n        setError('');\n\n        try {\n            const url = await uploadAvatar(user.id, file);\n            if (url) {\n                setAvatarUrl(url);\n            } else {\n                setError('Failed to upload avatar');\n            }\n        } catch (err) {\n            console.error('Avatar upload error:', err);\n            setError('Failed to upload avatar');\n        } finally {\n            setUploadingAvatar(false);\n        }\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setLoading(true);\n        setError('');\n\n        try {\n            // Update profile data including avatar_url if changed\n            const updates: any = { ...formData };\n            if (avatarUrl !== user.avatar_url) {\n                updates.avatar_url = avatarUrl;\n            }\n            const updatedUser = await updateUserProfile(user.id, updates);\n            onSuccess(updatedUser);\n            onClose();\n        } catch (err: any) {\n            setError(err.message || 'Failed to update profile');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    if (!isOpen) return null;\n\n    return (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n                {/* Header */}\n                <div className=\"flex items-center justify-between p-6 border-b border-gray-100\">\n                    <h2 className=\"text-2xl font-bold text-gray-900\">Edit Profile</h2>\n                    <button\n                        onClick={onClose}\n                        className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n                        disabled={loading}\n                    >\n                        <X className=\"w-5 h-5 text-gray-500\" />\n                    </button>\n                </div>\n\n                {/* Form */}\n                <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n                    {error && (\n                        <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg\">\n                            {error}\n                        </div>\n                    )}\n\n                    {/* Avatar Upload */}\n                    <div className=\"flex flex-col items-center gap-4 pb-6 border-b border-gray-100\">\n                        <div className=\"relative\">\n                            {avatarUrl ? (\n                                <img\n                                    src={avatarUrl}\n                                    alt=\"Profile\"\n                                    className=\"w-24 h-24 rounded-full object-cover border-4 border-primary-100\"\n                                />\n                            ) : (\n                                <div className=\"w-24 h-24 rounded-full bg-primary-100 flex items-center justify-center text-primary-600 text-3xl font-bold border-4 border-primary-100\">\n                                    {user.name.charAt(0).toUpperCase()}\n                                </div>\n                            )}\n                            {uploadingAvatar && (\n                                <div className=\"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center\">\n                                    <Loader2 className=\"w-8 h-8 text-white animate-spin\" />\n                                </div>\n                            )}\n                        </div>\n                        <button\n                            type=\"button\"\n                            onClick={() => fileInputRef.current?.click()}\n                            disabled={uploadingAvatar || loading}\n                            className=\"flex items-center gap-2 px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50\"\n                        >\n                            <Upload className=\"w-4 h-4\" />\n                            {uploadingAvatar ? 'Uploading...' : 'Change Profile Picture'}\n                        </button>\n                        <input\n                            ref={fileInputRef}\n                            type=\"file\"\n                            accept=\"image/*\"\n                            onChange={handleAvatarChange}\n                            className=\"hidden\"\n                        />\n                    </div>\n\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                        <FormInput\n                            label=\"Full Name\"\n                            name=\"name\"\n                            value={formData.name}\n                            onChange={handleChange}\n                            required\n                            placeholder=\"Enter your full name\"\n                        />\n\n                        <FormInput\n                            label=\"Mobile Number\"\n                            name=\"mobile\"\n                            type=\"tel\"\n                            value={formData.mobile}\n                            onChange={handleChange}\n                            required\n                            placeholder=\"Enter your mobile number\"\n                        />\n\n                        <FormInput\n                            label=\"Company Name\"\n                            name=\"company_name\"\n                            value={formData.company_name}\n                            onChange={handleChange}\n                            placeholder=\"Enter your company name (optional)\"\n                        />\n                    </div>\n\n                    <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                            Address\n                        </label>\n                        <textarea\n                            name=\"address\"\n                            value={formData.address}\n                            onChange={handleChange}\n                            rows={3}\n                            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                            placeholder=\"Enter your address (optional)\"\n                        />\n                    </div>\n\n                    {/* Footer */}\n                    <div className=\"flex items-center justify-end gap-3 pt-4 border-t border-gray-100\">\n                        <button\n                            type=\"button\"\n                            onClick={onClose}\n                            className=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\n                            disabled={loading}\n                        >\n                            Cancel\n                        </button>\n                        <button\n                            type=\"submit\"\n                            className=\"btn-primary\"\n                            disabled={loading}\n                        >\n                            {loading ? 'Saving...' : 'Save Changes'}\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 497, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/profile/ChangePasswordModal.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport { X, Eye, EyeOff, Check, X as XIcon } from 'lucide-react';\nimport { supabase } from '@/lib/supabase';\n\ninterface ChangePasswordModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onSuccess: () => void;\n}\n\nexport default function ChangePasswordModal({ isOpen, onClose, onSuccess }: ChangePasswordModalProps) {\n    const [formData, setFormData] = useState({\n        currentPassword: '',\n        newPassword: '',\n        confirmPassword: '',\n    });\n    const [showPasswords, setShowPasswords] = useState({\n        current: false,\n        new: false,\n        confirm: false,\n    });\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState('');\n\n    const passwordStrength = {\n        hasMinLength: formData.newPassword.length >= 8,\n        hasUpperCase: /[A-Z]/.test(formData.newPassword),\n        hasLowerCase: /[a-z]/.test(formData.newPassword),\n        hasNumber: /[0-9]/.test(formData.newPassword),\n        hasSpecialChar: /[!@#$%^&*(),.?\":{}|<>]/.test(formData.newPassword),\n    };\n\n    const isPasswordStrong =\n        passwordStrength.hasMinLength &&\n        passwordStrength.hasUpperCase &&\n        passwordStrength.hasLowerCase &&\n        passwordStrength.hasNumber;\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setFormData({\n            ...formData,\n            [e.target.name]: e.target.value,\n        });\n        setError('');\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setLoading(true);\n        setError('');\n\n        // Validation\n        if (formData.newPassword !== formData.confirmPassword) {\n            setError('New passwords do not match');\n            setLoading(false);\n            return;\n        }\n\n        if (!isPasswordStrong) {\n            setError('Password must meet all strength requirements');\n            setLoading(false);\n            return;\n        }\n\n        try {\n            // 1. Re-authenticate with current password to ensure security\n            const { error: signInError } = await supabase.auth.signInWithPassword({\n                email: (await supabase.auth.getUser()).data.user?.email || '',\n                password: formData.currentPassword,\n            });\n\n            if (signInError) {\n                throw new Error('Incorrect current password');\n            }\n\n            // 2. Update password using Supabase auth\n            const { error: updateError } = await supabase.auth.updateUser({\n                password: formData.newPassword,\n            });\n\n            if (updateError) throw updateError;\n\n            onSuccess();\n            onClose();\n\n            // Reset form\n            setFormData({\n                currentPassword: '',\n                newPassword: '',\n                confirmPassword: '',\n            });\n        } catch (err: any) {\n            setError(err.message || 'Failed to change password');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    if (!isOpen) return null;\n\n    return (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-white rounded-2xl shadow-xl max-w-md w-full\">\n                {/* Header */}\n                <div className=\"flex items-center justify-between p-6 border-b border-gray-100\">\n                    <h2 className=\"text-2xl font-bold text-gray-900\">Change Password</h2>\n                    <button\n                        onClick={onClose}\n                        className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n                        disabled={loading}\n                    >\n                        <X className=\"w-5 h-5 text-gray-500\" />\n                    </button>\n                </div>\n\n                {/* Form */}\n                <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n                    {error && (\n                        <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm\">\n                            {error}\n                        </div>\n                    )}\n\n                    {/* Current Password */}\n                    <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                            Current Password\n                        </label>\n                        <div className=\"relative\">\n                            <input\n                                type={showPasswords.current ? 'text' : 'password'}\n                                name=\"currentPassword\"\n                                value={formData.currentPassword}\n                                onChange={handleChange}\n                                required\n                                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent pr-10\"\n                                placeholder=\"Enter current password\"\n                            />\n                            <button\n                                type=\"button\"\n                                onClick={() => setShowPasswords({ ...showPasswords, current: !showPasswords.current })}\n                                className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600\"\n                            >\n                                {showPasswords.current ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\n                            </button>\n                        </div>\n                    </div>\n\n                    {/* New Password */}\n                    <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                            New Password\n                        </label>\n                        <div className=\"relative\">\n                            <input\n                                type={showPasswords.new ? 'text' : 'password'}\n                                name=\"newPassword\"\n                                value={formData.newPassword}\n                                onChange={handleChange}\n                                required\n                                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent pr-10\"\n                                placeholder=\"Enter new password\"\n                            />\n                            <button\n                                type=\"button\"\n                                onClick={() => setShowPasswords({ ...showPasswords, new: !showPasswords.new })}\n                                className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600\"\n                            >\n                                {showPasswords.new ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\n                            </button>\n                        </div>\n\n                        {/* Password Strength Indicator */}\n                        {formData.newPassword && (\n                            <div className=\"mt-3 space-y-2\">\n                                <p className=\"text-xs font-medium text-gray-600\">Password must contain:</p>\n                                <div className=\"space-y-1\">\n                                    {Object.entries({\n                                        'At least 8 characters': passwordStrength.hasMinLength,\n                                        'One uppercase letter': passwordStrength.hasUpperCase,\n                                        'One lowercase letter': passwordStrength.hasLowerCase,\n                                        'One number': passwordStrength.hasNumber,\n                                    }).map(([requirement, met]) => (\n                                        <div key={requirement} className=\"flex items-center gap-2 text-xs\">\n                                            {met ? (\n                                                <Check className=\"w-4 h-4 text-green-500\" />\n                                            ) : (\n                                                <XIcon className=\"w-4 h-4 text-gray-300\" />\n                                            )}\n                                            <span className={met ? 'text-green-700' : 'text-gray-500'}>\n                                                {requirement}\n                                            </span>\n                                        </div>\n                                    ))}\n                                </div>\n                            </div>\n                        )}\n                    </div>\n\n                    {/* Confirm Password */}\n                    <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                            Confirm New Password\n                        </label>\n                        <div className=\"relative\">\n                            <input\n                                type={showPasswords.confirm ? 'text' : 'password'}\n                                name=\"confirmPassword\"\n                                value={formData.confirmPassword}\n                                onChange={handleChange}\n                                required\n                                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent pr-10\"\n                                placeholder=\"Confirm new password\"\n                            />\n                            <button\n                                type=\"button\"\n                                onClick={() => setShowPasswords({ ...showPasswords, confirm: !showPasswords.confirm })}\n                                className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600\"\n                            >\n                                {showPasswords.confirm ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\n                            </button>\n                        </div>\n                        {formData.confirmPassword && formData.newPassword !== formData.confirmPassword && (\n                            <p className=\"mt-1 text-xs text-red-600\">Passwords do not match</p>\n                        )}\n                    </div>\n\n                    {/* Footer */}\n                    <div className=\"flex items-center justify-end gap-3 pt-4 border-t border-gray-100\">\n                        <button\n                            type=\"button\"\n                            onClick={onClose}\n                            className=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\n                            disabled={loading}\n                        >\n                            Cancel\n                        </button>\n                        <button\n                            type=\"submit\"\n                            className=\"btn-primary\"\n                            disabled={loading || !isPasswordStrong}\n                        >\n                            {loading ? 'Changing...' : 'Change Password'}\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 979, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/profile/TwoFactorSetup.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { Shield, AlertCircle, Check } from 'lucide-react';\nimport { supabase } from '@/lib/supabase';\nimport QRCode from 'qrcode';\n\ninterface TwoFactorSetupProps {\n    userId: string;\n}\n\nexport default function TwoFactorSetup({ userId }: TwoFactorSetupProps) {\n    const [isEnabled, setIsEnabled] = useState(false);\n    const [isEnabling, setIsEnabling] = useState(false);\n    const [qrCode, setQrCode] = useState('');\n    const [secret, setSecret] = useState('');\n    const [verificationCode, setVerificationCode] = useState('');\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState('');\n    const [success, setSuccess] = useState('');\n\n    useEffect(() => {\n        checkMFAStatus();\n    }, []);\n\n    const checkMFAStatus = async () => {\n        try {\n            const { data, error } = await supabase.auth.mfa.listFactors();\n            if (error) throw error;\n\n            const totpFactor = data?.totp?.[0];\n            setIsEnabled(totpFactor?.status === 'verified');\n        } catch (err: any) {\n            console.error('Error checking MFA status:', err);\n            setError('Unable to check 2FA status. This feature may not be enabled for your account.');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleEnable2FA = async () => {\n        setIsEnabling(true);\n        setError('');\n        setSuccess('');\n\n        try {\n            // Enroll in TOTP MFA\n            const { data, error } = await supabase.auth.mfa.enroll({\n                factorType: 'totp',\n            });\n\n            if (error) throw error;\n\n            if (data) {\n                setSecret(data.totp.secret);\n\n                // Generate QR code\n                const otpauthUrl = data.totp.uri;\n                const qrCodeDataUrl = await QRCode.toDataURL(otpauthUrl);\n                setQrCode(qrCodeDataUrl);\n            }\n        } catch (err: any) {\n            setError(err.message || 'Failed to enable 2FA. This feature may not be available.');\n            setIsEnabling(false);\n        }\n    };\n\n    const handleVerify = async () => {\n        if (!verificationCode || verificationCode.length !== 6) {\n            setError('Please enter a valid 6-digit code');\n            return;\n        }\n\n        setLoading(true);\n        setError('');\n\n        try {\n            const factors = await supabase.auth.mfa.listFactors();\n            const factorId = factors.data?.totp?.[0]?.id;\n\n            if (!factorId) throw new Error('No factor found');\n\n            const { error } = await supabase.auth.mfa.challengeAndVerify({\n                factorId,\n                code: verificationCode,\n            });\n\n            if (error) throw error;\n\n            setSuccess('2FA enabled successfully!');\n            setIsEnabled(true);\n            setIsEnabling(false);\n            setQrCode('');\n            setVerificationCode('');\n        } catch (err: any) {\n            setError(err.message || 'Invalid verification code');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleDisable2FA = async () => {\n        if (!confirm('Are you sure you want to disable two-factor authentication?')) {\n            return;\n        }\n\n        setLoading(true);\n        setError('');\n\n        try {\n            const factors = await supabase.auth.mfa.listFactors();\n            const factorId = factors.data?.totp?.[0]?.id;\n\n            if (!factorId) throw new Error('No factor found');\n\n            const { error } = await supabase.auth.mfa.unenroll({\n                factorId,\n            });\n\n            if (error) throw error;\n\n            setSuccess('2FA disabled successfully');\n            setIsEnabled(false);\n        } catch (err: any) {\n            setError(err.message || 'Failed to disable 2FA');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    if (loading && !isEnabling) {\n        return (\n            <div className=\"flex items-center justify-center py-8\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600\"></div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"space-y-6\">\n            <div className=\"flex items-start gap-4\">\n                <div className=\"p-3 bg-primary-50 rounded-lg\">\n                    <Shield className=\"w-6 h-6 text-primary-600\" />\n                </div>\n                <div className=\"flex-1\">\n                    <h3 className=\"text-lg font-semibold text-gray-900\">Two-Factor Authentication</h3>\n                    <p className=\"text-sm text-gray-600 mt-1\">\n                        Add an extra layer of security to your account by requiring a code from your authenticator app when signing in.\n                    </p>\n                </div>\n            </div>\n\n            {error && (\n                <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3\">\n                    <AlertCircle className=\"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5\" />\n                    <p className=\"text-sm text-red-700\">{error}</p>\n                </div>\n            )}\n\n            {success && (\n                <div className=\"bg-green-50 border border-green-200 rounded-lg p-4 flex items-start gap-3\">\n                    <Check className=\"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5\" />\n                    <p className=\"text-sm text-green-700\">{success}</p>\n                </div>\n            )}\n\n            {!isEnabled && !isEnabling && (\n                <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-6\">\n                    <p className=\"text-gray-700 mb-4\">\n                        Two-factor authentication is currently <strong>disabled</strong>. Enable it to secure your account.\n                    </p>\n                    <button\n                        onClick={handleEnable2FA}\n                        className=\"btn-primary\"\n                    >\n                        Enable 2FA\n                    </button>\n                </div>\n            )}\n\n            {isEnabling && qrCode && (\n                <div className=\"bg-white border border-gray-200 rounded-lg p-6 space-y-4\">\n                    <div className=\"text-center\">\n                        <p className=\"text-sm font-medium text-gray-700 mb-4\">\n                            Scan this QR code with your authenticator app:\n                        </p>\n                        <img src={qrCode} alt=\"2FA QR Code\" className=\"mx-auto w-48 h-48\" />\n                        <p className=\"text-xs text-gray-500 mt-2\">\n                            Or enter this code manually: <code className=\"bg-gray-100 px-2 py-1 rounded\">{secret}</code>\n                        </p>\n                    </div>\n\n                    <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                            Enter Verification Code\n                        </label>\n                        <input\n                            type=\"text\"\n                            value={verificationCode}\n                            onChange={(e) => setVerificationCode(e.target.value.replace(/\\D/g, '').slice(0, 6))}\n                            placeholder=\"000000\"\n                            maxLength={6}\n                            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-center text-2xl tracking-widest\"\n                        />\n                    </div>\n\n                    <div className=\"flex gap-3\">\n                        <button\n                            onClick={() => {\n                                setIsEnabling(false);\n                                setQrCode('');\n                                setVerificationCode('');\n                                setError('');\n                            }}\n                            className=\"flex-1 px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\n                        >\n                            Cancel\n                        </button>\n                        <button\n                            onClick={handleVerify}\n                            disabled={verificationCode.length !== 6 || loading}\n                            className=\"flex-1 btn-primary\"\n                        >\n                            {loading ? 'Verifying...' : 'Verify & Enable'}\n                        </button>\n                    </div>\n                </div>\n            )}\n\n            {isEnabled && (\n                <div className=\"bg-green-50 border border-green-200 rounded-lg p-6\">\n                    <div className=\"flex items-center gap-3 mb-4\">\n                        <Check className=\"w-5 h-5 text-green-600\" />\n                        <p className=\"text-green-700 font-medium\">\n                            Two-factor authentication is currently <strong>enabled</strong>\n                        </p>\n                    </div>\n                    <button\n                        onClick={handleDisable2FA}\n                        className=\"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\n                        disabled={loading}\n                    >\n                        {loading ? 'Disabling...' : 'Disable 2FA'}\n                    </button>\n                </div>\n            )}\n\n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                <p className=\"text-sm text-blue-800\">\n                    <strong>Recommended apps:</strong> Google Authenticator, Authy, Microsoft Authenticator\n                </p>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AACA;AACA;AALA;;;;;;AAWe,SAAS,eAAe,EAAE,MAAM,EAAuB;IAClE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,kOAAQ,EAAC;IAC3C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,kOAAQ,EAAC;IAC7C,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,kOAAQ,EAAC;IACrC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,kOAAQ,EAAC;IACrC,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,kOAAQ,EAAC;IACzD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,kOAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,kOAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,kOAAQ,EAAC;IAEvC,IAAA,mOAAS,EAAC;QACN;IACJ,GAAG,EAAE;IAEL,MAAM,iBAAiB;QACnB,IAAI;YACA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,4IAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,WAAW;YAC3D,IAAI,OAAO,MAAM;YAEjB,MAAM,aAAa,MAAM,MAAM,CAAC,EAAE;YAClC,aAAa,YAAY,WAAW;QACxC,EAAE,OAAO,KAAU;YACf,QAAQ,KAAK,CAAC,8BAA8B;YAC5C,SAAS;QACb,SAAU;YACN,WAAW;QACf;IACJ;IAEA,MAAM,kBAAkB;QACpB,cAAc;QACd,SAAS;QACT,WAAW;QAEX,IAAI;YACA,qBAAqB;YACrB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,4IAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC;gBACnD,YAAY;YAChB;YAEA,IAAI,OAAO,MAAM;YAEjB,IAAI,MAAM;gBACN,UAAU,KAAK,IAAI,CAAC,MAAM;gBAE1B,mBAAmB;gBACnB,MAAM,aAAa,KAAK,IAAI,CAAC,GAAG;gBAChC,MAAM,gBAAgB,MAAM,kKAAM,CAAC,SAAS,CAAC;gBAC7C,UAAU;YACd;QACJ,EAAE,OAAO,KAAU;YACf,SAAS,IAAI,OAAO,IAAI;YACxB,cAAc;QAClB;IACJ;IAEA,MAAM,eAAe;QACjB,IAAI,CAAC,oBAAoB,iBAAiB,MAAM,KAAK,GAAG;YACpD,SAAS;YACT;QACJ;QAEA,WAAW;QACX,SAAS;QAET,IAAI;YACA,MAAM,UAAU,MAAM,4IAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,WAAW;YACnD,MAAM,WAAW,QAAQ,IAAI,EAAE,MAAM,CAAC,EAAE,EAAE;YAE1C,IAAI,CAAC,UAAU,MAAM,IAAI,MAAM;YAE/B,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,4IAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,kBAAkB,CAAC;gBACzD;gBACA,MAAM;YACV;YAEA,IAAI,OAAO,MAAM;YAEjB,WAAW;YACX,aAAa;YACb,cAAc;YACd,UAAU;YACV,oBAAoB;QACxB,EAAE,OAAO,KAAU;YACf,SAAS,IAAI,OAAO,IAAI;QAC5B,SAAU;YACN,WAAW;QACf;IACJ;IAEA,MAAM,mBAAmB;QACrB,IAAI,CAAC,QAAQ,gEAAgE;YACzE;QACJ;QAEA,WAAW;QACX,SAAS;QAET,IAAI;YACA,MAAM,UAAU,MAAM,4IAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,WAAW;YACnD,MAAM,WAAW,QAAQ,IAAI,EAAE,MAAM,CAAC,EAAE,EAAE;YAE1C,IAAI,CAAC,UAAU,MAAM,IAAI,MAAM;YAE/B,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,4IAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC;gBAC/C;YACJ;YAEA,IAAI,OAAO,MAAM;YAEjB,WAAW;YACX,aAAa;QACjB,EAAE,OAAO,KAAU;YACf,SAAS,IAAI,OAAO,IAAI;QAC5B,SAAU;YACN,WAAW;QACf;IACJ;IAEA,IAAI,WAAW,CAAC,YAAY;QACxB,qBACI,+PAAC;YAAI,WAAU;sBACX,cAAA,+PAAC;gBAAI,WAAU;;;;;;;;;;;IAG3B;IAEA,qBACI,+PAAC;QAAI,WAAU;;0BACX,+PAAC;gBAAI,WAAU;;kCACX,+PAAC;wBAAI,WAAU;kCACX,cAAA,+PAAC,iOAAM;4BAAC,WAAU;;;;;;;;;;;kCAEtB,+PAAC;wBAAI,WAAU;;0CACX,+PAAC;gCAAG,WAAU;0CAAsC;;;;;;0CACpD,+PAAC;gCAAE,WAAU;0CAA6B;;;;;;;;;;;;;;;;;;YAMjD,uBACG,+PAAC;gBAAI,WAAU;;kCACX,+PAAC,oPAAW;wBAAC,WAAU;;;;;;kCACvB,+PAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;;;YAI5C,yBACG,+PAAC;gBAAI,WAAU;;kCACX,+PAAC,8NAAK;wBAAC,WAAU;;;;;;kCACjB,+PAAC;wBAAE,WAAU;kCAA0B;;;;;;;;;;;;YAI9C,CAAC,aAAa,CAAC,4BACZ,+PAAC;gBAAI,WAAU;;kCACX,+PAAC;wBAAE,WAAU;;4BAAqB;0CACS,+PAAC;0CAAO;;;;;;4BAAiB;;;;;;;kCAEpE,+PAAC;wBACG,SAAS;wBACT,WAAU;kCACb;;;;;;;;;;;;YAMR,cAAc,wBACX,+PAAC;gBAAI,WAAU;;kCACX,+PAAC;wBAAI,WAAU;;0CACX,+PAAC;gCAAE,WAAU;0CAAyC;;;;;;0CAGtD,+PAAC;gCAAI,KAAK;gCAAQ,KAAI;gCAAc,WAAU;;;;;;0CAC9C,+PAAC;gCAAE,WAAU;;oCAA6B;kDACT,+PAAC;wCAAK,WAAU;kDAAiC;;;;;;;;;;;;;;;;;;kCAItF,+PAAC;;0CACG,+PAAC;gCAAM,WAAU;0CAA+C;;;;;;0CAGhE,+PAAC;gCACG,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,oBAAoB,EAAE,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,IAAI,KAAK,CAAC,GAAG;gCAChF,aAAY;gCACZ,WAAW;gCACX,WAAU;;;;;;;;;;;;kCAIlB,+PAAC;wBAAI,WAAU;;0CACX,+PAAC;gCACG,SAAS;oCACL,cAAc;oCACd,UAAU;oCACV,oBAAoB;oCACpB,SAAS;gCACb;gCACA,WAAU;0CACb;;;;;;0CAGD,+PAAC;gCACG,SAAS;gCACT,UAAU,iBAAiB,MAAM,KAAK,KAAK;gCAC3C,WAAU;0CAET,UAAU,iBAAiB;;;;;;;;;;;;;;;;;;YAM3C,2BACG,+PAAC;gBAAI,WAAU;;kCACX,+PAAC;wBAAI,WAAU;;0CACX,+PAAC,8NAAK;gCAAC,WAAU;;;;;;0CACjB,+PAAC;gCAAE,WAAU;;oCAA6B;kDACC,+PAAC;kDAAO;;;;;;;;;;;;;;;;;;kCAGvD,+PAAC;wBACG,SAAS;wBACT,WAAU;wBACV,UAAU;kCAET,UAAU,iBAAiB;;;;;;;;;;;;0BAKxC,+PAAC;gBAAI,WAAU;0BACX,cAAA,+PAAC;oBAAE,WAAU;;sCACT,+PAAC;sCAAO;;;;;;wBAA0B;;;;;;;;;;;;;;;;;;AAKtD"}},
    {"offset": {"line": 1444, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/app/%28customer%29/profile/page.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { getCurrentUser } from '@/lib/auth';\nimport { User, UserPreferences } from '@/types';\nimport { getUserPreferences, updateUserPreferences } from '@/lib/db';\n\nimport { User as UserIcon, Mail, Phone, MapPin, Shield, Lock, Bell, Edit2 } from 'lucide-react';\nimport EditProfileModal from '@/components/profile/EditProfileModal';\nimport ChangePasswordModal from '@/components/profile/ChangePasswordModal';\nimport TwoFactorSetup from '@/components/profile/TwoFactorSetup';\n\nexport default function ProfilePage() {\n    const [user, setUser] = useState<User | null>(null);\n    const [preferences, setPreferences] = useState<UserPreferences | null>(null);\n    const [loading, setLoading] = useState(true);\n    const [activeTab, setActiveTab] = useState('personal');\n\n    // Modals state\n    const [showEditModal, setShowEditModal] = useState(false);\n    const [showPasswordModal, setShowPasswordModal] = useState(false);\n\n    useEffect(() => {\n        const loadUser = async () => {\n            try {\n                const currentUser = await getCurrentUser();\n                setUser(currentUser);\n\n                // Load preferences independently so it doesn't block profile loading\n                if (currentUser) {\n                    try {\n                        const userPrefs = await getUserPreferences(currentUser.id);\n                        setPreferences(userPrefs);\n                    } catch (prefError) {\n                        console.error('Error loading preferences:', prefError);\n                        // Set defaults if loading fails (e.g. table doesn't exist yet)\n                        setPreferences({\n                            id: 'temp-id', // Temporary ID until saved\n                            user_id: currentUser.id,\n                            email_notifications: true,\n                            sms_notifications: true,\n                            whatsapp_notifications: true,\n                            marketing_emails: false,\n                            policy_expiry_alerts: true,\n                            claim_updates: true,\n                            created_at: new Date(),\n                            updated_at: new Date()\n                        });\n                    }\n                }\n            } catch (error) {\n                console.error('Error loading user:', error);\n            } finally {\n                setLoading(false);\n            }\n        };\n        loadUser();\n    }, []);\n\n    const handlePreferenceChange = async (key: keyof UserPreferences, value: boolean) => {\n        if (!user || !preferences) return;\n\n        try {\n            const updated = await updateUserPreferences(user.id, { [key]: value });\n            setPreferences(updated);\n        } catch (error) {\n            console.error('Error updating preference:', error);\n        }\n    };\n\n    const handleProfileUpdate = (updatedUser: User) => {\n        setUser(updatedUser);\n    };\n\n    if (loading) {\n        return <div className=\"p-8 text-center\">Loading profile...</div>;\n    }\n\n    if (!user) {\n        return <div className=\"p-8 text-center\">Please log in to view your profile.</div>;\n    }\n\n    const tabs = [\n        { id: 'personal', label: 'Personal Info', icon: UserIcon },\n        { id: 'security', label: 'Security', icon: Lock },\n        { id: 'preferences', label: 'Preferences', icon: Bell },\n    ];\n\n    return (\n        <div className=\"max-w-4xl mx-auto space-y-6\">\n            <h1 className=\"text-2xl font-bold text-gray-900\">My Profile</h1>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n                {/* Sidebar Navigation */}\n                <div className=\"md:col-span-1 space-y-2\">\n                    {tabs.map((tab) => (\n                        <button\n                            key={tab.id}\n                            onClick={() => setActiveTab(tab.id)}\n                            className={`w-full flex items-center p-3 rounded-xl transition-colors ${activeTab === tab.id\n                                ? 'bg-primary-50 text-primary-700 font-medium'\n                                : 'text-gray-600 hover:bg-gray-50'\n                                }`}\n                        >\n                            <tab.icon className={`w-5 h-5 mr-3 ${activeTab === tab.id ? 'text-primary-600' : 'text-gray-400'}`} />\n                            {tab.label}\n                        </button>\n                    ))}\n                </div>\n\n                {/* Content Area */}\n                <div className=\"md:col-span-3\">\n                    <div className=\"bg-white rounded-2xl shadow-sm border border-gray-100 p-6\">\n                        {activeTab === 'personal' && (\n                            <div className=\"space-y-6\">\n                                <div className=\"flex items-center justify-between mb-6\">\n                                    <div className=\"flex items-center gap-4\">\n                                        <div className=\"w-20 h-20 rounded-full bg-primary-100 flex items-center justify-center text-primary-600 text-2xl font-bold\">\n                                            {user.name.charAt(0).toUpperCase()}\n                                        </div>\n                                        <div>\n                                            <h2 className=\"text-xl font-bold text-gray-900\">{user.name}</h2>\n                                            <p className=\"text-gray-500\">{user.email}</p>\n                                            <span className=\"inline-block mt-2 px-2 py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded-md capitalize\">\n                                                {user.role}\n                                            </span>\n                                        </div>\n                                    </div>\n                                    <button\n                                        onClick={() => setShowEditModal(true)}\n                                        className=\"btn-secondary flex items-center gap-2\"\n                                    >\n                                        <Edit2 className=\"w-4 h-4\" />\n                                        Edit Profile\n                                    </button>\n                                </div>\n\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                                    <div>\n                                        <label className=\"block text-sm font-medium text-gray-500 mb-1\">Email</label>\n                                        <div className=\"flex items-center gap-2 text-gray-900\">\n                                            <Mail className=\"w-4 h-4 text-gray-400\" />\n                                            <span>{user.email}</span>\n                                        </div>\n                                    </div>\n\n                                    <div>\n                                        <label className=\"block text-sm font-medium text-gray-500 mb-1\">Phone</label>\n                                        <div className=\"flex items-center gap-2 text-gray-900\">\n                                            <Phone className=\"w-4 h-4 text-gray-400\" />\n                                            <span>{user.mobile || 'Not provided'}</span>\n                                        </div>\n                                    </div>\n\n                                    <div>\n                                        <label className=\"block text-sm font-medium text-gray-500 mb-1\">Company</label>\n                                        <span className=\"text-gray-900\">{user.company_name || 'Not provided'}</span>\n                                    </div>\n\n                                    <div>\n                                        <label className=\"block text-sm font-medium text-gray-500 mb-1\">Customer ID</label>\n                                        <span className=\"text-gray-900 font-mono text-sm\">{user.customer_id || 'N/A'}</span>\n                                    </div>\n                                </div>\n\n                                {user.address && (\n                                    <div>\n                                        <label className=\"block text-sm font-medium text-gray-500 mb-1\">Address</label>\n                                        <div className=\"flex items-start gap-2 text-gray-900\">\n                                            <MapPin className=\"w-4 h-4 text-gray-400 mt-1\" />\n                                            <span>{user.address}</span>\n                                        </div>\n                                    </div>\n                                )}\n                            </div>\n                        )}\n\n                        {activeTab === 'security' && (\n                            <div className=\"space-y-6\">\n                                <div>\n                                    <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Password</h3>\n                                    <p className=\"text-sm text-gray-600 mb-4\">\n                                        Keep your account secure by using a strong password.\n                                    </p>\n                                    <button\n                                        onClick={() => setShowPasswordModal(true)}\n                                        className=\"btn-secondary\"\n                                    >\n                                        Change Password\n                                    </button>\n                                </div>\n\n                                <div className=\"border-t border-gray-200 pt-6\">\n                                    <TwoFactorSetup userId={user.id} />\n                                </div>\n                            </div>\n                        )}\n\n                        {activeTab === 'preferences' && preferences && (\n                            <div className=\"space-y-6\">\n                                <h3 className=\"text-lg font-bold text-gray-900\">Notification Preferences</h3>\n                                <div className=\"space-y-4\">\n                                    <div className=\"flex items-center justify-between p-4 border border-gray-100 rounded-xl\">\n                                        <div className=\"flex items-center gap-3\">\n                                            <Mail className=\"w-5 h-5 text-gray-400\" />\n                                            <div>\n                                                <p className=\"text-sm font-medium text-gray-900\">Email Notifications</p>\n                                                <p className=\"text-xs text-gray-500\">Receive policy updates via email</p>\n                                            </div>\n                                        </div>\n                                        <label className=\"relative inline-flex items-center cursor-pointer\">\n                                            <input\n                                                type=\"checkbox\"\n                                                className=\"sr-only peer\"\n                                                checked={preferences.email_notifications}\n                                                onChange={(e) => handlePreferenceChange('email_notifications', e.target.checked)}\n                                            />\n                                            <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600\"></div>\n                                        </label>\n                                    </div>\n\n                                    <div className=\"flex items-center justify-between p-4 border border-gray-100 rounded-xl\">\n                                        <div className=\"flex items-center gap-3\">\n                                            <Phone className=\"w-5 h-5 text-gray-400\" />\n                                            <div>\n                                                <p className=\"text-sm font-medium text-gray-900\">SMS Notifications</p>\n                                                <p className=\"text-xs text-gray-500\">Receive policy updates via SMS</p>\n                                            </div>\n                                        </div>\n                                        <label className=\"relative inline-flex items-center cursor-pointer\">\n                                            <input\n                                                type=\"checkbox\"\n                                                className=\"sr-only peer\"\n                                                checked={preferences.sms_notifications}\n                                                onChange={(e) => handlePreferenceChange('sms_notifications', e.target.checked)}\n                                            />\n                                            <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600\"></div>\n                                        </label>\n                                    </div>\n\n                                    <div className=\"flex items-center justify-between p-4 border border-gray-100 rounded-xl\">\n                                        <div className=\"flex items-center gap-3\">\n                                            <Bell className=\"w-5 h-5 text-gray-400\" />\n                                            <div>\n                                                <p className=\"text-sm font-medium text-gray-900\">Policy Expiry Alerts</p>\n                                                <p className=\"text-xs text-gray-500\">Get notified when policies are expiring</p>\n                                            </div>\n                                        </div>\n                                        <label className=\"relative inline-flex items-center cursor-pointer\">\n                                            <input\n                                                type=\"checkbox\"\n                                                className=\"sr-only peer\"\n                                                checked={preferences.policy_expiry_alerts}\n                                                onChange={(e) => handlePreferenceChange('policy_expiry_alerts', e.target.checked)}\n                                            />\n                                            <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600\"></div>\n                                        </label>\n                                    </div>\n\n                                    <div className=\"flex items-center justify-between p-4 border border-gray-100 rounded-xl\">\n                                        <div className=\"flex items-center gap-3\">\n                                            <Shield className=\"w-5 h-5 text-gray-400\" />\n                                            <div>\n                                                <p className=\"text-sm font-medium text-gray-900\">Claim Updates</p>\n                                                <p className=\"text-xs text-gray-500\">Receive updates on your claims status</p>\n                                            </div>\n                                        </div>\n                                        <label className=\"relative inline-flex items-center cursor-pointer\">\n                                            <input\n                                                type=\"checkbox\"\n                                                className=\"sr-only peer\"\n                                                checked={preferences.claim_updates}\n                                                onChange={(e) => handlePreferenceChange('claim_updates', e.target.checked)}\n                                            />\n                                            <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600\"></div>\n                                        </label>\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n                    </div>\n                </div>\n            </div>\n\n            {/* Modals */}\n            <EditProfileModal\n                isOpen={showEditModal}\n                onClose={() => setShowEditModal(false)}\n                user={user}\n                onSuccess={handleProfileUpdate}\n            />\n\n            <ChangePasswordModal\n                isOpen={showPasswordModal}\n                onClose={() => setShowPasswordModal(false)}\n                onSuccess={() => {\n                    alert('Password changed successfully! Please log in again.');\n                }}\n            />\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}