{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/dashboard/ClaimsOverview.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport Link from 'next/link';\nimport { AlertCircle, CheckCircle, XCircle, ArrowRight } from 'lucide-react';\n\ninterface ClaimsOverviewProps {\n    activeCount: number;\n    settledCount: number;\n    rejectedCount: number;\n}\n\nexport default function ClaimsOverview({ activeCount, settledCount, rejectedCount }: ClaimsOverviewProps) {\n    const total = activeCount + settledCount + rejectedCount;\n    const settledPercentage = total > 0 ? Math.round((settledCount / total) * 100) : 0;\n\n    return (\n        <div className=\"bg-white rounded-2xl p-4 shadow-soft border border-gray-100 h-full flex flex-col justify-between\">\n            <div className=\"flex items-center justify-between mb-2\">\n                <h3 className=\"text-gray-900 font-bold text-sm\">Claims Overview</h3>\n                <Link href=\"/claims\" className=\"text-primary-600 text-xs font-bold hover:underline flex items-center\">\n                    View All <ArrowRight className=\"w-3 h-3 ml-1\" />\n                </Link>\n            </div>\n\n            <div className=\"grid grid-cols-3 gap-2\">\n                <div className=\"bg-orange-50 rounded-xl p-3 text-center border border-orange-100\">\n                    <div className=\"w-6 h-6 mx-auto bg-white rounded-full flex items-center justify-center mb-1 shadow-sm text-orange-500\">\n                        <AlertCircle className=\"w-3 h-3\" />\n                    </div>\n                    <p className=\"text-xl font-bold text-gray-900 leading-none mb-1\">{activeCount}</p>\n                    <p className=\"text-[9px] font-bold text-orange-600 uppercase tracking-wide\">In Progress</p>\n                </div>\n\n                <div className=\"bg-green-50 rounded-xl p-3 text-center border border-green-100\">\n                    <div className=\"w-6 h-6 mx-auto bg-white rounded-full flex items-center justify-center mb-1 shadow-sm text-green-500\">\n                        <CheckCircle className=\"w-3 h-3\" />\n                    </div>\n                    <p className=\"text-xl font-bold text-gray-900 leading-none mb-1\">{settledCount}</p>\n                    <p className=\"text-[9px] font-bold text-green-600 uppercase tracking-wide\">Settled</p>\n                </div>\n\n                <div className=\"bg-red-50 rounded-xl p-3 text-center border border-red-100\">\n                    <div className=\"w-6 h-6 mx-auto bg-white rounded-full flex items-center justify-center mb-1 shadow-sm text-red-500\">\n                        <XCircle className=\"w-3 h-3\" />\n                    </div>\n                    <p className=\"text-xl font-bold text-gray-900 leading-none mb-1\">{rejectedCount}</p>\n                    <p className=\"text-[9px] font-bold text-red-600 uppercase tracking-wide\">Rejected</p>\n                </div>\n            </div>\n\n            <div className=\"mt-2 border-t border-dashed border-gray-200 pt-3 text-center\">\n                <p className=\"text-xs text-gray-400 font-medium mb-2\">No active claims</p>\n                <Link href=\"/claims?action=new\" className=\"block w-full py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-xl text-xs font-bold shadow-lg shadow-primary-600/20 transition-all active:scale-95\">\n                    Register a New Claim\n                </Link>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAAA;AAAA;AAAA;AAJA;;;;AAYe,SAAS,eAAe,EAAE,WAAW,EAAE,YAAY,EAAE,aAAa,EAAuB;IACpG,MAAM,QAAQ,cAAc,eAAe;IAC3C,MAAM,oBAAoB,QAAQ,IAAI,KAAK,KAAK,CAAC,AAAC,eAAe,QAAS,OAAO;IAEjF,qBACI,+PAAC;QAAI,WAAU;;0BACX,+PAAC;gBAAI,WAAU;;kCACX,+PAAC;wBAAG,WAAU;kCAAkC;;;;;;kCAChD,+PAAC,wLAAI;wBAAC,MAAK;wBAAU,WAAU;;4BAAuE;0CACzF,+PAAC,iPAAU;gCAAC,WAAU;;;;;;;;;;;;;;;;;;0BAIvC,+PAAC;gBAAI,WAAU;;kCACX,+PAAC;wBAAI,WAAU;;0CACX,+PAAC;gCAAI,WAAU;0CACX,cAAA,+PAAC,oPAAW;oCAAC,WAAU;;;;;;;;;;;0CAE3B,+PAAC;gCAAE,WAAU;0CAAqD;;;;;;0CAClE,+PAAC;gCAAE,WAAU;0CAA+D;;;;;;;;;;;;kCAGhF,+PAAC;wBAAI,WAAU;;0CACX,+PAAC;gCAAI,WAAU;0CACX,cAAA,+PAAC,2PAAW;oCAAC,WAAU;;;;;;;;;;;0CAE3B,+PAAC;gCAAE,WAAU;0CAAqD;;;;;;0CAClE,+PAAC;gCAAE,WAAU;0CAA8D;;;;;;;;;;;;kCAG/E,+PAAC;wBAAI,WAAU;;0CACX,+PAAC;gCAAI,WAAU;0CACX,cAAA,+PAAC,wOAAO;oCAAC,WAAU;;;;;;;;;;;0CAEvB,+PAAC;gCAAE,WAAU;0CAAqD;;;;;;0CAClE,+PAAC;gCAAE,WAAU;0CAA4D;;;;;;;;;;;;;;;;;;0BAIjF,+PAAC;gBAAI,WAAU;;kCACX,+PAAC;wBAAE,WAAU;kCAAyC;;;;;;kCACtD,+PAAC,wLAAI;wBAAC,MAAK;wBAAqB,WAAU;kCAA+J;;;;;;;;;;;;;;;;;;AAMzN"}},
    {"offset": {"line": 222, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/dashboard/AdvertisingBanner.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { ArrowRight, Stethoscope } from 'lucide-react';\n\nexport default function AdvertisingBanner() {\n    return (\n        <div className=\"bg-gradient-to-r from-blue-600 to-blue-800 rounded-3xl p-8 text-white shadow-lg shadow-blue-500/25 relative overflow-hidden transition-transform hover:-translate-y-1 h-full flex flex-col justify-center\" style={{ width: 'calc(100% + 96px)', maxWidth: '100%' }}>\n            <div className=\"relative z-10\">\n                <div className=\"flex items-center gap-2 mb-4\">\n                    <div className=\"p-2 bg-white/20 rounded-lg backdrop-blur-sm\">\n                        <Stethoscope className=\"w-4 h-4 text-white\" />\n                    </div>\n                    <span className=\"text-xs font-bold uppercase tracking-wider text-blue-100 bg-white/10 px-2 py-1 rounded-full\">Partner Offer</span>\n                </div>\n\n                <h3 className=\"font-bold text-2xl mb-3 leading-tight\">\n                    Your imaging exams have never been so uncomplicated.\n                </h3>\n\n                <div className=\"mt-6\">\n                    <button className=\"bg-white text-blue-700 px-5 py-2.5 rounded-xl text-sm font-bold flex items-center hover:bg-blue-50 transition-colors shadow-sm\">\n                        Book Now <ArrowRight className=\"w-4 h-4 ml-2\" />\n                    </button>\n                </div>\n            </div>\n\n            {/* Decorative Elements */}\n            <div className=\"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -mr-16 -mt-16\"></div>\n            <div className=\"absolute bottom-0 left-0 w-48 h-48 bg-blue-500/30 rounded-full blur-2xl -ml-12 -mb-12\"></div>\n\n            {/* Abstract lines/dots similar to reference */}\n            <svg className=\"absolute right-0 bottom-0 opacity-20\" width=\"200\" height=\"200\" viewBox=\"0 0 200 200\">\n                <path d=\"M0 200 C 50 200 100 150 100 100 C 100 50 150 0 200 0\" stroke=\"white\" strokeWidth=\"2\" fill=\"none\" strokeDasharray=\"5,5\" />\n            </svg>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AAHA;;;AAKe,SAAS;IACpB,qBACI,+PAAC;QAAI,WAAU;QAA4M,OAAO;YAAE,OAAO;YAAqB,UAAU;QAAO;;0BAC7Q,+PAAC;gBAAI,WAAU;;kCACX,+PAAC;wBAAI,WAAU;;0CACX,+PAAC;gCAAI,WAAU;0CACX,cAAA,+PAAC,gPAAW;oCAAC,WAAU;;;;;;;;;;;0CAE3B,+PAAC;gCAAK,WAAU;0CAA8F;;;;;;;;;;;;kCAGlH,+PAAC;wBAAG,WAAU;kCAAwC;;;;;;kCAItD,+PAAC;wBAAI,WAAU;kCACX,cAAA,+PAAC;4BAAO,WAAU;;gCAAiI;8CACtI,+PAAC,iPAAU;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;0BAM3C,+PAAC;gBAAI,WAAU;;;;;;0BACf,+PAAC;gBAAI,WAAU;;;;;;0BAGf,+PAAC;gBAAI,WAAU;gBAAuC,OAAM;gBAAM,QAAO;gBAAM,SAAQ;0BACnF,cAAA,+PAAC;oBAAK,GAAE;oBAAuD,QAAO;oBAAQ,aAAY;oBAAI,MAAK;oBAAO,iBAAgB;;;;;;;;;;;;;;;;;AAI1I"}},
    {"offset": {"line": 358, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/dashboard/AnalyticsDonutChart.tsx"],"sourcesContent":["'use client';\n\nimport { PieChart, Pie, Cell, ResponsiveContainer, Tooltip } from 'recharts';\nimport { PortfolioStats } from '@/types';\nimport { formatCurrency } from '@/lib/utils';\n\ninterface AnalyticsDonutChartProps {\n    data: PortfolioStats;\n}\n\nconst COLORS = {\n    motor: '#3B82F6',      // Blue\n    health: '#8b5cf6',        // Purple\n    gpa: '#06B6D4',        // Cyan\n    fire: '#F59E0B',       // Orange\n    others: '#10B981',     // Green\n};\n\nconst LABELS = {\n    motor: 'Motor',\n    health: 'Health',\n    gpa: 'GPA',\n    fire: 'Fire',\n    others: 'Others',\n};\n\nexport default function AnalyticsDonutChart({ data }: AnalyticsDonutChartProps) {\n    const chartData = [\n        { name: LABELS.motor, value: data.motor, color: COLORS.motor },\n        { name: LABELS.health, value: data.health, color: COLORS.health },\n        { name: LABELS.gpa, value: data.gpa, color: COLORS.gpa },\n        { name: LABELS.fire, value: data.fire, color: COLORS.fire },\n        { name: LABELS.others, value: data.others, color: COLORS.others },\n    ].filter((item) => item.value > 0);\n\n    const totalValue = chartData.reduce((acc, item) => acc + item.value, 0);\n\n    if (chartData.length === 0) {\n        return (\n            <div className=\"w-full h-full bg-white rounded-2xl p-6 shadow-soft border border-gray-100 flex flex-col items-center justify-center text-center\">\n                <div className=\"w-12 h-12 bg-gray-50 rounded-full flex items-center justify-center mb-3\">\n                    <span className=\"text-xl\">üìä</span>\n                </div>\n                <p className=\"text-sm text-gray-500\">No data available</p>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"w-full h-full bg-white rounded-2xl p-6 shadow-soft border border-gray-100 flex flex-col\">\n            <h3 className=\"text-gray-900 font-bold text-base mb-6\">Source of Premium</h3>\n\n            <div className=\"flex-1 relative min-h-[200px]\">\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                    <PieChart>\n                        <Pie\n                            data={chartData}\n                            cx=\"50%\"\n                            cy=\"50%\"\n                            innerRadius={60}\n                            outerRadius={80}\n                            paddingAngle={5}\n                            dataKey=\"value\"\n                            cornerRadius={6}\n                            stroke=\"none\"\n                        >\n                            {chartData.map((entry, index) => (\n                                <Cell key={`cell-${index}`} fill={entry.color} />\n                            ))}\n                        </Pie>\n                        <Tooltip\n                            formatter={(value: number) => formatCurrency(value)}\n                            contentStyle={{\n                                backgroundColor: 'white',\n                                border: 'none',\n                                borderRadius: '8px',\n                                padding: '8px 12px',\n                                boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',\n                            }}\n                            itemStyle={{ color: '#1F293B', fontSize: '12px', fontWeight: 600 }}\n                        />\n                    </PieChart>\n                </ResponsiveContainer>\n\n                {/* Center Text */}\n                <div className=\"absolute inset-0 flex flex-col items-center justify-center pointer-events-none\">\n                    <span className=\"text-2xl font-bold text-gray-900\">100%</span>\n                    <span className=\"text-[10px] font-medium text-gray-400 uppercase tracking-wider\">Distribution</span>\n                </div>\n            </div>\n\n            {/* Custom Legend */}\n            <div className=\"mt-6 space-y-3\">\n                {chartData.map((item, index) => (\n                    <div key={index} className=\"flex items-center justify-between text-sm\">\n                        <div className=\"flex items-center gap-2\">\n                            <span className=\"w-2.5 h-2.5 rounded-full\" style={{ backgroundColor: item.color }}></span>\n                            <span className=\"text-gray-600 font-medium\">{item.name}</span>\n                        </div>\n                        <span className=\"font-bold text-gray-900\">\n                            {((item.value / totalValue) * 100).toFixed(0)}%\n                        </span>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAEA;AAJA;;;;AAUA,MAAM,SAAS;IACX,OAAO;IACP,QAAQ;IACR,KAAK;IACL,MAAM;IACN,QAAQ;AACZ;AAEA,MAAM,SAAS;IACX,OAAO;IACP,QAAQ;IACR,KAAK;IACL,MAAM;IACN,QAAQ;AACZ;AAEe,SAAS,oBAAoB,EAAE,IAAI,EAA4B;IAC1E,MAAM,YAAY;QACd;YAAE,MAAM,OAAO,KAAK;YAAE,OAAO,KAAK,KAAK;YAAE,OAAO,OAAO,KAAK;QAAC;QAC7D;YAAE,MAAM,OAAO,MAAM;YAAE,OAAO,KAAK,MAAM;YAAE,OAAO,OAAO,MAAM;QAAC;QAChE;YAAE,MAAM,OAAO,GAAG;YAAE,OAAO,KAAK,GAAG;YAAE,OAAO,OAAO,GAAG;QAAC;QACvD;YAAE,MAAM,OAAO,IAAI;YAAE,OAAO,KAAK,IAAI;YAAE,OAAO,OAAO,IAAI;QAAC;QAC1D;YAAE,MAAM,OAAO,MAAM;YAAE,OAAO,KAAK,MAAM;YAAE,OAAO,OAAO,MAAM;QAAC;KACnE,CAAC,MAAM,CAAC,CAAC,OAAS,KAAK,KAAK,GAAG;IAEhC,MAAM,aAAa,UAAU,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,KAAK,EAAE;IAErE,IAAI,UAAU,MAAM,KAAK,GAAG;QACxB,qBACI,+PAAC;YAAI,WAAU;;8BACX,+PAAC;oBAAI,WAAU;8BACX,cAAA,+PAAC;wBAAK,WAAU;kCAAU;;;;;;;;;;;8BAE9B,+PAAC;oBAAE,WAAU;8BAAwB;;;;;;;;;;;;IAGjD;IAEA,qBACI,+PAAC;QAAI,WAAU;;0BACX,+PAAC;gBAAG,WAAU;0BAAyC;;;;;;0BAEvD,+PAAC;gBAAI,WAAU;;kCACX,+PAAC,2MAAmB;wBAAC,OAAM;wBAAO,QAAO;kCACrC,cAAA,+PAAC,iLAAQ;;8CACL,+PAAC,uKAAG;oCACA,MAAM;oCACN,IAAG;oCACH,IAAG;oCACH,aAAa;oCACb,aAAa;oCACb,cAAc;oCACd,SAAQ;oCACR,cAAc;oCACd,QAAO;8CAEN,UAAU,GAAG,CAAC,CAAC,OAAO,sBACnB,+PAAC,6KAAI;4CAAuB,MAAM,MAAM,KAAK;2CAAlC,CAAC,KAAK,EAAE,OAAO;;;;;;;;;;8CAGlC,+PAAC,mLAAO;oCACJ,WAAW,CAAC,QAAkB,IAAA,+IAAc,EAAC;oCAC7C,cAAc;wCACV,iBAAiB;wCACjB,QAAQ;wCACR,cAAc;wCACd,SAAS;wCACT,WAAW;oCACf;oCACA,WAAW;wCAAE,OAAO;wCAAW,UAAU;wCAAQ,YAAY;oCAAI;;;;;;;;;;;;;;;;;kCAM7E,+PAAC;wBAAI,WAAU;;0CACX,+PAAC;gCAAK,WAAU;0CAAmC;;;;;;0CACnD,+PAAC;gCAAK,WAAU;0CAAiE;;;;;;;;;;;;;;;;;;0BAKzF,+PAAC;gBAAI,WAAU;0BACV,UAAU,GAAG,CAAC,CAAC,MAAM,sBAClB,+PAAC;wBAAgB,WAAU;;0CACvB,+PAAC;gCAAI,WAAU;;kDACX,+PAAC;wCAAK,WAAU;wCAA2B,OAAO;4CAAE,iBAAiB,KAAK,KAAK;wCAAC;;;;;;kDAChF,+PAAC;wCAAK,WAAU;kDAA6B,KAAK,IAAI;;;;;;;;;;;;0CAE1D,+PAAC;gCAAK,WAAU;;oCACX,CAAC,AAAC,KAAK,KAAK,GAAG,aAAc,GAAG,EAAE,OAAO,CAAC;oCAAG;;;;;;;;uBAN5C;;;;;;;;;;;;;;;;AAa9B"}},
    {"offset": {"line": 617, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/dashboard/AnalyticsBarChart.tsx"],"sourcesContent":["'use client';\n\nimport { BarChart, Bar, XAxis, Tooltip, ResponsiveContainer, Cell } from 'recharts';\n\ninterface AnalyticsBarChartProps {\n    data?: { name: string; value: number }[];\n}\n\nexport default function AnalyticsBarChart({ data = [] }: AnalyticsBarChartProps) {\n    const maxVal = Math.max(...data.map(d => d.value), 0);\n    const peakMonth = data.find(d => d.value === maxVal);\n\n    return (\n        <div className=\"w-full h-full bg-white rounded-2xl p-4 shadow-soft border border-gray-100 flex flex-col\">\n            <div className=\"flex items-center justify-between mb-2\">\n                <h3 className=\"text-gray-900 font-bold text-sm\">Monthly Activity</h3>\n                <div className=\"flex gap-1\">\n                    <span className=\"w-1 h-1 rounded-full bg-gray-300\"></span>\n                    <span className=\"w-1 h-1 rounded-full bg-gray-300\"></span>\n                    <span className=\"w-1 h-1 rounded-full bg-gray-300\"></span>\n                </div>\n            </div>\n\n            <div className=\"flex-1 min-h-[140px] relative\">\n                {/* Floating Label for Peak */}\n                {peakMonth && maxVal > 0 && (\n                    <div className=\"absolute left-[50%] top-0 transform -translate-x-1/2 -translate-y-2 z-10\">\n                        <div className=\"bg-[#1E293B] text-white text-[10px] font-bold px-1.5 py-0.5 rounded-md shadow-lg\">\n                            {peakMonth.value > 1000 ? `${(peakMonth.value / 1000).toFixed(1)}K` : peakMonth.value}\n                        </div>\n                        <div className=\"w-0 h-0 border-l-[3px] border-l-transparent border-r-[3px] border-r-transparent border-t-[3px] border-t-[#1E293B] mx-auto\"></div>\n                    </div>\n                )}\n\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                    <BarChart data={data} barSize={6}>\n                        <Tooltip\n                            cursor={{ fill: 'transparent' }}\n                            contentStyle={{ display: 'none' }}\n                        />\n                        <XAxis\n                            dataKey=\"name\"\n                            axisLine={false}\n                            tickLine={false}\n                            tick={{ fill: '#94A3B8', fontSize: 9 }}\n                            dy={5}\n                        />\n                        <Bar dataKey=\"value\" radius={[3, 3, 3, 3]}>\n                            {data.map((entry, index) => (\n                                <Cell\n                                    key={`cell-${index}`}\n                                    fill={entry.value === maxVal ? '#3B82F6' : '#E2E8F0'}\n                                />\n                            ))}\n                        </Bar>\n                    </BarChart>\n                </ResponsiveContainer>\n            </div>\n\n            <div className=\"mt-2 flex items-start gap-2 p-2.5 bg-green-50 rounded-xl border border-green-100\">\n                <div className=\"w-6 h-6 rounded-full bg-green-100 flex items-center justify-center text-green-600 flex-shrink-0 text-xs\">\n                    üèÜ\n                </div>\n                <div>\n                    <h4 className=\"text-xs font-bold text-gray-900\">Congratulations!</h4>\n                    <p className=\"text-[10px] text-gray-500 mt-0.5\">You've hit a new record this month.</p>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;;;AAQe,SAAS,kBAAkB,EAAE,OAAO,EAAE,EAA0B;IAC3E,MAAM,SAAS,KAAK,GAAG,IAAI,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,KAAK,GAAG;IACnD,MAAM,YAAY,KAAK,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK;IAE7C,qBACI,+PAAC;QAAI,WAAU;;0BACX,+PAAC;gBAAI,WAAU;;kCACX,+PAAC;wBAAG,WAAU;kCAAkC;;;;;;kCAChD,+PAAC;wBAAI,WAAU;;0CACX,+PAAC;gCAAK,WAAU;;;;;;0CAChB,+PAAC;gCAAK,WAAU;;;;;;0CAChB,+PAAC;gCAAK,WAAU;;;;;;;;;;;;;;;;;;0BAIxB,+PAAC;gBAAI,WAAU;;oBAEV,aAAa,SAAS,mBACnB,+PAAC;wBAAI,WAAU;;0CACX,+PAAC;gCAAI,WAAU;0CACV,UAAU,KAAK,GAAG,OAAO,GAAG,CAAC,UAAU,KAAK,GAAG,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC,GAAG,UAAU,KAAK;;;;;;0CAEzF,+PAAC;gCAAI,WAAU;;;;;;;;;;;;kCAIvB,+PAAC,2MAAmB;wBAAC,OAAM;wBAAO,QAAO;kCACrC,cAAA,+PAAC,iLAAQ;4BAAC,MAAM;4BAAM,SAAS;;8CAC3B,+PAAC,mLAAO;oCACJ,QAAQ;wCAAE,MAAM;oCAAc;oCAC9B,cAAc;wCAAE,SAAS;oCAAO;;;;;;8CAEpC,+PAAC,+KAAK;oCACF,SAAQ;oCACR,UAAU;oCACV,UAAU;oCACV,MAAM;wCAAE,MAAM;wCAAW,UAAU;oCAAE;oCACrC,IAAI;;;;;;8CAER,+PAAC,2KAAG;oCAAC,SAAQ;oCAAQ,QAAQ;wCAAC;wCAAG;wCAAG;wCAAG;qCAAE;8CACpC,KAAK,GAAG,CAAC,CAAC,OAAO,sBACd,+PAAC,6KAAI;4CAED,MAAM,MAAM,KAAK,KAAK,SAAS,YAAY;2CADtC,CAAC,KAAK,EAAE,OAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAS5C,+PAAC;gBAAI,WAAU;;kCACX,+PAAC;wBAAI,WAAU;kCAA0G;;;;;;kCAGzH,+PAAC;;0CACG,+PAAC;gCAAG,WAAU;0CAAkC;;;;;;0CAChD,+PAAC;gCAAE,WAAU;0CAAmC;;;;;;;;;;;;;;;;;;;;;;;;AAKpE"}},
    {"offset": {"line": 833, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/dashboard/FlipCard.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { LucideIcon } from 'lucide-react';\n\ninterface FlipCardProps {\n    title: string;\n    icon: LucideIcon;\n    activeCount: number;\n    expiringSoonCount: number;\n    colorClass: string; // e.g., 'blue', 'green'\n    onClick: () => void;\n}\n\nexport default function FlipCard({ title, icon: Icon, activeCount, expiringSoonCount, colorClass, onClick }: FlipCardProps) {\n    const totalPolicies = activeCount + expiringSoonCount;\n    // Map color names to Tailwind classes\n    const colorMap: Record<string, { bg: string; text: string; hover: string; border: string }> = {\n        blue: { bg: 'bg-blue-50', text: 'text-blue-600', hover: 'group-hover:bg-blue-100', border: 'border-blue-100' },\n        green: { bg: 'bg-green-50', text: 'text-green-600', hover: 'group-hover:bg-green-100', border: 'border-green-100' },\n        purple: { bg: 'bg-purple-50', text: 'text-purple-600', hover: 'group-hover:bg-purple-100', border: 'border-purple-100' },\n        orange: { bg: 'bg-orange-50', text: 'text-orange-600', hover: 'group-hover:bg-orange-100', border: 'border-orange-100' },\n        pink: { bg: 'bg-pink-50', text: 'text-pink-600', hover: 'group-hover:bg-pink-100', border: 'border-pink-100' },\n        cyan: { bg: 'bg-cyan-50', text: 'text-cyan-600', hover: 'group-hover:bg-cyan-100', border: 'border-cyan-100' },\n    };\n\n    const colors = colorMap[colorClass] || colorMap['blue'];\n\n    return (\n        <div\n            onClick={onClick}\n            className=\"group h-32 w-full perspective-1000 cursor-pointer\"\n        >\n            <div className=\"relative h-full w-full transition-all duration-500 transform-style-3d group-hover:rotate-y-180\">\n                {/* Front Side */}\n                <div className={`absolute inset-0 w-full h-full backface-hidden rounded-xl shadow-lg bg-white border ${colors.border} flex flex-col items-center justify-center p-4 transition-all duration-300 group-hover:shadow-xl`}>\n                    <div className={`p-3 rounded-full ${colors.bg} bg-opacity-10 mb-3`}>\n                        <Icon className={`w-8 h-8 ${colors.text}`} />\n                    </div>\n                    <h3 className=\"text-sm font-bold text-gray-700 text-center\">{title}</h3>\n                </div>\n\n                {/* Back Side */}\n                <div className=\"absolute inset-0 w-full h-full backface-hidden rotate-y-180 rounded-xl shadow-lg bg-gradient-to-br from-gray-900 to-gray-800 text-white flex flex-col items-center justify-center p-4\">\n                    <div className=\"text-4xl font-bold mb-1\">{totalPolicies}</div>\n                    <div className=\"text-xs font-medium text-gray-300 uppercase tracking-wider\">Total Policies</div>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAce,SAAS,SAAS,EAAE,KAAK,EAAE,MAAM,IAAI,EAAE,WAAW,EAAE,iBAAiB,EAAE,UAAU,EAAE,OAAO,EAAiB;IACtH,MAAM,gBAAgB,cAAc;IACpC,sCAAsC;IACtC,MAAM,WAAwF;QAC1F,MAAM;YAAE,IAAI;YAAc,MAAM;YAAiB,OAAO;YAA2B,QAAQ;QAAkB;QAC7G,OAAO;YAAE,IAAI;YAAe,MAAM;YAAkB,OAAO;YAA4B,QAAQ;QAAmB;QAClH,QAAQ;YAAE,IAAI;YAAgB,MAAM;YAAmB,OAAO;YAA6B,QAAQ;QAAoB;QACvH,QAAQ;YAAE,IAAI;YAAgB,MAAM;YAAmB,OAAO;YAA6B,QAAQ;QAAoB;QACvH,MAAM;YAAE,IAAI;YAAc,MAAM;YAAiB,OAAO;YAA2B,QAAQ;QAAkB;QAC7G,MAAM;YAAE,IAAI;YAAc,MAAM;YAAiB,OAAO;YAA2B,QAAQ;QAAkB;IACjH;IAEA,MAAM,SAAS,QAAQ,CAAC,WAAW,IAAI,QAAQ,CAAC,OAAO;IAEvD,qBACI,+PAAC;QACG,SAAS;QACT,WAAU;kBAEV,cAAA,+PAAC;YAAI,WAAU;;8BAEX,+PAAC;oBAAI,WAAW,CAAC,oFAAoF,EAAE,OAAO,MAAM,CAAC,gGAAgG,CAAC;;sCAClN,+PAAC;4BAAI,WAAW,CAAC,iBAAiB,EAAE,OAAO,EAAE,CAAC,mBAAmB,CAAC;sCAC9D,cAAA,+PAAC;gCAAK,WAAW,CAAC,QAAQ,EAAE,OAAO,IAAI,EAAE;;;;;;;;;;;sCAE7C,+PAAC;4BAAG,WAAU;sCAA+C;;;;;;;;;;;;8BAIjE,+PAAC;oBAAI,WAAU;;sCACX,+PAAC;4BAAI,WAAU;sCAA2B;;;;;;sCAC1C,+PAAC;4BAAI,WAAU;sCAA6D;;;;;;;;;;;;;;;;;;;;;;;AAKhG"}},
    {"offset": {"line": 960, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/dashboard/MonthlyActivityChart.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useMemo } from 'react';\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\nimport { formatCurrency } from '@/lib/utils';\nimport { Filter } from 'lucide-react';\n\ninterface MonthlyActivityChartProps {\n    data: any[]; // Array of monthly data objects\n    allPolicies: any[]; // Raw policies for filtering\n}\n\nexport default function MonthlyActivityChart({ data: initialData, allPolicies }: MonthlyActivityChartProps) {\n    const [metric, setMetric] = useState<'count' | 'premium'>('count');\n    const [filterType, setFilterType] = useState<string>('All');\n\n    // Process data based on filter and metric\n    const chartData = useMemo(() => {\n        const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n        const processedData = months.map(month => ({\n            name: month,\n            Active: 0,\n            Expiring: 0,\n            Expired: 0\n        }));\n\n        const filteredPolicies = filterType === 'All'\n            ? allPolicies\n            : allPolicies.filter(p => {\n                const type = p.vehicle_number ? 'Motor' : p.no_of_lives !== undefined ? 'Health' : p.lob_type || 'Other';\n                return type === filterType;\n            });\n\n        filteredPolicies.forEach(policy => {\n            const date = new Date(policy.created_at); // Using creation date for distribution\n            const monthIndex = date.getMonth();\n            const status = policy.status || 'Active'; // Default to Active if status missing\n\n            // Map status to chart categories\n            let category: 'Active' | 'Expiring' | 'Expired' = 'Active';\n            if (status === 'Expiring Soon') category = 'Expiring';\n            else if (status === 'Expired') category = 'Expired';\n            else category = 'Active';\n\n            if (metric === 'count') {\n                processedData[monthIndex][category] += 1;\n            } else {\n                processedData[monthIndex][category] += Number(policy.premium_amount) || 0;\n            }\n        });\n\n        return processedData;\n    }, [allPolicies, metric, filterType]);\n\n    return (\n        <div className=\"bg-white p-6 rounded-2xl shadow-soft border border-gray-100 h-full flex flex-col\">\n            <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4\">\n                <div>\n                    <h3 className=\"text-lg font-bold text-gray-900\">Monthly Activity</h3>\n                    <p className=\"text-sm text-gray-500\">Policy status distribution over time</p>\n                </div>\n\n                <div className=\"flex flex-wrap gap-3\">\n                    {/* Metric Toggle */}\n                    <div className=\"bg-gray-100 p-1 rounded-lg flex text-xs font-medium\">\n                        <button\n                            onClick={() => setMetric('count')}\n                            className={`px-3 py-1.5 rounded-md transition-all ${metric === 'count'\n                                    ? 'bg-white text-gray-900 shadow-sm'\n                                    : 'text-gray-500 hover:text-gray-700'\n                                }`}\n                        >\n                            Count\n                        </button>\n                        <button\n                            onClick={() => setMetric('premium')}\n                            className={`px-3 py-1.5 rounded-md transition-all ${metric === 'premium'\n                                    ? 'bg-white text-gray-900 shadow-sm'\n                                    : 'text-gray-500 hover:text-gray-700'\n                                }`}\n                        >\n                            Premium\n                        </button>\n                    </div>\n\n                    {/* Type Filter */}\n                    <div className=\"relative\">\n                        <select\n                            value={filterType}\n                            onChange={(e) => setFilterType(e.target.value)}\n                            className=\"pl-3 pr-8 py-1.5 text-xs font-medium bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none appearance-none cursor-pointer\"\n                        >\n                            <option value=\"All\">All Types</option>\n                            <option value=\"Motor\">Motor</option>\n                            <option value=\"Health\">Health</option>\n                            <option value=\"Travel\">Travel</option>\n                            <option value=\"Commercial\">Commercial</option>\n                            <option value=\"Life\">Life</option>\n                            <option value=\"Cyber\">Cyber</option>\n                        </select>\n                        <Filter className=\"w-3 h-3 text-gray-400 absolute right-2.5 top-1/2 -translate-y-1/2 pointer-events-none\" />\n                    </div>\n                </div>\n            </div>\n\n            <div className=\"flex-1 min-h-0\">\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                    <BarChart data={chartData} margin={{ top: 10, right: 10, left: -20, bottom: 0 }}>\n                        <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#f3f4f6\" />\n                        <XAxis\n                            dataKey=\"name\"\n                            axisLine={false}\n                            tickLine={false}\n                            tick={{ fill: '#6b7280', fontSize: 11 }}\n                            dy={10}\n                        />\n                        <YAxis\n                            axisLine={false}\n                            tickLine={false}\n                            tick={{ fill: '#6b7280', fontSize: 11 }}\n                            tickFormatter={(value) => metric === 'premium' ? `‚Çπ${value / 1000}k` : value}\n                        />\n                        <Tooltip\n                            cursor={{ fill: '#f9fafb' }}\n                            contentStyle={{\n                                backgroundColor: '#fff',\n                                border: '1px solid #e5e7eb',\n                                borderRadius: '8px',\n                                boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',\n                                fontSize: '12px'\n                            }}\n                            formatter={(value: number) => [\n                                metric === 'premium' ? formatCurrency(value) : value,\n                                ''\n                            ]}\n                        />\n                        <Legend\n                            iconType=\"circle\"\n                            wrapperStyle={{ fontSize: '12px', paddingTop: '20px' }}\n                        />\n                        <Bar dataKey=\"Active\" stackId=\"a\" fill=\"#22c55e\" radius={[0, 0, 4, 4]} barSize={20} />\n                        <Bar dataKey=\"Expiring\" stackId=\"a\" fill=\"#f97316\" radius={[0, 0, 0, 0]} barSize={20} />\n                        <Bar dataKey=\"Expired\" stackId=\"a\" fill=\"#ef4444\" radius={[4, 4, 0, 0]} barSize={20} />\n                    </BarChart>\n                </ResponsiveContainer>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1343, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/dashboard/ProtectFamilyCard.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { Shield, ArrowRight } from 'lucide-react';\n\n\ninterface ProtectFamilyCardProps {\n    onGetQuote?: () => void;\n}\n\nexport default function ProtectFamilyCard({ onGetQuote }: ProtectFamilyCardProps) {\n    return (\n        <div className=\"bg-white p-6 rounded-3xl shadow-card border border-gray-100 h-full flex flex-col justify-between relative overflow-hidden group\">\n            <div>\n                <div className=\"flex items-center gap-3 mb-4\">\n                    <div className=\"w-10 h-10 rounded-xl bg-red-50 flex items-center justify-center text-red-500\">\n                        <Shield className=\"w-5 h-5\" />\n                    </div>\n                    <span className=\"bg-gray-100 text-gray-600 text-[10px] font-bold px-2.5 py-1 rounded-full tracking-wide uppercase\">\n                        Recommended\n                    </span>\n                </div>\n\n                <h3 className=\"text-lg font-bold text-gray-900 mb-2\">Protect your Family</h3>\n                <p className=\"text-sm text-gray-500 leading-relaxed\">\n                    Get comprehensive health coverage with cashless claims.\n                </p>\n            </div>\n\n            <div className=\"flex items-end justify-between mt-4\">\n                <div className=\"bg-gray-50 rounded-xl px-3 py-2\">\n                    <p className=\"text-[10px] text-gray-400 font-bold uppercase tracking-wider mb-0.5\">Starting from</p>\n                    <p className=\"text-lg font-bold text-gray-900\">‚Çπ500<span className=\"text-sm text-gray-400 font-medium\">/mo</span></p>\n                </div>\n\n                <button\n                    onClick={onGetQuote}\n                    className=\"flex items-center text-primary-600 text-sm font-bold hover:text-primary-700 transition-colors group-hover:translate-x-1 duration-300\"\n                >\n                    Get a Quote\n                    <ArrowRight className=\"w-4 h-4 ml-1.5\" />\n                </button>\n            </div>\n\n            {/* subtle decoration */}\n            <div className=\"absolute -bottom-10 -right-10 w-32 h-32 bg-red-50 rounded-full opacity-50 blur-2xl group-hover:opacity-100 transition-opacity duration-500\"></div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AAHA;;;AAUe,SAAS,kBAAkB,EAAE,UAAU,EAA0B;IAC5E,qBACI,+PAAC;QAAI,WAAU;;0BACX,+PAAC;;kCACG,+PAAC;wBAAI,WAAU;;0CACX,+PAAC;gCAAI,WAAU;0CACX,cAAA,+PAAC,iOAAM;oCAAC,WAAU;;;;;;;;;;;0CAEtB,+PAAC;gCAAK,WAAU;0CAAmG;;;;;;;;;;;;kCAKvH,+PAAC;wBAAG,WAAU;kCAAuC;;;;;;kCACrD,+PAAC;wBAAE,WAAU;kCAAwC;;;;;;;;;;;;0BAKzD,+PAAC;gBAAI,WAAU;;kCACX,+PAAC;wBAAI,WAAU;;0CACX,+PAAC;gCAAE,WAAU;0CAAsE;;;;;;0CACnF,+PAAC;gCAAE,WAAU;;oCAAkC;kDAAI,+PAAC;wCAAK,WAAU;kDAAoC;;;;;;;;;;;;;;;;;;kCAG3G,+PAAC;wBACG,SAAS;wBACT,WAAU;;4BACb;0CAEG,+PAAC,iPAAU;gCAAC,WAAU;;;;;;;;;;;;;;;;;;0BAK9B,+PAAC;gBAAI,WAAU;;;;;;;;;;;;AAG3B"}},
    {"offset": {"line": 1492, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/dashboard/ReportsModal.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport { X, Calendar, FileText, Filter, Download } from 'lucide-react';\n\ninterface ReportsModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n}\n\nexport default function ReportsModal({ isOpen, onClose }: ReportsModalProps) {\n    const [dateRange, setDateRange] = useState('last_30_days');\n    const [policyType, setPolicyType] = useState('all');\n    const [format, setFormat] = useState<'pdf' | 'excel' | 'csv'>('pdf');\n    const [downloading, setDownloading] = useState(false);\n\n    if (!isOpen) return null;\n\n    const handleDownload = async () => {\n        setDownloading(true);\n        try {\n            // Ensure this only runs in the browser (SSR safety)\n            if (typeof window === 'undefined') return;\n\n            // Mock data generation based on filters\n            const data = [\n                ['Policy No', 'Insurer', 'Type', 'Premium', 'Status', 'Date'],\n                ['MOT-123456', 'HDFC Ergo', 'Motor', '‚Çπ12,500', 'Active', '2023-11-15'],\n                ['HLT-987654', 'Star Health', 'Health', '‚Çπ25,000', 'Active', '2023-10-01'],\n                ['COM-456789', 'ICICI Lombard', 'Commercial', '‚Çπ45,000', 'Expiring Soon', '2023-12-05'],\n            ];\n\n            const timestamp = new Date().toISOString().split('T')[0];\n            const filename = `insurance_report_${timestamp}`;\n\n            if (format === 'pdf') {\n                const { default: jsPDF } = await import('jspdf');\n                const { default: autoTable } = await import('jspdf-autotable');\n\n                const doc = new jsPDF();\n                doc.text('Insurance Portfolio Report', 14, 15);\n                doc.text(`Generated on: ${new Date().toLocaleDateString()}`, 14, 22);\n\n                autoTable(doc, {\n                    head: [data[0]],\n                    body: data.slice(1),\n                    startY: 30,\n                });\n\n                doc.save(`${filename}.pdf`);\n            } else if (format === 'excel') {\n                const XLSX = await import('xlsx');\n                const ws = XLSX.utils.aoa_to_sheet(data);\n                const wb = XLSX.utils.book_new();\n                XLSX.utils.book_append_sheet(wb, ws, 'Report');\n                XLSX.writeFile(wb, `${filename}.xlsx`);\n            } else {\n                // CSV\n                const csvContent = data.map(e => e.join(\",\")).join(\"\\n\");\n                const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n                const link = document.createElement(\"a\");\n                const url = URL.createObjectURL(blob);\n                link.setAttribute(\"href\", url);\n                link.setAttribute(\"download\", `${filename}.csv`);\n                document.body.appendChild(link);\n                link.click();\n                document.body.removeChild(link);\n            }\n\n            onClose();\n        } catch (error) {\n            console.error('Error generating report:', error);\n        } finally {\n            setDownloading(false);\n        }\n    };\n\n\n    return (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n            <div className=\"bg-white rounded-2xl w-full max-w-md shadow-2xl transform transition-all\">\n                <div className=\"p-6 border-b border-gray-100 flex justify-between items-center\">\n                    <h3 className=\"text-xl font-bold text-gray-900\">Generate Report</h3>\n                    <button onClick={onClose} className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\">\n                        <X className=\"w-5 h-5 text-gray-500\" />\n                    </button>\n                </div>\n\n                <div className=\"p-6 space-y-6\">\n                    {/* Date Range */}\n                    <div className=\"space-y-3\">\n                        <label className=\"text-sm font-bold text-gray-700 block\">Date Range</label>\n                        <div className=\"grid grid-cols-2 gap-4\">\n                            <div className=\"relative\">\n                                <Calendar className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\n                                <input\n                                    type=\"date\"\n                                    className=\"w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all\"\n                                />\n                            </div>\n                            <div className=\"relative\">\n                                <Calendar className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\n                                <input\n                                    type=\"date\"\n                                    className=\"w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all\"\n                                />\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* Policy Type */}\n                    <div className=\"space-y-3\">\n                        <label className=\"text-sm font-bold text-gray-700 block\">Policy Type</label>\n                        <div className=\"relative\">\n                            <Filter className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\n                            <select\n                                value={policyType}\n                                onChange={(e) => setPolicyType(e.target.value)}\n                                className=\"w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500 appearance-none bg-white transition-all\"\n                            >\n                                <option value=\"all\">All Policies</option>\n                                <option value=\"motor\">Motor Insurance</option>\n                                <option value=\"health\">Health Insurance</option>\n                                <option value=\"commercial\">Commercial Insurance</option>\n                                <option value=\"life\">Life Insurance</option>\n                                <option value=\"travel\">Travel Insurance</option>\n                                <option value=\"cyber\">Cyber Insurance</option>\n                            </select>\n                        </div>\n                    </div>\n\n                    {/* Format Selection */}\n                    <div className=\"space-y-3\">\n                        <label className=\"text-sm font-bold text-gray-700 block\">Format</label>\n                        <div className=\"grid grid-cols-3 gap-3\">\n                            <button\n                                onClick={() => setFormat('pdf')}\n                                className={`py-2.5 px-4 rounded-xl text-sm font-bold border transition-all ${format === 'pdf'\n                                    ? 'bg-primary-50 border-primary-200 text-primary-700 ring-2 ring-primary-500 ring-offset-1'\n                                    : 'border-gray-200 text-gray-600 hover:bg-gray-50'\n                                    }`}\n                            >\n                                PDF\n                            </button>\n                            <button\n                                onClick={() => setFormat('excel')}\n                                className={`py-2.5 px-4 rounded-xl text-sm font-bold border transition-all ${format === 'excel'\n                                    ? 'bg-primary-50 border-primary-200 text-primary-700 ring-2 ring-primary-500 ring-offset-1'\n                                    : 'border-gray-200 text-gray-600 hover:bg-gray-50'\n                                    }`}\n                            >\n                                Excel\n                            </button>\n                            <button\n                                onClick={() => setFormat('csv')}\n                                className={`py-2.5 px-4 rounded-xl text-sm font-bold border transition-all ${format === 'csv'\n                                    ? 'bg-primary-50 border-primary-200 text-primary-700 ring-2 ring-primary-500 ring-offset-1'\n                                    : 'border-gray-200 text-gray-600 hover:bg-gray-50'\n                                    }`}\n                            >\n                                CSV\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"p-6 border-t border-gray-100 bg-gray-50 rounded-b-2xl flex justify-end gap-3\">\n                    <button\n                        onClick={onClose}\n                        className=\"px-5 py-2.5 text-sm font-bold text-gray-600 hover:text-gray-800 hover:bg-gray-200 rounded-xl transition-colors\"\n                    >\n                        Cancel\n                    </button>\n                    <button\n                        onClick={handleDownload}\n                        disabled={downloading}\n                        className=\"px-5 py-2.5 bg-primary-600 hover:bg-primary-700 text-white text-sm font-bold rounded-xl shadow-lg shadow-primary-600/20 transition-all active:scale-95 flex items-center disabled:opacity-70 disabled:cursor-not-allowed\"\n                    >\n                        {downloading ? (\n                            <>\n                                <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2\"></div>\n                                Generating...\n                            </>\n                        ) : (\n                            <>\n                                <Download className=\"w-4 h-4 mr-2\" />\n                                Download Report\n                            </>\n                        )}\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1868, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/dashboard/PolicyDetailModal.tsx"],"sourcesContent":["'use client';\n\nimport { useRouter } from 'next/navigation';\nimport { X } from 'lucide-react';\nimport { MotorPolicy, HealthPolicy, CommercialPolicy } from '@/types';\n\ninterface PolicyDetailModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    title: string;\n    type: 'total' | 'premium' | 'expiring' | 'expired';\n    motorPolicies?: MotorPolicy[];\n    healthPolicies: HealthPolicy[];\n    commercialPolicies?: CommercialPolicy[];\n    travelPolicies?: any[];\n    lifePolicies?: any[];\n    cyberPolicies?: any[];\n}\n\nexport default function PolicyDetailModal({\n    isOpen,\n    onClose,\n    title,\n    type,\n    motorPolicies = [],\n    healthPolicies,\n    commercialPolicies = [],\n    travelPolicies = [],\n    lifePolicies = [],\n    cyberPolicies = []\n}: PolicyDetailModalProps) {\n    const router = useRouter();\n\n    if (!isOpen) return null;\n\n    const handlePolicyClick = (policyType: string, id: string) => {\n        onClose();\n        router.push(`/policies/${policyType.toLowerCase()}/${id}`);\n    };\n\n    const renderPolicyRow = (policy: any, policyType: string) => {\n        const getPolicyDates = () => {\n            if ('policy_end_date' in policy) {\n                return {\n                    start: policy.policy_start_date,\n                    end: policy.policy_end_date\n                };\n            }\n            return {\n                start: policy.policy_start_date,\n                end: policy.expiry_date\n            };\n        };\n\n        const dates = getPolicyDates();\n        const premium = Number(policy.premium_amount);\n\n        // Determine primary field based on policy type\n        let primaryField = policy.policy_number;\n        let primaryLabel = 'Policy Number';\n\n        if (policyType === 'Motor') {\n            primaryField = policy.vehicle_number;\n            primaryLabel = 'Vehicle Number';\n        } else if (policyType === 'Health') {\n            primaryField = policy.company_name; // Health uses company_name as primary identifier in this context? Or maybe we should use a different field if available. Requirement says \"Policy holder name\". Health policy has company_name. Let's use that or insurer if name missing.\n            // Wait, requirement says \"Health: Policy holder name\". Health policy schema has 'company_name' but not 'policy_holder_name'.\n            // Let's check the schema again. HealthPolicy has 'company_name'.\n            // Maybe I should use company_name as the clickable field.\n            primaryField = policy.company_name || 'N/A';\n        } else if (policyType === 'Commercial') {\n            primaryField = policy.company_name || policy.policy_holder_name || 'N/A';\n        } else if (['Travel', 'Life', 'Cyber'].includes(policyType)) {\n            // Travel/Life/Cyber: Policy holder name\n            // Travel has destination? No, requirement says \"Policy holder name\".\n            // Let's check Travel/Life/Cyber schemas.\n            // Life: nominee_name? No.\n            // Actually, these policies might not have a 'policy_holder_name' field on the policy itself if it's linked to the user.\n            // But for the table, we need something clickable.\n            // If the requirement says \"Policy holder name\", and it's not on the policy, maybe it means the User's name?\n            // But the user is the same for all.\n            // Let's use Policy Number as fallback if specific field not found, but requirement asks for specific fields.\n            // For now, let's use Policy Number for these if name not available, or maybe 'insurer_name'?\n            // Wait, for Motor it is Vehicle Number.\n            // For Commercial it is Business Name.\n            // For Health/Travel/Life/Cyber it is Policy Holder Name.\n            // Since I don't have policy_holder_name on Health/Travel/Cyber (only Commercial has it), I will use Policy Number as the primary clickable field for now to avoid breaking,\n            // OR I can use another relevant field.\n            // For Travel: Destination?\n            // For Life: Nominee?\n            // For Cyber: Risk Type?\n            // The requirement explicitly said \"Policy holder name\".\n            // I'll stick to Policy Number for now if name is missing, but I'll try to use relevant fields if possible.\n            // Actually, let's look at the requirement again: \"Health: Policy holder name (clickable)\".\n            // If the DB doesn't have it, maybe I should use the User's name? But that's static.\n            // I'll use Policy Number for now as the clickable field for these if I can't find a better one, BUT I will add a Policy Number column as requested.\n            // So:\n            // Col 1: Primary (Clickable)\n            // Col 2: Policy Number\n            // ...\n\n            // For Motor: Vehicle Number\n            // For Health: Company Name (closest to \"Policy Holder\" for corporate/group, or maybe just use Policy Number if individual?)\n            // For Commercial: Company Name / Policy Holder Name\n            // For others: Let's use Insurer Name? No, that's a separate column.\n            // Let's use \"Policy Details\" as header and put relevant info.\n            // For Travel: Destination\n            // For Life: Sum Assured? No.\n            // For Cyber: Risk Type\n\n            // actually, let's just use Policy Number as the clickable field for the others if the specific field is missing, \n            // BUT the requirement says \"Policy Number column\" is separate.\n            // So I must have two columns.\n            // If I can't find a \"Policy Holder Name\", I'll use \"N/A\" or the User's name if I can get it.\n            // But I don't have the user's name here easily unless I fetch it.\n            // Let's use \"Self\" or similar if it's the logged-in user?\n\n            // Let's use a generic \"Details\" column.\n            if (policyType === 'Travel') primaryField = policy.destination || 'Travel Policy';\n            if (policyType === 'Life') primaryField = policy.nominee_name || 'Life Policy';\n            if (policyType === 'Cyber') primaryField = policy.cyber_risk_type || 'Cyber Policy';\n        }\n\n        return (\n            <tr key={policy.id} className=\"hover:bg-gray-50\">\n                <td className=\"px-4 py-3 text-sm\">\n                    <button\n                        onClick={() => handlePolicyClick(policyType, policy.id)}\n                        className=\"text-primary-600 hover:text-primary-700 font-semibold hover:underline text-left\"\n                    >\n                        {primaryField}\n                    </button>\n                </td>\n                <td className=\"px-4 py-3 text-sm text-gray-900\">{policy.policy_number}</td>\n                <td className=\"px-4 py-3 text-sm text-gray-900\">{policy.insurer_name}</td>\n                <td className=\"px-4 py-3 text-sm text-gray-600\">{policyType}</td>\n                <td className=\"px-4 py-3 text-sm text-gray-900 font-semibold\">\n                    ‚Çπ{premium.toLocaleString()}\n                </td>\n                <td className=\"px-4 py-3 text-sm\">\n                    <span className={`px-2 py-1 rounded-full text-xs font-semibold ${policy.status === 'Active' ? 'bg-green-100 text-green-700' :\n                        policy.status === 'Expiring Soon' ? 'bg-orange-100 text-orange-700' :\n                            policy.status === 'Expired' ? 'bg-red-100 text-red-700' :\n                                'bg-gray-100 text-gray-700'\n                        }`}>\n                        {policy.status}\n                    </span>\n                </td>\n                <td className=\"px-4 py-3 text-sm text-gray-600\">\n                    {dates.end ? new Date(dates.end).toLocaleDateString() : 'N/A'}\n                </td>\n            </tr>\n        );\n    };\n\n    const allPolicies = [\n        ...motorPolicies.map(p => ({ ...p, policyType: 'Motor' })),\n        ...healthPolicies.map((p: any) => ({ ...p, policyType: 'Health' })),\n        ...commercialPolicies.map(p => ({ ...p, policyType: 'Commercial' })),\n        ...travelPolicies.map(p => ({ ...p, policyType: 'Travel' })),\n        ...lifePolicies.map(p => ({ ...p, policyType: 'Life' })),\n        ...cyberPolicies.map(p => ({ ...p, policyType: 'Cyber' }))\n    ];\n\n    // Filter based on type\n    let displayPolicies = allPolicies;\n    if (type === 'expiring') {\n        displayPolicies = allPolicies.filter((p: any) => p.status === 'Expiring Soon');\n    } else if (type === 'expired') {\n        displayPolicies = allPolicies.filter((p: any) => p.status === 'Expired');\n    } else if (type === 'total' || type === 'premium') {\n        // For total and premium, we only want active policies (Active or Expiring Soon)\n        // Expiring Soon is technically still active until it expires\n        displayPolicies = allPolicies.filter((p: any) => p.status === 'Active' || p.status === 'Expiring Soon');\n    }\n\n    // Calculate total premium for premium view\n    const totalPremium = type === 'premium'\n        ? displayPolicies.reduce((sum, p) => sum + Number(p.premium_amount), 0)\n        : 0;\n\n    return (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-white rounded-2xl shadow-xl max-w-5xl w-full max-h-[90vh] flex flex-col\">\n                {/* Header */}\n                <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n                    <div>\n                        <h2 className=\"text-xl font-bold text-gray-900\">{title}</h2>\n                        <p className=\"text-sm text-gray-500 mt-1\">\n                            {displayPolicies.length} {displayPolicies.length === 1 ? 'policy' : 'policies'}\n                            {type === 'premium' && ` ‚Ä¢ Total: ‚Çπ${totalPremium.toLocaleString()}`}\n                        </p>\n                    </div>\n                    <button\n                        onClick={onClose}\n                        className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n                    >\n                        <X className=\"w-5 h-5 text-gray-500\" />\n                    </button>\n                </div>\n\n                {/* Status Legend */}\n                <div className=\"px-6 py-2 bg-gray-50 border-b border-gray-200 flex gap-4 text-xs\">\n                    <div className=\"flex items-center gap-1.5\">\n                        <span className=\"w-2 h-2 rounded-full bg-green-500\"></span>\n                        <span className=\"text-gray-600\">Active</span>\n                    </div>\n                    <div className=\"flex items-center gap-1.5\">\n                        <span className=\"w-2 h-2 rounded-full bg-orange-500\"></span>\n                        <span className=\"text-gray-600\">Expiring Soon (&lt;20 days)</span>\n                    </div>\n                    <div className=\"flex items-center gap-1.5\">\n                        <span className=\"w-2 h-2 rounded-full bg-red-500\"></span>\n                        <span className=\"text-gray-600\">Expired</span>\n                    </div>\n                </div>\n\n                {/* Content */}\n                <div className=\"flex-1 overflow-auto p-6\">\n                    {displayPolicies.length === 0 ? (\n                        <div className=\"text-center py-12\">\n                            <p className=\"text-gray-500\">No policies found</p>\n                        </div>\n                    ) : (\n                        <div className=\"border border-gray-200 rounded-xl overflow-x-auto\">\n                            <table className=\"w-full min-w-[600px]\">\n                                <thead className=\"bg-gray-50\">\n                                    <tr>\n                                        <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider\">\n                                            Details\n                                        </th>\n                                        <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider\">\n                                            Policy Number\n                                        </th>\n                                        <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider\">\n                                            Insurer\n                                        </th>\n                                        <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider\">\n                                            Type\n                                        </th>\n                                        <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider\">\n                                            Premium\n                                        </th>\n                                        <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider\">\n                                            Status\n                                        </th>\n                                        <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider\">\n                                            End Date\n                                        </th>\n                                    </tr>\n                                </thead>\n                                <tbody className=\"divide-y divide-gray-100 bg-white\">\n                                    {displayPolicies.filter(p => p.policyType === 'Motor').map(p => renderPolicyRow(p, 'Motor'))}\n                                    {displayPolicies.filter(p => p.policyType === 'Health').map(p => renderPolicyRow(p, 'Health'))}\n                                    {displayPolicies.filter(p => p.policyType === 'Commercial').map(p => renderPolicyRow(p, 'Commercial'))}\n                                    {displayPolicies.filter(p => p.policyType === 'Travel').map(p => renderPolicyRow(p, 'Travel'))}\n                                    {displayPolicies.filter(p => p.policyType === 'Life').map(p => renderPolicyRow(p, 'Life'))}\n                                    {displayPolicies.filter(p => p.policyType === 'Cyber').map(p => renderPolicyRow(p, 'Cyber'))}\n                                </tbody>\n                            </table>\n                        </div>\n                    )}\n                </div>\n\n                {/* Footer */}\n                <div className=\"p-6 border-t border-gray-200 bg-gray-50\">\n                    <p className=\"text-xs text-gray-500\">\n                        Click on a policy number to view full details\n                    </p>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2382, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/forms/FormInput.tsx"],"sourcesContent":["import React from 'react';\n\ninterface FormInputProps {\n    label: string;\n    name: string;\n    type?: 'text' | 'email' | 'tel' | 'number' | 'date' | 'select' | 'textarea';\n    value: string | number;\n    onChange: (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => void;\n    onBlur?: (e: React.FocusEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => void;\n    error?: string;\n    placeholder?: string;\n    required?: boolean;\n    disabled?: boolean;\n    min?: string | number;\n    max?: string | number;\n    step?: string | number;\n    options?: { value: string | number; label: string }[];\n    rows?: number;\n    className?: string;\n}\n\nexport default function FormInput({\n    label,\n    name,\n    type = 'text',\n    value,\n    onChange,\n    onBlur,\n    error,\n    placeholder,\n    required = false,\n    disabled = false,\n    min,\n    max,\n    step,\n    options = [],\n    rows = 4,\n    className = '',\n}: FormInputProps) {\n    const baseInputClass = `\n    w-full px-4 py-2 border rounded-lg\n    focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent\n    disabled:bg-gray-100 disabled:cursor-not-allowed\n    transition-colors\n    ${error ? 'border-red-500 focus:ring-red-500' : 'border-gray-300'}\n    ${className}\n  `;\n\n    const renderInput = () => {\n        if (type === 'select') {\n            return (\n                <select\n                    id={name}\n                    name={name}\n                    value={value}\n                    onChange={onChange}\n                    onBlur={onBlur}\n                    disabled={disabled}\n                    required={required}\n                    className={baseInputClass}\n                >\n                    <option value=\"\">Select {label}</option>\n                    {options.map((option) => (\n                        <option key={option.value} value={option.value}>\n                            {option.label}\n                        </option>\n                    ))}\n                </select>\n            );\n        }\n\n        if (type === 'textarea') {\n            return (\n                <textarea\n                    id={name}\n                    name={name}\n                    value={value}\n                    onChange={onChange}\n                    onBlur={onBlur}\n                    placeholder={placeholder}\n                    disabled={disabled}\n                    required={required}\n                    rows={rows}\n                    className={baseInputClass}\n                />\n            );\n        }\n\n        return (\n            <input\n                id={name}\n                name={name}\n                type={type}\n                value={value}\n                onChange={onChange}\n                onBlur={onBlur}\n                placeholder={placeholder}\n                disabled={disabled}\n                required={required}\n                min={min}\n                max={max}\n                step={step}\n                className={baseInputClass}\n            />\n        );\n    };\n\n    return (\n        <div className=\"space-y-1\">\n            <label htmlFor={name} className=\"block text-sm font-medium text-gray-700\">\n                {label}\n                {required && <span className=\"text-red-500 ml-1\">*</span>}\n            </label>\n            {renderInput()}\n            {error && (\n                <p className=\"text-sm text-red-600 flex items-center gap-1\">\n                    <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n                    </svg>\n                    {error}\n                </p>\n            )}\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;;AAqBe,SAAS,UAAU,EAC9B,KAAK,EACL,IAAI,EACJ,OAAO,MAAM,EACb,KAAK,EACL,QAAQ,EACR,MAAM,EACN,KAAK,EACL,WAAW,EACX,WAAW,KAAK,EAChB,WAAW,KAAK,EAChB,GAAG,EACH,GAAG,EACH,IAAI,EACJ,UAAU,EAAE,EACZ,OAAO,CAAC,EACR,YAAY,EAAE,EACD;IACb,MAAM,iBAAiB,CAAC;;;;;IAKxB,EAAE,QAAQ,sCAAsC,kBAAkB;IAClE,EAAE,UAAU;EACd,CAAC;IAEC,MAAM,cAAc;QAChB,IAAI,SAAS,UAAU;YACnB,qBACI,+PAAC;gBACG,IAAI;gBACJ,MAAM;gBACN,OAAO;gBACP,UAAU;gBACV,QAAQ;gBACR,UAAU;gBACV,UAAU;gBACV,WAAW;;kCAEX,+PAAC;wBAAO,OAAM;;4BAAG;4BAAQ;;;;;;;oBACxB,QAAQ,GAAG,CAAC,CAAC,uBACV,+PAAC;4BAA0B,OAAO,OAAO,KAAK;sCACzC,OAAO,KAAK;2BADJ,OAAO,KAAK;;;;;;;;;;;QAMzC;QAEA,IAAI,SAAS,YAAY;YACrB,qBACI,+PAAC;gBACG,IAAI;gBACJ,MAAM;gBACN,OAAO;gBACP,UAAU;gBACV,QAAQ;gBACR,aAAa;gBACb,UAAU;gBACV,UAAU;gBACV,MAAM;gBACN,WAAW;;;;;;QAGvB;QAEA,qBACI,+PAAC;YACG,IAAI;YACJ,MAAM;YACN,MAAM;YACN,OAAO;YACP,UAAU;YACV,QAAQ;YACR,aAAa;YACb,UAAU;YACV,UAAU;YACV,KAAK;YACL,KAAK;YACL,MAAM;YACN,WAAW;;;;;;IAGvB;IAEA,qBACI,+PAAC;QAAI,WAAU;;0BACX,+PAAC;gBAAM,SAAS;gBAAM,WAAU;;oBAC3B;oBACA,0BAAY,+PAAC;wBAAK,WAAU;kCAAoB;;;;;;;;;;;;YAEpD;YACA,uBACG,+PAAC;gBAAE,WAAU;;kCACT,+PAAC;wBAAI,WAAU;wBAAU,MAAK;wBAAe,SAAQ;kCACjD,cAAA,+PAAC;4BAAK,UAAS;4BAAU,GAAE;4BAAoH,UAAS;;;;;;;;;;;oBAE3J;;;;;;;;;;;;;AAKrB"}},
    {"offset": {"line": 2535, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/lib/storage.ts"],"sourcesContent":["import { supabase } from './supabase';\n\nexport type BucketName = 'policy-documents' | 'claim-documents' | 'rc-copies' | 'quote-documents';\n\n/**\n * Upload file to Supabase Storage\n * @param file - File to upload\n * @param bucket - Storage bucket name\n * @returns Promise<string> - Public URL of uploaded file\n */\nexport async function uploadFile(file: File, bucket: BucketName): Promise<string> {\n    try {\n        // Generate unique filename to prevent duplicates\n        const timestamp = Date.now();\n        const randomStr = Math.random().toString(36).substring(2, 8);\n        const fileExt = file.name.split('.').pop();\n        const fileName = `${timestamp}_${randomStr}.${fileExt}`;\n\n        const { data, error } = await supabase.storage\n            .from(bucket)\n            .upload(fileName, file, {\n                cacheControl: '3600',\n                upsert: true, // Allow overwriting if file exists\n            });\n\n        if (error) throw error;\n\n        // Get public URL\n        const { data: { publicUrl } } = supabase.storage\n            .from(bucket)\n            .getPublicUrl(data.path);\n\n        return publicUrl;\n    } catch (error: any) {\n        console.error('Error uploading file:', error);\n        throw new Error(error.message || 'Failed to upload file');\n    }\n}\n\n/**\n * Upload multiple files to Supabase Storage\n * @param files - Array of files to upload\n * @param bucket - Storage bucket name\n * @returns Promise<string[]> - Array of public URLs\n */\nexport async function uploadMultipleFiles(\n    files: File[],\n    bucket: BucketName\n): Promise<string[]> {\n    try {\n        const uploadPromises = files.map((file) => {\n            return uploadFile(file, bucket);\n        });\n\n        return await Promise.all(uploadPromises);\n    } catch (error: any) {\n        console.error('Error uploading multiple files:', error);\n        throw new Error(error.message || 'Failed to upload files');\n    }\n}\n\n/**\n * Delete a file from Supabase Storage\n * @param path - Full path to file in storage\n */\nexport async function deleteFile(path: string): Promise<void> {\n    try {\n        const { error } = await supabase.storage\n            .from('policy-documents')\n            .remove([path]);\n\n        if (error) throw error;\n    } catch (error: any) {\n        console.error('Error deleting file:', error);\n        throw new Error(error.message || 'Failed to delete file');\n    }\n}\n\n/**\n * Generate storage path for policy documents\n */\nexport function getPolicyStoragePath(\n    userId: string,\n    policyType: 'motor' | 'gmc' | 'commercial' | 'claims',\n    docType: string\n): string {\n    return `${policyType}_policies/${userId}/${docType}`;\n}\n\n/**\n * Create storage bucket if it doesn't exist (run once on setup)\n */\nexport async function initializeStorage(): Promise<void> {\n    try {\n        // Check if bucket exists\n        const { data: buckets } = await supabase.storage.listBuckets();\n\n        const bucketExists = buckets?.some((bucket: any) => bucket.name === 'policy-documents');\n\n        if (!bucketExists) {\n            // Create bucket\n            const { error } = await supabase.storage.createBucket('policy-documents', {\n                public: true,\n                fileSizeLimit: 52428800, // 50MB\n                allowedMimeTypes: ['application/pdf', 'image/*'],\n            });\n\n            if (error) {\n                console.error('Error creating storage bucket:', error);\n            } else {\n                console.log('Storage bucket created successfully');\n            }\n        }\n    } catch (error) {\n        console.error('Error initializing storage:', error);\n    }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;AAUO,eAAe,WAAW,IAAU,EAAE,MAAkB;IAC3D,IAAI;QACA,iDAAiD;QACjD,MAAM,YAAY,KAAK,GAAG;QAC1B,MAAM,YAAY,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC,GAAG;QAC1D,MAAM,UAAU,KAAK,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG;QACxC,MAAM,WAAW,GAAG,UAAU,CAAC,EAAE,UAAU,CAAC,EAAE,SAAS;QAEvD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,4IAAQ,CAAC,OAAO,CACzC,IAAI,CAAC,QACL,MAAM,CAAC,UAAU,MAAM;YACpB,cAAc;YACd,QAAQ;QACZ;QAEJ,IAAI,OAAO,MAAM;QAEjB,iBAAiB;QACjB,MAAM,EAAE,MAAM,EAAE,SAAS,EAAE,EAAE,GAAG,4IAAQ,CAAC,OAAO,CAC3C,IAAI,CAAC,QACL,YAAY,CAAC,KAAK,IAAI;QAE3B,OAAO;IACX,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,yBAAyB;QACvC,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI;IACrC;AACJ;AAQO,eAAe,oBAClB,KAAa,EACb,MAAkB;IAElB,IAAI;QACA,MAAM,iBAAiB,MAAM,GAAG,CAAC,CAAC;YAC9B,OAAO,WAAW,MAAM;QAC5B;QAEA,OAAO,MAAM,QAAQ,GAAG,CAAC;IAC7B,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,mCAAmC;QACjD,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI;IACrC;AACJ;AAMO,eAAe,WAAW,IAAY;IACzC,IAAI;QACA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,4IAAQ,CAAC,OAAO,CACnC,IAAI,CAAC,oBACL,MAAM,CAAC;YAAC;SAAK;QAElB,IAAI,OAAO,MAAM;IACrB,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,wBAAwB;QACtC,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI;IACrC;AACJ;AAKO,SAAS,qBACZ,MAAc,EACd,UAAqD,EACrD,OAAe;IAEf,OAAO,GAAG,WAAW,UAAU,EAAE,OAAO,CAAC,EAAE,SAAS;AACxD;AAKO,eAAe;IAClB,IAAI;QACA,yBAAyB;QACzB,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,4IAAQ,CAAC,OAAO,CAAC,WAAW;QAE5D,MAAM,eAAe,SAAS,KAAK,CAAC,SAAgB,OAAO,IAAI,KAAK;QAEpE,IAAI,CAAC,cAAc;YACf,gBAAgB;YAChB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,4IAAQ,CAAC,OAAO,CAAC,YAAY,CAAC,oBAAoB;gBACtE,QAAQ;gBACR,eAAe;gBACf,kBAAkB;oBAAC;oBAAmB;iBAAU;YACpD;YAEA,IAAI,OAAO;gBACP,QAAQ,KAAK,CAAC,kCAAkC;YACpD,OAAO;gBACH,QAAQ,GAAG,CAAC;YAChB;QACJ;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,+BAA+B;IACjD;AACJ"}},
    {"offset": {"line": 2623, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/forms/FileUpload.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef } from 'react';\nimport { Upload, X, File, CheckCircle } from 'lucide-react';\nimport { uploadFile, BucketName } from '@/lib/storage';\n\ninterface FileUploadProps {\n    label: string;\n    name: string;\n    accept?: string;\n    bucket: BucketName;\n    onUploadComplete: (url: string, fileName: string) => void;\n    existingFile?: { url: string; name: string };\n    required?: boolean;\n    maxSizeMB?: number;\n}\n\nexport default function FileUpload({\n    label,\n    name,\n    accept = '.pdf,.jpg,.jpeg,.png',\n    bucket,\n    onUploadComplete,\n    existingFile,\n    required = false,\n    maxSizeMB = 5,\n}: FileUploadProps) {\n    const [file, setFile] = useState<File | null>(null);\n    const [preview, setPreview] = useState<string | null>(existingFile?.url || null);\n    const [fileName, setFileName] = useState<string>(existingFile?.name || '');\n    const [uploading, setUploading] = useState(false);\n    const [progress, setProgress] = useState(0);\n    const [error, setError] = useState<string>('');\n    const fileInputRef = useRef<HTMLInputElement>(null);\n\n    const handleFileSelect = async (selectedFile: File) => {\n        setError('');\n\n        // Validate file size\n        if (selectedFile.size > maxSizeMB * 1024 * 1024) {\n            setError(`File size must be less than ${maxSizeMB}MB`);\n            return;\n        }\n\n        setFile(selectedFile);\n        setFileName(selectedFile.name);\n\n        // Show preview for images\n        if (selectedFile.type.startsWith('image/')) {\n            const reader = new FileReader();\n            reader.onload = (e) => {\n                setPreview(e.target?.result as string);\n            };\n            reader.readAsDataURL(selectedFile);\n        } else {\n            setPreview(null);\n        }\n\n        // Auto-upload\n        await uploadFileToStorage(selectedFile);\n    };\n\n    const uploadFileToStorage = async (fileToUpload: File) => {\n        setUploading(true);\n        setProgress(0);\n\n        try {\n            // Simulate progress\n            const progressInterval = setInterval(() => {\n                setProgress((prev) => Math.min(prev + 10, 90));\n            }, 200);\n\n            const fileUrl = await uploadFile(fileToUpload, bucket);\n\n            clearInterval(progressInterval);\n            setProgress(100);\n            setUploading(false);\n\n            onUploadComplete(fileUrl, fileToUpload.name);\n        } catch (err) {\n            console.error('Upload error:', err);\n            setError('Failed to upload file. Please try again.');\n            setUploading(false);\n            setFile(null);\n            setPreview(null);\n        }\n    };\n\n    const handleDrop = (e: React.DragEvent) => {\n        e.preventDefault();\n        const droppedFile = e.dataTransfer.files[0];\n        if (droppedFile) {\n            handleFileSelect(droppedFile);\n        }\n    };\n\n    const handleDragOver = (e: React.DragEvent) => {\n        e.preventDefault();\n    };\n\n    const handleRemove = () => {\n        setFile(null);\n        setPreview(null);\n        setFileName('');\n        setProgress(0);\n        setError('');\n        if (fileInputRef.current) {\n            fileInputRef.current.value = '';\n        }\n    };\n\n    return (\n        <div className=\"space-y-2\">\n            <label className=\"block text-sm font-medium text-gray-700\">\n                {label}\n                {required && <span className=\"text-red-500 ml-1\">*</span>}\n            </label>\n\n            {!file && !existingFile ? (\n                <div\n                    onDrop={handleDrop}\n                    onDragOver={handleDragOver}\n                    onClick={() => fileInputRef.current?.click()}\n                    className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-primary-500 transition-colors\"\n                >\n                    <Upload className=\"w-8 h-8 text-gray-400 mx-auto mb-2\" />\n                    <p className=\"text-sm text-gray-600 mb-1\">\n                        Click to upload or drag and drop\n                    </p>\n                    <p className=\"text-xs text-gray-500\">\n                        {accept.toUpperCase()} (Max {maxSizeMB}MB)\n                    </p>\n                    <input\n                        ref={fileInputRef}\n                        type=\"file\"\n                        accept={accept}\n                        onChange={(e) => e.target.files?.[0] && handleFileSelect(e.target.files[0])}\n                        className=\"hidden\"\n                    />\n                </div>\n            ) : (\n                <div className=\"border border-gray-300 rounded-lg p-4\">\n                    <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center space-x-3 flex-1\">\n                            {preview ? (\n                                <img src={preview} alt=\"Preview\" className=\"w-16 h-16 object-cover rounded\" />\n                            ) : (\n                                <File className=\"w-8 h-8 text-gray-400\" />\n                            )}\n                            <div className=\"flex-1 min-w-0\">\n                                <p className=\"text-sm font-medium text-gray-900 truncate\">{fileName}</p>\n                                {uploading && (\n                                    <div className=\"mt-2\">\n                                        <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                                            <div\n                                                className=\"bg-primary-600 h-2 rounded-full transition-all\"\n                                                style={{ width: `${progress}%` }}\n                                            />\n                                        </div>\n                                        <p className=\"text-xs text-gray-500 mt-1\">Uploading... {progress}%</p>\n                                    </div>\n                                )}\n                                {!uploading && progress === 100 && (\n                                    <p className=\"text-xs text-green-600 flex items-center gap-1 mt-1\">\n                                        <CheckCircle className=\"w-3 h-3\" />\n                                        Uploaded successfully\n                                    </p>\n                                )}\n                            </div>\n                        </div>\n                        {!uploading && (\n                            <button\n                                type=\"button\"\n                                onClick={handleRemove}\n                                className=\"text-red-600 hover:text-red-800 p-1 ml-4 hover:bg-red-50 rounded-full transition-colors\"\n                            >\n                                <X className=\"w-5 h-5\" />\n                            </button>\n                        )}\n                    </div>\n                </div>\n            )}\n\n            {error && (\n                <p className=\"text-sm text-red-600 flex items-center gap-1\">\n                    <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n                    </svg>\n                    {error}\n                </p>\n            )}\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2948, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/forms/QuoteRequestForm.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport { X, Save, Loader2 } from 'lucide-react';\nimport { QuoteRequest } from '@/types';\nimport FormInput from './FormInput';\nimport FileUpload from './FileUpload';\nimport { addQuoteRequest } from '@/lib/db';\n\ninterface QuoteRequestFormProps {\n    userId: string;\n    onClose: () => void;\n    onSuccess: () => void;\n}\n\nexport default function QuoteRequestForm({ userId, onClose, onSuccess }: QuoteRequestFormProps) {\n    const [loading, setLoading] = useState(false);\n    const [errors, setErrors] = useState<Record<string, string>>({});\n\n    const [formData, setFormData] = useState({\n        lob_type: 'Motor',\n        details: '',\n        uploaded_quote: '',\n        has_better_quote: false\n    });\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {\n        const { name, value, type } = e.target;\n\n        if (type === 'checkbox') {\n            setFormData(prev => ({\n                ...prev,\n                [name]: (e.target as HTMLInputElement).checked\n            }));\n        } else {\n            setFormData(prev => ({\n                ...prev,\n                [name]: value\n            }));\n        }\n\n        if (errors[name]) {\n            setErrors(prev => {\n                const newErrors = { ...prev };\n                delete newErrors[name];\n                return newErrors;\n            });\n        }\n    };\n\n    const validateForm = (): boolean => {\n        const newErrors: Record<string, string> = {};\n\n        if (!formData.details) newErrors.details = 'Please provide some details about your requirement';\n\n        setErrors(newErrors);\n        return Object.keys(newErrors).length === 0;\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n\n        if (!validateForm()) return;\n\n        setLoading(true);\n        try {\n            await addQuoteRequest({\n                user_id: userId,\n                lob_type: formData.lob_type as any,\n                details: formData.details,\n                uploaded_quote: formData.uploaded_quote,\n                has_better_quote: formData.has_better_quote,\n                status: 'New'\n            });\n\n            onSuccess();\n            onClose();\n        } catch (error) {\n            console.error('Error saving quote request:', error);\n            setErrors(prev => ({ ...prev, submit: 'Failed to submit request. Please try again.' }));\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleFileUpload = (url: string) => {\n        setFormData(prev => ({\n            ...prev,\n            uploaded_quote: url\n        }));\n    };\n\n    return (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto\">\n            <div className=\"bg-white rounded-xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto\">\n                <div className=\"flex items-center justify-between p-6 border-b sticky top-0 bg-white z-10\">\n                    <h2 className=\"text-xl font-bold text-gray-900\">\n                        Request a Quote\n                    </h2>\n                    <button onClick={onClose} className=\"text-gray-500 hover:text-gray-700\">\n                        <X className=\"w-6 h-6\" />\n                    </button>\n                </div>\n\n                <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n                    {errors.submit && (\n                        <div className=\"bg-red-50 text-red-600 p-4 rounded-lg text-sm\">\n                            {errors.submit}\n                        </div>\n                    )}\n\n                    <div className=\"space-y-4\">\n                        <FormInput\n                            label=\"Insurance Type\"\n                            name=\"lob_type\"\n                            type=\"select\"\n                            value={formData.lob_type}\n                            onChange={handleChange}\n                            options={[\n                                { value: 'Motor', label: 'Motor Insurance' },\n                                { value: 'Health', label: 'Health Insurance' },\n                                { value: 'Life', label: 'Life Insurance' },\n                                { value: 'Others', label: 'Other Insurance' }\n                            ]}\n                            required\n                        />\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                                Requirement Details\n                            </label>\n                            <textarea\n                                name=\"details\"\n                                value={formData.details}\n                                onChange={handleChange}\n                                rows={4}\n                                className={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-all ${errors.details ? 'border-red-500 bg-red-50' : 'border-gray-300'\n                                    }`}\n                                placeholder=\"Describe what you are looking for (e.g., Comprehensive car insurance for Honda City 2020)...\"\n                            />\n                            {errors.details && <p className=\"text-red-500 text-xs mt-1\">{errors.details}</p>}\n                        </div>\n\n                        <div className=\"flex items-center space-x-2\">\n                            <input\n                                type=\"checkbox\"\n                                id=\"has_better_quote\"\n                                name=\"has_better_quote\"\n                                checked={formData.has_better_quote}\n                                onChange={handleChange}\n                                className=\"rounded border-gray-300 text-primary-600 focus:ring-primary-500\"\n                            />\n                            <label htmlFor=\"has_better_quote\" className=\"text-sm text-gray-700\">\n                                I have a quote from another insurer\n                            </label>\n                        </div>\n\n                        {formData.has_better_quote && (\n                            <FileUpload\n                                label=\"Upload Existing Quote (Optional)\"\n                                name=\"uploaded_quote\"\n                                bucket=\"quote-documents\"\n                                onUploadComplete={handleFileUpload}\n                                existingFile={formData.uploaded_quote ? { url: formData.uploaded_quote, name: 'Existing Quote' } : undefined}\n                            />\n                        )}\n                    </div>\n\n                    <div className=\"flex justify-end space-x-4 pt-6 border-t\">\n                        <button\n                            type=\"button\"\n                            onClick={onClose}\n                            className=\"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\"\n                            disabled={loading}\n                        >\n                            Cancel\n                        </button>\n                        <button\n                            type=\"submit\"\n                            className=\"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center\"\n                            disabled={loading}\n                        >\n                            {loading ? (\n                                <>\n                                    <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                                    Submitting...\n                                </>\n                            ) : (\n                                <>\n                                    <Save className=\"w-4 h-4 mr-2\" />\n                                    Submit Request\n                                </>\n                            )}\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3278, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/dashboard/StickyAddPolicy.tsx"],"sourcesContent":["import { useState } from 'react';\nimport { Plus } from 'lucide-react';\nimport QuoteRequestForm from '@/components/forms/QuoteRequestForm';\n\nexport default function StickyAddPolicy({ userId, className = '' }: { userId: string, className?: string }) {\n    const [isModalOpen, setIsModalOpen] = useState(false);\n\n    return (\n        <>\n            <div className={`relative z-50 flex flex-col items-end ${className}`}>\n                <button\n                    onClick={() => setIsModalOpen(true)}\n                    className=\"h-10 px-4 rounded-full shadow-lg shadow-primary-500/50 flex items-center justify-center text-white bg-primary-600 transition-all duration-300 hover:scale-105 hover:shadow-primary-500/70 focus:outline-none focus:ring-2 focus:ring-primary-200 animate-pulse-slow\"\n                >\n                    <Plus className=\"w-5 h-5 mr-1\" />\n                    <span className=\"font-semibold text-sm\">New</span>\n                </button>\n            </div>\n\n            {isModalOpen && (\n                <QuoteRequestForm\n                    userId={userId}\n                    onClose={() => setIsModalOpen(false)}\n                    onSuccess={() => {\n                        setIsModalOpen(false);\n                        window.location.reload();\n                    }}\n                />\n            )}\n        </>\n    );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAEe,SAAS,gBAAgB,EAAE,MAAM,EAAE,YAAY,EAAE,EAA0C;IACtG,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,kOAAQ,EAAC;IAE/C,qBACI;;0BACI,+PAAC;gBAAI,WAAW,CAAC,sCAAsC,EAAE,WAAW;0BAChE,cAAA,+PAAC;oBACG,SAAS,IAAM,eAAe;oBAC9B,WAAU;;sCAEV,+PAAC,2NAAI;4BAAC,WAAU;;;;;;sCAChB,+PAAC;4BAAK,WAAU;sCAAwB;;;;;;;;;;;;;;;;;YAI/C,6BACG,+PAAC,oKAAgB;gBACb,QAAQ;gBACR,SAAS,IAAM,eAAe;gBAC9B,WAAW;oBACP,eAAe;oBACf,OAAO,QAAQ,CAAC,MAAM;gBAC1B;;;;;;;;AAKpB"}},
    {"offset": {"line": 3363, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/lib/exportUtils.ts"],"sourcesContent":["import jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\nimport * as XLSX from 'xlsx';\nimport { DashboardSummary, MotorPolicy, HealthPolicy, CommercialPolicy } from '@/types';\nimport { formatCurrency, formatDate, calculatePolicyStatus } from './utils';\n\n// Export dashboard as PDF\nexport async function exportDashboardToPDF(\n    element: HTMLElement,\n    filename: string = 'dashboard.pdf'\n): Promise<void> {\n    try {\n        // Capture the dashboard element as canvas\n        const canvas = await html2canvas(element, {\n            scale: 2,\n            useCORS: true,\n            logging: false,\n            backgroundColor: '#ffffff'\n        });\n\n        const imgData = canvas.toDataURL('image/png');\n        const pdf = new jsPDF({\n            orientation: 'portrait',\n            unit: 'mm',\n            format: 'a4'\n        });\n\n        const imgWidth = 210; // A4 width in mm\n        const pageHeight = 297; // A4 height in mm\n        const imgHeight = (canvas.height * imgWidth) / canvas.width;\n        let heightLeft = imgHeight;\n        let position = 0;\n\n        // Add first page\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n        heightLeft -= pageHeight;\n\n        // Add additional pages if needed\n        while (heightLeft > 0) {\n            position = heightLeft - imgHeight;\n            pdf.addPage();\n            pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n            heightLeft -= pageHeight;\n        }\n\n        pdf.save(filename);\n    } catch (error) {\n        console.error('Error generating PDF:', error);\n        throw new Error('Failed to generate PDF');\n    }\n}\n\n// Export policies by type\nexport async function exportPoliciesByType(\n    policyType: 'Motor' | 'Health' | 'Travel' | 'Commercial' | 'Life' | 'Cyber',\n    policies: any[],\n    userName: string\n): Promise<void> {\n    try {\n        const pdf = new jsPDF();\n        const pageWidth = pdf.internal.pageSize.getWidth();\n        const pageHeight = pdf.internal.pageSize.getHeight();\n        let yPosition = 20;\n\n        // Add header\n        pdf.setFontSize(20);\n        pdf.setTextColor(40, 40, 40);\n        pdf.text(`${policyType} Policies`, pageWidth / 2, yPosition, { align: 'center' });\n\n        yPosition += 10;\n        pdf.setFontSize(12);\n        pdf.setTextColor(100, 100, 100);\n        pdf.text(`Report for: ${userName}`, pageWidth / 2, yPosition, { align: 'center' });\n        pdf.text(`Generated on: ${new Date().toLocaleDateString()}`, pageWidth / 2, yPosition + 5, { align: 'center' });\n\n        yPosition += 15;\n\n        // Add policies\n        pdf.setFontSize(10);\n        pdf.setTextColor(0, 0, 0);\n\n        if (policies.length === 0) {\n            pdf.text('No policies found', 20, yPosition);\n        } else {\n            policies.forEach((policy, index) => {\n                if (yPosition > pageHeight - 40) {\n                    pdf.addPage();\n                    yPosition = 20;\n                }\n\n                // Policy number\n                pdf.setFont('helvetica', 'bold');\n                pdf.text(`Policy ${index + 1}: ${policy.policy_number || 'N/A'}`, 20, yPosition);\n                yPosition += 6;\n\n                pdf.setFont('helvetica', 'normal');\n\n                // Policy details based on type\n                if (policyType === 'Motor') {\n                    pdf.text(`Vehicle: ${policy.vehicle_number || 'N/A'}`, 25, yPosition);\n                    yPosition += 5;\n                    pdf.text(`Make/Model: ${policy.make || 'N/A'} ${policy.model || 'N/A'}`, 25, yPosition);\n                    yPosition += 5;\n                } else if (policyType === 'Health') {\n                    pdf.text(`Sum Insured: ${policy.sum_insured ? formatCurrency(policy.sum_insured) : 'N/A'}`, 25, yPosition);\n                    yPosition += 5;\n                    pdf.text(`Members: ${policy.no_of_lives || 'N/A'}`, 25, yPosition);\n                    yPosition += 5;\n                }\n\n                // Common fields\n                pdf.text(`Insurer: ${policy.insurer_name || 'N/A'}`, 25, yPosition);\n                yPosition += 5;\n                pdf.text(`Premium: ${policy.premium_amount ? formatCurrency(policy.premium_amount) : 'N/A'}`, 25, yPosition);\n                yPosition += 5;\n\n                const expiryDate = policy.expiry_date || policy.policy_end_date;\n                if (expiryDate) {\n                    const status = calculatePolicyStatus(new Date(expiryDate));\n                    pdf.text(`Expiry: ${formatDate(new Date(expiryDate))} - ${status}`, 25, yPosition);\n                    yPosition += 5;\n                }\n\n                yPosition += 5; // Space between policies\n            });\n        }\n\n        // Add footer\n        const totalPages = pdf.internal.pages.length - 1;\n        for (let i = 1; i <= totalPages; i++) {\n            pdf.setPage(i);\n            pdf.setFontSize(8);\n            pdf.setTextColor(150, 150, 150);\n            pdf.text(\n                `Page ${i} of ${totalPages}`,\n                pageWidth / 2,\n                pageHeight - 10,\n                { align: 'center' }\n            );\n        }\n\n        pdf.save(`${policyType.toLowerCase()}_policies.pdf`);\n    } catch (error) {\n        console.error('Error generating policies PDF:', error);\n        throw new Error('Failed to generate policies PDF');\n    }\n}\n\n// Export policies by date range\nexport async function exportPoliciesByDate(\n    startDate: Date,\n    endDate: Date,\n    allPolicies: any[],\n    userName: string,\n    filename?: string\n): Promise<void> {\n    try {\n        // Filter policies by creation date\n        const filteredPolicies = allPolicies.filter(policy => {\n            const createdAt = new Date(policy.created_at);\n            return createdAt >= startDate && createdAt <= endDate;\n        });\n\n        const pdf = new jsPDF();\n        const pageWidth = pdf.internal.pageSize.getWidth();\n        const pageHeight = pdf.internal.pageSize.getHeight();\n        const marginLeft = 20;\n        const marginRight = 20;\n        const contentWidth = pageWidth - marginLeft - marginRight;\n        let yPosition = 20;\n\n        // Helper function to check if we need a new page\n        const checkNewPage = (requiredSpace: number) => {\n            if (yPosition + requiredSpace > pageHeight - 20) {\n                pdf.addPage();\n                yPosition = 20;\n                return true;\n            }\n            return false;\n        };\n\n        // Add header\n        pdf.setFontSize(18);\n        pdf.setFont('helvetica', 'bold');\n        pdf.setTextColor(40, 40, 40);\n        pdf.text('INSURANCE PORTFOLIO EXPORT REPORT', pageWidth / 2, yPosition, { align: 'center' });\n\n        yPosition += 10;\n        pdf.setFontSize(10);\n        pdf.setFont('helvetica', 'normal');\n        pdf.setTextColor(100, 100, 100);\n        pdf.text(`Report for: ${userName}`, pageWidth / 2, yPosition, { align: 'center' });\n        yPosition += 5;\n        pdf.text(\n            `Period: ${formatDate(startDate)} to ${formatDate(endDate)}`,\n            pageWidth / 2,\n            yPosition,\n            { align: 'center' }\n        );\n        yPosition += 5;\n        pdf.text(`Generated on: ${new Date().toLocaleDateString()}`, pageWidth / 2, yPosition, { align: 'center' });\n\n        yPosition += 12;\n\n        if (filteredPolicies.length === 0) {\n            pdf.setFontSize(11);\n            pdf.setTextColor(60, 60, 60);\n            pdf.text('No policies found for this date range', pageWidth / 2, yPosition, { align: 'center' });\n        } else {\n            // Group policies by type for summary\n            const policyGroups = filteredPolicies.reduce((acc: any, policy) => {\n                const type = policy.vehicle_number ? 'Motor' : policy.no_of_lives !== undefined ? 'Health' : policy.lob_type || 'Other';\n                if (!acc[type]) acc[type] = [];\n                acc[type].push(policy);\n                return acc;\n            }, {});\n\n            // Render each policy card\n            filteredPolicies.forEach((policy, index) => {\n                const policyType = policy.vehicle_number ? 'Motor' : policy.no_of_lives !== undefined ? 'Health' : policy.lob_type || 'Other';\n                const expiryDate = policy.expiry_date || policy.policy_end_date;\n                const status = expiryDate ? calculatePolicyStatus(new Date(expiryDate)) : 'N/A';\n\n                // Check if we need a new page (estimate ~50mm per card)\n                checkNewPage(55);\n\n                // Card header - Policy number and status\n                pdf.setFont('helvetica', 'bold');\n                pdf.setFontSize(11);\n                pdf.setTextColor(40, 40, 40);\n                pdf.text(`${policyType.toUpperCase()} POLICY #${index + 1}`, marginLeft, yPosition);\n\n                // Status badge\n                const statusColors: Record<string, [number, number, number]> = { 'Active': [34, 197, 94], 'Expiring Soon': [251, 191, 36], 'Expired': [239, 68, 68] };\n                const statusColor: [number, number, number] = statusColors[status] || [100, 100, 100];\n                pdf.setTextColor(statusColor[0], statusColor[1], statusColor[2]);\n                pdf.setFontSize(9);\n                pdf.text(`‚óè ${status}`, pageWidth - marginRight - 30, yPosition, { align: 'right' });\n\n                yPosition += 6;\n\n                // Draw card border\n                pdf.setDrawColor(200, 200, 200);\n                pdf.setLineWidth(0.2);\n                const cardTop = yPosition - 2;\n\n                // Policy details\n                pdf.setFontSize(9);\n                pdf.setTextColor(60, 60, 60);\n                pdf.setFont('helvetica', 'normal');\n\n                pdf.text(`Policy Number: ${policy.policy_number || 'N/A'}`, marginLeft + 2, yPosition);\n                yPosition += 5;\n                pdf.text(`Insurer: ${policy.insurer_name || 'N/A'}`, marginLeft + 2, yPosition);\n                yPosition += 6;\n\n                // Type-specific details\n                if (policyType === 'Motor') {\n                    // Vehicle Details section\n                    pdf.setFont('helvetica', 'bold');\n                    pdf.setFontSize(8.5);\n                    pdf.setTextColor(80, 80, 80);\n                    pdf.text('VEHICLE DETAILS', marginLeft + 2, yPosition);\n                    yPosition += 4;\n\n                    pdf.setFont('helvetica', 'normal');\n                    pdf.setFontSize(8);\n                    pdf.setTextColor(60, 60, 60);\n                    pdf.text(`‚îú‚îÄ Vehicle Number: ${policy.vehicle_number || 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 4;\n                    pdf.text(`‚îú‚îÄ Type: ${policy.vehicle_type || 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 4;\n                    pdf.text(`‚îú‚îÄ Make/Model: ${policy.manufacturer || ''} ${policy.model || ''}`.trim() || 'N/A', marginLeft + 4, yPosition);\n                    yPosition += 4;\n                    pdf.text(`‚îú‚îÄ Fuel Type: ${policy.fuel_type || 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 4;\n                    pdf.text(`‚îú‚îÄ Mfg Year: ${policy.manufacturing_year || 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 4;\n                    pdf.text(`‚îú‚îÄ Plate Type: ${policy.number_plate_type || 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 4;\n                    pdf.text(`‚îî‚îÄ Ownership: ${policy.ownership_type || 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 6;\n\n                    // Financial section\n                    pdf.setFont('helvetica', 'bold');\n                    pdf.setFontSize(8.5);\n                    pdf.text('FINANCIAL', marginLeft + 2, yPosition);\n                    yPosition += 4;\n                    pdf.setFont('helvetica', 'normal');\n                    pdf.setFontSize(8);\n                    pdf.text(`Premium: ${policy.premium_amount ? formatCurrency(policy.premium_amount) : 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 6;\n\n                    // Coverage Period\n                    pdf.setFont('helvetica', 'bold');\n                    pdf.setFontSize(8.5);\n                    pdf.text('COVERAGE PERIOD', marginLeft + 2, yPosition);\n                    yPosition += 4;\n                    pdf.setFont('helvetica', 'normal');\n                    pdf.setFontSize(8);\n                    pdf.text(`‚îú‚îÄ Start: ${policy.policy_start_date ? formatDate(new Date(policy.policy_start_date)) : 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 4;\n                    pdf.text(`‚îú‚îÄ End: ${policy.policy_end_date ? formatDate(new Date(policy.policy_end_date)) : 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 4;\n\n                    pdf.text(`‚îî‚îÄ Created: ${formatDate(new Date(policy.created_at))}`, marginLeft + 4, yPosition);\n                    yPosition += 2;\n\n                } else if (policyType === 'Health') {\n                    // Health/GMC Details\n                    pdf.setFont('helvetica', 'bold');\n                    pdf.setFontSize(8.5);\n                    pdf.text('COVERAGE DETAILS', marginLeft + 2, yPosition);\n                    yPosition += 4;\n\n                    pdf.setFont('helvetica', 'normal');\n                    pdf.setFontSize(8);\n                    if (policy.company_name) {\n                        pdf.text(`‚îú‚îÄ Company: ${policy.company_name}`, marginLeft + 4, yPosition);\n                        yPosition += 4;\n                    }\n                    pdf.text(`‚îú‚îÄ Sum Insured: ${policy.sum_insured ? formatCurrency(policy.sum_insured) : 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 4;\n                    pdf.text(`‚îî‚îÄ Lives Covered: ${policy.no_of_lives || 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 6;\n\n                    // Financial\n                    pdf.setFont('helvetica', 'bold');\n                    pdf.setFontSize(8.5);\n                    pdf.text('FINANCIAL', marginLeft + 2, yPosition);\n                    yPosition += 4;\n                    pdf.setFont('helvetica', 'normal');\n                    pdf.setFontSize(8);\n                    pdf.text(`Premium: ${policy.premium_amount ? formatCurrency(policy.premium_amount) : 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 6;\n\n                    // Policy Period\n                    pdf.setFont('helvetica', 'bold');\n                    pdf.setFontSize(8.5);\n                    pdf.text('POLICY PERIOD', marginLeft + 2, yPosition);\n                    yPosition += 4;\n                    pdf.setFont('helvetica', 'normal');\n                    pdf.setFontSize(8);\n                    pdf.text(`‚îú‚îÄ Expiry: ${expiryDate ? formatDate(new Date(expiryDate)) : 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 4;\n                    pdf.text(`‚îî‚îÄ Created: ${formatDate(new Date(policy.created_at))}`, marginLeft + 4, yPosition);\n                    yPosition += 2;\n\n                } else {\n                    // Commercial/Other\n                    pdf.setFont('helvetica', 'bold');\n                    pdf.setFontSize(8.5);\n                    pdf.text('POLICY DETAILS', marginLeft + 2, yPosition);\n                    yPosition += 4;\n\n                    pdf.setFont('helvetica', 'normal');\n                    pdf.setFontSize(8);\n                    if (policy.lob_type) {\n                        pdf.text(`‚îú‚îÄ LOB Type: ${policy.lob_type}`, marginLeft + 4, yPosition);\n                        yPosition += 4;\n                    }\n                    if (policy.company_name) {\n                        pdf.text(`‚îú‚îÄ Company: ${policy.company_name}`, marginLeft + 4, yPosition);\n                        yPosition += 4;\n                    }\n                    if (policy.policy_holder_name) {\n                        pdf.text(`‚îú‚îÄ Policy Holder: ${policy.policy_holder_name}`, marginLeft + 4, yPosition);\n                        yPosition += 4;\n                    }\n                    pdf.text(`‚îú‚îÄ Sum Insured: ${policy.sum_insured ? formatCurrency(policy.sum_insured) : 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 4;\n                    pdf.text(`‚îú‚îÄ Premium: ${policy.premium_amount ? formatCurrency(policy.premium_amount) : 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 4;\n                    pdf.text(`‚îú‚îÄ Expiry: ${expiryDate ? formatDate(new Date(expiryDate)) : 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 4;\n                    pdf.text(`‚îî‚îÄ Created: ${formatDate(new Date(policy.created_at))}`, marginLeft + 4, yPosition);\n                    yPosition += 2;\n                }\n\n                // Draw card border (rounded rect)\n                const cardHeight = yPosition - cardTop;\n                pdf.rect(marginLeft, cardTop, contentWidth, cardHeight);\n\n                yPosition += 6; // Space after card\n            });\n\n            // Summary section\n            checkNewPage(30);\n            yPosition += 4;\n\n            // Draw summary box\n            pdf.setDrawColor(200, 200, 200);\n            pdf.setFillColor(245, 245, 245);\n            pdf.rect(marginLeft, yPosition, contentWidth, 25, 'FD');\n\n            yPosition += 5;\n            pdf.setFont('helvetica', 'bold');\n            pdf.setFontSize(10);\n            pdf.setTextColor(40, 40, 40);\n            pdf.text('SUMMARY', marginLeft + 2, yPosition);\n            yPosition += 6;\n\n            pdf.setFont('helvetica', 'normal');\n            pdf.setFontSize(9);\n            pdf.setTextColor(60, 60, 60);\n\n            const totalPremium = filteredPolicies.reduce((sum, p) => sum + (Number(p.premium_amount) || 0), 0);\n            pdf.text(`Total Policies: ${filteredPolicies.length}`, marginLeft + 2, yPosition);\n            yPosition += 5;\n\n            // Breakdown by type\n            const typeBreakdown = Object.entries(policyGroups)\n                .map(([type, policies]: [string, any]) => `${type}: ${formatCurrency(policies.reduce((sum: number, p: any) => sum + (Number(p.premium_amount) || 0), 0))} (${policies.length} policies)`)\n                .join(' | ');\n            pdf.text(`‚îú‚îÄ ${typeBreakdown}`, marginLeft + 2, yPosition);\n            yPosition += 6;\n\n            pdf.setFont('helvetica', 'bold');\n            pdf.text(`Total Premium: ${formatCurrency(totalPremium)}`, marginLeft + 2, yPosition);\n        }\n\n        // Add footer to all pages\n        const totalPages = pdf.internal.pages.length - 1;\n        for (let i = 1; i <= totalPages; i++) {\n            pdf.setPage(i);\n            pdf.setFontSize(8);\n            pdf.setFont('helvetica', 'normal');\n            pdf.setTextColor(150, 150, 150);\n            pdf.text(\n                `Page ${i} of ${totalPages}`,\n                pageWidth / 2,\n                pageHeight - 10,\n                { align: 'center' }\n            );\n        }\n\n        pdf.save(filename || `policies_${startDate.toISOString().split('T')[0]}_to_${endDate.toISOString().split('T')[0]}.pdf`);\n    } catch (error) {\n        console.error('Error generating date range PDF:', error);\n        throw new Error('Failed to generate date range PDF');\n    }\n}\n\n\n// Helper to prepare data for Excel/CSV\nfunction prepareDataForExport(policies: any[]) {\n    return policies.map(policy => {\n        const expiryDate = policy.expiry_date || policy.policy_end_date;\n        const status = expiryDate ? calculatePolicyStatus(new Date(expiryDate)) : 'N/A';\n\n        // Motor specific (15 fields)\n        if (policy.vehicle_number) {\n            return {\n                'Policy Number': policy.policy_number || 'N/A',\n                'Status': status,\n                'Insurer Name': policy.insurer_name || 'N/A',\n                'Vehicle Number': policy.vehicle_number || 'N/A',\n                'Vehicle Type': policy.vehicle_type || 'N/A',\n                'Manufacturer': policy.manufacturer || 'N/A',\n                'Model': policy.model || 'N/A',\n                'Fuel Type': policy.fuel_type || 'N/A',\n                'Mfg Year': policy.manufacturing_year || 'N/A',\n                'Plate Type': policy.number_plate_type || 'N/A',\n                'Ownership': policy.ownership_type || 'N/A',\n                'Premium': policy.premium_amount ? formatCurrency(policy.premium_amount) : 'N/A',\n                'Start Date': policy.policy_start_date ? formatDate(new Date(policy.policy_start_date)) : 'N/A',\n                'End Date': policy.policy_end_date ? formatDate(new Date(policy.policy_end_date)) : 'N/A',\n                'Created On': policy.created_at ? formatDate(new Date(policy.created_at)) : 'N/A',\n            };\n        }\n\n        // Health specific (9 fields)\n        if (policy.no_of_lives !== undefined || policy.sum_insured !== undefined) {\n            return {\n                'Policy Number': policy.policy_number || 'N/A',\n                'Status': status,\n                'Insurer Name': policy.insurer_name || 'N/A',\n                'Company Name': policy.company_name || 'N/A',\n                'Sum Insured': policy.sum_insured ? formatCurrency(policy.sum_insured) : 'N/A',\n                'No. of Lives': policy.no_of_lives || 'N/A',\n                'Premium': policy.premium_amount ? formatCurrency(policy.premium_amount) : 'N/A',\n                'Expiry Date': expiryDate ? formatDate(new Date(expiryDate)) : 'N/A',\n                'Created On': policy.created_at ? formatDate(new Date(policy.created_at)) : 'N/A',\n            };\n        }\n\n        // Commercial specific (10 fields)\n        if (policy.lob_type && ['GPA', 'Fire', 'Other'].includes(policy.lob_type)) {\n            return {\n                'Policy Number': policy.policy_number || 'N/A',\n                'Status': status,\n                'LOB Type': policy.lob_type || 'N/A',\n                'Insurer Name': policy.insurer_name || 'N/A',\n                'Company Name': policy.company_name || 'N/A',\n                'Policy Holder': policy.policy_holder_name || 'N/A',\n                'Sum Insured': policy.sum_insured ? formatCurrency(policy.sum_insured) : 'N/A',\n                'Premium': policy.premium_amount ? formatCurrency(policy.premium_amount) : 'N/A',\n                'Expiry Date': expiryDate ? formatDate(new Date(expiryDate)) : 'N/A',\n                'Created On': policy.created_at ? formatDate(new Date(policy.created_at)) : 'N/A',\n            };\n        }\n\n        // Generic (Travel/Life/Cyber) - 8 fields\n        return {\n            'Policy Number': policy.policy_number || 'N/A',\n            'Status': status,\n            'Type': policy.lob_type || 'N/A',\n            'Insurer Name': policy.insurer_name || 'N/A',\n            'Sum Insured': policy.sum_insured ? formatCurrency(policy.sum_insured) : 'N/A',\n            'Premium': policy.premium_amount ? formatCurrency(policy.premium_amount) : 'N/A',\n            'Expiry Date': expiryDate ? formatDate(new Date(expiryDate)) : 'N/A',\n            'Created On': policy.created_at ? formatDate(new Date(policy.created_at)) : 'N/A',\n        };\n    });\n}\n\n// Export to Excel\nexport function exportToXLS(policies: any[], filename: string) {\n    try {\n        console.log('Exporting to XLS with filename:', filename);\n        const data = prepareDataForExport(policies);\n        const ws = XLSX.utils.json_to_sheet(data);\n        const wb = XLSX.utils.book_new();\n        XLSX.utils.book_append_sheet(wb, ws, \"Policies\");\n\n        // Generate buffer\n        const wbout = XLSX.write(wb, { bookType: 'xlsx', type: 'array' });\n\n        // Create Blob\n        const blob = new Blob([wbout], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\n\n        // Trigger download\n        const link = document.createElement(\"a\");\n        const url = URL.createObjectURL(blob);\n        link.setAttribute(\"href\", url);\n        link.setAttribute(\"download\", `${filename}.xlsx`);\n        link.style.visibility = 'hidden';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n\n        console.log('XLS download triggered');\n    } catch (error) {\n        console.error('Error exporting to Excel:', error);\n        throw new Error('Failed to export to Excel');\n    }\n}\n\n// Export to CSV\nexport function exportToCSV(policies: any[], filename: string) {\n    try {\n        console.log('Exporting to CSV with filename:', filename);\n        const data = prepareDataForExport(policies);\n        const ws = XLSX.utils.json_to_sheet(data);\n        const csv = XLSX.utils.sheet_to_csv(ws);\n\n        const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\n        const link = document.createElement(\"a\");\n        const url = URL.createObjectURL(blob);\n        link.setAttribute(\"href\", url);\n        link.setAttribute(\"download\", `${filename}.csv`);\n        link.style.visibility = 'hidden';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n\n        console.log('CSV download triggered');\n    } catch (error) {\n        console.error('Error exporting to CSV:', error);\n        throw new Error('Failed to export to CSV');\n    }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3905, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/dashboard/ExportButton.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect } from 'react';\nimport { Download, FileDown, Calendar, Filter, X, Loader2, CheckCircle2, Car, Heart, Briefcase, Plane, Umbrella, Shield, FileText, FileSpreadsheet } from 'lucide-react';\nimport { exportDashboardToPDF, exportPoliciesByType, exportPoliciesByDate, exportToCSV, exportToXLS } from '@/lib/exportUtils';\nimport { DashboardSummary } from '@/types';\n\ninterface ExportButtonProps {\n    onExportDashboard: () => void;\n    motorPolicies: any[];\n    healthPolicies: any[];\n    commercialPolicies: any[];\n    travelPolicies: any[];\n    lifePolicies: any[];\n    cyberPolicies: any[];\n    userName: string;\n}\n\ntype PolicyType = 'Motor' | 'Health' | 'Travel' | 'Commercial' | 'Life' | 'Cyber';\ntype ExportFormat = 'PDF' | 'XLS' | 'CSV';\n\nexport default function ExportButton({\n    onExportDashboard,\n    motorPolicies,\n    healthPolicies,\n    commercialPolicies,\n    travelPolicies,\n    lifePolicies,\n    cyberPolicies,\n    userName\n}: ExportButtonProps) {\n    const [isOpen, setIsOpen] = useState(false);\n    const [isExporting, setIsExporting] = useState(false);\n    const [exportSuccess, setExportSuccess] = useState(false);\n\n    // Filter States\n    const [selectedTypes, setSelectedTypes] = useState<PolicyType[]>([]);\n    const [selectedStatuses, setSelectedStatuses] = useState<string[]>(['Active', 'Expiring Soon', 'Expired']);\n    const [startDate, setStartDate] = useState<string>('');\n    const [endDate, setEndDate] = useState<string>('');\n    const [selectedFormat, setSelectedFormat] = useState<ExportFormat>('PDF');\n\n    // Initialize dates\n    useEffect(() => {\n        const end = new Date();\n        const start = new Date();\n        start.setMonth(start.getMonth() - 1);\n        setEndDate(end.toISOString().split('T')[0]);\n        setStartDate(start.toISOString().split('T')[0]);\n    }, []);\n\n    const togglePolicyType = (type: PolicyType) => {\n        if (selectedTypes.includes(type)) {\n            setSelectedTypes(selectedTypes.filter(t => t !== type));\n        } else {\n            setSelectedTypes([...selectedTypes, type]);\n        }\n    };\n\n    const handleExport = async () => {\n        try {\n            setIsExporting(true);\n\n            // Collect all selected policies\n            let policiesToExport: any[] = [];\n\n            // If no types selected, assume all\n            const typesToInclude = selectedTypes.length > 0 ? selectedTypes : ['Motor', 'Health', 'Travel', 'Commercial', 'Life', 'Cyber'];\n\n            if (typesToInclude.includes('Motor')) policiesToExport = [...policiesToExport, ...motorPolicies];\n            if (typesToInclude.includes('Health')) policiesToExport = [...policiesToExport, ...healthPolicies];\n            if (typesToInclude.includes('Travel')) policiesToExport = [...policiesToExport, ...travelPolicies];\n            if (typesToInclude.includes('Commercial')) policiesToExport = [...policiesToExport, ...commercialPolicies];\n            if (typesToInclude.includes('Life')) policiesToExport = [...policiesToExport, ...lifePolicies];\n            if (typesToInclude.includes('Cyber')) policiesToExport = [...policiesToExport, ...cyberPolicies];\n\n            // Filter by date\n            const start = new Date(startDate);\n            const end = new Date(endDate);\n            // Set end date to end of day\n            end.setHours(23, 59, 59, 999);\n\n            policiesToExport = policiesToExport.filter(p => {\n                const created = new Date(p.created_at);\n                const status = p.status || 'Active'; // Default to Active if missing\n\n                // Filter by date\n                const dateMatch = created >= start && created <= end;\n\n                // Filter by status\n                const statusMatch = selectedStatuses.length === 0 || selectedStatuses.includes(status);\n\n                return dateMatch && statusMatch;\n            });\n\n            // Generate descriptive filename\n            const dateRangeStr = `${startDate}_to_${endDate}`;\n            let typeStr = 'All_Policies';\n\n            if (selectedTypes.length > 0) {\n                if (selectedTypes.length === 1) {\n                    typeStr = `${selectedTypes[0]}_Policies`;\n                } else {\n                    typeStr = 'Mixed_Policies';\n                }\n            }\n\n            const filename = `${typeStr}_${dateRangeStr}`;\n\n            if (selectedFormat === 'PDF') {\n                // Reuse existing PDF logic but for mixed types\n                // For now, we'll use the date range export which handles mixed types\n                await exportPoliciesByDate(start, end, policiesToExport, userName, `${filename}.pdf`);\n            } else if (selectedFormat === 'XLS') {\n                exportToXLS(policiesToExport, filename);\n            } else if (selectedFormat === 'CSV') {\n                exportToCSV(policiesToExport, filename);\n            }\n\n            setExportSuccess(true);\n            setTimeout(() => {\n                setExportSuccess(false);\n                setIsOpen(false);\n            }, 2000);\n\n        } catch (error) {\n            console.error('Export failed:', error);\n            alert('Failed to export data. Please try again.');\n        } finally {\n            setIsExporting(false);\n        }\n    };\n\n    const policyOptions = [\n        { type: 'Motor', icon: Car, count: motorPolicies.length },\n        { type: 'Health', icon: Heart, count: healthPolicies.length },\n        { type: 'Travel', icon: Plane, count: travelPolicies.length },\n        { type: 'Commercial', icon: Briefcase, count: commercialPolicies.length },\n        { type: 'Life', icon: Umbrella, count: lifePolicies.length },\n        { type: 'Cyber', icon: Shield, count: cyberPolicies.length },\n    ];\n\n    return (\n        <div className=\"relative\">\n            <button\n                onClick={() => setIsOpen(!isOpen)}\n                className=\"flex items-center px-4 py-2 bg-white border border-gray-300 rounded-xl shadow-sm hover:shadow-md transition-all text-gray-700 font-semibold\"\n            >\n                <Download className=\"w-5 h-5 mr-2\" />\n                Export\n            </button>\n\n            {/* Detailed Export Modal */}\n            {isOpen && (\n                <>\n                    <div className=\"fixed inset-0 bg-black/20 z-40\" onClick={() => setIsOpen(false)} />\n                    <div className=\"absolute right-0 top-full mt-2 w-[480px] bg-white rounded-2xl shadow-2xl border border-gray-200 z-50 overflow-hidden animate-in fade-in zoom-in-95 duration-200 origin-top-right\">\n                        {/* Header */}\n                        <div className=\"flex items-center justify-between px-6 py-4 border-b border-gray-100\">\n                            <h3 className=\"text-lg font-bold text-gray-900\">Export Data</h3>\n                            <button onClick={() => setIsOpen(false)} className=\"text-gray-400 hover:text-gray-600\">\n                                <X className=\"w-5 h-5\" />\n                            </button>\n                        </div>\n\n                        <div className=\"p-6 space-y-6 max-h-[70vh] overflow-y-auto\">\n                            {/* Policy Type Selection */}\n                            <div>\n                                <label className=\"block text-sm font-semibold text-gray-900 mb-3\">Policy Type</label>\n                                <div className=\"grid grid-cols-3 gap-3\">\n                                    {policyOptions.map((option) => {\n                                        const isSelected = selectedTypes.includes(option.type as PolicyType);\n                                        return (\n                                            <button\n                                                key={option.type}\n                                                onClick={() => togglePolicyType(option.type as PolicyType)}\n                                                className={`flex flex-col items-center justify-center p-3 rounded-xl border transition-all ${isSelected\n                                                    ? 'border-primary-600 bg-primary-50 text-primary-700 ring-1 ring-primary-600'\n                                                    : 'border-gray-200 hover:border-gray-300 hover:bg-gray-50 text-gray-600'\n                                                    }`}\n                                            >\n                                                <option.icon className={`w-6 h-6 mb-2 ${isSelected ? 'text-primary-600' : 'text-gray-500'}`} />\n                                                <span className=\"text-sm font-medium\">{option.type}</span>\n                                                <span className=\"text-xs text-gray-400\">{option.count}</span>\n                                            </button>\n                                        );\n                                    })}\n                                </div>\n                            </div>\n\n                            {/* Date Range */}\n                            <div>\n                                <label className=\"block text-sm font-semibold text-gray-900 mb-3\">Date Range</label>\n                                <div className=\"grid grid-cols-2 gap-4\">\n                                    <div>\n                                        <label className=\"block text-xs text-gray-500 mb-1\">From</label>\n                                        <input\n                                            type=\"date\"\n                                            value={startDate}\n                                            onChange={(e) => setStartDate(e.target.value)}\n                                            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n                                        />\n                                    </div>\n                                    <div>\n                                        <label className=\"block text-xs text-gray-500 mb-1\">To</label>\n                                        <input\n                                            type=\"date\"\n                                            value={endDate}\n                                            onChange={(e) => setEndDate(e.target.value)}\n                                            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n\n                            {/* Status Selection */}\n                            <div>\n                                <label className=\"block text-sm font-semibold text-gray-900 mb-3\">Status</label>\n                                <div className=\"flex space-x-4\">\n                                    {['Active', 'Expiring Soon', 'Expired'].map((status) => (\n                                        <label key={status} className=\"flex items-center cursor-pointer group\">\n                                            <input\n                                                type=\"checkbox\"\n                                                checked={selectedStatuses.includes(status)}\n                                                onChange={() => {\n                                                    if (selectedStatuses.includes(status)) {\n                                                        setSelectedStatuses(selectedStatuses.filter(s => s !== status));\n                                                    } else {\n                                                        setSelectedStatuses([...selectedStatuses, status]);\n                                                    }\n                                                }}\n                                                className=\"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500\"\n                                            />\n                                            <span className=\"ml-2 text-sm text-gray-700 group-hover:text-gray-900\">{status}</span>\n                                        </label>\n                                    ))}\n                                </div>\n                            </div>\n\n                            {/* Format Selection */}\n                            <div>\n                                <label className=\"block text-sm font-semibold text-gray-900 mb-3\">Format</label>\n                                <div className=\"flex space-x-4\">\n                                    {(['PDF', 'XLS', 'CSV'] as ExportFormat[]).map((format) => (\n                                        <label key={format} className=\"flex items-center cursor-pointer group\">\n                                            <input\n                                                type=\"radio\"\n                                                name=\"format\"\n                                                value={format}\n                                                checked={selectedFormat === format}\n                                                onChange={() => setSelectedFormat(format)}\n                                                className=\"w-4 h-4 text-primary-600 border-gray-300 focus:ring-primary-500\"\n                                            />\n                                            <span className=\"ml-2 text-sm text-gray-700 group-hover:text-gray-900\">{format}</span>\n                                        </label>\n                                    ))}\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Footer */}\n                        <div className=\"p-6 border-t border-gray-100 bg-gray-50 flex justify-between items-center\">\n                            <button\n                                onClick={() => {\n                                    setSelectedTypes([]);\n                                    const end = new Date();\n                                    const start = new Date();\n                                    start.setMonth(start.getMonth() - 1);\n                                    setEndDate(end.toISOString().split('T')[0]);\n                                    setStartDate(start.toISOString().split('T')[0]);\n                                }}\n                                className=\"text-sm text-gray-500 hover:text-gray-700 font-medium\"\n                            >\n                                Clear all\n                            </button>\n                            <button\n                                onClick={handleExport}\n                                disabled={isExporting}\n                                className=\"px-6 py-2.5 bg-primary-600 hover:bg-primary-700 text-white rounded-xl font-semibold shadow-sm hover:shadow transition-all flex items-center disabled:opacity-50 disabled:cursor-not-allowed\"\n                            >\n                                {isExporting ? (\n                                    <>\n                                        <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                                        Exporting...\n                                    </>\n                                ) : (\n                                    <>\n                                        Export\n                                    </>\n                                )}\n                            </button>\n                        </div>\n                    </div>\n                </>\n            )}\n\n            {/* Success Toast */}\n            {exportSuccess && (\n                <div className=\"absolute top-full right-0 mt-4 px-4 py-3 bg-green-50 text-green-700 border border-green-200 rounded-xl shadow-lg flex items-center animate-in slide-in-from-top-2 fade-in z-50 whitespace-nowrap\">\n                    <CheckCircle2 className=\"w-5 h-5 mr-2\" />\n                    <span className=\"font-medium\">Export successful!</span>\n                </div>\n            )}\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4496, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/lib/constants.ts"],"sourcesContent":["// Insurance Companies List\nexport const INSURANCE_COMPANIES = [\n    'HDFC ERGO',\n    'GO DIGIT',\n    'ICICI LOMBARD',\n    'TATA AIG',\n    'SHRIRAM GIC',\n    'ACKO GIC',\n    'CHOLA MS',\n    'INDUSIND GIC',\n    'BAJAJ GIC',\n    'IFFCO GIC',\n    'liberty gic',\n    'Royal sundaram',\n    'magma',\n    'kotak gic',\n    'sbi gic',\n    'national insurance',\n    'oriental',\n    'united India gic',\n    'new india gic',\n    'OTHERS'\n] as const;\n\n// Car Manufacturers List\nexport const CAR_MANUFACTURERS = [\n    'Maruti Suzuki',\n    'Hyundai',\n    'Tata',\n    'Honda',\n    'Toyota',\n    'Mahindra',\n    'Kia',\n    'Volkswagen',\n    'Renault',\n    'Nissan',\n    'Ford',\n    'Skoda',\n    'MG',\n    'Jeep',\n    'BMW',\n    'Mercedes-Benz',\n    'Audi',\n    'Volvo',\n    'Others'\n] as const;\n"],"names":[],"mappings":"AAAA,2BAA2B;;;;;;;AACpB,MAAM,sBAAsB;IAC/B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACH;AAGM,MAAM,oBAAoB;IAC7B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACH"}},
    {"offset": {"line": 4550, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/lib/validation.ts"],"sourcesContent":["// Form validation utilities\n\nexport const validateVehicleNumber = (vehicleNumber: string): boolean => {\n    // Indian vehicle number format: AA00AA0000 or AA00A0000\n    const regex = /^[A-Z]{2}[0-9]{1,2}[A-Z]{1,2}[0-9]{4}$/;\n    return regex.test(vehicleNumber.replace(/\\s+/g, ''));\n};\n\nexport const validatePolicyNumber = (policyNumber: string): boolean => {\n    // Basic validation: at least 5 characters\n    return policyNumber.trim().length >= 5;\n};\n\nexport const validatePremiumAmount = (amount: number, min = 0, max = 10000000): boolean => {\n    return amount >= min && amount <= max && !isNaN(amount);\n};\n\nexport const validateDateRange = (startDate: Date, endDate: Date): boolean => {\n    return startDate < endDate;\n};\n\nexport const validatePhoneNumber = (phone: string): boolean => {\n    // Indian phone number: 10 digits, optionally starting with +91\n    const regex = /^(\\+91)?[6-9]\\d{9}$/;\n    return regex.test(phone.replace(/[\\s-]/g, ''));\n};\n\nexport const validateEmail = (email: string): boolean => {\n    const regex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return regex.test(email);\n};\n\nexport const validateGSTNumber = (gst: string): boolean => {\n    // GST format: 22 characters\n    const regex = /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;\n    return regex.test(gst);\n};\n\nexport const validatePAN = (pan: string): boolean => {\n    // PAN format: AAAAA0000A\n    const regex = /^[A-Z]{5}[0-9]{4}[A-Z]$/;\n    return regex.test(pan);\n};\n\nexport const formatCurrency = (amount: number): string => {\n    return new Intl.NumberFormat('en-IN', {\n        style: 'currency',\n        currency: 'INR',\n        maximumFractionDigits: 0,\n    }).format(amount);\n};\n\nexport const formatDate = (date: Date | string): string => {\n    const d = typeof date === 'string' ? new Date(date) : date;\n    return d.toLocaleDateString('en-IN', {\n        day: '2-digit',\n        month: '2-digit',\n        year: 'numeric',\n    });\n};\n\nexport const parseDate = (dateString: string): Date => {\n    return new Date(dateString);\n};\n\n// Get today's date in YYYY-MM-DD format for input defaults\nexport const getTodayString = (): string => {\n    return new Date().toISOString().split('T')[0];\n};\n\n// Get date one year from today\nexport const getOneYearFromNow = (): string => {\n    const date = new Date();\n    date.setFullYear(date.getFullYear() + 1);\n    return date.toISOString().split('T')[0];\n};\n\n// Validate required field\nexport const validateRequired = (value: any): boolean => {\n    if (typeof value === 'string') {\n        return value.trim().length > 0;\n    }\n    return value !== null && value !== undefined && value !== '';\n};\n\n// Error messages\nexport const getErrorMessage = (fieldName: string, validationType: string): string => {\n    const messages: Record<string, string> = {\n        required: `${fieldName} is required`,\n        vehicleNumber: 'Invalid vehicle number format (e.g., KA01AB1234)',\n        policyNumber: 'Policy number must be at least 5 characters',\n        premium: 'Invalid premium amount',\n        dateRange: 'End date must be after start date',\n        phone: 'Invalid phone number (10 digits)',\n        email: 'Invalid email address',\n        gst: 'Invalid GST number format',\n        pan: 'Invalid PAN format',\n    };\n    return messages[validationType] || `Invalid ${fieldName}`;\n};\n"],"names":[],"mappings":"AAAA,4BAA4B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAErB,MAAM,wBAAwB,CAAC;IAClC,wDAAwD;IACxD,MAAM,QAAQ;IACd,OAAO,MAAM,IAAI,CAAC,cAAc,OAAO,CAAC,QAAQ;AACpD;AAEO,MAAM,uBAAuB,CAAC;IACjC,0CAA0C;IAC1C,OAAO,aAAa,IAAI,GAAG,MAAM,IAAI;AACzC;AAEO,MAAM,wBAAwB,CAAC,QAAgB,MAAM,CAAC,EAAE,MAAM,QAAQ;IACzE,OAAO,UAAU,OAAO,UAAU,OAAO,CAAC,MAAM;AACpD;AAEO,MAAM,oBAAoB,CAAC,WAAiB;IAC/C,OAAO,YAAY;AACvB;AAEO,MAAM,sBAAsB,CAAC;IAChC,+DAA+D;IAC/D,MAAM,QAAQ;IACd,OAAO,MAAM,IAAI,CAAC,MAAM,OAAO,CAAC,UAAU;AAC9C;AAEO,MAAM,gBAAgB,CAAC;IAC1B,MAAM,QAAQ;IACd,OAAO,MAAM,IAAI,CAAC;AACtB;AAEO,MAAM,oBAAoB,CAAC;IAC9B,4BAA4B;IAC5B,MAAM,QAAQ;IACd,OAAO,MAAM,IAAI,CAAC;AACtB;AAEO,MAAM,cAAc,CAAC;IACxB,yBAAyB;IACzB,MAAM,QAAQ;IACd,OAAO,MAAM,IAAI,CAAC;AACtB;AAEO,MAAM,iBAAiB,CAAC;IAC3B,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QAClC,OAAO;QACP,UAAU;QACV,uBAAuB;IAC3B,GAAG,MAAM,CAAC;AACd;AAEO,MAAM,aAAa,CAAC;IACvB,MAAM,IAAI,OAAO,SAAS,WAAW,IAAI,KAAK,QAAQ;IACtD,OAAO,EAAE,kBAAkB,CAAC,SAAS;QACjC,KAAK;QACL,OAAO;QACP,MAAM;IACV;AACJ;AAEO,MAAM,YAAY,CAAC;IACtB,OAAO,IAAI,KAAK;AACpB;AAGO,MAAM,iBAAiB;IAC1B,OAAO,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;AACjD;AAGO,MAAM,oBAAoB;IAC7B,MAAM,OAAO,IAAI;IACjB,KAAK,WAAW,CAAC,KAAK,WAAW,KAAK;IACtC,OAAO,KAAK,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;AAC3C;AAGO,MAAM,mBAAmB,CAAC;IAC7B,IAAI,OAAO,UAAU,UAAU;QAC3B,OAAO,MAAM,IAAI,GAAG,MAAM,GAAG;IACjC;IACA,OAAO,UAAU,QAAQ,UAAU,aAAa,UAAU;AAC9D;AAGO,MAAM,kBAAkB,CAAC,WAAmB;IAC/C,MAAM,WAAmC;QACrC,UAAU,GAAG,UAAU,YAAY,CAAC;QACpC,eAAe;QACf,cAAc;QACd,SAAS;QACT,WAAW;QACX,OAAO;QACP,OAAO;QACP,KAAK;QACL,KAAK;IACT;IACA,OAAO,QAAQ,CAAC,eAAe,IAAI,CAAC,QAAQ,EAAE,WAAW;AAC7D"}},
    {"offset": {"line": 4667, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/forms/MotorPolicyForm.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { X, Save, Loader2 } from 'lucide-react';\nimport { MotorPolicy, MotorPolicyFormData } from '@/types';\nimport FormInput from './FormInput';\nimport FileUpload from './FileUpload';\nimport { addMotorPolicy, updateMotorPolicy } from '@/lib/db';\nimport { INSURANCE_COMPANIES, CAR_MANUFACTURERS } from '@/lib/constants';\nimport { formatDateForInput } from '@/lib/utils';\nimport {\n    validateVehicleNumber,\n    validatePolicyNumber,\n    validatePremiumAmount,\n    validateDateRange,\n    getTodayString,\n    getOneYearFromNow\n} from '@/lib/validation';\n\ninterface MotorPolicyFormProps {\n    userId: string;\n    initialData?: MotorPolicy;\n    onClose: () => void;\n    onSuccess: () => void;\n}\n\nexport default function MotorPolicyForm({ userId, initialData, onClose, onSuccess }: MotorPolicyFormProps) {\n    const [loading, setLoading] = useState(false);\n    const [errors, setErrors] = useState<Record<string, string>>({});\n\n    const [formData, setFormData] = useState<MotorPolicyFormData>({\n        vehicle_number: initialData?.vehicle_number || '',\n        policy_number: initialData?.policy_number || '',\n        vehicle_type: initialData?.vehicle_type || 'Car',\n        manufacturer: initialData?.manufacturer || '',\n        model: initialData?.model || '',\n        fuel_type: initialData?.fuel_type || 'Petrol',\n        manufacturing_year: initialData?.manufacturing_year || new Date().getFullYear(),\n        number_plate_type: initialData?.number_plate_type || 'White',\n        ownership_type: initialData?.ownership_type || 'Individual',\n        insurer_name: initialData?.insurer_name || '',\n        premium_amount: initialData?.premium_amount || 0,\n        policy_start_date: initialData?.policy_start_date ? new Date(initialData.policy_start_date) : new Date(),\n        policy_end_date: initialData?.policy_end_date ? new Date(initialData.policy_end_date) : new Date(new Date().setFullYear(new Date().getFullYear() + 1)),\n        rc_docs: initialData?.rc_docs || [],\n        previous_policy_docs: initialData?.previous_policy_docs || [],\n        dl_docs: initialData?.dl_docs || [],\n    });\n\n    // Auto-calculate end date when start date changes (1 day before same date next year)\n    useEffect(() => {\n        if (formData.policy_start_date && !initialData) {\n            const startDate = new Date(formData.policy_start_date);\n            const endDate = new Date(startDate);\n            endDate.setFullYear(endDate.getFullYear() + 1);\n            endDate.setDate(endDate.getDate() - 1); // 1 day before\n            setFormData(prev => ({\n                ...prev,\n                policy_end_date: endDate\n            }));\n        }\n    }, [formData.policy_start_date, initialData]);\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {\n        const { name, value, type } = e.target;\n\n        setFormData(prev => ({\n            ...prev,\n            [name]: type === 'number' ? Number(value) : value\n        }));\n\n        // Clear error when user types\n        if (errors[name]) {\n            setErrors(prev => {\n                const newErrors = { ...prev };\n                delete newErrors[name];\n                return newErrors;\n            });\n        }\n    };\n\n    const handleDateChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const { name, value } = e.target;\n        setFormData(prev => ({\n            ...prev,\n            [name]: new Date(value)\n        }));\n    };\n\n    const validateForm = (): boolean => {\n        const newErrors: Record<string, string> = {};\n\n        if (!validateVehicleNumber(formData.vehicle_number || '')) {\n            newErrors.vehicle_number = 'Invalid vehicle number format (e.g., KA01AB1234)';\n        }\n\n        if (!validatePolicyNumber(formData.policy_number || '')) {\n            newErrors.policy_number = 'Policy number is required';\n        }\n\n        if (!validatePremiumAmount(formData.premium_amount || 0)) {\n            newErrors.premium_amount = 'Invalid premium amount';\n        }\n\n        if (formData.policy_start_date && formData.policy_end_date) {\n            if (!validateDateRange(formData.policy_start_date, formData.policy_end_date)) {\n                newErrors.policy_end_date = 'End date must be after start date';\n            }\n        }\n\n        if (!formData.manufacturer) newErrors.manufacturer = 'Manufacturer is required';\n        if (!formData.model) newErrors.model = 'Model is required';\n        if (!formData.insurer_name) newErrors.insurer_name = 'Insurer name is required';\n\n        setErrors(newErrors);\n        return Object.keys(newErrors).length === 0;\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n\n        if (!validateForm()) return;\n\n        setLoading(true);\n        try {\n            const policyData = {\n                ...formData,\n                user_id: userId,\n                // Ensure dates are Date objects\n                policy_start_date: new Date(formData.policy_start_date!),\n                policy_end_date: new Date(formData.policy_end_date!),\n                rc_docs: formData.rc_docs || [],\n                previous_policy_docs: formData.previous_policy_docs || [],\n                dl_docs: formData.dl_docs || []\n            };\n\n            if (initialData?.id) {\n                await updateMotorPolicy(initialData.id, policyData);\n            } else {\n                await addMotorPolicy(policyData as any);\n            }\n\n            onSuccess();\n            onClose();\n        } catch (error) {\n            console.error('Error saving policy:', error);\n            setErrors(prev => ({ ...prev, submit: 'Failed to save policy. Please try again.' }));\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleFileUpload = (field: 'rc_docs' | 'previous_policy_docs' | 'dl_docs') => (url: string) => {\n        setFormData(prev => ({\n            ...prev,\n            [field]: [...(prev[field] || []), url]\n        }));\n    };\n\n    return (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto\">\n            <div className=\"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\n                <div className=\"flex items-center justify-between p-6 border-b sticky top-0 bg-white z-10\">\n                    <h2 className=\"text-xl font-bold text-gray-900\">\n                        {initialData ? 'Edit Motor Policy' : 'Add New Motor Policy'}\n                    </h2>\n                    <button onClick={onClose} className=\"text-gray-500 hover:text-gray-700\">\n                        <X className=\"w-6 h-6\" />\n                    </button>\n                </div>\n\n                <form onSubmit={handleSubmit} className=\"p-6 space-y-8\">\n                    {errors.submit && (\n                        <div className=\"bg-red-50 text-red-600 p-4 rounded-lg text-sm\">\n                            {errors.submit}\n                        </div>\n                    )}\n\n                    {/* Vehicle Details */}\n                    <section>\n                        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Vehicle Details</h3>\n                        <div className=\"grid md:grid-cols-3 gap-6\">\n                            <FormInput\n                                label=\"Vehicle Number\"\n                                name=\"vehicle_number\"\n                                value={formData.vehicle_number || ''}\n                                onChange={handleChange}\n                                placeholder=\"KA01AB1234\"\n                                error={errors.vehicle_number}\n                                required\n                            />\n                            <FormInput\n                                label=\"Vehicle Type\"\n                                name=\"vehicle_type\"\n                                type=\"select\"\n                                value={formData.vehicle_type || 'Car'}\n                                onChange={handleChange}\n                                options={[\n                                    { value: 'Car', label: 'Car' },\n                                    { value: 'Bike', label: 'Bike' },\n                                    { value: 'Bus', label: 'Bus' },\n                                    { value: 'GCV', label: 'Goods Carrying Vehicle' },\n                                    { value: 'Misc', label: 'Miscellaneous' }\n                                ]}\n                                required\n                            />\n                            <FormInput\n                                label=\"Number Plate Type\"\n                                name=\"number_plate_type\"\n                                type=\"select\"\n                                value={formData.number_plate_type ?? ''}\n                                onChange={handleChange}\n                                required\n                                options={[\n                                    { value: 'White', label: 'White (Pvt)' },\n                                    { value: 'Yellow', label: 'Yellow (Commercial)' },\n                                    { value: 'EV', label: 'EV (Green)' },\n                                ]}\n                            />\n                            <FormInput\n                                label=\"Ownership Type\"\n                                name=\"ownership_type\"\n                                type=\"select\"\n                                value={formData.ownership_type ?? 'Individual'}\n                                onChange={handleChange}\n                                required\n                                options={[\n                                    { value: 'Individual', label: 'Individual' },\n                                    { value: 'Company', label: 'Company' },\n                                ]}\n                            />\n                            <FormInput\n                                label=\"Manufacturer\"\n                                name=\"manufacturer\"\n                                type=\"select\"\n                                value={formData.manufacturer || ''}\n                                onChange={handleChange}\n                                options={CAR_MANUFACTURERS.map(m => ({ value: m, label: m }))}\n                                error={errors.manufacturer}\n                                required\n                            />\n                            <FormInput\n                                label=\"Model\"\n                                name=\"model\"\n                                value={formData.model || ''}\n                                onChange={handleChange}\n                                placeholder=\"e.g. Swift\"\n                                error={errors.model}\n                                required\n                            />\n                            <FormInput\n                                label=\"Fuel Type\"\n                                name=\"fuel_type\"\n                                type=\"select\"\n                                value={formData.fuel_type || 'Petrol'}\n                                onChange={handleChange}\n                                options={[\n                                    { value: 'Petrol', label: 'Petrol' },\n                                    { value: 'Diesel', label: 'Diesel' },\n                                    { value: 'CNG', label: 'CNG' },\n                                    { value: 'Electric', label: 'Electric' },\n                                    { value: 'Hybrid', label: 'Hybrid' }\n                                ]}\n                                required\n                            />\n                            <FormInput\n                                label=\"Manufacturing Year\"\n                                name=\"manufacturing_year\"\n                                type=\"number\"\n                                value={formData.manufacturing_year || new Date().getFullYear()}\n                                onChange={handleChange}\n                                min={1990}\n                                max={new Date().getFullYear()}\n                                required\n                            />\n                        </div>\n                    </section>\n\n                    {/* Policy Details */}\n                    <section>\n                        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Policy Details</h3>\n                        <div className=\"grid md:grid-cols-3 gap-6\">\n                            <FormInput\n                                label=\"Policy Number\"\n                                name=\"policy_number\"\n                                value={formData.policy_number || ''}\n                                onChange={handleChange}\n                                placeholder=\"Enter policy number\"\n                                error={errors.policy_number}\n                                required\n                            />\n                            <FormInput\n                                label=\"Insurer Name\"\n                                name=\"insurer_name\"\n                                type=\"select\"\n                                value={formData.insurer_name || ''}\n                                onChange={handleChange}\n                                options={INSURANCE_COMPANIES.map(c => ({ value: c, label: c }))}\n                                error={errors.insurer_name}\n                                required\n                            />\n                            <FormInput\n                                label=\"Premium Amount (‚Çπ)\"\n                                name=\"premium_amount\"\n                                type=\"number\"\n                                value={formData.premium_amount || ''}\n                                onChange={handleChange}\n                                error={errors.premium_amount}\n                                required\n                            />\n                            <FormInput\n                                label=\"Start Date\"\n                                name=\"policy_start_date\"\n                                type=\"date\"\n                                value={formatDateForInput(formData.policy_start_date)}\n                                onChange={handleDateChange as any}\n                                required\n                            />\n                            <FormInput\n                                label=\"End Date\"\n                                name=\"policy_end_date\"\n                                type=\"date\"\n                                value={formatDateForInput(formData.policy_end_date)}\n                                onChange={handleDateChange as any}\n                                required\n                            />\n                        </div>\n                    </section>\n\n                    {/* Documents */}\n                    <section>\n                        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Documents</h3>\n                        <div className=\"grid md:grid-cols-3 gap-6\">\n                            <FileUpload\n                                label=\"RC Copy\"\n                                name=\"rc_docs\"\n                                bucket=\"rc-copies\"\n                                onUploadComplete={handleFileUpload('rc_docs')}\n                                existingFile={formData.rc_docs && formData.rc_docs.length > 0 ? { url: formData.rc_docs[0], name: 'RC Document' } : undefined}\n                            />\n                            <FileUpload\n                                label=\"Previous Policy\"\n                                name=\"previous_policy_docs\"\n                                bucket=\"policy-documents\"\n                                onUploadComplete={handleFileUpload('previous_policy_docs')}\n                                existingFile={formData.previous_policy_docs && formData.previous_policy_docs.length > 0 ? { url: formData.previous_policy_docs[0], name: 'Previous Policy' } : undefined}\n                            />\n                        </div>\n                    </section>\n\n                    <div className=\"flex justify-end space-x-4 pt-6 border-t\">\n                        <button\n                            type=\"button\"\n                            onClick={onClose}\n                            className=\"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\"\n                            disabled={loading}\n                        >\n                            Cancel\n                        </button>\n                        <button\n                            type=\"submit\"\n                            className=\"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center\"\n                            disabled={loading}\n                        >\n                            {loading ? (\n                                <>\n                                    <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                                    Saving...\n                                </>\n                            ) : (\n                                <>\n                                    <Save className=\"w-4 h-4 mr-2\" />\n                                    Save Policy\n                                </>\n                            )}\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5282, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/forms/HealthPolicyForm.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { X, Save, Loader2 } from 'lucide-react';\nimport { HealthPolicy, HealthPolicyFormData } from '@/types';\nimport FormInput from './FormInput';\nimport FileUpload from './FileUpload';\nimport { addHealthPolicy, updateHealthPolicy } from '@/lib/db';\nimport { INSURANCE_COMPANIES } from '@/lib/constants';\nimport { formatDateForInput } from '@/lib/utils';\nimport {\n    validatePolicyNumber,\n    validatePremiumAmount,\n    validateDateRange\n} from '@/lib/validation';\n\ninterface HealthPolicyFormProps {\n    userId: string;\n    initialData?: HealthPolicy;\n    onClose: () => void;\n    onSuccess: () => void;\n}\n\nexport default function HealthPolicyForm({ userId, initialData, onClose, onSuccess }: HealthPolicyFormProps) {\n    const [loading, setLoading] = useState(false);\n    const [errors, setErrors] = useState<Record<string, string>>({});\n\n    const [formData, setFormData] = useState<HealthPolicyFormData>({\n        company_name: initialData?.company_name || '',\n        policy_number: initialData?.policy_number || '',\n        insurer_name: initialData?.insurer_name || '',\n        sum_insured: initialData?.sum_insured || 0,\n        premium_amount: initialData?.premium_amount || 0,\n        expiry_date: initialData?.expiry_date ? new Date(initialData.expiry_date) : new Date(new Date().setFullYear(new Date().getFullYear() + 1)),\n        policy_docs: initialData?.policy_docs || [],\n        no_of_lives: initialData?.no_of_lives || 0,\n    });\n\n    // Auto-calculate expiry date when it's a new policy (1 year from today - 1 day)\n    useEffect(() => {\n        if (!initialData) {\n            const today = new Date();\n            const expiryDate = new Date(today);\n            expiryDate.setFullYear(expiryDate.getFullYear() + 1);\n            expiryDate.setDate(expiryDate.getDate() - 1); // 1 day before\n            setFormData(prev => ({\n                ...prev,\n                expiry_date: expiryDate\n            }));\n        }\n    }, [initialData]);\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {\n        const { name, value, type } = e.target;\n\n        setFormData(prev => ({\n            ...prev,\n            [name]: type === 'number' ? Number(value) : value\n        }));\n\n        if (errors[name]) {\n            setErrors(prev => {\n                const newErrors = { ...prev };\n                delete newErrors[name];\n                return newErrors;\n            });\n        }\n    };\n\n    const handleDateChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const { name, value } = e.target;\n        setFormData(prev => ({\n            ...prev,\n            [name]: new Date(value)\n        }));\n    };\n\n    const validateForm = (): boolean => {\n        const newErrors: Record<string, string> = {};\n\n        if (!validatePolicyNumber(formData.policy_number || '')) {\n            newErrors.policy_number = 'Policy number is required';\n        }\n\n        if (!validatePremiumAmount(formData.premium_amount || 0)) {\n            newErrors.premium_amount = 'Invalid premium amount';\n        }\n\n        if (!formData.insurer_name) newErrors.insurer_name = 'Insurer name is required';\n        if (!formData.company_name) newErrors.company_name = 'Company name is required';\n\n        setErrors(newErrors);\n        return Object.keys(newErrors).length === 0;\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n\n        if (!validateForm()) return;\n\n        setLoading(true);\n        try {\n            const policyData = {\n                ...formData,\n                user_id: userId,\n                expiry_date: new Date(formData.expiry_date!),\n                policy_number: formData.policy_number || '',\n                insurer_name: formData.insurer_name || '',\n                premium_amount: formData.premium_amount || 0,\n                policy_docs: formData.policy_docs || []\n            };\n\n            if (initialData?.id) {\n                await updateHealthPolicy(initialData.id, policyData);\n            } else {\n                await addHealthPolicy(policyData);\n            }\n\n            onSuccess();\n            onClose();\n        } catch (error) {\n            console.error('Error saving policy:', error);\n            setErrors(prev => ({ ...prev, submit: 'Failed to save policy. Please try again.' }));\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleFileUpload = (url: string) => {\n        setFormData(prev => ({\n            ...prev,\n            policy_docs: [...(prev.policy_docs || []), url]\n        }));\n    };\n\n    return (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto\">\n            <div className=\"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\n                <div className=\"flex items-center justify-between p-6 border-b sticky top-0 bg-white z-10\">\n                    <h2 className=\"text-xl font-bold text-gray-900\">\n                        {initialData ? 'Edit Health Insurance Policy' : 'Add New Health Insurance Policy'}\n                    </h2>\n                    <button onClick={onClose} className=\"text-gray-500 hover:text-gray-700\">\n                        <X className=\"w-6 h-6\" />\n                    </button>\n                </div>\n\n                <form onSubmit={handleSubmit} className=\"p-6 space-y-8\">\n                    {errors.submit && (\n                        <div className=\"bg-red-50 text-red-600 p-4 rounded-lg text-sm\">\n                            {errors.submit}\n                        </div>\n                    )}\n\n                    {/* Policy Details */}\n                    <section>\n                        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Policy Details</h3>\n                        <div className=\"grid md:grid-cols-3 gap-6\">\n                            <FormInput\n                                label=\"Company Name\"\n                                name=\"company_name\"\n                                value={formData.company_name || ''}\n                                onChange={handleChange}\n                                placeholder=\"e.g. Acme Corp\"\n                                error={errors.company_name}\n                                required\n                            />\n                            <FormInput\n                                label=\"Policy Number\"\n                                name=\"policy_number\"\n                                value={formData.policy_number || ''}\n                                onChange={handleChange}\n                                placeholder=\"Enter policy number\"\n                                error={errors.policy_number}\n                                required\n                            />\n                            <FormInput\n                                label=\"Insurer Name\"\n                                name=\"insurer_name\"\n                                type=\"select\"\n                                value={formData.insurer_name || ''}\n                                onChange={handleChange}\n                                options={INSURANCE_COMPANIES.map(c => ({ value: c, label: c }))}\n                                error={errors.insurer_name}\n                                required\n                            />\n                            <FormInput\n                                label=\"Sum Insured (‚Çπ)\"\n                                name=\"sum_insured\"\n                                type=\"number\"\n                                value={formData.sum_insured || ''}\n                                onChange={handleChange}\n                                placeholder=\"e.g. 500000\"\n                            />\n                            <FormInput\n                                label=\"Premium Amount (‚Çπ)\"\n                                name=\"premium_amount\"\n                                type=\"number\"\n                                value={formData.premium_amount || ''}\n                                onChange={handleChange}\n                                error={errors.premium_amount}\n                                required\n                            />\n                            <FormInput\n                                label=\"Expiry Date\"\n                                name=\"expiry_date\"\n                                type=\"date\"\n                                value={formatDateForInput(formData.expiry_date)}\n                                onChange={handleDateChange as any}\n                                required\n                            />\n                            <FormInput\n                                label=\"Number of Lives\"\n                                name=\"no_of_lives\"\n                                type=\"number\"\n                                value={formData.no_of_lives || ''}\n                                onChange={handleChange}\n                                placeholder=\"e.g. 50\"\n                            />\n                        </div>\n                    </section>\n\n                    {/* Documents */}\n                    <section>\n                        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Documents</h3>\n                        <div className=\"grid md:grid-cols-3 gap-6\">\n                            <FileUpload\n                                label=\"Policy Document\"\n                                name=\"policy_docs\"\n                                bucket=\"policy-documents\"\n                                onUploadComplete={handleFileUpload}\n                                existingFile={formData.policy_docs && formData.policy_docs.length > 0 ? { url: formData.policy_docs[0], name: 'Policy Document' } : undefined}\n                            />\n                        </div>\n                    </section>\n\n                    <div className=\"flex justify-end space-x-4 pt-6 border-t\">\n                        <button\n                            type=\"button\"\n                            onClick={onClose}\n                            className=\"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\"\n                            disabled={loading}\n                        >\n                            Cancel\n                        </button>\n                        <button\n                            type=\"submit\"\n                            className=\"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center\"\n                            disabled={loading}\n                        >\n                            {loading ? (\n                                <>\n                                    <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                                    Saving...\n                                </>\n                            ) : (\n                                <>\n                                    <Save className=\"w-4 h-4 mr-2\" />\n                                    Save Policy\n                                </>\n                            )}\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5688, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/forms/CommercialPolicyForm.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { X, Save, Loader2 } from 'lucide-react';\nimport { CommercialPolicy, CommercialPolicyFormData } from '@/types';\nimport FormInput from './FormInput';\nimport FileUpload from './FileUpload';\nimport { addCommercialPolicy, updateCommercialPolicy } from '@/lib/db';\nimport { INSURANCE_COMPANIES } from '@/lib/constants';\nimport { formatDateForInput } from '@/lib/utils';\nimport {\n    validatePolicyNumber,\n    validatePremiumAmount,\n    validateDateRange\n} from '@/lib/validation';\n\ninterface CommercialPolicyFormProps {\n    userId: string;\n    initialData?: CommercialPolicy;\n    onClose: () => void;\n    onSuccess: () => void;\n}\n\nexport default function CommercialPolicyForm({ userId, initialData, onClose, onSuccess }: CommercialPolicyFormProps) {\n    const [loading, setLoading] = useState(false);\n    const [errors, setErrors] = useState<Record<string, string>>({});\n\n    const [formData, setFormData] = useState<CommercialPolicyFormData>({\n        lob_type: initialData?.lob_type || 'GPA',\n        company_name: initialData?.company_name || '',\n        policy_holder_name: initialData?.policy_holder_name || '',\n        policy_number: initialData?.policy_number || '',\n        insurer_name: initialData?.insurer_name || '',\n        premium_amount: initialData?.premium_amount || 0,\n        sum_insured: initialData?.sum_insured || 0,\n        expiry_date: initialData?.expiry_date ? new Date(initialData.expiry_date) : new Date(new Date().setFullYear(new Date().getFullYear() + 1)),\n        policy_docs: initialData?.policy_docs || [],\n    });\n\n    // Auto-calculate expiry date when it's a new policy (1 year from today - 1 day)\n    useEffect(() => {\n        if (!initialData) {\n            const today = new Date();\n            const expiryDate = new Date(today);\n            expiryDate.setFullYear(expiryDate.getFullYear() + 1);\n            expiryDate.setDate(expiryDate.getDate() - 1); // 1 day before\n            setFormData(prev => ({\n                ...prev,\n                expiry_date: expiryDate\n            }));\n        }\n    }, [initialData]);\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {\n        const { name, value, type } = e.target;\n\n        setFormData(prev => ({\n            ...prev,\n            [name]: type === 'number' ? Number(value) : value\n        }));\n\n        if (errors[name]) {\n            setErrors(prev => {\n                const newErrors = { ...prev };\n                delete newErrors[name];\n                return newErrors;\n            });\n        }\n    };\n\n    const handleDateChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const { name, value } = e.target;\n        setFormData(prev => ({\n            ...prev,\n            [name]: new Date(value)\n        }));\n    };\n\n    const validateForm = (): boolean => {\n        const newErrors: Record<string, string> = {};\n\n        if (!validatePolicyNumber(formData.policy_number || '')) {\n            newErrors.policy_number = 'Policy number is required';\n        }\n\n        if (!validatePremiumAmount(formData.premium_amount || 0)) {\n            newErrors.premium_amount = 'Invalid premium amount';\n        }\n\n        if (!formData.insurer_name) newErrors.insurer_name = 'Insurer name is required';\n        if (!formData.lob_type) newErrors.lob_type = 'LOB Type is required';\n\n        setErrors(newErrors);\n        return Object.keys(newErrors).length === 0;\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n\n        if (!validateForm()) return;\n\n        setLoading(true);\n        try {\n            const policyData = {\n                ...formData,\n                user_id: userId,\n                expiry_date: new Date(formData.expiry_date!),\n                policy_number: formData.policy_number || '',\n                insurer_name: formData.insurer_name || '',\n                premium_amount: formData.premium_amount || 0,\n                lob_type: formData.lob_type || 'GPA',\n                policy_docs: formData.policy_docs || [],\n            };\n\n            if (initialData?.id) {\n                await updateCommercialPolicy(initialData.id, policyData);\n            } else {\n                await addCommercialPolicy(policyData);\n            }\n\n            onSuccess();\n            onClose();\n        } catch (error) {\n            console.error('Error saving policy:', error);\n            setErrors(prev => ({ ...prev, submit: 'Failed to save policy. Please try again.' }));\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleFileUpload = (url: string) => {\n        setFormData(prev => ({\n            ...prev,\n            policy_docs: [...(prev.policy_docs || []), url]\n        }));\n    };\n\n    return (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto\">\n            <div className=\"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\n                <div className=\"flex items-center justify-between p-6 border-b sticky top-0 bg-white z-10\">\n                    <h2 className=\"text-xl font-bold text-gray-900\">\n                        {initialData ? 'Edit Commercial Policy' : 'Add New Commercial Policy'}\n                    </h2>\n                    <button onClick={onClose} className=\"text-gray-500 hover:text-gray-700\">\n                        <X className=\"w-6 h-6\" />\n                    </button>\n                </div>\n\n                <form onSubmit={handleSubmit} className=\"p-6 space-y-8\">\n                    {errors.submit && (\n                        <div className=\"bg-red-50 text-red-600 p-4 rounded-lg text-sm\">\n                            {errors.submit}\n                        </div>\n                    )}\n\n                    {/* Policy Details */}\n                    <section>\n                        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Policy Details</h3>\n                        <div className=\"grid md:grid-cols-3 gap-6\">\n                            <FormInput\n                                label=\"LOB Type\"\n                                name=\"lob_type\"\n                                type=\"select\"\n                                value={formData.lob_type || 'GPA'}\n                                onChange={handleChange}\n                                options={[\n                                    { value: 'GPA', label: 'GPA' },\n                                    { value: 'Fire', label: 'Fire' },\n                                    { value: 'Other', label: 'Other' }\n                                ]}\n                                required\n                            />\n                            <FormInput\n                                label=\"Company Name\"\n                                name=\"company_name\"\n                                value={formData.company_name || ''}\n                                onChange={handleChange}\n                                placeholder=\"e.g. Acme Corp\"\n                            />\n                            <FormInput\n                                label=\"Policy Holder Name\"\n                                name=\"policy_holder_name\"\n                                value={formData.policy_holder_name || ''}\n                                onChange={handleChange}\n                                placeholder=\"e.g. John Doe\"\n                            />\n                            <FormInput\n                                label=\"Policy Number\"\n                                name=\"policy_number\"\n                                value={formData.policy_number || ''}\n                                onChange={handleChange}\n                                placeholder=\"Enter policy number\"\n                                error={errors.policy_number}\n                                required\n                            />\n                            <FormInput\n                                label=\"Insurer Name\"\n                                name=\"insurer_name\"\n                                type=\"select\"\n                                value={formData.insurer_name || ''}\n                                onChange={handleChange}\n                                options={INSURANCE_COMPANIES.map(c => ({ value: c, label: c }))}\n                                error={errors.insurer_name}\n                                required\n                            />\n                            <FormInput\n                                label=\"Sum Insured (‚Çπ)\"\n                                name=\"sum_insured\"\n                                type=\"number\"\n                                value={formData.sum_insured || ''}\n                                onChange={handleChange}\n                                placeholder=\"e.g. 500000\"\n                            />\n                            <FormInput\n                                label=\"Premium Amount (‚Çπ)\"\n                                name=\"premium_amount\"\n                                type=\"number\"\n                                value={formData.premium_amount || ''}\n                                onChange={handleChange}\n                                error={errors.premium_amount}\n                                required\n                            />\n                            <FormInput\n                                label=\"Expiry Date\"\n                                name=\"expiry_date\"\n                                type=\"date\"\n                                value={formatDateForInput(formData.expiry_date)}\n                                onChange={handleDateChange as any}\n                                required\n                            />\n                        </div>\n                    </section>\n\n                    {/* Documents */}\n                    <section>\n                        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Documents</h3>\n                        <div className=\"grid md:grid-cols-3 gap-6\">\n                            <FileUpload\n                                label=\"Policy Document\"\n                                name=\"policy_docs\"\n                                bucket=\"policy-documents\"\n                                onUploadComplete={handleFileUpload}\n                                existingFile={formData.policy_docs && formData.policy_docs.length > 0 ? { url: formData.policy_docs[0], name: 'Policy Document' } : undefined}\n                            />\n                        </div>\n                    </section>\n\n                    <div className=\"flex justify-end space-x-4 pt-6 border-t\">\n                        <button\n                            type=\"button\"\n                            onClick={onClose}\n                            className=\"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\"\n                            disabled={loading}\n                        >\n                            Cancel\n                        </button>\n                        <button\n                            type=\"submit\"\n                            className=\"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center\"\n                            disabled={loading}\n                        >\n                            {loading ? (\n                                <>\n                                    <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                                    Saving...\n                                </>\n                            ) : (\n                                <>\n                                    <Save className=\"w-4 h-4 mr-2\" />\n                                    Save Policy\n                                </>\n                            )}\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6119, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/forms/LifePolicyForm.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { X, Save, Loader2 } from 'lucide-react';\nimport FormInput from './FormInput';\nimport FileUpload from './FileUpload';\nimport { addLifePolicy } from '@/lib/db';\nimport { INSURANCE_COMPANIES } from '@/lib/constants';\n\ninterface LifePolicyFormProps {\n    userId: string;\n    initialData?: any;\n    onClose: () => void;\n    onSuccess: () => void;\n}\n\nexport default function LifePolicyForm({ userId, initialData, onClose, onSuccess }: LifePolicyFormProps) {\n    const [loading, setLoading] = useState(false);\n    const [errors, setErrors] = useState<Record<string, string>>({});\n    const [formData, setFormData] = useState({\n        policy_number: initialData?.policy_number || '',\n        insurer_name: initialData?.insurer_name || '',\n        premium_amount: initialData?.premium_amount || 0,\n        sum_assured: initialData?.sum_assured || 0,\n        nominee_name: initialData?.nominee_name || '',\n        policy_start_date: initialData?.policy_start_date ? new Date(initialData.policy_start_date) : new Date(),\n        policy_end_date: initialData?.policy_end_date ? new Date(initialData.policy_end_date) : new Date(new Date().setFullYear(new Date().getFullYear() + 20)),\n        document_url: initialData?.document_url || '',\n    });\n\n    // Auto-calculate end date when start date changes (1 day before same date next year)\n    useEffect(() => {\n        if (formData.policy_start_date && !initialData) {\n            const startDate = new Date(formData.policy_start_date);\n            const endDate = new Date(startDate);\n            endDate.setFullYear(endDate.getFullYear() + 1);\n            endDate.setDate(endDate.getDate() - 1); // 1 day before\n            setFormData(prev => ({\n                ...prev,\n                policy_end_date: endDate\n            }));\n        }\n    }, [formData.policy_start_date, initialData]);\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {\n        const { name, value, type } = e.target;\n        setFormData(prev => ({\n            ...prev,\n            [name]: type === 'number' ? Number(value) : value\n        }));\n    };\n\n    const handleDateChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const { name, value } = e.target;\n        setFormData(prev => ({ ...prev, [name]: new Date(value) }));\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setLoading(true);\n        try {\n            await addLifePolicy({\n                ...formData,\n                user_id: userId,\n                status: 'Active'\n            });\n            onSuccess();\n        } catch (error) {\n            console.error('Error saving life policy:', error);\n            setErrors({ submit: 'Failed to save policy' });\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900\">Life Insurance Details</h3>\n\n            <div className=\"grid md:grid-cols-2 gap-6\">\n                <FormInput label=\"Policy Number\" name=\"policy_number\" value={formData.policy_number} onChange={handleChange} required />\n                <FormInput label=\"Policy Number\" name=\"policy_number\" value={formData.policy_number} onChange={handleChange} required />\n                <FormInput\n                    label=\"Insurer Name\"\n                    name=\"insurer_name\"\n                    type=\"select\"\n                    value={formData.insurer_name}\n                    onChange={handleChange}\n                    options={INSURANCE_COMPANIES.map(c => ({ value: c, label: c }))}\n                    required\n                />\n                <FormInput label=\"Premium Amount (‚Çπ)\" name=\"premium_amount\" type=\"number\" value={formData.premium_amount} onChange={handleChange} required />\n                <FormInput label=\"Sum Assured (‚Çπ)\" name=\"sum_assured\" type=\"number\" value={formData.sum_assured} onChange={handleChange} required />\n                <FormInput label=\"Nominee Name\" name=\"nominee_name\" value={formData.nominee_name} onChange={handleChange} required />\n                <FormInput label=\"Start Date\" name=\"policy_start_date\" type=\"date\" value={formData.policy_start_date.toISOString().split('T')[0]} onChange={handleDateChange as any} required />\n                <FormInput label=\"End Date\" name=\"policy_end_date\" type=\"date\" value={formData.policy_end_date.toISOString().split('T')[0]} onChange={handleDateChange as any} required />\n            </div>\n\n            <FileUpload\n                label=\"Policy Document\"\n                name=\"document_url\"\n                bucket=\"policy-documents\"\n                onUploadComplete={(url) => setFormData(prev => ({ ...prev, document_url: url }))}\n            />\n\n            <div className=\"flex justify-end space-x-4 pt-4 border-t\">\n                <button type=\"button\" onClick={onClose} className=\"px-4 py-2 border rounded-lg hover:bg-gray-50\">Cancel</button>\n                <button type=\"submit\" disabled={loading} className=\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center\">\n                    {loading ? <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" /> : <Save className=\"w-4 h-4 mr-2\" />}\n                    Save Policy\n                </button>\n            </div>\n        </form>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6387, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/forms/TravelPolicyForm.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { X, Save, Loader2 } from 'lucide-react';\nimport FormInput from './FormInput';\nimport FileUpload from './FileUpload';\nimport { addTravelPolicy } from '@/lib/db';\nimport { INSURANCE_COMPANIES } from '@/lib/constants';\n\ninterface TravelPolicyFormProps {\n    userId: string;\n    initialData?: any;\n    onClose: () => void;\n    onSuccess: () => void;\n}\n\nexport default function TravelPolicyForm({ userId, initialData, onClose, onSuccess }: TravelPolicyFormProps) {\n    const [loading, setLoading] = useState(false);\n    const [errors, setErrors] = useState<Record<string, string>>({});\n    const [formData, setFormData] = useState({\n        policy_number: initialData?.policy_number || '',\n        insurer_name: initialData?.insurer_name || '',\n        premium_amount: initialData?.premium_amount || 0,\n        destination: initialData?.destination || '',\n        trip_type: initialData?.trip_type || 'Single Trip',\n        policy_start_date: initialData?.policy_start_date ? new Date(initialData.policy_start_date) : new Date(),\n        policy_end_date: initialData?.policy_end_date ? new Date(initialData.policy_end_date) : new Date(new Date().setDate(new Date().getDate() + 7)),\n        document_url: initialData?.document_url || '',\n    });\n\n    // Auto-calculate end date when start date changes (1 day before same date next year)\n    useEffect(() => {\n        if (formData.policy_start_date && !initialData) {\n            const startDate = new Date(formData.policy_start_date);\n            const endDate = new Date(startDate);\n            endDate.setFullYear(endDate.getFullYear() + 1);\n            endDate.setDate(endDate.getDate() - 1); // 1 day before\n            setFormData(prev => ({\n                ...prev,\n                policy_end_date: endDate\n            }));\n        }\n    }, [formData.policy_start_date, initialData]);\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {\n        const { name, value, type } = e.target;\n        setFormData(prev => ({\n            ...prev,\n            [name]: type === 'number' ? Number(value) : value\n        }));\n    };\n\n    const handleDateChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const { name, value } = e.target;\n        setFormData(prev => ({ ...prev, [name]: new Date(value) }));\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setLoading(true);\n        try {\n            await addTravelPolicy({\n                ...formData,\n                user_id: userId,\n                status: 'Active'\n            });\n            onSuccess();\n        } catch (error) {\n            console.error('Error saving travel policy:', error);\n            setErrors({ submit: 'Failed to save policy' });\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900\">Travel Insurance Details</h3>\n\n            <div className=\"grid md:grid-cols-2 gap-6\">\n                <FormInput label=\"Policy Number\" name=\"policy_number\" value={formData.policy_number} onChange={handleChange} required />\n                <FormInput\n                    label=\"Insurer Name\"\n                    name=\"insurer_name\"\n                    type=\"select\"\n                    value={formData.insurer_name}\n                    onChange={handleChange}\n                    options={INSURANCE_COMPANIES.map(c => ({ value: c, label: c }))}\n                    required\n                />\n                <FormInput label=\"Premium Amount (‚Çπ)\" name=\"premium_amount\" type=\"number\" value={formData.premium_amount} onChange={handleChange} required />\n                <FormInput label=\"Destination\" name=\"destination\" value={formData.destination} onChange={handleChange} required />\n                <FormInput\n                    label=\"Trip Type\"\n                    name=\"trip_type\"\n                    type=\"select\"\n                    value={formData.trip_type}\n                    onChange={handleChange}\n                    options={[{ value: 'Single Trip', label: 'Single Trip' }, { value: 'Multi Trip', label: 'Multi Trip' }]}\n                    required\n                />\n                <FormInput label=\"Start Date\" name=\"policy_start_date\" type=\"date\" value={formData.policy_start_date.toISOString().split('T')[0]} onChange={handleDateChange as any} required />\n                <FormInput label=\"End Date\" name=\"policy_end_date\" type=\"date\" value={formData.policy_end_date.toISOString().split('T')[0]} onChange={handleDateChange as any} required />\n            </div>\n\n            <FileUpload\n                label=\"Policy Document\"\n                name=\"document_url\"\n                bucket=\"policy-documents\"\n                onUploadComplete={(url) => setFormData(prev => ({ ...prev, document_url: url }))}\n            />\n\n            <div className=\"flex justify-end space-x-4 pt-4 border-t\">\n                <button type=\"button\" onClick={onClose} className=\"px-4 py-2 border rounded-lg hover:bg-gray-50\">Cancel</button>\n                <button type=\"submit\" disabled={loading} className=\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center\">\n                    {loading ? <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" /> : <Save className=\"w-4 h-4 mr-2\" />}\n                    Save Policy\n                </button>\n            </div>\n        </form>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6654, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/forms/CyberPolicyForm.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { X, Save, Loader2 } from 'lucide-react';\nimport FormInput from './FormInput';\nimport FileUpload from './FileUpload';\nimport { addCyberPolicy } from '@/lib/db';\nimport { INSURANCE_COMPANIES } from '@/lib/constants';\n\ninterface CyberPolicyFormProps {\n    userId: string;\n    initialData?: any;\n    onClose: () => void;\n    onSuccess: () => void;\n}\n\nexport default function CyberPolicyForm({ userId, initialData, onClose, onSuccess }: CyberPolicyFormProps) {\n    const [loading, setLoading] = useState(false);\n    const [errors, setErrors] = useState<Record<string, string>>({});\n    const [formData, setFormData] = useState({\n        policy_number: initialData?.policy_number || '',\n        insurer_name: initialData?.insurer_name || '',\n        premium_amount: initialData?.premium_amount || 0,\n        sum_insured: initialData?.sum_insured || 0,\n        cyber_risk_type: initialData?.cyber_risk_type || 'Personal',\n        policy_start_date: initialData?.policy_start_date ? new Date(initialData.policy_start_date) : new Date(),\n        policy_end_date: initialData?.policy_end_date ? new Date(initialData.policy_end_date) : new Date(new Date().setFullYear(new Date().getFullYear() + 1)),\n        document_url: initialData?.document_url || '',\n    });\n\n    // Auto-calculate end date when start date changes (1 day before same date next year)\n    useEffect(() => {\n        if (formData.policy_start_date && !initialData) {\n            const startDate = new Date(formData.policy_start_date);\n            const endDate = new Date(startDate);\n            endDate.setFullYear(endDate.getFullYear() + 1);\n            endDate.setDate(endDate.getDate() - 1); // 1 day before\n            setFormData(prev => ({\n                ...prev,\n                policy_end_date: endDate\n            }));\n        }\n    }, [formData.policy_start_date, initialData]);\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {\n        const { name, value, type } = e.target;\n        setFormData(prev => ({\n            ...prev,\n            [name]: type === 'number' ? Number(value) : value\n        }));\n    };\n\n    const handleDateChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const { name, value } = e.target;\n        setFormData(prev => ({ ...prev, [name]: new Date(value) }));\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setLoading(true);\n        try {\n            await addCyberPolicy({\n                ...formData,\n                user_id: userId,\n                status: 'Active'\n            });\n            onSuccess();\n        } catch (error) {\n            console.error('Error saving cyber policy:', error);\n            setErrors({ submit: 'Failed to save policy' });\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900\">Cyber Insurance Details</h3>\n\n            <div className=\"grid md:grid-cols-2 gap-6\">\n                <FormInput label=\"Policy Number\" name=\"policy_number\" value={formData.policy_number} onChange={handleChange} required />\n                <FormInput label=\"Policy Number\" name=\"policy_number\" value={formData.policy_number} onChange={handleChange} required />\n                <FormInput\n                    label=\"Insurer Name\"\n                    name=\"insurer_name\"\n                    type=\"select\"\n                    value={formData.insurer_name}\n                    onChange={handleChange}\n                    options={INSURANCE_COMPANIES.map(c => ({ value: c, label: c }))}\n                    required\n                />\n                <FormInput label=\"Premium Amount (‚Çπ)\" name=\"premium_amount\" type=\"number\" value={formData.premium_amount} onChange={handleChange} required />\n                <FormInput label=\"Sum Insured (‚Çπ)\" name=\"sum_insured\" type=\"number\" value={formData.sum_insured} onChange={handleChange} required />\n                <FormInput\n                    label=\"Risk Type\"\n                    name=\"cyber_risk_type\"\n                    type=\"select\"\n                    value={formData.cyber_risk_type}\n                    onChange={handleChange}\n                    options={[{ value: 'Personal', label: 'Personal' }, { value: 'Business', label: 'Business' }]}\n                    required\n                />\n                <FormInput label=\"Start Date\" name=\"policy_start_date\" type=\"date\" value={formData.policy_start_date.toISOString().split('T')[0]} onChange={handleDateChange as any} required />\n                <FormInput label=\"End Date\" name=\"policy_end_date\" type=\"date\" value={formData.policy_end_date.toISOString().split('T')[0]} onChange={handleDateChange as any} required />\n            </div>\n\n            <FileUpload\n                label=\"Policy Document\"\n                name=\"document_url\"\n                bucket=\"policy-documents\"\n                onUploadComplete={(url) => setFormData(prev => ({ ...prev, document_url: url }))}\n            />\n\n            <div className=\"flex justify-end space-x-4 pt-4 border-t\">\n                <button type=\"button\" onClick={onClose} className=\"px-4 py-2 border rounded-lg hover:bg-gray-50\">Cancel</button>\n                <button type=\"submit\" disabled={loading} className=\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center\">\n                    {loading ? <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" /> : <Save className=\"w-4 h-4 mr-2\" />}\n                    Save Policy\n                </button>\n            </div>\n        </form>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6933, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/policies/AddPolicyModal.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport { X, Car, Heart, Briefcase, ChevronRight } from 'lucide-react';\nimport MotorPolicyForm from '@/components/forms/MotorPolicyForm';\nimport HealthPolicyForm from '@/components/forms/HealthPolicyForm';\nimport CommercialPolicyForm from '@/components/forms/CommercialPolicyForm';\n\nimport LifePolicyForm from '@/components/forms/LifePolicyForm';\nimport TravelPolicyForm from '@/components/forms/TravelPolicyForm';\nimport CyberPolicyForm from '@/components/forms/CyberPolicyForm';\n\ninterface AddPolicyModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    userId: string;\n    onSuccess: () => void;\n    initialType?: PolicyType;\n}\n\nexport type PolicyType = 'Motor' | 'Health' | 'Commercial' | 'Life' | 'Travel' | 'Cyber';\n\nexport default function AddPolicyModal({ isOpen, onClose, userId, onSuccess, initialType = undefined }: AddPolicyModalProps) {\n    const [selectedType, setSelectedType] = useState<PolicyType | undefined>(initialType);\n\n    // Reset selected type when modal opens/closes or initialType changes\n    React.useEffect(() => {\n        if (isOpen) {\n            setSelectedType(initialType);\n        }\n    }, [isOpen, initialType]);\n\n    if (!isOpen) return null;\n\n    const handleSuccess = () => {\n        onSuccess();\n        onClose();\n        setSelectedType(undefined);\n    };\n\n    const renderForm = () => {\n        switch (selectedType) {\n            case 'Motor':\n                return <MotorPolicyForm userId={userId} onClose={onClose} onSuccess={handleSuccess} />;\n            case 'Health':\n                return <HealthPolicyForm userId={userId} onClose={onClose} onSuccess={handleSuccess} />;\n            case 'Commercial':\n                return <CommercialPolicyForm userId={userId} onClose={onClose} onSuccess={handleSuccess} />;\n            case 'Life':\n                return <LifePolicyForm userId={userId} onClose={onClose} onSuccess={handleSuccess} />;\n            case 'Travel':\n                return <TravelPolicyForm userId={userId} onClose={onClose} onSuccess={handleSuccess} />;\n            case 'Cyber':\n                return <CyberPolicyForm userId={userId} onClose={onClose} onSuccess={handleSuccess} />;\n            default:\n                return null;\n        }\n    };\n\n    return (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm\">\n            <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n                {selectedType ? (\n                    <div>\n                        <div className=\"flex items-center justify-between p-6 border-b border-gray-100\">\n                            <div className=\"flex items-center gap-2\">\n                                <button\n                                    onClick={() => setSelectedType(undefined)}\n                                    className=\"text-sm text-gray-500 hover:text-gray-900\"\n                                >\n                                    Select Type\n                                </button>\n                                <ChevronRight className=\"w-4 h-4 text-gray-400\" />\n                                <h3 className=\"text-lg font-bold text-gray-900\">Add {selectedType} Policy</h3>\n                            </div>\n                            <button onClick={onClose} className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\">\n                                <X className=\"w-5 h-5 text-gray-500\" />\n                            </button>\n                        </div>\n                        <div className=\"p-6\">\n                            {renderForm()}\n                        </div>\n                    </div>\n                ) : (\n                    <div className=\"p-8\">\n                        <div className=\"flex items-center justify-between mb-8\">\n                            <div>\n                                <h2 className=\"text-2xl font-bold text-gray-900\">Add New Policy</h2>\n                                <p className=\"text-gray-500 mt-1\">Select the type of policy you want to add</p>\n                            </div>\n                            <button onClick={onClose} className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\">\n                                <X className=\"w-5 h-5 text-gray-500\" />\n                            </button>\n                        </div>\n\n                        <div className=\"grid gap-4\">\n                            <button\n                                onClick={() => setSelectedType('Motor')}\n                                className=\"flex items-center p-4 border border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group text-left\"\n                            >\n                                <div className=\"p-3 bg-blue-100 text-blue-600 rounded-lg group-hover:bg-blue-200 transition-colors\">\n                                    <Car className=\"w-6 h-6\" />\n                                </div>\n                                <div className=\"ml-4\">\n                                    <h3 className=\"font-semibold text-gray-900 group-hover:text-blue-700\">Motor Insurance</h3>\n                                    <p className=\"text-sm text-gray-500\">Car, Bike, and other vehicle policies</p>\n                                </div>\n                                <ChevronRight className=\"w-5 h-5 text-gray-300 ml-auto group-hover:text-blue-500\" />\n                            </button>\n\n                            <button\n                                onClick={() => setSelectedType('Health')}\n                                className=\"flex items-center p-4 border border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition-all group text-left\"\n                            >\n                                <div className=\"p-3 bg-pink-100 text-pink-600 rounded-lg group-hover:bg-pink-200 transition-colors\">\n                                    <Heart className=\"w-6 h-6\" />\n                                </div>\n                                <div className=\"ml-4\">\n                                    <h3 className=\"font-semibold text-gray-900 group-hover:text-pink-700\">Health Insurance</h3>\n                                    <p className=\"text-sm text-gray-500\">Individual and Family Floater plans</p>\n                                </div>\n                                <ChevronRight className=\"w-5 h-5 text-gray-300 ml-auto group-hover:text-pink-500\" />\n                            </button>\n\n                            <button\n                                onClick={() => setSelectedType('Commercial')}\n                                className=\"flex items-center p-4 border border-gray-200 rounded-xl hover:border-purple-500 hover:bg-purple-50 transition-all group text-left\"\n                            >\n                                <div className=\"p-3 bg-purple-100 text-purple-600 rounded-lg group-hover:bg-purple-200 transition-colors\">\n                                    <Briefcase className=\"w-6 h-6\" />\n                                </div>\n                                <div className=\"ml-4\">\n                                    <h3 className=\"font-semibold text-gray-900 group-hover:text-purple-700\">Commercial Insurance</h3>\n                                    <p className=\"text-sm text-gray-500\">Fire, Marine, and Liability policies</p>\n                                </div>\n                                <ChevronRight className=\"w-5 h-5 text-gray-300 ml-auto group-hover:text-purple-500\" />\n                            </button>\n\n                            <button\n                                onClick={() => setSelectedType('Life')}\n                                className=\"flex items-center p-4 border border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition-all group text-left\"\n                            >\n                                <div className=\"p-3 bg-pink-100 text-pink-600 rounded-lg group-hover:bg-pink-200 transition-colors\">\n                                    <Heart className=\"w-6 h-6\" />\n                                </div>\n                                <div className=\"ml-4\">\n                                    <h3 className=\"font-semibold text-gray-900 group-hover:text-pink-700\">Life Insurance</h3>\n                                    <p className=\"text-sm text-gray-500\">Term life and endowment plans</p>\n                                </div>\n                                <ChevronRight className=\"w-5 h-5 text-gray-300 ml-auto group-hover:text-pink-500\" />\n                            </button>\n\n                            <button\n                                onClick={() => setSelectedType('Travel')}\n                                className=\"flex items-center p-4 border border-gray-200 rounded-xl hover:border-orange-500 hover:bg-orange-50 transition-all group text-left\"\n                            >\n                                <div className=\"p-3 bg-orange-100 text-orange-600 rounded-lg group-hover:bg-orange-200 transition-colors\">\n                                    <Briefcase className=\"w-6 h-6\" />\n                                </div>\n                                <div className=\"ml-4\">\n                                    <h3 className=\"font-semibold text-gray-900 group-hover:text-orange-700\">Travel Insurance</h3>\n                                    <p className=\"text-sm text-gray-500\">Domestic and International travel</p>\n                                </div>\n                                <ChevronRight className=\"w-5 h-5 text-gray-300 ml-auto group-hover:text-orange-500\" />\n                            </button>\n\n                            <button\n                                onClick={() => setSelectedType('Cyber')}\n                                className=\"flex items-center p-4 border border-gray-200 rounded-xl hover:border-indigo-500 hover:bg-indigo-50 transition-all group text-left\"\n                            >\n                                <div className=\"p-3 bg-indigo-100 text-indigo-600 rounded-lg group-hover:bg-indigo-200 transition-colors\">\n                                    <Briefcase className=\"w-6 h-6\" />\n                                </div>\n                                <div className=\"ml-4\">\n                                    <h3 className=\"font-semibold text-gray-900 group-hover:text-indigo-700\">Cyber Insurance</h3>\n                                    <p className=\"text-sm text-gray-500\">Protection against digital threats</p>\n                                </div>\n                                <ChevronRight className=\"w-5 h-5 text-gray-300 ml-auto group-hover:text-indigo-500\" />\n                            </button>\n                        </div>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAVA;;;;;;;;;;AAsBe,SAAS,eAAe,EAAE,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,SAAS,EAAE,cAAc,SAAS,EAAuB;IACvH,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,kOAAQ,EAAyB;IAEzE,qEAAqE;IACrE,iOAAK,CAAC,SAAS,CAAC;QACZ,IAAI,QAAQ;YACR,gBAAgB;QACpB;IACJ,GAAG;QAAC;QAAQ;KAAY;IAExB,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,gBAAgB;QAClB;QACA;QACA,gBAAgB;IACpB;IAEA,MAAM,aAAa;QACf,OAAQ;YACJ,KAAK;gBACD,qBAAO,+PAAC,mKAAe;oBAAC,QAAQ;oBAAQ,SAAS;oBAAS,WAAW;;;;;;YACzE,KAAK;gBACD,qBAAO,+PAAC,oKAAgB;oBAAC,QAAQ;oBAAQ,SAAS;oBAAS,WAAW;;;;;;YAC1E,KAAK;gBACD,qBAAO,+PAAC,wKAAoB;oBAAC,QAAQ;oBAAQ,SAAS;oBAAS,WAAW;;;;;;YAC9E,KAAK;gBACD,qBAAO,+PAAC,kKAAc;oBAAC,QAAQ;oBAAQ,SAAS;oBAAS,WAAW;;;;;;YACxE,KAAK;gBACD,qBAAO,+PAAC,oKAAgB;oBAAC,QAAQ;oBAAQ,SAAS;oBAAS,WAAW;;;;;;YAC1E,KAAK;gBACD,qBAAO,+PAAC,mKAAe;oBAAC,QAAQ;oBAAQ,SAAS;oBAAS,WAAW;;;;;;YACzE;gBACI,OAAO;QACf;IACJ;IAEA,qBACI,+PAAC;QAAI,WAAU;kBACX,cAAA,+PAAC;YAAI,WAAU;sBACV,6BACG,+PAAC;;kCACG,+PAAC;wBAAI,WAAU;;0CACX,+PAAC;gCAAI,WAAU;;kDACX,+PAAC;wCACG,SAAS,IAAM,gBAAgB;wCAC/B,WAAU;kDACb;;;;;;kDAGD,+PAAC,uPAAY;wCAAC,WAAU;;;;;;kDACxB,+PAAC;wCAAG,WAAU;;4CAAkC;4CAAK;4CAAa;;;;;;;;;;;;;0CAEtE,+PAAC;gCAAO,SAAS;gCAAS,WAAU;0CAChC,cAAA,+PAAC,kNAAC;oCAAC,WAAU;;;;;;;;;;;;;;;;;kCAGrB,+PAAC;wBAAI,WAAU;kCACV;;;;;;;;;;;qCAIT,+PAAC;gBAAI,WAAU;;kCACX,+PAAC;wBAAI,WAAU;;0CACX,+PAAC;;kDACG,+PAAC;wCAAG,WAAU;kDAAmC;;;;;;kDACjD,+PAAC;wCAAE,WAAU;kDAAqB;;;;;;;;;;;;0CAEtC,+PAAC;gCAAO,SAAS;gCAAS,WAAU;0CAChC,cAAA,+PAAC,kNAAC;oCAAC,WAAU;;;;;;;;;;;;;;;;;kCAIrB,+PAAC;wBAAI,WAAU;;0CACX,+PAAC;gCACG,SAAS,IAAM,gBAAgB;gCAC/B,WAAU;;kDAEV,+PAAC;wCAAI,WAAU;kDACX,cAAA,+PAAC,wNAAG;4CAAC,WAAU;;;;;;;;;;;kDAEnB,+PAAC;wCAAI,WAAU;;0DACX,+PAAC;gDAAG,WAAU;0DAAwD;;;;;;0DACtE,+PAAC;gDAAE,WAAU;0DAAwB;;;;;;;;;;;;kDAEzC,+PAAC,uPAAY;wCAAC,WAAU;;;;;;;;;;;;0CAG5B,+PAAC;gCACG,SAAS,IAAM,gBAAgB;gCAC/B,WAAU;;kDAEV,+PAAC;wCAAI,WAAU;kDACX,cAAA,+PAAC,8NAAK;4CAAC,WAAU;;;;;;;;;;;kDAErB,+PAAC;wCAAI,WAAU;;0DACX,+PAAC;gDAAG,WAAU;0DAAwD;;;;;;0DACtE,+PAAC;gDAAE,WAAU;0DAAwB;;;;;;;;;;;;kDAEzC,+PAAC,uPAAY;wCAAC,WAAU;;;;;;;;;;;;0CAG5B,+PAAC;gCACG,SAAS,IAAM,gBAAgB;gCAC/B,WAAU;;kDAEV,+PAAC;wCAAI,WAAU;kDACX,cAAA,+PAAC,0OAAS;4CAAC,WAAU;;;;;;;;;;;kDAEzB,+PAAC;wCAAI,WAAU;;0DACX,+PAAC;gDAAG,WAAU;0DAA0D;;;;;;0DACxE,+PAAC;gDAAE,WAAU;0DAAwB;;;;;;;;;;;;kDAEzC,+PAAC,uPAAY;wCAAC,WAAU;;;;;;;;;;;;0CAG5B,+PAAC;gCACG,SAAS,IAAM,gBAAgB;gCAC/B,WAAU;;kDAEV,+PAAC;wCAAI,WAAU;kDACX,cAAA,+PAAC,8NAAK;4CAAC,WAAU;;;;;;;;;;;kDAErB,+PAAC;wCAAI,WAAU;;0DACX,+PAAC;gDAAG,WAAU;0DAAwD;;;;;;0DACtE,+PAAC;gDAAE,WAAU;0DAAwB;;;;;;;;;;;;kDAEzC,+PAAC,uPAAY;wCAAC,WAAU;;;;;;;;;;;;0CAG5B,+PAAC;gCACG,SAAS,IAAM,gBAAgB;gCAC/B,WAAU;;kDAEV,+PAAC;wCAAI,WAAU;kDACX,cAAA,+PAAC,0OAAS;4CAAC,WAAU;;;;;;;;;;;kDAEzB,+PAAC;wCAAI,WAAU;;0DACX,+PAAC;gDAAG,WAAU;0DAA0D;;;;;;0DACxE,+PAAC;gDAAE,WAAU;0DAAwB;;;;;;;;;;;;kDAEzC,+PAAC,uPAAY;wCAAC,WAAU;;;;;;;;;;;;0CAG5B,+PAAC;gCACG,SAAS,IAAM,gBAAgB;gCAC/B,WAAU;;kDAEV,+PAAC;wCAAI,WAAU;kDACX,cAAA,+PAAC,0OAAS;4CAAC,WAAU;;;;;;;;;;;kDAEzB,+PAAC;wCAAI,WAAU;;0DACX,+PAAC;gDAAG,WAAU;0DAA0D;;;;;;0DACxE,+PAAC;gDAAE,WAAU;0DAAwB;;;;;;;;;;;;kDAEzC,+PAAC,uPAAY;wCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQxD"}},
    {"offset": {"line": 7540, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/dashboard/PolicyTable.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useMemo } from 'react';\nimport { MotorPolicy, HealthPolicy, CommercialPolicy } from '@/types';\nimport { calculatePolicyStatus, formatCurrency } from '@/lib/utils';\nimport { Car, Heart, Briefcase, Eye, Plus, Plane, Umbrella, Shield, Search, ArrowUpDown, ArrowUp, ArrowDown } from 'lucide-react';\nimport { useRouter } from 'next/navigation';\nimport AddPolicyModal from '@/components/policies/AddPolicyModal';\n\ntype PolicyType = 'Motor' | 'Health' | 'Travel' | 'Commercial' | 'Life' | 'Cyber';\n\ninterface PolicyTableProps {\n    policyType: PolicyType;\n    motorPolicies: MotorPolicy[];\n    healthPolicies: HealthPolicy[];\n    commercialPolicies: CommercialPolicy[];\n    travelPolicies?: any[];\n    lifePolicies?: any[];\n    cyberPolicies?: any[];\n    userId: string;\n    onPolicyAdded?: () => void;\n}\n\ntype SortField = 'policy_number' | 'insurer_name' | 'premium_amount' | 'start_date' | 'end_date' | 'status' | 'vehicle_number';\ntype SortDirection = 'asc' | 'desc' | null;\n\nexport default function PolicyTable({\n    policyType,\n    motorPolicies,\n    healthPolicies,\n    commercialPolicies,\n    travelPolicies = [],\n    lifePolicies = [],\n    cyberPolicies = [],\n    userId,\n    onPolicyAdded\n}: PolicyTableProps) {\n    const router = useRouter();\n    const [isAddModalOpen, setIsAddModalOpen] = useState(false);\n    const [searchQuery, setSearchQuery] = useState('');\n    const [sortField, setSortField] = useState<SortField | null>(null);\n    const [sortDirection, setSortDirection] = useState<SortDirection>(null);\n\n    // Get policies based on type\n    const getPolicies = () => {\n        switch (policyType) {\n            case 'Motor':\n                return motorPolicies.map(p => ({ ...p, type: 'Motor' as const }));\n            case 'Health':\n                return healthPolicies.map(p => ({ ...p, type: 'Health' as const }));\n            case 'Commercial':\n                return commercialPolicies.map(p => ({ ...p, type: 'Commercial' as const }));\n            case 'Travel':\n                return travelPolicies.map(p => ({ ...p, type: 'Travel' as const }));\n            case 'Life':\n                return lifePolicies.map(p => ({ ...p, type: 'Life' as const }));\n            case 'Cyber':\n                return cyberPolicies.map(p => ({ ...p, type: 'Cyber' as const }));\n            default:\n                return [];\n        }\n    };\n\n    const allPolicies = getPolicies();\n\n    // Filter, search, and sort policies\n    const filteredAndSortedPolicies = useMemo(() => {\n        let result = allPolicies;\n\n        // Filter: Show only Active and Expiring Soon policies\n        result = result.filter(p => {\n            const isMotor = p.type === 'Motor';\n            const isHealth = p.type === 'Health';\n            const endDateValue = isMotor ? (p as any).policy_end_date :\n                isHealth ? (p as any).expiry_date :\n                    (p as any).expiry_date;\n            const endDate = endDateValue ? new Date(endDateValue) : null;\n            const status = calculatePolicyStatus(endDate);\n            return status === 'Active' || status === 'Expiring Soon';\n        });\n\n        // Search\n        if (searchQuery.trim()) {\n            const query = searchQuery.toLowerCase();\n            result = result.filter(p => {\n                const isMotor = p.type === 'Motor';\n                const isHealth = p.type === 'Health';\n\n                const startDateValue = isMotor ? (p as any).policy_start_date :\n                    isHealth ? (p as any).start_date :\n                        (p as any).start_date;\n                const endDateValue = isMotor ? (p as any).policy_end_date :\n                    isHealth ? (p as any).expiry_date :\n                        (p as any).expiry_date;\n                const endDate = endDateValue ? new Date(endDateValue) : null;\n                const status = calculatePolicyStatus(endDate);\n\n                // Convert dates to strings for search\n                const startDateStr = startDateValue ? new Date(startDateValue).toLocaleDateString('en-IN').toLowerCase() : '';\n                const endDateStr = endDateValue ? new Date(endDateValue).toLocaleDateString('en-IN').toLowerCase() : '';\n\n                // Search in common fields\n                const matchesCommon =\n                    (p as any).policy_number?.toLowerCase().includes(query) ||\n                    (p as any).insurer_name?.toLowerCase().includes(query) ||\n                    (p as any).premium_amount?.toString().includes(query) ||\n                    status?.toLowerCase().includes(query) ||\n                    startDateStr.includes(query) ||\n                    endDateStr.includes(query);\n\n                // For Motor policies, also search vehicle number\n                const matchesVehicle = isMotor && (p as any).vehicle_number?.toLowerCase().includes(query);\n\n                return matchesCommon || matchesVehicle;\n            });\n        }\n\n        // Sort\n        if (sortField && sortDirection) {\n            result = [...result].sort((a, b) => {\n                let aValue: any;\n                let bValue: any;\n\n                const isMotorA = a.type === 'Motor';\n                const isHealthA = a.type === 'Health';\n                const isMotorB = b.type === 'Motor';\n                const isHealthB = b.type === 'Health';\n\n                switch (sortField) {\n                    case 'policy_number':\n                        aValue = (a as any).policy_number || '';\n                        bValue = (b as any).policy_number || '';\n                        break;\n                    case 'insurer_name':\n                        aValue = (a as any).insurer_name || '';\n                        bValue = (b as any).insurer_name || '';\n                        break;\n                    case 'premium_amount':\n                        aValue = Number((a as any).premium_amount) || 0;\n                        bValue = Number((b as any).premium_amount) || 0;\n                        break;\n                    case 'start_date':\n                        const aStartDate = isMotorA ? (a as any).policy_start_date : (a as any).start_date;\n                        const bStartDate = isMotorB ? (b as any).policy_start_date : (b as any).start_date;\n                        aValue = aStartDate ? new Date(aStartDate).getTime() : 0;\n                        bValue = bStartDate ? new Date(bStartDate).getTime() : 0;\n                        break;\n                    case 'end_date':\n                        const aEndDate = isMotorA ? (a as any).policy_end_date : (a as any).expiry_date;\n                        const bEndDate = isMotorB ? (b as any).policy_end_date : (b as any).expiry_date;\n                        aValue = aEndDate ? new Date(aEndDate).getTime() : 0;\n                        bValue = bEndDate ? new Date(bEndDate).getTime() : 0;\n                        break;\n                    case 'status':\n                        const aEndDateForStatus = isMotorA ? (a as any).policy_end_date : (a as any).expiry_date;\n                        const bEndDateForStatus = isMotorB ? (b as any).policy_end_date : (b as any).expiry_date;\n                        aValue = calculatePolicyStatus(aEndDateForStatus ? new Date(aEndDateForStatus) : null);\n                        bValue = calculatePolicyStatus(bEndDateForStatus ? new Date(bEndDateForStatus) : null);\n                        break;\n                    case 'vehicle_number':\n                        aValue = isMotorA ? (a as any).vehicle_number || '' : '';\n                        bValue = isMotorB ? (b as any).vehicle_number || '' : '';\n                        break;\n                    default:\n                        return 0;\n                }\n\n                if (typeof aValue === 'string' && typeof bValue === 'string') {\n                    return sortDirection === 'asc'\n                        ? aValue.localeCompare(bValue)\n                        : bValue.localeCompare(aValue);\n                } else {\n                    return sortDirection === 'asc'\n                        ? aValue - bValue\n                        : bValue - aValue;\n                }\n            });\n        }\n\n        return result;\n    }, [allPolicies, searchQuery, sortField, sortDirection]);\n\n    const handleSort = (field: SortField) => {\n        if (sortField === field) {\n            // Cycle through: asc -> desc -> null\n            if (sortDirection === 'asc') {\n                setSortDirection('desc');\n            } else if (sortDirection === 'desc') {\n                setSortDirection(null);\n                setSortField(null);\n            }\n        } else {\n            setSortField(field);\n            setSortDirection('asc');\n        }\n    };\n\n    const getSortIcon = (field: SortField) => {\n        if (sortField !== field) {\n            return <ArrowUpDown className=\"w-4 h-4 ml-1 inline opacity-30\" />;\n        }\n        if (sortDirection === 'asc') {\n            return <ArrowUp className=\"w-4 h-4 ml-1 inline text-primary-600\" />;\n        }\n        if (sortDirection === 'desc') {\n            return <ArrowDown className=\"w-4 h-4 ml-1 inline text-primary-600\" />;\n        }\n        return <ArrowUpDown className=\"w-4 h-4 ml-1 inline opacity-30\" />;\n    };\n\n    const getIcon = () => {\n        switch (policyType) {\n            case 'Motor':\n                return <Car className=\"w-5 h-5 text-blue-600\" />;\n            case 'Health':\n                return <Heart className=\"w-5 h-5 text-green-600\" />;\n            case 'Commercial':\n                return <Briefcase className=\"w-5 h-5 text-orange-600\" />;\n            case 'Travel':\n                return <Plane className=\"w-5 h-5 text-purple-600\" />;\n            case 'Life':\n                return <Umbrella className=\"w-5 h-5 text-pink-600\" />;\n            case 'Cyber':\n                return <Shield className=\"w-5 h-5 text-cyan-600\" />;\n            default:\n                return null;\n        }\n    };\n\n    const getColorClass = () => {\n        switch (policyType) {\n            case 'Motor':\n                return 'bg-blue-50 border-blue-200';\n            case 'Health':\n                return 'bg-green-50 border-green-200';\n            case 'Commercial':\n                return 'bg-orange-50 border-orange-200';\n            default:\n                return 'bg-gray-50 border-gray-200';\n        }\n    };\n\n    const handleViewDetails = (policy: any) => {\n        const typeSlug = policyType.toLowerCase();\n        router.push(`/policies/${typeSlug}/${policy.id}`);\n    };\n\n    const isMotorTable = policyType === 'Motor';\n\n    return (\n        <div className=\"bg-white rounded-2xl border border-gray-200 shadow-soft overflow-hidden\">\n            {/* Header */}\n            <div className={`px-6 py-4 border-b ${getColorClass()} flex items-center justify-between`}>\n                <div className=\"flex items-center gap-3\">\n                    <div className=\"p-2 bg-white rounded-lg shadow-sm\">\n                        {getIcon()}\n                    </div>\n                    <div>\n                        <h3 className=\"text-lg font-bold text-gray-900\">{policyType} Policies</h3>\n                        <p className=\"text-sm text-gray-600\">\n                            {filteredAndSortedPolicies.length} {filteredAndSortedPolicies.length === 1 ? 'policy' : 'policies'} found\n                        </p>\n                    </div>\n                </div>\n                <button\n                    onClick={() => setIsAddModalOpen(true)}\n                    className=\"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors shadow-sm\"\n                >\n                    <Plus className=\"w-4 h-4\" />\n                    <span className=\"font-medium\">Add Policy</span>\n                </button>\n            </div>\n\n            {/* Search Bar */}\n            <div className=\"px-6 py-4 border-b border-gray-200 bg-gray-50\">\n                <div className=\"relative\">\n                    <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" />\n                    <input\n                        type=\"text\"\n                        placeholder={`Search ${policyType.toLowerCase()} policies${isMotorTable ? ' (policy number, insurer, vehicle number, etc.)' : ' (policy number, insurer, etc.)'}`}\n                        value={searchQuery}\n                        onChange={(e) => setSearchQuery(e.target.value)}\n                        className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-all\"\n                    />\n                </div>\n            </div>\n\n            {/* Table Content with Scroll */}\n            <div className=\"overflow-x-auto max-h-[400px] overflow-y-auto\">\n                {filteredAndSortedPolicies.length === 0 ? (\n                    <div className=\"text-center py-12 px-6\">\n                        <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                            {getIcon() || <Briefcase className=\"w-8 h-8 text-gray-400\" />}\n                        </div>\n                        <h4 className=\"text-lg font-semibold text-gray-900 mb-2\">\n                            {searchQuery ? 'No matching policies found' : `No ${policyType} Policies Found`}\n                        </h4>\n                        <p className=\"text-gray-500\">\n                            {searchQuery\n                                ? 'Try adjusting your search terms'\n                                : `You don't have any active ${policyType.toLowerCase()} policies yet.`\n                            }\n                        </p>\n                    </div>\n                ) : (\n                    <table className=\"w-full\">\n                        <thead className=\"bg-gray-50 border-b border-gray-200 sticky top-0\">\n                            <tr>\n                                {isMotorTable && (\n                                    <th\n                                        onClick={() => handleSort('vehicle_number')}\n                                        className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors\"\n                                    >\n                                        Vehicle Number {getSortIcon('vehicle_number')}\n                                    </th>\n                                )}\n                                <th\n                                    onClick={() => handleSort('policy_number')}\n                                    className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors\"\n                                >\n                                    Policy Number {getSortIcon('policy_number')}\n                                </th>\n                                <th\n                                    onClick={() => handleSort('insurer_name')}\n                                    className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors\"\n                                >\n                                    Insurer Name {getSortIcon('insurer_name')}\n                                </th>\n                                <th\n                                    onClick={() => handleSort('premium_amount')}\n                                    className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors\"\n                                >\n                                    Premium Amount {getSortIcon('premium_amount')}\n                                </th>\n                                <th\n                                    onClick={() => handleSort('start_date')}\n                                    className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors\"\n                                >\n                                    Start Date {getSortIcon('start_date')}\n                                </th>\n                                <th\n                                    onClick={() => handleSort('end_date')}\n                                    className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors\"\n                                >\n                                    End Date {getSortIcon('end_date')}\n                                </th>\n                                <th\n                                    onClick={() => handleSort('status')}\n                                    className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors\"\n                                >\n                                    Status {getSortIcon('status')}\n                                </th>\n                                <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                                    Actions\n                                </th>\n                            </tr>\n                        </thead>\n                        <tbody className=\"bg-white divide-y divide-gray-200\">\n                            {filteredAndSortedPolicies.map((policy: any) => {\n                                const isMotor = policy.type === 'Motor';\n                                const isHealth = policy.type === 'Health';\n\n                                // Safely handle dates\n                                const startDateValue = isMotor ? policy.policy_start_date :\n                                    isHealth ? policy.start_date :\n                                        policy.start_date;\n\n                                const endDateValue = isMotor ? policy.policy_end_date :\n                                    isHealth ? policy.expiry_date :\n                                        policy.expiry_date;\n\n                                // Create Date objects with validation\n                                const startDate = startDateValue ? new Date(startDateValue) : null;\n                                const endDate = endDateValue ? new Date(endDateValue) : null;\n\n                                // Calculate status (now handles null/invalid dates)\n                                const status = calculatePolicyStatus(endDate);\n\n                                return (\n                                    <tr key={policy.id} className=\"hover:bg-gray-50 transition-colors\">\n                                        {isMotorTable && (\n                                            <td className=\"px-6 py-4 whitespace-nowrap\">\n                                                <button\n                                                    onClick={() => handleViewDetails(policy)}\n                                                    className=\"text-sm font-medium text-primary-600 hover:text-primary-700 hover:underline\"\n                                                >\n                                                    {policy.vehicle_number}\n                                                </button>\n                                            </td>\n                                        )}\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                                            <span className=\"text-sm font-medium text-gray-900\">\n                                                {policy.policy_number}\n                                            </span>\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                                            <span className=\"text-sm text-gray-900\">\n                                                {policy.insurer_name}\n                                            </span>\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                                            <span className=\"text-sm font-semibold text-gray-900\">\n                                                {formatCurrency(policy.premium_amount)}\n                                            </span>\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                                            <span className=\"text-sm text-gray-600\">\n                                                {startDate && !isNaN(startDate.getTime())\n                                                    ? startDate.toLocaleDateString('en-IN', {\n                                                        day: '2-digit',\n                                                        month: 'short',\n                                                        year: 'numeric'\n                                                    })\n                                                    : 'N/A'}\n                                            </span>\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                                            <span className=\"text-sm text-gray-600\">\n                                                {endDate && !isNaN(endDate.getTime())\n                                                    ? endDate.toLocaleDateString('en-IN', {\n                                                        day: '2-digit',\n                                                        month: 'short',\n                                                        year: 'numeric'\n                                                    })\n                                                    : 'N/A'}\n                                            </span>\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                                            <span\n                                                className={`px-2.5 py-1 rounded-full text-xs font-medium ${status === 'Active'\n                                                    ? 'bg-green-100 text-green-800'\n                                                    : status === 'Expiring Soon'\n                                                        ? 'bg-yellow-100 text-yellow-800'\n                                                        : 'bg-red-100 text-red-800'\n                                                    }`}\n                                            >\n                                                {status}\n                                            </span>\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                                            <button\n                                                onClick={() => handleViewDetails(policy)}\n                                                className=\"inline-flex items-center gap-1.5 px-3 py-1.5 bg-primary-600 text-white text-sm font-medium rounded-lg hover:bg-primary-700 transition-colors\"\n                                            >\n                                                <Eye className=\"w-4 h-4\" />\n                                                View Details\n                                            </button>\n                                        </td>\n                                    </tr>\n                                );\n                            })}\n                        </tbody>\n                    </table>\n                )}\n            </div>\n\n            {/* Add Policy Modal */}\n            <AddPolicyModal\n                isOpen={isAddModalOpen}\n                onClose={() => setIsAddModalOpen(false)}\n                userId={userId}\n                initialType={policyType}\n                onSuccess={() => {\n                    setIsAddModalOpen(false);\n                    onPolicyAdded?.();\n                }}\n            />\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8301, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/app/%28customer%29/dashboard/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { getCurrentUser } from '@/lib/auth';\nimport {\n    getUserMotorPolicies,\n    getUserHealthPolicies,\n    getUserCommercialPolicies,\n    getUserTravelPolicies,\n    getUserLifePolicies,\n    getUserCyberPolicies,\n    getUserClaims,\n    getUserReferrals\n} from '@/lib/db';\nimport { User, MotorPolicy, HealthPolicy, CommercialPolicy, DashboardSummary, Claim, Referral } from '@/types';\nimport { calculatePolicyStatus, formatCurrency } from '@/lib/utils';\nimport { Car, Heart, Briefcase, Plane, Shield, Umbrella, FileText, TrendingUp, AlertCircle, Calculator, ChevronRight, XCircle } from 'lucide-react';\nimport PortfolioPieChart from '@/components/dashboard/PortfolioPieChart';\nimport PolicyCategoryCard from '@/components/dashboard/PolicyCategoryCard';\nimport ClaimsOverview from '@/components/dashboard/ClaimsOverview';\nimport UpsellCard from '@/components/dashboard/UpsellCard';\nimport OffersCard from '@/components/dashboard/OffersCard';\nimport AdvertisingBanner from '@/components/dashboard/AdvertisingBanner';\nimport AnalyticsAreaChart from '@/components/dashboard/AnalyticsAreaChart';\nimport AnalyticsDonutChart from '@/components/dashboard/AnalyticsDonutChart';\nimport AnalyticsBarChart from '@/components/dashboard/AnalyticsBarChart';\nimport FlipCard from '@/components/dashboard/FlipCard';\nimport MonthlyActivityChart from '@/components/dashboard/MonthlyActivityChart';\nimport ProtectFamilyCard from '@/components/dashboard/ProtectFamilyCard';\nimport ReportsModal from '@/components/dashboard/ReportsModal';\nimport PolicyDetailModal from '@/components/dashboard/PolicyDetailModal';\nimport StickyAddPolicy from '@/components/dashboard/StickyAddPolicy';\nimport ExportButton from '@/components/dashboard/ExportButton';\nimport AddPolicyModal from '@/components/policies/AddPolicyModal';\nimport PolicyTable from '@/components/dashboard/PolicyTable';\n\nexport default function DashboardPage() {\n    const router = useRouter();\n    const [user, setUser] = useState<User | null>(null);\n    const [loading, setLoading] = useState(true);\n    const [summary, setSummary] = useState<DashboardSummary | null>(null);\n    const [claims, setClaims] = useState<Claim[]>([]);\n    const [referrals, setReferrals] = useState<Referral[]>([]);\n    const [isReportsOpen, setIsReportsOpen] = useState(false);\n\n    // Policy Detail Modal State\n    const [isPolicyDetailOpen, setIsPolicyDetailOpen] = useState(false);\n    const [policyDetailType, setPolicyDetailType] = useState<'total' | 'premium' | 'expiring' | 'expired'>('total');\n    const [policyDetailTitle, setPolicyDetailTitle] = useState('');\n\n    // Add Policy Modal State\n    const [selectedType, setSelectedType] = useState<'total' | 'premium' | 'expiring'>('total');\n    const [isHealthModalOpen, setIsHealthModalOpen] = useState(false);\n\n    // Store actual policy data\n    const [motorPolicies, setMotorPolicies] = useState<MotorPolicy[]>([]);\n    const [healthPolicies, setHealthPolicies] = useState<HealthPolicy[]>([]);\n    const [commercialPolicies, setCommercialPolicies] = useState<CommercialPolicy[]>([]);\n    const [travelPolicies, setTravelPolicies] = useState<any[]>([]);\n    const [lifePolicies, setLifePolicies] = useState<any[]>([]);\n    const [cyberPolicies, setCyberPolicies] = useState<any[]>([]);\n\n    // Policy Counts for Cards\n    const [policyCounts, setPolicyCounts] = useState({\n        motor: 0,\n        health: 0,\n        commercial: 0\n    });\n\n    // Selected Policy Type for Table\n    type PolicyType = 'Motor' | 'Health' | 'Travel' | 'Commercial' | 'Life' | 'Cyber' | null;\n    const [selectedPolicyType, setSelectedPolicyType] = useState<PolicyType>('Motor'); // Default to Motor\n\n    useEffect(() => {\n        const loadData = async () => {\n            try {\n                const currentUser = await getCurrentUser();\n                if (!currentUser) {\n                    router.push('/login');\n                    return;\n                }\n\n                // Redirect corporate users to corporate dashboard - REMOVED for Unified Dashboard\n                // if (currentUser.role === 'corporate_employee' || currentUser.role === 'corporate_admin') {\n                //     router.push('/dashboard/corporate');\n                //     return;\n                // }\n\n                setUser(currentUser);\n                await loadDashboardData(currentUser.id);\n            } catch (error) {\n                console.error('[Dashboard] Error loading dashboard:', error);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        loadData();\n    }, [router]);\n\n    const loadDashboardData = async (userId: string) => {\n        try {\n            const [motor, healthData, commercial, travel, life, cyber, userClaims, userReferrals] = await Promise.all([\n                getUserMotorPolicies(userId),\n                getUserHealthPolicies(userId),\n                getUserCommercialPolicies(userId),\n                getUserTravelPolicies(userId),\n                getUserLifePolicies(userId),\n                getUserCyberPolicies(userId),\n                getUserClaims(userId),\n                getUserReferrals(userId)\n            ]);\n\n            // Store policy data for modal with calculated status\n            const processPolicy = (p: any) => {\n                const endDateValue = 'policy_end_date' in p ? p.policy_end_date : p.expiry_date;\n                const status = calculatePolicyStatus(endDateValue); // Now handles null/invalid dates\n                return { ...p, status };\n            };\n\n            const processedMotor = motor.map(processPolicy);\n            const processedHealth = healthData.map(processPolicy);\n            const processedCommercial = commercial.map(processPolicy);\n            const processedTravel = travel.map(processPolicy);\n            const processedLife = life.map(processPolicy);\n            const processedCyber = cyber.map(processPolicy);\n\n            setMotorPolicies(processedMotor);\n            setHealthPolicies(processedHealth);\n            setCommercialPolicies(processedCommercial);\n            setTravelPolicies(processedTravel);\n            setLifePolicies(processedLife);\n            setCyberPolicies(processedCyber);\n\n            setClaims(userClaims);\n            setReferrals(userReferrals);\n\n            // Calculate Summary\n            // Filter active policies for Total Policies and Total Premium\n            const activePolicies = [\n                ...motor, ...healthData, ...commercial, ...travel, ...life, ...cyber\n            ].filter(p => {\n                const endDate = new Date('policy_end_date' in p ? p.policy_end_date : p.expiry_date);\n                return calculatePolicyStatus(endDate) === 'Active' || calculatePolicyStatus(endDate) === 'Expiring Soon';\n            });\n\n            const totalActivePolicies = activePolicies.length;\n\n            const totalActivePremium = activePolicies.reduce((sum, p) => sum + (Number(p.premium_amount) || 0), 0);\n\n            const expiringSoonCount = [\n                ...processedMotor, ...processedHealth, ...processedCommercial, ...processedTravel, ...processedLife, ...processedCyber\n            ].filter(p => p.status === 'Expiring Soon').length;\n\n            const expiredCount = [\n                ...processedMotor, ...processedHealth, ...processedCommercial, ...processedTravel, ...processedLife, ...processedCyber\n            ].filter(p => p.status === 'Expired').length;\n\n            // Calculate portfolio summary\n            const motorPremium = motor.reduce((sum: number, p: any) => sum + Number(p.premium_amount), 0);\n            const healthPremium = healthData.reduce((sum: number, p: any) => sum + Number(p.premium_amount), 0);\n            const travelPremium = travel.reduce((sum: number, p: any) => sum + Number(p.premium_amount), 0);\n            const lifePremium = life.reduce((sum: number, p: any) => sum + Number(p.premium_amount), 0);\n            const cyberPremium = cyber.reduce((sum: number, p: any) => sum + Number(p.premium_amount), 0);\n\n            const gpaPolicies = commercial.filter((p) => p.lob_type === 'GPA');\n            const firePolicies = commercial.filter((p) => p.lob_type === 'Fire');\n            const otherCommercialPolicies = commercial.filter((p) => p.lob_type === 'Other');\n\n            const gpaPremium = gpaPolicies.reduce((sum: number, p: any) => sum + Number(p.premium_amount), 0);\n            const firePremium = firePolicies.reduce((sum: number, p: any) => sum + Number(p.premium_amount), 0);\n            const othersPremium = otherCommercialPolicies.reduce((sum: number, p: any) => sum + Number(p.premium_amount), 0) + travelPremium + lifePremium + cyberPremium;\n\n            const allPolicies = [...processedMotor, ...processedHealth, ...processedCommercial, ...processedTravel, ...processedLife, ...processedCyber];\n\n            // Calculate expiring soon count based on calculated status\n            const expiringCount = allPolicies.filter(p => p.status === 'Expiring Soon').length;\n\n            // Calculate Monthly Premium Trend (Area Chart)\n            const monthlyPremium = Array(12).fill(0);\n            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n\n            allPolicies.forEach(p => {\n                const date = new Date(p.created_at); // Using created_at for trend\n                const month = date.getMonth();\n                monthlyPremium[month] += Number(p.premium_amount);\n            });\n\n            const areaChartData = months.map((month, index) => ({\n                name: month,\n                value: monthlyPremium[index]\n            }));\n\n            // Calculate Monthly Activity (Bar Chart - Count of policies + claims)\n            const monthlyActivity = Array(12).fill(0);\n            allPolicies.forEach(p => {\n                const date = new Date(p.created_at);\n                monthlyActivity[date.getMonth()]++;\n            });\n            userClaims.forEach(c => {\n                const date = new Date(c.created_at);\n                monthlyActivity[date.getMonth()]++;\n            });\n\n            const barChartData = months.map((month, index) => ({\n                name: (index + 1).toString(),\n                value: monthlyActivity[index]\n            }));\n\n            setSummary({\n                total_policies: totalActivePolicies,\n                total_premium: totalActivePremium,\n                expiring_soon_count: expiringSoonCount,\n                expired_count: expiredCount,\n                portfolio_by_lob: {\n                    motor: motorPremium,\n                    health: healthPremium,\n                    gpa: gpaPremium,\n                    fire: firePremium,\n                    others: othersPremium,\n                },\n                areaChartData, // Pass to state\n                barChartData   // Pass to state\n            } as any); // Casting to any to avoid type error for now, ideally update DashboardSummary type\n        } catch (error) {\n            console.error('Error loading dashboard data:', error);\n        }\n    };\n\n    const [greeting, setGreeting] = useState('');\n\n    useEffect(() => {\n        const hour = new Date().getHours();\n        if (hour < 12) setGreeting('Good Morning');\n        else if (hour < 18) setGreeting('Good Afternoon');\n        else setGreeting('Good Evening');\n    }, []);\n\n    if (loading || !user || !summary) {\n        return (\n            <div className=\"flex items-center justify-center h-64\">\n                <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600\"></div>\n            </div>\n        );\n    }\n\n    const activeClaims = claims.filter(c => c.status === 'New' || c.status === 'In Progress').length;\n    const settledClaims = claims.filter(c => c.status === 'Settled').length;\n    const rejectedClaims = claims.filter(c => c.status === 'Rejected').length;\n\n    // Click handlers for dashboard cards\n    const handleTotalPoliciesClick = () => {\n        setPolicyDetailType('total');\n        setPolicyDetailTitle('All Policies');\n        setIsPolicyDetailOpen(true);\n    };\n\n    const handleTotalPremiumClick = () => {\n        setPolicyDetailType('premium');\n        setPolicyDetailTitle('Premium Breakdown');\n        setIsPolicyDetailOpen(true);\n    };\n\n    const handleExpiringClick = () => {\n        setPolicyDetailType('expiring');\n        setPolicyDetailTitle('Expiring Soon');\n        setIsPolicyDetailOpen(true);\n    };\n\n    const handleExpiredClick = () => {\n        setPolicyDetailType('expired');\n        setPolicyDetailTitle('Expired Policies');\n        setIsPolicyDetailOpen(true);\n    };\n\n    return (\n        <div id=\"dashboard-content\" className=\"space-y-6\">\n            {/* Header Actions - Top Right */}\n            <div className=\"flex justify-end items-center mb-6 space-x-3\">\n                <ExportButton\n                    onExportDashboard={() => { }}\n                    motorPolicies={motorPolicies}\n                    healthPolicies={healthPolicies}\n                    commercialPolicies={commercialPolicies}\n                    travelPolicies={travelPolicies}\n                    lifePolicies={lifePolicies}\n                    cyberPolicies={cyberPolicies}\n                    userName={user?.name || 'User'}\n                />\n                <StickyAddPolicy userId={user.id} className=\"relative !fixed-none !top-auto !right-auto\" />\n            </div>\n            <ReportsModal isOpen={isReportsOpen} onClose={() => setIsReportsOpen(false)} />\n            <PolicyDetailModal\n                isOpen={isPolicyDetailOpen}\n                onClose={() => setIsPolicyDetailOpen(false)}\n                title={policyDetailTitle}\n                type={policyDetailType}\n                motorPolicies={motorPolicies}\n                healthPolicies={healthPolicies}\n                commercialPolicies={commercialPolicies}\n                travelPolicies={travelPolicies}\n                lifePolicies={lifePolicies}\n                cyberPolicies={cyberPolicies}\n            />\n\n            {/* Portfolio Overview */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n                {/* Total Policies - Clickable */}\n                <div\n                    onClick={handleTotalPoliciesClick}\n                    className=\"bg-white rounded-2xl p-6 shadow-soft hover:shadow-lg transition-all cursor-pointer border border-transparent hover:border-primary-200\"\n                >\n                    <div className=\"flex justify-between items-start\">\n                        <div>\n                            <p className=\"text-sm text-gray-500 font-semibold mb-1\">Total Active Policies</p>\n                            <p className=\"text-3xl font-bold text-gray-900\">\n                                {summary ? summary.total_policies : 0}\n                            </p>\n                            <p className=\"text-xs text-green-600 mt-2\">Click to view details</p>\n                        </div>\n                        <div className=\"p-3 bg-blue-50 rounded-xl\">\n                            <FileText className=\"w-6 h-6 text-blue-600\" />\n                        </div>\n                    </div>\n                </div>\n\n                {/* Total Premium - Clickable */}\n                <div\n                    onClick={handleTotalPremiumClick}\n                    className=\"bg-white rounded-2xl p-6 shadow-soft hover:shadow-lg transition-all cursor-pointer border border-transparent hover:border-primary-200\"\n                >\n                    <div className=\"flex justify-between items-start\">\n                        <div>\n                            <p className=\"text-sm text-gray-500 font-semibold mb-1\">Total Active Premium</p>\n                            <p className=\"text-3xl font-bold text-gray-900\">\n                                {summary ? formatCurrency(summary.total_premium) : '‚Çπ0'}\n                            </p>\n                            <p className=\"text-xs text-green-600 mt-2\">Click to view breakdown</p>\n                        </div>\n                        <div className=\"p-3 bg-green-50 rounded-xl\">\n                            <TrendingUp className=\"w-6 h-6 text-green-600\" />\n                        </div>\n                    </div>\n                </div>\n\n                {/* Expiring Soon - Clickable */}\n                <div\n                    onClick={handleExpiringClick}\n                    className=\"bg-white rounded-2xl p-6 shadow-soft hover:shadow-lg transition-all cursor-pointer border border-transparent hover:border-primary-200\"\n                >\n                    <div className=\"flex justify-between items-start\">\n                        <div>\n                            <p className=\"text-sm text-gray-500 font-semibold mb-1\">Expiring Soon</p>\n                            <p className=\"text-3xl font-bold text-gray-900\">\n                                {summary ? summary.expiring_soon_count : 0}\n                            </p>\n                            <p className=\"text-xs text-orange-600 mt-2\">Click to view policies</p>\n                        </div>\n                        <div className=\"p-3 bg-orange-50 rounded-xl\">\n                            <AlertCircle className=\"w-6 h-6 text-orange-600\" />\n                        </div>\n                    </div>\n                </div>\n\n                {/* Expired Policies - Clickable */}\n                <div\n                    onClick={handleExpiredClick}\n                    className=\"bg-white rounded-2xl p-6 shadow-soft hover:shadow-lg transition-all cursor-pointer border border-transparent hover:border-primary-200\"\n                >\n                    <div className=\"flex justify-between items-start\">\n                        <div>\n                            <p className=\"text-sm text-gray-500 font-semibold mb-1\">Expired Policies</p>\n                            <p className=\"text-3xl font-bold text-gray-900\">\n                                {summary ? (summary as any).expired_count || 0 : 0}\n                            </p>\n                            <p className=\"text-xs text-red-600 mt-2\">Click to view policies</p>\n                        </div>\n                        <div className=\"p-3 bg-red-50 rounded-xl\">\n                            <XCircle className=\"w-6 h-6 text-red-600\" />\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            {/* Quick Access */}\n            <div>\n                <h2 className=\"text-lg font-bold text-gray-900 mb-4\">Quick Access</h2>\n                <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4\">\n                    <FlipCard\n                        title=\"Motor\"\n                        icon={Car}\n                        activeCount={motorPolicies.filter(p => p.status === 'Active').length}\n                        expiringSoonCount={motorPolicies.filter(p => p.status === 'Expiring Soon').length}\n                        colorClass=\"blue\"\n                        onClick={() => setSelectedPolicyType('Motor')}\n                    />\n                    <FlipCard\n                        title=\"Health\"\n                        icon={Heart}\n                        activeCount={healthPolicies.filter(p => p.status === 'Active').length}\n                        expiringSoonCount={healthPolicies.filter(p => p.status === 'Expiring Soon').length}\n                        colorClass=\"green\"\n                        onClick={() => setSelectedPolicyType('Health')}\n                    />\n                    <FlipCard\n                        title=\"Travel\"\n                        icon={Plane}\n                        activeCount={travelPolicies.filter(p => p.status === 'Active').length}\n                        expiringSoonCount={travelPolicies.filter(p => p.status === 'Expiring Soon').length}\n                        colorClass=\"purple\"\n                        onClick={() => setSelectedPolicyType('Travel')}\n                    />\n                    <FlipCard\n                        title=\"Commercial\"\n                        icon={Briefcase}\n                        activeCount={commercialPolicies.filter(p => p.status === 'Active').length}\n                        expiringSoonCount={commercialPolicies.filter(p => p.status === 'Expiring Soon').length}\n                        colorClass=\"orange\"\n                        onClick={() => setSelectedPolicyType('Commercial')}\n                    />\n                    <FlipCard\n                        title=\"Life\"\n                        icon={Umbrella}\n                        activeCount={lifePolicies.filter(p => p.status === 'Active').length}\n                        expiringSoonCount={lifePolicies.filter(p => p.status === 'Expiring Soon').length}\n                        colorClass=\"pink\"\n                        onClick={() => setSelectedPolicyType('Life')}\n                    />\n                    <FlipCard\n                        title=\"Cyber\"\n                        icon={Shield}\n                        activeCount={cyberPolicies.filter(p => p.status === 'Active').length}\n                        expiringSoonCount={cyberPolicies.filter(p => p.status === 'Expiring Soon').length}\n                        colorClass=\"cyan\"\n                        onClick={() => setSelectedPolicyType('Cyber')}\n                    />\n                </div>\n            </div>\n\n            {/* Policy Table Section - Always visible, changes based on selected type */}\n            {selectedPolicyType && (\n                <PolicyTable\n                    policyType={selectedPolicyType}\n                    motorPolicies={motorPolicies}\n                    healthPolicies={healthPolicies}\n                    commercialPolicies={commercialPolicies}\n                    travelPolicies={travelPolicies}\n                    lifePolicies={lifePolicies}\n                    cyberPolicies={cyberPolicies}\n                    userId={user?.id || ''}\n                    onPolicyAdded={async () => {\n                        // Reload dashboard data when a policy is added\n                        if (user) {\n                            await loadDashboardData(user.id);\n                        }\n                    }}\n                />\n            )}\n\n            {/* Analytics & Insights Section */}\n            <div className=\"grid lg:grid-cols-3 gap-4 md:gap-6\">\n                {/* Left Column (2/3 width on desktop) */}\n                <div className=\"lg:col-span-2 space-y-4 md:space-y-6\">\n                    {/* Monthly Activity - Stacked Bar Chart */}\n                    <div className=\"h-[400px]\">\n                        <MonthlyActivityChart\n                            data={(summary as any).areaChartData}\n                            allPolicies={[...motorPolicies, ...healthPolicies, ...commercialPolicies, ...travelPolicies, ...lifePolicies, ...cyberPolicies]}\n                        />\n                    </div>\n\n                    {/* Claims Overview and Bar Chart - Side by side on desktop, stacked on mobile */}\n                    <div className=\"grid md:grid-cols-2 gap-6 h-[320px]\">\n                        <ClaimsOverview\n                            activeCount={activeClaims}\n                            settledCount={settledClaims}\n                            rejectedCount={rejectedClaims}\n                        />\n                        <div className=\"h-full\">\n                            <AnalyticsBarChart data={(summary as any).barChartData} />\n                        </div>\n                    </div>\n                </div>\n\n                {/* Right Column (1/3 width on desktop) */}\n                <div className=\"space-y-6\">\n                    {/* Source of Premium - Donut Chart */}\n                    <div className=\"h-[400px]\">\n                        <AnalyticsDonutChart data={summary.portfolio_by_lob} />\n                    </div>\n\n                    {/* Protect Family Card */}\n                    <div className=\"h-[320px]\">\n                        <ProtectFamilyCard onGetQuote={() => setIsHealthModalOpen(true)} />\n                    </div>\n                </div>\n            </div>\n\n            {/* Exclusive Offers & Rewards Section */}\n            <div>\n                <h2 className=\"text-lg font-bold text-gray-900 mb-4\">Exclusive Offers & Rewards</h2>\n                <div className=\"grid md:grid-cols-3 gap-4\">\n                    {/* Offers content would go here */}\n                </div>\n            </div>\n\n            {/* Advertising */}\n            <div>\n                <AdvertisingBanner />\n            </div>\n\n            {/* StickyAddPolicy moved to header */}\n\n            <AddPolicyModal\n                isOpen={isHealthModalOpen}\n                onClose={() => setIsHealthModalOpen(false)}\n                userId={user.id}\n                initialType=\"Health\"\n                onSuccess={() => {\n                    setIsHealthModalOpen(false);\n                    // Trigger a reload by toggling a state or re-fetching\n                    // Since loadDashboardData is not accessible here (it's inside useEffect),\n                    // we should probably move it out or just reload the page.\n                    // For now, let's reload the page as a simple fix.\n                    window.location.reload();\n                }}\n            />\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}