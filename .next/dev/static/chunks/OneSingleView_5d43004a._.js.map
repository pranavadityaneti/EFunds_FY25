{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/dashboard/ClaimsOverview.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport Link from 'next/link';\nimport { AlertCircle, CheckCircle, XCircle, ArrowRight } from 'lucide-react';\n\ninterface ClaimsOverviewProps {\n    activeCount: number;\n    settledCount: number;\n    rejectedCount: number;\n}\n\nexport default function ClaimsOverview({ activeCount, settledCount, rejectedCount }: ClaimsOverviewProps) {\n    const total = activeCount + settledCount + rejectedCount;\n    const settledPercentage = total > 0 ? Math.round((settledCount / total) * 100) : 0;\n\n    return (\n        <div className=\"bg-white rounded-2xl p-4 shadow-soft border border-gray-100 h-full flex flex-col justify-between\">\n            <div className=\"flex items-center justify-between mb-3\">\n                <h3 className=\"text-gray-900 font-bold text-sm\">Claims Overview</h3>\n                <Link href=\"/claims\" className=\"text-primary-600 text-xs font-bold hover:underline flex items-center\">\n                    View All <ArrowRight className=\"w-3 h-3 ml-1\" />\n                </Link>\n            </div>\n\n            <div className=\"grid grid-cols-3 gap-2\">\n                <div className=\"bg-orange-50 rounded-xl p-2.5 text-center border border-orange-100\">\n                    <div className=\"w-5 h-5 mx-auto bg-white rounded-full flex items-center justify-center mb-1 shadow-sm text-orange-500\">\n                        <AlertCircle className=\"w-3 h-3\" />\n                    </div>\n                    <p className=\"text-xl font-bold text-gray-900 leading-none mb-1\">{activeCount}</p>\n                    <p className=\"text-[9px] font-bold text-orange-600 uppercase tracking-wide\">In Progress</p>\n                </div>\n\n                <div className=\"bg-green-50 rounded-xl p-2.5 text-center border border-green-100\">\n                    <div className=\"w-5 h-5 mx-auto bg-white rounded-full flex items-center justify-center mb-1 shadow-sm text-green-500\">\n                        <CheckCircle className=\"w-3 h-3\" />\n                    </div>\n                    <p className=\"text-xl font-bold text-gray-900 leading-none mb-1\">{settledCount}</p>\n                    <p className=\"text-[9px] font-bold text-green-600 uppercase tracking-wide\">Settled</p>\n                </div>\n\n                <div className=\"bg-red-50 rounded-xl p-2.5 text-center border border-red-100\">\n                    <div className=\"w-5 h-5 mx-auto bg-white rounded-full flex items-center justify-center mb-1 shadow-sm text-red-500\">\n                        <XCircle className=\"w-3 h-3\" />\n                    </div>\n                    <p className=\"text-xl font-bold text-gray-900 leading-none mb-1\">{rejectedCount}</p>\n                    <p className=\"text-[9px] font-bold text-red-600 uppercase tracking-wide\">Rejected</p>\n                </div>\n            </div>\n\n            <div className=\"mt-3 border-t border-dashed border-gray-200 pt-2.5 text-center\">\n                <p className=\"text-xs text-gray-400 font-medium mb-2\">No active claims</p>\n                <Link href=\"/claims?action=new\" className=\"block w-full py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-xl text-xs font-bold shadow-lg shadow-primary-600/20 transition-all active:scale-95\">\n                    Register a New Claim\n                </Link>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAAA;AAAA;AAAA;AAJA;;;;AAYe,SAAS,eAAe,EAAE,WAAW,EAAE,YAAY,EAAE,aAAa,EAAuB;IACpG,MAAM,QAAQ,cAAc,eAAe;IAC3C,MAAM,oBAAoB,QAAQ,IAAI,KAAK,KAAK,CAAC,AAAC,eAAe,QAAS,OAAO;IAEjF,qBACI,8MAAC;QAAI,WAAU;;0BACX,8MAAC;gBAAI,WAAU;;kCACX,8MAAC;wBAAG,WAAU;kCAAkC;;;;;;kCAChD,8MAAC,2LAAI;wBAAC,MAAK;wBAAU,WAAU;;4BAAuE;0CACzF,8MAAC,oPAAU;gCAAC,WAAU;;;;;;;;;;;;;;;;;;0BAIvC,8MAAC;gBAAI,WAAU;;kCACX,8MAAC;wBAAI,WAAU;;0CACX,8MAAC;gCAAI,WAAU;0CACX,cAAA,8MAAC,uPAAW;oCAAC,WAAU;;;;;;;;;;;0CAE3B,8MAAC;gCAAE,WAAU;0CAAqD;;;;;;0CAClE,8MAAC;gCAAE,WAAU;0CAA+D;;;;;;;;;;;;kCAGhF,8MAAC;wBAAI,WAAU;;0CACX,8MAAC;gCAAI,WAAU;0CACX,cAAA,8MAAC,8PAAW;oCAAC,WAAU;;;;;;;;;;;0CAE3B,8MAAC;gCAAE,WAAU;0CAAqD;;;;;;0CAClE,8MAAC;gCAAE,WAAU;0CAA8D;;;;;;;;;;;;kCAG/E,8MAAC;wBAAI,WAAU;;0CACX,8MAAC;gCAAI,WAAU;0CACX,cAAA,8MAAC,2OAAO;oCAAC,WAAU;;;;;;;;;;;0CAEvB,8MAAC;gCAAE,WAAU;0CAAqD;;;;;;0CAClE,8MAAC;gCAAE,WAAU;0CAA4D;;;;;;;;;;;;;;;;;;0BAIjF,8MAAC;gBAAI,WAAU;;kCACX,8MAAC;wBAAE,WAAU;kCAAyC;;;;;;kCACtD,8MAAC,2LAAI;wBAAC,MAAK;wBAAqB,WAAU;kCAA+J;;;;;;;;;;;;;;;;;;AAMzN;KA/CwB"}},
    {"offset": {"line": 228, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/dashboard/AdvertisingBanner.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { ArrowRight, Stethoscope } from 'lucide-react';\n\nexport default function AdvertisingBanner() {\n    return (\n        <div className=\"bg-gradient-to-r from-blue-600 to-blue-800 rounded-3xl p-8 text-white shadow-lg shadow-blue-500/25 relative overflow-hidden transition-transform hover:-translate-y-1 h-full flex flex-col justify-center\" style={{ width: 'calc(100% + 96px)', maxWidth: '100%' }}>\n            <div className=\"relative z-10\">\n                <div className=\"flex items-center gap-2 mb-4\">\n                    <div className=\"p-2 bg-white/20 rounded-lg backdrop-blur-sm\">\n                        <Stethoscope className=\"w-4 h-4 text-white\" />\n                    </div>\n                    <span className=\"text-xs font-bold uppercase tracking-wider text-blue-100 bg-white/10 px-2 py-1 rounded-full\">Partner Offer</span>\n                </div>\n\n                <h3 className=\"font-bold text-2xl mb-3 leading-tight\">\n                    Your imaging exams have never been so uncomplicated.\n                </h3>\n\n                <div className=\"mt-6\">\n                    <button className=\"bg-white text-blue-700 px-5 py-2.5 rounded-xl text-sm font-bold flex items-center hover:bg-blue-50 transition-colors shadow-sm\">\n                        Book Now <ArrowRight className=\"w-4 h-4 ml-2\" />\n                    </button>\n                </div>\n            </div>\n\n            {/* Decorative Elements */}\n            <div className=\"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -mr-16 -mt-16\"></div>\n            <div className=\"absolute bottom-0 left-0 w-48 h-48 bg-blue-500/30 rounded-full blur-2xl -ml-12 -mb-12\"></div>\n\n            {/* Abstract lines/dots similar to reference */}\n            <svg className=\"absolute right-0 bottom-0 opacity-20\" width=\"200\" height=\"200\" viewBox=\"0 0 200 200\">\n                <path d=\"M0 200 C 50 200 100 150 100 100 C 100 50 150 0 200 0\" stroke=\"white\" strokeWidth=\"2\" fill=\"none\" strokeDasharray=\"5,5\" />\n            </svg>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AAHA;;;AAKe,SAAS;IACpB,qBACI,8MAAC;QAAI,WAAU;QAA4M,OAAO;YAAE,OAAO;YAAqB,UAAU;QAAO;;0BAC7Q,8MAAC;gBAAI,WAAU;;kCACX,8MAAC;wBAAI,WAAU;;0CACX,8MAAC;gCAAI,WAAU;0CACX,cAAA,8MAAC,mPAAW;oCAAC,WAAU;;;;;;;;;;;0CAE3B,8MAAC;gCAAK,WAAU;0CAA8F;;;;;;;;;;;;kCAGlH,8MAAC;wBAAG,WAAU;kCAAwC;;;;;;kCAItD,8MAAC;wBAAI,WAAU;kCACX,cAAA,8MAAC;4BAAO,WAAU;;gCAAiI;8CACtI,8MAAC,oPAAU;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;0BAM3C,8MAAC;gBAAI,WAAU;;;;;;0BACf,8MAAC;gBAAI,WAAU;;;;;;0BAGf,8MAAC;gBAAI,WAAU;gBAAuC,OAAM;gBAAM,QAAO;gBAAM,SAAQ;0BACnF,cAAA,8MAAC;oBAAK,GAAE;oBAAuD,QAAO;oBAAQ,aAAY;oBAAI,MAAK;oBAAO,iBAAgB;;;;;;;;;;;;;;;;;AAI1I;KAhCwB"}},
    {"offset": {"line": 370, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/dashboard/AnalyticsDonutChart.tsx"],"sourcesContent":["'use client';\n\nimport { PieChart, Pie, Cell, ResponsiveContainer, Tooltip } from 'recharts';\nimport { PortfolioStats } from '@/types';\nimport { formatCurrency } from '@/lib/utils';\n\ninterface AnalyticsDonutChartProps {\n    data: PortfolioStats;\n}\n\nconst COLORS = {\n    motor: '#3B82F6',      // Blue\n    health: '#8b5cf6',     // Purple\n    travel: '#06B6D4',     // Cyan\n    commercial: '#F59E0B', // Orange\n    life: '#EC4899',       // Pink\n    cyber: '#10B981',      // Green\n};\n\nconst LABELS = {\n    motor: 'Motor',\n    health: 'Health',\n    travel: 'Travel',\n    commercial: 'Commercial',\n    life: 'Life',\n    cyber: 'Cyber',\n};\n\nexport default function AnalyticsDonutChart({ data }: AnalyticsDonutChartProps) {\n    const chartData = [\n        { name: LABELS.motor, value: data.motor, color: COLORS.motor },\n        { name: LABELS.health, value: data.health, color: COLORS.health },\n        { name: LABELS.travel, value: data.travel, color: COLORS.travel },\n        { name: LABELS.commercial, value: data.commercial, color: COLORS.commercial },\n        { name: LABELS.life, value: data.life, color: COLORS.life },\n        { name: LABELS.cyber, value: data.cyber, color: COLORS.cyber },\n    ].filter((item) => item.value > 0);\n\n    const totalValue = chartData.reduce((acc, item) => acc + item.value, 0);\n\n    if (chartData.length === 0) {\n        return (\n            <div className=\"w-full h-full bg-white rounded-2xl p-6 shadow-soft border border-gray-100 flex flex-col items-center justify-center text-center\">\n                <div className=\"w-12 h-12 bg-gray-50 rounded-full flex items-center justify-center mb-3\">\n                    <span className=\"text-xl\">ðŸ“Š</span>\n                </div>\n                <p className=\"text-sm text-gray-500\">No data available</p>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"w-full h-full bg-white rounded-2xl p-6 shadow-soft border border-gray-100 flex flex-col\">\n            <h3 className=\"text-gray-900 font-bold text-base mb-6\">Source of Premium</h3>\n\n            <div className=\"flex-1 relative min-h-[200px]\">\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                    <PieChart>\n                        <Pie\n                            data={chartData}\n                            cx=\"50%\"\n                            cy=\"50%\"\n                            innerRadius={60}\n                            outerRadius={80}\n                            paddingAngle={5}\n                            dataKey=\"value\"\n                            cornerRadius={6}\n                            stroke=\"none\"\n                        >\n                            {chartData.map((entry, index) => (\n                                <Cell key={`cell-${index}`} fill={entry.color} />\n                            ))}\n                        </Pie>\n                        <Tooltip\n                            formatter={(value: number) => formatCurrency(value)}\n                            contentStyle={{\n                                backgroundColor: 'white',\n                                border: 'none',\n                                borderRadius: '8px',\n                                padding: '8px 12px',\n                                boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',\n                            }}\n                            itemStyle={{ color: '#1F293B', fontSize: '12px', fontWeight: 600 }}\n                        />\n                    </PieChart>\n                </ResponsiveContainer>\n\n                {/* Center Text */}\n                <div className=\"absolute inset-0 flex flex-col items-center justify-center pointer-events-none\">\n                    <span className=\"text-2xl font-bold text-gray-900\">100%</span>\n                    <span className=\"text-[10px] font-medium text-gray-400 uppercase tracking-wider\">Distribution</span>\n                </div>\n            </div>\n\n            {/* Custom Legend - Compact 2-column grid */}\n            <div className=\"mt-6 grid grid-cols-2 gap-x-4 gap-y-2\">\n                {chartData.map((item, index) => (\n                    <div key={index} className=\"flex items-center gap-2 text-sm\">\n                        <span className=\"w-2.5 h-2.5 rounded-full flex-shrink-0\" style={{ backgroundColor: item.color }}></span>\n                        <span className=\"text-gray-600 font-medium truncate\">{item.name}:</span>\n                        <span className=\"font-bold text-gray-900 ml-auto\">\n                            {((item.value / totalValue) * 100).toFixed(0)}%\n                        </span>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAEA;AAJA;;;;AAUA,MAAM,SAAS;IACX,OAAO;IACP,QAAQ;IACR,QAAQ;IACR,YAAY;IACZ,MAAM;IACN,OAAO;AACX;AAEA,MAAM,SAAS;IACX,OAAO;IACP,QAAQ;IACR,QAAQ;IACR,YAAY;IACZ,MAAM;IACN,OAAO;AACX;AAEe,SAAS,oBAAoB,EAAE,IAAI,EAA4B;IAC1E,MAAM,YAAY;QACd;YAAE,MAAM,OAAO,KAAK;YAAE,OAAO,KAAK,KAAK;YAAE,OAAO,OAAO,KAAK;QAAC;QAC7D;YAAE,MAAM,OAAO,MAAM;YAAE,OAAO,KAAK,MAAM;YAAE,OAAO,OAAO,MAAM;QAAC;QAChE;YAAE,MAAM,OAAO,MAAM;YAAE,OAAO,KAAK,MAAM;YAAE,OAAO,OAAO,MAAM;QAAC;QAChE;YAAE,MAAM,OAAO,UAAU;YAAE,OAAO,KAAK,UAAU;YAAE,OAAO,OAAO,UAAU;QAAC;QAC5E;YAAE,MAAM,OAAO,IAAI;YAAE,OAAO,KAAK,IAAI;YAAE,OAAO,OAAO,IAAI;QAAC;QAC1D;YAAE,MAAM,OAAO,KAAK;YAAE,OAAO,KAAK,KAAK;YAAE,OAAO,OAAO,KAAK;QAAC;KAChE,CAAC,MAAM,CAAC,CAAC,OAAS,KAAK,KAAK,GAAG;IAEhC,MAAM,aAAa,UAAU,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,KAAK,EAAE;IAErE,IAAI,UAAU,MAAM,KAAK,GAAG;QACxB,qBACI,8MAAC;YAAI,WAAU;;8BACX,8MAAC;oBAAI,WAAU;8BACX,cAAA,8MAAC;wBAAK,WAAU;kCAAU;;;;;;;;;;;8BAE9B,8MAAC;oBAAE,WAAU;8BAAwB;;;;;;;;;;;;IAGjD;IAEA,qBACI,8MAAC;QAAI,WAAU;;0BACX,8MAAC;gBAAG,WAAU;0BAAyC;;;;;;0BAEvD,8MAAC;gBAAI,WAAU;;kCACX,8MAAC,8MAAmB;wBAAC,OAAM;wBAAO,QAAO;kCACrC,cAAA,8MAAC,oLAAQ;;8CACL,8MAAC,0KAAG;oCACA,MAAM;oCACN,IAAG;oCACH,IAAG;oCACH,aAAa;oCACb,aAAa;oCACb,cAAc;oCACd,SAAQ;oCACR,cAAc;oCACd,QAAO;8CAEN,UAAU,GAAG,CAAC,CAAC,OAAO,sBACnB,8MAAC,gLAAI;4CAAuB,MAAM,MAAM,KAAK;2CAAlC,CAAC,KAAK,EAAE,OAAO;;;;;;;;;;8CAGlC,8MAAC,sLAAO;oCACJ,WAAW,CAAC,QAAkB,IAAA,kJAAc,EAAC;oCAC7C,cAAc;wCACV,iBAAiB;wCACjB,QAAQ;wCACR,cAAc;wCACd,SAAS;wCACT,WAAW;oCACf;oCACA,WAAW;wCAAE,OAAO;wCAAW,UAAU;wCAAQ,YAAY;oCAAI;;;;;;;;;;;;;;;;;kCAM7E,8MAAC;wBAAI,WAAU;;0CACX,8MAAC;gCAAK,WAAU;0CAAmC;;;;;;0CACnD,8MAAC;gCAAK,WAAU;0CAAiE;;;;;;;;;;;;;;;;;;0BAKzF,8MAAC;gBAAI,WAAU;0BACV,UAAU,GAAG,CAAC,CAAC,MAAM,sBAClB,8MAAC;wBAAgB,WAAU;;0CACvB,8MAAC;gCAAK,WAAU;gCAAyC,OAAO;oCAAE,iBAAiB,KAAK,KAAK;gCAAC;;;;;;0CAC9F,8MAAC;gCAAK,WAAU;;oCAAsC,KAAK,IAAI;oCAAC;;;;;;;0CAChE,8MAAC;gCAAK,WAAU;;oCACX,CAAC,AAAC,KAAK,KAAK,GAAG,aAAc,GAAG,EAAE,OAAO,CAAC;oCAAG;;;;;;;;uBAJ5C;;;;;;;;;;;;;;;;AAW9B;KAhFwB"}},
    {"offset": {"line": 636, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/dashboard/PolicyRenewalReminder.tsx"],"sourcesContent":["'use client';\n\nimport { useMemo, useState, useEffect } from 'react';\nimport { Bell, ChevronRight, Car, Heart, Umbrella, Briefcase, ChevronLeft } from 'lucide-react';\nimport { MotorPolicy, HealthPolicy, CommercialPolicy } from '@/types';\nimport { calculatePolicyStatus, formatCurrency } from '@/lib/utils';\nimport { useRouter } from 'next/navigation';\n\ninterface PolicyRenewalReminderProps {\n    motorPolicies: MotorPolicy[];\n    healthPolicies: HealthPolicy[];\n    commercialPolicies: CommercialPolicy[];\n    travelPolicies?: any[];\n    lifePolicies?: any[];\n    cyberPolicies?: any[];\n}\n\nexport default function PolicyRenewalReminder({\n    motorPolicies,\n    healthPolicies,\n    commercialPolicies,\n    travelPolicies = [],\n    lifePolicies = [],\n    cyberPolicies = []\n}: PolicyRenewalReminderProps) {\n    const router = useRouter();\n    const [currentIndex, setCurrentIndex] = useState(0);\n\n    // Find ALL policies expiring soon\n    const expiringPolicies = useMemo(() => {\n        const allPolicies = [\n            ...motorPolicies.map(p => ({ ...p, type: 'Motor' as const })),\n            ...healthPolicies.map(p => ({ ...p, type: 'Health' as const })),\n            ...commercialPolicies.map(p => ({ ...p, type: 'Commercial' as const })),\n            ...travelPolicies.map(p => ({ ...p, type: 'Travel' as const })),\n            ...lifePolicies.map(p => ({ ...p, type: 'Life' as const })),\n            ...cyberPolicies.map(p => ({ ...p, type: 'Cyber' as const }))\n        ];\n\n        // Filter policies that are expiring soon\n        const filtered = allPolicies.filter(p => {\n            const isMotor = p.type === 'Motor';\n            const isHealth = p.type === 'Health';\n            const endDateValue = isMotor ? (p as any).policy_end_date :\n                isHealth ? (p as any).expiry_date :\n                    (p as any).expiry_date;\n            const endDate = endDateValue ? new Date(endDateValue) : null;\n            const status = calculatePolicyStatus(endDate);\n            return status === 'Expiring Soon';\n        });\n\n        // Sort by expiry date to get the nearest ones first\n        filtered.sort((a, b) => {\n            const isMotorA = a.type === 'Motor';\n            const isHealthA = a.type === 'Health';\n            const isMotorB = b.type === 'Motor';\n            const isHealthB = b.type === 'Health';\n\n            const aEndDate = isMotorA ? (a as any).policy_end_date :\n                isHealthA ? (a as any).expiry_date :\n                    (a as any).expiry_date;\n            const bEndDate = isMotorB ? (b as any).policy_end_date :\n                isHealthB ? (b as any).expiry_date :\n                    (b as any).expiry_date;\n\n            const aTime = aEndDate ? new Date(aEndDate).getTime() : 0;\n            const bTime = bEndDate ? new Date(bEndDate).getTime() : 0;\n\n            return aTime - bTime;\n        });\n\n        return filtered;\n    }, [motorPolicies, healthPolicies, commercialPolicies, travelPolicies, lifePolicies, cyberPolicies]);\n\n    // Auto-swipe every 3 seconds\n    useEffect(() => {\n        if (expiringPolicies.length <= 1) return;\n\n        const interval = setInterval(() => {\n            setCurrentIndex((prev) => (prev + 1) % expiringPolicies.length);\n        }, 3000);\n\n        return () => clearInterval(interval);\n    }, [expiringPolicies.length]);\n\n    const handlePrevious = () => {\n        setCurrentIndex((prev) => (prev - 1 + expiringPolicies.length) % expiringPolicies.length);\n    };\n\n    const handleNext = () => {\n        setCurrentIndex((prev) => (prev + 1) % expiringPolicies.length);\n    };\n\n    if (expiringPolicies.length === 0) {\n        return (\n            <div className=\"bg-white rounded-2xl border border-gray-200 shadow-soft p-6 h-full flex flex-col\">\n                <div className=\"flex items-center gap-2 mb-4\">\n                    <div className=\"p-2 bg-green-50 rounded-lg\">\n                        <Bell className=\"w-5 h-5 text-green-600\" />\n                    </div>\n                    <h3 className=\"text-lg font-bold text-gray-900\">Renewal Reminders</h3>\n                </div>\n                <div className=\"flex-1 flex items-center justify-center\">\n                    <div className=\"text-center\">\n                        <div className=\"w-16 h-16 bg-green-50 rounded-full flex items-center justify-center mx-auto mb-3\">\n                            <Bell className=\"w-8 h-8 text-green-600\" />\n                        </div>\n                        <p className=\"text-gray-900 font-semibold mb-1\">All policies are up to date!</p>\n                        <p className=\"text-sm text-gray-500\">No upcoming renewals in the next 30 days.</p>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    const currentPolicy = expiringPolicies[currentIndex];\n\n    // Calculate days until expiry for current policy\n    const isMotor = currentPolicy.type === 'Motor';\n    const isHealth = currentPolicy.type === 'Health';\n    const endDateValue = isMotor ? (currentPolicy as any).policy_end_date :\n        isHealth ? (currentPolicy as any).expiry_date :\n            (currentPolicy as any).expiry_date;\n    const endDate = endDateValue ? new Date(endDateValue) : null;\n    const today = new Date();\n    const daysUntilExpiry = endDate ? Math.ceil((endDate.getTime() - today.getTime()) / (1000 * 60 * 60 * 24)) : 0;\n\n    // Get policy-specific details\n    const vehicleNumber = isMotor ? (currentPolicy as any).vehicle_number : null;\n    const sumInsured = isHealth ? (currentPolicy as any).sum_insured :\n        currentPolicy.type === 'Life' ? (currentPolicy as any).sum_insured :\n            null;\n\n    const getIcon = () => {\n        switch (currentPolicy.type) {\n            case 'Motor':\n                return <Car className=\"w-5 h-5 text-blue-600\" />;\n            case 'Health':\n                return <Heart className=\"w-5 h-5 text-green-600\" />;\n            case 'Life':\n                return <Umbrella className=\"w-5 h-5 text-pink-600\" />;\n            case 'Commercial':\n                return <Briefcase className=\"w-5 h-5 text-orange-600\" />;\n            default:\n                return <Bell className=\"w-5 h-5 text-gray-600\" />;\n        }\n    };\n\n    const handleRenew = () => {\n        const typeSlug = currentPolicy.type.toLowerCase();\n        router.push(`/policies/${typeSlug}/${(currentPolicy as any).id}`);\n    };\n\n    return (\n        <div className=\"bg-white rounded-2xl border border-gray-200 shadow-soft p-6 h-full flex flex-col\">\n            {/* Header with carousel counter */}\n            <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"flex items-center gap-2\">\n                    <div className=\"p-2 bg-orange-50 rounded-lg\">\n                        <Bell className=\"w-5 h-5 text-orange-600\" />\n                    </div>\n                    <h3 className=\"text-lg font-bold text-gray-900\">Upcoming Renewals</h3>\n                </div>\n                {expiringPolicies.length > 1 && (\n                    <div className=\"flex items-center gap-2\">\n                        <button\n                            onClick={handlePrevious}\n                            className=\"p-1 hover:bg-gray-100 rounded transition-colors\"\n                            aria-label=\"Previous policy\"\n                        >\n                            <ChevronLeft className=\"w-4 h-4 text-gray-600\" />\n                        </button>\n                        <span className=\"text-xs text-gray-500 font-medium\">\n                            {currentIndex + 1} / {expiringPolicies.length}\n                        </span>\n                        <button\n                            onClick={handleNext}\n                            className=\"p-1 hover:bg-gray-100 rounded transition-colors\"\n                            aria-label=\"Next policy\"\n                        >\n                            <ChevronRight className=\"w-4 h-4 text-gray-600\" />\n                        </button>\n                    </div>\n                )}\n            </div>\n\n            <div className=\"h-px bg-gray-200 -mx-6 mb-4\"></div>\n\n            {/* Carousel Content */}\n            <div className=\"flex-1 space-y-3\">\n                {/* Expiry Message */}\n                <div className=\"break-words\">\n                    <p className=\"text-gray-700 text-sm leading-relaxed\">\n                        Your <span className=\"font-semibold text-gray-900\">{currentPolicy.type}</span> policy\n                        {vehicleNumber && (\n                            <span className=\"block sm:inline\">\n                                {' '}for <span className=\"font-bold text-primary-600\">{vehicleNumber}</span>\n                            </span>\n                        )}\n                        {sumInsured && !vehicleNumber && (\n                            <span className=\"block sm:inline\">\n                                {' '}for <span className=\"font-bold text-primary-600\">{formatCurrency(sumInsured)}</span>\n                            </span>\n                        )}\n                        {' '}expires in <span className=\"font-bold text-orange-600\">{daysUntilExpiry} days</span>.\n                    </p>\n                </div>\n\n                {/* Status Badge */}\n                <div className=\"flex items-center gap-2\">\n                    <span className=\"text-xs text-gray-500 font-medium\">Status:</span>\n                    <span className=\"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800\">\n                        <span className=\"w-2 h-2 rounded-full bg-orange-600\"></span>\n                        Expiring Soon\n                    </span>\n                </div>\n\n                {/* Policy Details */}\n                <div className=\"space-y-2 pt-2\">\n                    <div className=\"flex items-center gap-2\">\n                        <div className=\"p-1.5 bg-gray-50 rounded\">\n                            {getIcon()}\n                        </div>\n                        <div className=\"flex-1\">\n                            <p className=\"text-xs text-gray-500\">Policy Type</p>\n                            <p className=\"text-sm font-semibold text-gray-900\">{currentPolicy.type}</p>\n                        </div>\n                    </div>\n\n                    <div className=\"pl-8\">\n                        <p className=\"text-xs text-gray-500\">Insurer</p>\n                        <p className=\"text-sm font-semibold text-gray-900\">{(currentPolicy as any).insurer_name}</p>\n                    </div>\n\n                    {sumInsured && (\n                        <div className=\"pl-8\">\n                            <p className=\"text-xs text-gray-500\">Sum Insured</p>\n                            <p className=\"text-sm font-semibold text-gray-900\">{formatCurrency(sumInsured)}</p>\n                        </div>\n                    )}\n\n                    {vehicleNumber && (\n                        <div className=\"pl-8\">\n                            <p className=\"text-xs text-gray-500\">Vehicle Number</p>\n                            <p className=\"text-sm font-semibold text-gray-900\">{vehicleNumber}</p>\n                        </div>\n                    )}\n                </div>\n\n                {/* Carousel Dots Indicator */}\n                {expiringPolicies.length > 1 && (\n                    <div className=\"flex justify-center gap-1.5 pt-2\">\n                        {expiringPolicies.map((_, index) => (\n                            <button\n                                key={index}\n                                onClick={() => setCurrentIndex(index)}\n                                className={`h-1.5 rounded-full transition-all ${index === currentIndex\n                                    ? 'w-6 bg-primary-600'\n                                    : 'w-1.5 bg-gray-300 hover:bg-gray-400'\n                                    }`}\n                                aria-label={`Go to policy ${index + 1}`}\n                            />\n                        ))}\n                    </div>\n                )}\n            </div>\n\n            {/* Action Button */}\n            <button\n                onClick={handleRenew}\n                className=\"mt-4 w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors shadow-sm font-medium\"\n            >\n                Renew Now\n                <ChevronRight className=\"w-4 h-4\" />\n            </button>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1315, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/dashboard/FlipCard.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { LucideIcon } from 'lucide-react';\n\ninterface FlipCardProps {\n    title: string;\n    icon: LucideIcon;\n    activeCount: number;\n    expiringSoonCount: number;\n    colorClass: string; // e.g., 'blue', 'green'\n    onClick: () => void;\n}\n\nexport default function FlipCard({ title, icon: Icon, activeCount, expiringSoonCount, colorClass, onClick }: FlipCardProps) {\n    const totalPolicies = activeCount + expiringSoonCount;\n    // Map color names to Tailwind classes\n    const colorMap: Record<string, { bg: string; text: string; hover: string; border: string }> = {\n        blue: { bg: 'bg-blue-50', text: 'text-blue-600', hover: 'group-hover:bg-blue-100', border: 'border-blue-100' },\n        green: { bg: 'bg-green-50', text: 'text-green-600', hover: 'group-hover:bg-green-100', border: 'border-green-100' },\n        purple: { bg: 'bg-purple-50', text: 'text-purple-600', hover: 'group-hover:bg-purple-100', border: 'border-purple-100' },\n        orange: { bg: 'bg-orange-50', text: 'text-orange-600', hover: 'group-hover:bg-orange-100', border: 'border-orange-100' },\n        pink: { bg: 'bg-pink-50', text: 'text-pink-600', hover: 'group-hover:bg-pink-100', border: 'border-pink-100' },\n        cyan: { bg: 'bg-cyan-50', text: 'text-cyan-600', hover: 'group-hover:bg-cyan-100', border: 'border-cyan-100' },\n    };\n\n    const colors = colorMap[colorClass] || colorMap['blue'];\n\n    return (\n        <div\n            onClick={onClick}\n            className=\"group h-32 w-full perspective-1000 cursor-pointer\"\n        >\n            <div className=\"relative h-full w-full transition-all duration-500 transform-style-3d group-hover:rotate-y-180\">\n                {/* Front Side */}\n                <div className={`absolute inset-0 w-full h-full backface-hidden rounded-xl shadow-lg bg-white border ${colors.border} flex flex-col items-center justify-center p-4 transition-all duration-300 group-hover:shadow-xl`}>\n                    <div className={`p-3 rounded-full ${colors.bg} bg-opacity-10 mb-3`}>\n                        <Icon className={`w-8 h-8 ${colors.text}`} />\n                    </div>\n                    <h3 className=\"text-sm font-bold text-gray-700 text-center\">{title}</h3>\n                </div>\n\n                {/* Back Side */}\n                <div className=\"absolute inset-0 w-full h-full backface-hidden rotate-y-180 rounded-xl shadow-lg bg-gradient-to-br from-gray-900 to-gray-800 text-white flex flex-col items-center justify-center p-4\">\n                    <div className=\"text-4xl font-bold mb-1\">{totalPolicies}</div>\n                    <div className=\"text-xs font-medium text-gray-300 uppercase tracking-wider\">Total Policies</div>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAce,SAAS,SAAS,EAAE,KAAK,EAAE,MAAM,IAAI,EAAE,WAAW,EAAE,iBAAiB,EAAE,UAAU,EAAE,OAAO,EAAiB;IACtH,MAAM,gBAAgB,cAAc;IACpC,sCAAsC;IACtC,MAAM,WAAwF;QAC1F,MAAM;YAAE,IAAI;YAAc,MAAM;YAAiB,OAAO;YAA2B,QAAQ;QAAkB;QAC7G,OAAO;YAAE,IAAI;YAAe,MAAM;YAAkB,OAAO;YAA4B,QAAQ;QAAmB;QAClH,QAAQ;YAAE,IAAI;YAAgB,MAAM;YAAmB,OAAO;YAA6B,QAAQ;QAAoB;QACvH,QAAQ;YAAE,IAAI;YAAgB,MAAM;YAAmB,OAAO;YAA6B,QAAQ;QAAoB;QACvH,MAAM;YAAE,IAAI;YAAc,MAAM;YAAiB,OAAO;YAA2B,QAAQ;QAAkB;QAC7G,MAAM;YAAE,IAAI;YAAc,MAAM;YAAiB,OAAO;YAA2B,QAAQ;QAAkB;IACjH;IAEA,MAAM,SAAS,QAAQ,CAAC,WAAW,IAAI,QAAQ,CAAC,OAAO;IAEvD,qBACI,8MAAC;QACG,SAAS;QACT,WAAU;kBAEV,cAAA,8MAAC;YAAI,WAAU;;8BAEX,8MAAC;oBAAI,WAAW,CAAC,oFAAoF,EAAE,OAAO,MAAM,CAAC,gGAAgG,CAAC;;sCAClN,8MAAC;4BAAI,WAAW,CAAC,iBAAiB,EAAE,OAAO,EAAE,CAAC,mBAAmB,CAAC;sCAC9D,cAAA,8MAAC;gCAAK,WAAW,CAAC,QAAQ,EAAE,OAAO,IAAI,EAAE;;;;;;;;;;;sCAE7C,8MAAC;4BAAG,WAAU;sCAA+C;;;;;;;;;;;;8BAIjE,8MAAC;oBAAI,WAAU;;sCACX,8MAAC;4BAAI,WAAU;sCAA2B;;;;;;sCAC1C,8MAAC;4BAAI,WAAU;sCAA6D;;;;;;;;;;;;;;;;;;;;;;;AAKhG;KApCwB"}},
    {"offset": {"line": 1448, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/dashboard/MonthlyActivityChart.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useMemo } from 'react';\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\nimport { formatCurrency } from '@/lib/utils';\nimport { Filter } from 'lucide-react';\n\ninterface MonthlyActivityChartProps {\n    data: any[]; // Array of monthly data objects\n    allPolicies: any[]; // Raw policies for filtering\n}\n\nexport default function MonthlyActivityChart({ data: initialData, allPolicies }: MonthlyActivityChartProps) {\n    const [metric, setMetric] = useState<'count' | 'premium'>('count');\n    const [filterType, setFilterType] = useState<string>('All');\n\n    // Process data based on filter and metric\n    const chartData = useMemo(() => {\n        const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n        const processedData = months.map(month => ({\n            name: month,\n            Active: 0,\n            Expiring: 0,\n            Expired: 0\n        }));\n\n        const filteredPolicies = filterType === 'All'\n            ? allPolicies\n            : allPolicies.filter(p => {\n                const type = p.vehicle_number ? 'Motor' : p.no_of_lives !== undefined ? 'Health' : p.lob_type || 'Other';\n                return type === filterType;\n            });\n\n        filteredPolicies.forEach(policy => {\n            const date = new Date(policy.created_at); // Using creation date for distribution\n            const monthIndex = date.getMonth();\n            const status = policy.status || 'Active'; // Default to Active if status missing\n\n            // Map status to chart categories\n            let category: 'Active' | 'Expiring' | 'Expired' = 'Active';\n            if (status === 'Expiring Soon') category = 'Expiring';\n            else if (status === 'Expired') category = 'Expired';\n            else category = 'Active';\n\n            if (metric === 'count') {\n                processedData[monthIndex][category] += 1;\n            } else {\n                processedData[monthIndex][category] += Number(policy.premium_amount) || 0;\n            }\n        });\n\n        return processedData;\n    }, [allPolicies, metric, filterType]);\n\n    return (\n        <div className=\"bg-white p-6 rounded-2xl shadow-soft border border-gray-100 h-full flex flex-col\">\n            <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4\">\n                <div>\n                    <h3 className=\"text-lg font-bold text-gray-900\">Monthly Activity</h3>\n                    <p className=\"text-sm text-gray-500\">Policy status distribution over time</p>\n                </div>\n\n                <div className=\"flex flex-wrap gap-3\">\n                    {/* Metric Toggle */}\n                    <div className=\"bg-gray-100 p-1 rounded-lg flex text-xs font-medium\">\n                        <button\n                            onClick={() => setMetric('count')}\n                            className={`px-3 py-1.5 rounded-md transition-all ${metric === 'count'\n                                    ? 'bg-white text-gray-900 shadow-sm'\n                                    : 'text-gray-500 hover:text-gray-700'\n                                }`}\n                        >\n                            Count\n                        </button>\n                        <button\n                            onClick={() => setMetric('premium')}\n                            className={`px-3 py-1.5 rounded-md transition-all ${metric === 'premium'\n                                    ? 'bg-white text-gray-900 shadow-sm'\n                                    : 'text-gray-500 hover:text-gray-700'\n                                }`}\n                        >\n                            Premium\n                        </button>\n                    </div>\n\n                    {/* Type Filter */}\n                    <div className=\"relative\">\n                        <select\n                            value={filterType}\n                            onChange={(e) => setFilterType(e.target.value)}\n                            className=\"pl-3 pr-8 py-1.5 text-xs font-medium bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none appearance-none cursor-pointer\"\n                        >\n                            <option value=\"All\">All Types</option>\n                            <option value=\"Motor\">Motor</option>\n                            <option value=\"Health\">Health</option>\n                            <option value=\"Travel\">Travel</option>\n                            <option value=\"Commercial\">Commercial</option>\n                            <option value=\"Life\">Life</option>\n                            <option value=\"Cyber\">Cyber</option>\n                        </select>\n                        <Filter className=\"w-3 h-3 text-gray-400 absolute right-2.5 top-1/2 -translate-y-1/2 pointer-events-none\" />\n                    </div>\n                </div>\n            </div>\n\n            <div className=\"flex-1 min-h-0\">\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                    <BarChart data={chartData} margin={{ top: 10, right: 10, left: -20, bottom: 0 }}>\n                        <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#f3f4f6\" />\n                        <XAxis\n                            dataKey=\"name\"\n                            axisLine={false}\n                            tickLine={false}\n                            tick={{ fill: '#6b7280', fontSize: 11 }}\n                            dy={10}\n                        />\n                        <YAxis\n                            axisLine={false}\n                            tickLine={false}\n                            tick={{ fill: '#6b7280', fontSize: 11 }}\n                            tickFormatter={(value) => metric === 'premium' ? `â‚¹${value / 1000}k` : value}\n                        />\n                        <Tooltip\n                            cursor={{ fill: '#f9fafb' }}\n                            contentStyle={{\n                                backgroundColor: '#fff',\n                                border: '1px solid #e5e7eb',\n                                borderRadius: '8px',\n                                boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',\n                                fontSize: '12px'\n                            }}\n                            formatter={(value: number) => [\n                                metric === 'premium' ? formatCurrency(value) : value,\n                                ''\n                            ]}\n                        />\n                        <Legend\n                            iconType=\"circle\"\n                            wrapperStyle={{ fontSize: '12px', paddingTop: '20px' }}\n                        />\n                        <Bar dataKey=\"Active\" stackId=\"a\" fill=\"#22c55e\" radius={[0, 0, 4, 4]} barSize={20} />\n                        <Bar dataKey=\"Expiring\" stackId=\"a\" fill=\"#f97316\" radius={[0, 0, 0, 0]} barSize={20} />\n                        <Bar dataKey=\"Expired\" stackId=\"a\" fill=\"#ef4444\" radius={[4, 4, 0, 0]} barSize={20} />\n                    </BarChart>\n                </ResponsiveContainer>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1848, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/dashboard/ProtectFamilyCard.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { Shield, ArrowRight } from 'lucide-react';\n\n\ninterface ProtectFamilyCardProps {\n    onGetQuote?: () => void;\n}\n\nexport default function ProtectFamilyCard({ onGetQuote }: ProtectFamilyCardProps) {\n    return (\n        <div className=\"bg-white p-4 rounded-2xl shadow-card border border-gray-100 h-full flex flex-col justify-between relative overflow-hidden group\">\n            <div>\n                <div className=\"flex items-center gap-2 mb-2\">\n                    <div className=\"w-8 h-8 rounded-lg bg-red-50 flex items-center justify-center text-red-500\">\n                        <Shield className=\"w-4 h-4\" />\n                    </div>\n                    <span className=\"bg-gray-100 text-gray-600 text-[9px] font-bold px-2 py-0.5 rounded-full tracking-wide uppercase\">\n                        Recommended\n                    </span>\n                </div>\n\n                <h3 className=\"text-base font-bold text-gray-900 mb-1.5\">Protect your Family</h3>\n                <p className=\"text-xs text-gray-500 leading-relaxed\">\n                    Get comprehensive health coverage with cashless claims.\n                </p>\n            </div>\n\n            <div className=\"flex items-end justify-between mt-3\">\n                <div className=\"bg-gray-50 rounded-lg px-2.5 py-1.5\">\n                    <p className=\"text-[9px] text-gray-400 font-bold uppercase tracking-wider mb-0.5\">Starting from</p>\n                    <p className=\"text-base font-bold text-gray-900\">â‚¹500<span className=\"text-xs text-gray-400 font-medium\">/mo</span></p>\n                </div>\n\n                <button\n                    onClick={onGetQuote}\n                    className=\"flex items-center text-primary-600 text-xs font-bold hover:text-primary-700 transition-colors group-hover:translate-x-1 duration-300\"\n                >\n                    Get a Quote\n                    <ArrowRight className=\"w-3.5 h-3.5 ml-1\" />\n                </button>\n            </div>\n\n            {/* subtle decoration */}\n            <div className=\"absolute -bottom-8 -right-8 w-24 h-24 bg-red-50 rounded-full opacity-50 blur-2xl group-hover:opacity-100 transition-opacity duration-500\"></div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AAHA;;;AAUe,SAAS,kBAAkB,EAAE,UAAU,EAA0B;IAC5E,qBACI,8MAAC;QAAI,WAAU;;0BACX,8MAAC;;kCACG,8MAAC;wBAAI,WAAU;;0CACX,8MAAC;gCAAI,WAAU;0CACX,cAAA,8MAAC,oOAAM;oCAAC,WAAU;;;;;;;;;;;0CAEtB,8MAAC;gCAAK,WAAU;0CAAkG;;;;;;;;;;;;kCAKtH,8MAAC;wBAAG,WAAU;kCAA2C;;;;;;kCACzD,8MAAC;wBAAE,WAAU;kCAAwC;;;;;;;;;;;;0BAKzD,8MAAC;gBAAI,WAAU;;kCACX,8MAAC;wBAAI,WAAU;;0CACX,8MAAC;gCAAE,WAAU;0CAAqE;;;;;;0CAClF,8MAAC;gCAAE,WAAU;;oCAAoC;kDAAI,8MAAC;wCAAK,WAAU;kDAAoC;;;;;;;;;;;;;;;;;;kCAG7G,8MAAC;wBACG,SAAS;wBACT,WAAU;;4BACb;0CAEG,8MAAC,oPAAU;gCAAC,WAAU;;;;;;;;;;;;;;;;;;0BAK9B,8MAAC;gBAAI,WAAU;;;;;;;;;;;;AAG3B;KAtCwB"}},
    {"offset": {"line": 2003, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/dashboard/CoverageGapCard.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { Lightbulb, ArrowRight } from 'lucide-react';\n\ninterface CoverageGapCardProps {\n    missingPolicyType: string;\n    onExplore?: () => void;\n}\n\nexport default function CoverageGapCard({ missingPolicyType, onExplore }: CoverageGapCardProps) {\n    return (\n        <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 p-4 rounded-2xl shadow-card border border-blue-100 h-full flex flex-col justify-between relative overflow-hidden group\">\n            <div>\n                <div className=\"flex items-center gap-2 mb-2\">\n                    <div className=\"w-8 h-8 rounded-lg bg-white flex items-center justify-center text-blue-600 shadow-sm\">\n                        <Lightbulb className=\"w-4 h-4\" />\n                    </div>\n                    <span className=\"bg-white/80 text-blue-700 text-[9px] font-bold px-2 py-0.5 rounded-full tracking-wide uppercase shadow-sm\">\n                        Insight\n                    </span>\n                </div>\n\n                <h3 className=\"text-base font-bold text-gray-900 mb-1.5\">Recommended for You</h3>\n                <p className=\"text-xs text-gray-600 leading-relaxed\">\n                    You currently don't have a <span className=\"font-semibold text-blue-700\">{missingPolicyType}</span> insurance policy added.\n                </p>\n            </div>\n\n            <button\n                onClick={onExplore}\n                className=\"mt-3 w-full flex items-center justify-center gap-1.5 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-xs font-bold shadow-lg shadow-blue-600/20 transition-all active:scale-95\"\n            >\n                Explore Plans\n                <ArrowRight className=\"w-3.5 h-3.5\" />\n            </button>\n\n            {/* subtle decoration */}\n            <div className=\"absolute -top-4 -right-4 w-20 h-20 bg-indigo-200 rounded-full opacity-30 blur-2xl\"></div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AAHA;;;AAUe,SAAS,gBAAgB,EAAE,iBAAiB,EAAE,SAAS,EAAwB;IAC1F,qBACI,8MAAC;QAAI,WAAU;;0BACX,8MAAC;;kCACG,8MAAC;wBAAI,WAAU;;0CACX,8MAAC;gCAAI,WAAU;0CACX,cAAA,8MAAC,6OAAS;oCAAC,WAAU;;;;;;;;;;;0CAEzB,8MAAC;gCAAK,WAAU;0CAA4G;;;;;;;;;;;;kCAKhI,8MAAC;wBAAG,WAAU;kCAA2C;;;;;;kCACzD,8MAAC;wBAAE,WAAU;;4BAAwC;0CACtB,8MAAC;gCAAK,WAAU;0CAA+B;;;;;;4BAAyB;;;;;;;;;;;;;0BAI3G,8MAAC;gBACG,SAAS;gBACT,WAAU;;oBACb;kCAEG,8MAAC,oPAAU;wBAAC,WAAU;;;;;;;;;;;;0BAI1B,8MAAC;gBAAI,WAAU;;;;;;;;;;;;AAG3B;KA/BwB"}},
    {"offset": {"line": 2125, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/dashboard/ReportsModal.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport { X, Calendar, FileText, Filter, Download } from 'lucide-react';\n\ninterface ReportsModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n}\n\nexport default function ReportsModal({ isOpen, onClose }: ReportsModalProps) {\n    const [dateRange, setDateRange] = useState('last_30_days');\n    const [policyType, setPolicyType] = useState('all');\n    const [format, setFormat] = useState<'pdf' | 'excel' | 'csv'>('pdf');\n    const [downloading, setDownloading] = useState(false);\n\n    if (!isOpen) return null;\n\n    const handleDownload = async () => {\n        setDownloading(true);\n        try {\n            // Ensure this only runs in the browser (SSR safety)\n            if (typeof window === 'undefined') return;\n\n            // Mock data generation based on filters\n            const data = [\n                ['Policy No', 'Insurer', 'Type', 'Premium', 'Status', 'Date'],\n                ['MOT-123456', 'HDFC Ergo', 'Motor', 'â‚¹12,500', 'Active', '2023-11-15'],\n                ['HLT-987654', 'Star Health', 'Health', 'â‚¹25,000', 'Active', '2023-10-01'],\n                ['COM-456789', 'ICICI Lombard', 'Commercial', 'â‚¹45,000', 'Expiring Soon', '2023-12-05'],\n            ];\n\n            const timestamp = new Date().toISOString().split('T')[0];\n            const filename = `insurance_report_${timestamp}`;\n\n            if (format === 'pdf') {\n                const { default: jsPDF } = await import('jspdf');\n                const { default: autoTable } = await import('jspdf-autotable');\n\n                const doc = new jsPDF();\n                doc.text('Insurance Portfolio Report', 14, 15);\n                doc.text(`Generated on: ${new Date().toLocaleDateString()}`, 14, 22);\n\n                autoTable(doc, {\n                    head: [data[0]],\n                    body: data.slice(1),\n                    startY: 30,\n                });\n\n                doc.save(`${filename}.pdf`);\n            } else if (format === 'excel') {\n                const XLSX = await import('xlsx');\n                const ws = XLSX.utils.aoa_to_sheet(data);\n                const wb = XLSX.utils.book_new();\n                XLSX.utils.book_append_sheet(wb, ws, 'Report');\n                XLSX.writeFile(wb, `${filename}.xlsx`);\n            } else {\n                // CSV\n                const csvContent = data.map(e => e.join(\",\")).join(\"\\n\");\n                const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n                const link = document.createElement(\"a\");\n                const url = URL.createObjectURL(blob);\n                link.setAttribute(\"href\", url);\n                link.setAttribute(\"download\", `${filename}.csv`);\n                document.body.appendChild(link);\n                link.click();\n                document.body.removeChild(link);\n            }\n\n            onClose();\n        } catch (error) {\n            console.error('Error generating report:', error);\n        } finally {\n            setDownloading(false);\n        }\n    };\n\n\n    return (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n            <div className=\"bg-white rounded-2xl w-full max-w-md shadow-2xl transform transition-all\">\n                <div className=\"p-6 border-b border-gray-100 flex justify-between items-center\">\n                    <h3 className=\"text-xl font-bold text-gray-900\">Generate Report</h3>\n                    <button onClick={onClose} className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\">\n                        <X className=\"w-5 h-5 text-gray-500\" />\n                    </button>\n                </div>\n\n                <div className=\"p-6 space-y-6\">\n                    {/* Date Range */}\n                    <div className=\"space-y-3\">\n                        <label className=\"text-sm font-bold text-gray-700 block\">Date Range</label>\n                        <div className=\"grid grid-cols-2 gap-4\">\n                            <div className=\"relative\">\n                                <Calendar className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\n                                <input\n                                    type=\"date\"\n                                    className=\"w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all\"\n                                />\n                            </div>\n                            <div className=\"relative\">\n                                <Calendar className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\n                                <input\n                                    type=\"date\"\n                                    className=\"w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all\"\n                                />\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* Policy Type */}\n                    <div className=\"space-y-3\">\n                        <label className=\"text-sm font-bold text-gray-700 block\">Policy Type</label>\n                        <div className=\"relative\">\n                            <Filter className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\n                            <select\n                                value={policyType}\n                                onChange={(e) => setPolicyType(e.target.value)}\n                                className=\"w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500 appearance-none bg-white transition-all\"\n                            >\n                                <option value=\"all\">All Policies</option>\n                                <option value=\"motor\">Motor Insurance</option>\n                                <option value=\"health\">Health Insurance</option>\n                                <option value=\"commercial\">Commercial Insurance</option>\n                                <option value=\"life\">Life Insurance</option>\n                                <option value=\"travel\">Travel Insurance</option>\n                                <option value=\"cyber\">Cyber Insurance</option>\n                            </select>\n                        </div>\n                    </div>\n\n                    {/* Format Selection */}\n                    <div className=\"space-y-3\">\n                        <label className=\"text-sm font-bold text-gray-700 block\">Format</label>\n                        <div className=\"grid grid-cols-3 gap-3\">\n                            <button\n                                onClick={() => setFormat('pdf')}\n                                className={`py-2.5 px-4 rounded-xl text-sm font-bold border transition-all ${format === 'pdf'\n                                    ? 'bg-primary-50 border-primary-200 text-primary-700 ring-2 ring-primary-500 ring-offset-1'\n                                    : 'border-gray-200 text-gray-600 hover:bg-gray-50'\n                                    }`}\n                            >\n                                PDF\n                            </button>\n                            <button\n                                onClick={() => setFormat('excel')}\n                                className={`py-2.5 px-4 rounded-xl text-sm font-bold border transition-all ${format === 'excel'\n                                    ? 'bg-primary-50 border-primary-200 text-primary-700 ring-2 ring-primary-500 ring-offset-1'\n                                    : 'border-gray-200 text-gray-600 hover:bg-gray-50'\n                                    }`}\n                            >\n                                Excel\n                            </button>\n                            <button\n                                onClick={() => setFormat('csv')}\n                                className={`py-2.5 px-4 rounded-xl text-sm font-bold border transition-all ${format === 'csv'\n                                    ? 'bg-primary-50 border-primary-200 text-primary-700 ring-2 ring-primary-500 ring-offset-1'\n                                    : 'border-gray-200 text-gray-600 hover:bg-gray-50'\n                                    }`}\n                            >\n                                CSV\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"p-6 border-t border-gray-100 bg-gray-50 rounded-b-2xl flex justify-end gap-3\">\n                    <button\n                        onClick={onClose}\n                        className=\"px-5 py-2.5 text-sm font-bold text-gray-600 hover:text-gray-800 hover:bg-gray-200 rounded-xl transition-colors\"\n                    >\n                        Cancel\n                    </button>\n                    <button\n                        onClick={handleDownload}\n                        disabled={downloading}\n                        className=\"px-5 py-2.5 bg-primary-600 hover:bg-primary-700 text-white text-sm font-bold rounded-xl shadow-lg shadow-primary-600/20 transition-all active:scale-95 flex items-center disabled:opacity-70 disabled:cursor-not-allowed\"\n                    >\n                        {downloading ? (\n                            <>\n                                <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2\"></div>\n                                Generating...\n                            </>\n                        ) : (\n                            <>\n                                <Download className=\"w-4 h-4 mr-2\" />\n                                Download Report\n                            </>\n                        )}\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;;;AAHA;;;AAUe,SAAS,aAAa,EAAE,MAAM,EAAE,OAAO,EAAqB;;IACvE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,0LAAQ,EAAC;IAC3C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,0LAAQ,EAAC;IAC7C,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,0LAAQ,EAA0B;IAC9D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,0LAAQ,EAAC;IAE/C,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,iBAAiB;QACnB,eAAe;QACf,IAAI;YACA,oDAAoD;YACpD;;YAEA,wCAAwC;YACxC,MAAM,OAAO;gBACT;oBAAC;oBAAa;oBAAW;oBAAQ;oBAAW;oBAAU;iBAAO;gBAC7D;oBAAC;oBAAc;oBAAa;oBAAS;oBAAW;oBAAU;iBAAa;gBACvE;oBAAC;oBAAc;oBAAe;oBAAU;oBAAW;oBAAU;iBAAa;gBAC1E;oBAAC;oBAAc;oBAAiB;oBAAc;oBAAW;oBAAiB;iBAAa;aAC1F;YAED,MAAM,YAAY,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;YACxD,MAAM,WAAW,CAAC,iBAAiB,EAAE,WAAW;YAEhD,IAAI,WAAW,OAAO;gBAClB,MAAM,EAAE,SAAS,KAAK,EAAE,GAAG;gBAC3B,MAAM,EAAE,SAAS,SAAS,EAAE,GAAG;gBAE/B,MAAM,MAAM,IAAI;gBAChB,IAAI,IAAI,CAAC,8BAA8B,IAAI;gBAC3C,IAAI,IAAI,CAAC,CAAC,cAAc,EAAE,IAAI,OAAO,kBAAkB,IAAI,EAAE,IAAI;gBAEjE,UAAU,KAAK;oBACX,MAAM;wBAAC,IAAI,CAAC,EAAE;qBAAC;oBACf,MAAM,KAAK,KAAK,CAAC;oBACjB,QAAQ;gBACZ;gBAEA,IAAI,IAAI,CAAC,GAAG,SAAS,IAAI,CAAC;YAC9B,OAAO,IAAI,WAAW,SAAS;gBAC3B,MAAM,OAAO;gBACb,MAAM,KAAK,KAAK,KAAK,CAAC,YAAY,CAAC;gBACnC,MAAM,KAAK,KAAK,KAAK,CAAC,QAAQ;gBAC9B,KAAK,KAAK,CAAC,iBAAiB,CAAC,IAAI,IAAI;gBACrC,KAAK,SAAS,CAAC,IAAI,GAAG,SAAS,KAAK,CAAC;YACzC,OAAO;gBACH,MAAM;gBACN,MAAM,aAAa,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI,CAAC,MAAM,IAAI,CAAC;gBACnD,MAAM,OAAO,IAAI,KAAK;oBAAC;iBAAW,EAAE;oBAAE,MAAM;gBAA0B;gBACtE,MAAM,OAAO,SAAS,aAAa,CAAC;gBACpC,MAAM,MAAM,IAAI,eAAe,CAAC;gBAChC,KAAK,YAAY,CAAC,QAAQ;gBAC1B,KAAK,YAAY,CAAC,YAAY,GAAG,SAAS,IAAI,CAAC;gBAC/C,SAAS,IAAI,CAAC,WAAW,CAAC;gBAC1B,KAAK,KAAK;gBACV,SAAS,IAAI,CAAC,WAAW,CAAC;YAC9B;YAEA;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,4BAA4B;QAC9C,SAAU;YACN,eAAe;QACnB;IACJ;IAGA,qBACI,8MAAC;QAAI,WAAU;kBACX,cAAA,8MAAC;YAAI,WAAU;;8BACX,8MAAC;oBAAI,WAAU;;sCACX,8MAAC;4BAAG,WAAU;sCAAkC;;;;;;sCAChD,8MAAC;4BAAO,SAAS;4BAAS,WAAU;sCAChC,cAAA,8MAAC,qNAAC;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAIrB,8MAAC;oBAAI,WAAU;;sCAEX,8MAAC;4BAAI,WAAU;;8CACX,8MAAC;oCAAM,WAAU;8CAAwC;;;;;;8CACzD,8MAAC;oCAAI,WAAU;;sDACX,8MAAC;4CAAI,WAAU;;8DACX,8MAAC,0OAAQ;oDAAC,WAAU;;;;;;8DACpB,8MAAC;oDACG,MAAK;oDACL,WAAU;;;;;;;;;;;;sDAGlB,8MAAC;4CAAI,WAAU;;8DACX,8MAAC,0OAAQ;oDAAC,WAAU;;;;;;8DACpB,8MAAC;oDACG,MAAK;oDACL,WAAU;;;;;;;;;;;;;;;;;;;;;;;;sCAO1B,8MAAC;4BAAI,WAAU;;8CACX,8MAAC;oCAAM,WAAU;8CAAwC;;;;;;8CACzD,8MAAC;oCAAI,WAAU;;sDACX,8MAAC,oOAAM;4CAAC,WAAU;;;;;;sDAClB,8MAAC;4CACG,OAAO;4CACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;4CAC7C,WAAU;;8DAEV,8MAAC;oDAAO,OAAM;8DAAM;;;;;;8DACpB,8MAAC;oDAAO,OAAM;8DAAQ;;;;;;8DACtB,8MAAC;oDAAO,OAAM;8DAAS;;;;;;8DACvB,8MAAC;oDAAO,OAAM;8DAAa;;;;;;8DAC3B,8MAAC;oDAAO,OAAM;8DAAO;;;;;;8DACrB,8MAAC;oDAAO,OAAM;8DAAS;;;;;;8DACvB,8MAAC;oDAAO,OAAM;8DAAQ;;;;;;;;;;;;;;;;;;;;;;;;sCAMlC,8MAAC;4BAAI,WAAU;;8CACX,8MAAC;oCAAM,WAAU;8CAAwC;;;;;;8CACzD,8MAAC;oCAAI,WAAU;;sDACX,8MAAC;4CACG,SAAS,IAAM,UAAU;4CACzB,WAAW,CAAC,+DAA+D,EAAE,WAAW,QAClF,4FACA,kDACA;sDACT;;;;;;sDAGD,8MAAC;4CACG,SAAS,IAAM,UAAU;4CACzB,WAAW,CAAC,+DAA+D,EAAE,WAAW,UAClF,4FACA,kDACA;sDACT;;;;;;sDAGD,8MAAC;4CACG,SAAS,IAAM,UAAU;4CACzB,WAAW,CAAC,+DAA+D,EAAE,WAAW,QAClF,4FACA,kDACA;sDACT;;;;;;;;;;;;;;;;;;;;;;;;8BAOb,8MAAC;oBAAI,WAAU;;sCACX,8MAAC;4BACG,SAAS;4BACT,WAAU;sCACb;;;;;;sCAGD,8MAAC;4BACG,SAAS;4BACT,UAAU;4BACV,WAAU;sCAET,4BACG;;kDACI,8MAAC;wCAAI,WAAU;;;;;;oCAAuF;;6DAI1G;;kDACI,8MAAC,0OAAQ;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;;;;;;;;;;;;;;;;;;;AASrE;GAxLwB;KAAA"}},
    {"offset": {"line": 2579, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/dashboard/PolicyDetailModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useMemo } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { X, Search, ArrowDown, ArrowUp, FileText, Info } from 'lucide-react';\nimport { MotorPolicy, HealthPolicy, CommercialPolicy } from '@/types';\n\ninterface PolicyDetailModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    title: string;\n    type: 'total' | 'premium' | 'expiring' | 'expired';\n    motorPolicies?: MotorPolicy[];\n    healthPolicies: HealthPolicy[];\n    commercialPolicies?: CommercialPolicy[];\n    travelPolicies?: any[];\n    lifePolicies?: any[];\n    cyberPolicies?: any[];\n}\n\nexport default function PolicyDetailModal({\n    isOpen,\n    onClose,\n    title,\n    type,\n    motorPolicies = [],\n    healthPolicies,\n    commercialPolicies = [],\n    travelPolicies = [],\n    lifePolicies = [],\n    cyberPolicies = []\n}: PolicyDetailModalProps) {\n    const router = useRouter();\n    const [searchQuery, setSearchQuery] = useState('');\n    const [sortDirection, setSortDirection] = useState<'high' | 'low' | null>(null); // null = no sort\n    const [showClaimsInfo, setShowClaimsInfo] = useState(false);\n\n    const handlePolicyClick = (policyType: string, id: string) => {\n        onClose();\n        router.push(`/policies/${policyType.toLowerCase()}/${id}`);\n    };\n\n    const handleClaimsStatusClick = () => {\n        setShowClaimsInfo(true);\n    };\n\n    const handleViewQuote = (policy: any) => {\n        // This will open the quote document if available\n        if (policy.quote_document_url) {\n            window.open(policy.quote_document_url, '_blank');\n        } else {\n            alert('No quote document available for this policy');\n        }\n    };\n\n    const renderPolicyRow = (policy: any, policyType: string) => {\n        const getPolicyDates = () => {\n            if ('policy_end_date' in policy) {\n                return {\n                    start: policy.policy_start_date,\n                    end: policy.policy_end_date\n                };\n            }\n            return {\n                start: policy.policy_start_date,\n                end: policy.expiry_date\n            };\n        };\n\n        const dates = getPolicyDates();\n        const premium = Number(policy.premium_amount);\n\n        // Determine primary field based on policy type\n        let primaryField = policy.policy_number;\n\n        if (policyType === 'Motor') {\n            primaryField = policy.vehicle_number;\n        } else if (policyType === 'Health') {\n            primaryField = policy.company_name || 'N/A';\n        } else if (policyType === 'Commercial') {\n            primaryField = policy.company_name || policy.policy_holder_name || 'N/A';\n        } else if (['Travel', 'Life', 'Cyber'].includes(policyType)) {\n            if (policyType === 'Travel') primaryField = policy.destination || 'Travel Policy';\n            if (policyType === 'Life') primaryField = policy.nominee_name || 'Life Policy';\n            if (policyType === 'Cyber') primaryField = policy.cyber_risk_type || 'Cyber Policy';\n        }\n\n        return (\n            <tr key={policy.id} className=\"hover:bg-gray-50\">\n                <td className=\"px-4 py-3 text-sm\">\n                    <button\n                        onClick={() => handlePolicyClick(policyType, policy.id)}\n                        className=\"text-primary-600 hover:text-primary-700 font-semibold hover:underline text-left\"\n                    >\n                        {primaryField}\n                    </button>\n                </td>\n                <td className=\"px-4 py-3 text-sm text-gray-900\">{policy.policy_number}</td>\n                <td className=\"px-4 py-3 text-sm text-gray-900\">{policy.insurer_name}</td>\n                <td className=\"px-4 py-3 text-sm text-gray-600\">{policyType}</td>\n                <td className=\"px-4 py-3 text-sm text-gray-900 font-semibold\">\n                    â‚¹{premium.toLocaleString()}\n                </td>\n                <td className=\"px-4 py-3 text-sm\">\n                    <span className={`px-2 py-1 rounded-full text-xs font-semibold ${policy.status === 'Active' ? 'bg-green-100 text-green-700' :\n                        policy.status === 'Expiring Soon' ? 'bg-orange-100 text-orange-700' :\n                            policy.status === 'Expired' ? 'bg-red-100 text-red-700' :\n                                'bg-gray-100 text-gray-700'\n                        }`}>\n                        {policy.status}\n                    </span>\n                </td>\n                <td className=\"px-4 py-3 text-sm text-gray-600\">\n                    {dates.end ? new Date(dates.end).toLocaleDateString() : 'N/A'}\n                </td>\n\n                {/* Claims Status - Only for expiring type */}\n                {type === 'expiring' && (\n                    <td className=\"px-4 py-3 text-sm\">\n                        <select\n                            onClick={handleClaimsStatusClick}\n                            className=\"px-2 py-1 border border-gray-300 rounded text-xs focus:ring-2 focus:ring-primary-500 outline-none\"\n                            defaultValue=\"\"\n                        >\n                            <option value=\"\">Select</option>\n                            <option value=\"yes\">Yes</option>\n                            <option value=\"no\">No</option>\n                        </select>\n                    </td>\n                )}\n\n                {/* View Quote - Only for expiring type */}\n                {type === 'expiring' && (\n                    <td className=\"px-4 py-3 text-sm\">\n                        <button\n                            onClick={() => handleViewQuote(policy)}\n                            className=\"inline-flex items-center gap-1 px-2 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors\"\n                        >\n                            <FileText className=\"w-3 h-3\" />\n                            View Quote\n                        </button>\n                    </td>\n                )}\n\n                {/* View Documents - For all types */}\n                <td className=\"px-4 py-3 text-sm\">\n                    <div className=\"flex flex-col gap-1\">\n                        {/* RC Copy */}\n                        {policyType === 'Motor' && policy.rc_docs && policy.rc_docs.length > 0 && (\n                            <a\n                                href={policy.rc_docs[0]}\n                                target=\"_blank\"\n                                rel=\"noopener noreferrer\"\n                                download\n                                className=\"inline-flex items-center gap-1 px-2 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700 transition-colors\"\n                            >\n                                <FileText className=\"w-3 h-3\" />\n                                RC Copy\n                            </a>\n                        )}\n                        {/* Policy Copy */}\n                        {policyType === 'Motor' && policy.previous_policy_docs && policy.previous_policy_docs.length > 0 && (\n                            <a\n                                href={policy.previous_policy_docs[0]}\n                                target=\"_blank\"\n                                rel=\"noopener noreferrer\"\n                                download\n                                className=\"inline-flex items-center gap-1 px-2 py-1 text-xs bg-purple-600 text-white rounded hover:bg-purple-700 transition-colors\"\n                            >\n                                <FileText className=\"w-3 h-3\" />\n                                Policy Copy\n                            </a>\n                        )}\n                        {/* For Health/Commercial/Others - Policy Docs */}\n                        {['Health', 'Commercial', 'Travel', 'Life', 'Cyber'].includes(policyType) && policy.policy_docs && policy.policy_docs.length > 0 && (\n                            <a\n                                href={policy.policy_docs[0]}\n                                target=\"_blank\"\n                                rel=\"noopener noreferrer\"\n                                download\n                                className=\"inline-flex items-center gap-1 px-2 py-1 text-xs bg-purple-600 text-white rounded hover:bg-purple-700 transition-colors\"\n                            >\n                                <FileText className=\"w-3 h-3\" />\n                                Policy Doc\n                            </a>\n                        )}\n                        {/* No documents available */}\n                        {!((policyType === 'Motor' && ((policy.rc_docs && policy.rc_docs.length > 0) || (policy.previous_policy_docs && policy.previous_policy_docs.length > 0))) ||\n                            (['Health', 'Commercial', 'Travel', 'Life', 'Cyber'].includes(policyType) && policy.policy_docs && policy.policy_docs.length > 0)) && (\n                                <span className=\"text-xs text-gray-400\">No docs</span>\n                            )}\n                    </div>\n                </td>\n            </tr>\n        );\n    };\n\n    const allPolicies = [\n        ...motorPolicies.map(p => ({ ...p, policyType: 'Motor' })),\n        ...healthPolicies.map((p: any) => ({ ...p, policyType: 'Health' })),\n        ...commercialPolicies.map(p => ({ ...p, policyType: 'Commercial' })),\n        ...travelPolicies.map(p => ({ ...p, policyType: 'Travel' })),\n        ...lifePolicies.map(p => ({ ...p, policyType: 'Life' })),\n        ...cyberPolicies.map(p => ({ ...p, policyType: 'Cyber' }))\n    ];\n\n    // Filter based on type\n    const displayPolicies = useMemo(() => {\n        let filtered = allPolicies;\n\n        if (type === 'expiring') {\n            filtered = allPolicies.filter((p: any) => p.status === 'Expiring Soon');\n        } else if (type === 'expired') {\n            filtered = allPolicies.filter((p: any) => p.status === 'Expired');\n        } else if (type === 'total' || type === 'premium') {\n            filtered = allPolicies.filter((p: any) => p.status === 'Active' || p.status === 'Expiring Soon');\n        }\n\n        // Apply search filter for 'total' type\n        if (type === 'total' && searchQuery.trim()) {\n            const query = searchQuery.toLowerCase();\n            filtered = filtered.filter((p: any) => {\n                return (\n                    p.policy_number?.toLowerCase().includes(query) ||\n                    p.insurer_name?.toLowerCase().includes(query) ||\n                    p.vehicle_number?.toLowerCase().includes(query) ||\n                    p.company_name?.toLowerCase().includes(query) ||\n                    p.destination?.toLowerCase().includes(query) ||\n                    p.nominee_name?.toLowerCase().includes(query) ||\n                    p.policyType?.toLowerCase().includes(query)\n                );\n            });\n        }\n\n        // Apply premium sort for 'premium' type (user-controlled)\n        if (type === 'premium' && sortDirection) {\n            filtered = [...filtered].sort((a, b) => {\n                const diff = Number(b.premium_amount) - Number(a.premium_amount);\n                return sortDirection === 'high' ? diff : -diff;\n            });\n        }\n\n        return filtered;\n    }, [allPolicies, type, searchQuery, sortDirection]);\n\n    // Calculate total premium for premium view\n    const totalPremium = type === 'premium'\n        ? displayPolicies.reduce((sum, p) => sum + Number(p.premium_amount), 0)\n        : 0;\n\n    // Return early if modal is not open - AFTER all hooks are called\n    if (!isOpen) return null;\n\n    return (\n        <>\n            <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n                <div className=\"bg-white rounded-2xl shadow-xl max-w-5xl w-full max-h-[90vh] flex flex-col\">\n                    {/* Header */}\n                    <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n                        <div>\n                            <h2 className=\"text-xl font-bold text-gray-900\">{title}</h2>\n                            <p className=\"text-sm text-gray-500 mt-1\">\n                                {displayPolicies.length} {displayPolicies.length === 1 ? 'policy' : 'policies'}\n                                {type === 'premium' && ` â€¢ Total: â‚¹${totalPremium.toLocaleString()}`}\n                            </p>\n                        </div>\n                        <button\n                            onClick={onClose}\n                            className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n                        >\n                            <X className=\"w-5 h-5 text-gray-500\" />\n                        </button>\n                    </div>\n\n                    {/* Search Bar - Only for 'total' type */}\n                    {type === 'total' && (\n                        <div className=\"px-6 py-4 border-b border-gray-200 bg-gray-50\">\n                            <div className=\"relative\">\n                                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" />\n                                <input\n                                    type=\"text\"\n                                    placeholder=\"Search policies (policy number, insurer, vehicle number, etc.)\"\n                                    value={searchQuery}\n                                    onChange={(e) => setSearchQuery(e.target.value)}\n                                    className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-all\"\n                                />\n                            </div>\n                        </div>\n                    )}\n\n                    {/* Sort Controls - For 'premium' type */}\n                    {type === 'premium' && (\n                        <div className=\"px-6 py-4 border-b border-gray-200 bg-gray-50\">\n                            <div className=\"flex items-center gap-3\">\n                                <span className=\"text-sm font-medium text-gray-700\">Sort by Premium:</span>\n                                <div className=\"flex gap-2\">\n                                    <button\n                                        onClick={() => setSortDirection(sortDirection === 'high' ? null : 'high')}\n                                        className={`flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-lg transition-all ${sortDirection === 'high'\n                                                ? 'bg-blue-600 text-white shadow-md'\n                                                : 'bg-white text-gray-700 border border-gray-300 hover:bg-gray-50'\n                                            }`}\n                                    >\n                                        <ArrowDown className=\"w-4 h-4\" />\n                                        High to Low\n                                    </button>\n                                    <button\n                                        onClick={() => setSortDirection(sortDirection === 'low' ? null : 'low')}\n                                        className={`flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-lg transition-all ${sortDirection === 'low'\n                                                ? 'bg-blue-600 text-white shadow-md'\n                                                : 'bg-white text-gray-700 border border-gray-300 hover:bg-gray-50'\n                                            }`}\n                                    >\n                                        <ArrowUp className=\"w-4 h-4\" />\n                                        Low to High\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    {/* Status Legend */}\n                    <div className=\"px-6 py-2 bg-gray-50 border-b border-gray-200 flex gap-4 text-xs\">\n                        <div className=\"flex items-center gap-1.5\">\n                            <span className=\"w-2 h-2 rounded-full bg-green-500\"></span>\n                            <span className=\"text-gray-600\">Active</span>\n                        </div>\n                        <div className=\"flex items-center gap-1.5\">\n                            <span className=\"w-2 h-2 rounded-full bg-orange-500\"></span>\n                            <span className=\"text-gray-600\">Expiring Soon (&lt;20 days)</span>\n                        </div>\n                        <div className=\"flex items-center gap-1.5\">\n                            <span className=\"w-2 h-2 rounded-full bg-red-500\"></span>\n                            <span className=\"text-gray-600\">Expired</span>\n                        </div>\n                    </div>\n\n                    {/* Content */}\n                    <div className=\"flex-1 overflow-auto p-6\">\n                        {displayPolicies.length === 0 ? (\n                            <div className=\"text-center py-12\">\n                                <p className=\"text-gray-500\">\n                                    {searchQuery ? 'No policies match your search' : 'No policies found'}\n                                </p>\n                            </div>\n                        ) : (\n                            <div className=\"border border-gray-200 rounded-xl overflow-x-auto\">\n                                <table className=\"w-full min-w-[600px]\">\n                                    <thead className=\"bg-gray-50\">\n                                        <tr>\n                                            <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider\">\n                                                Details\n                                            </th>\n                                            <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider\">\n                                                Policy Number\n                                            </th>\n                                            <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider\">\n                                                Insurer\n                                            </th>\n                                            <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider\">\n                                                Type\n                                            </th>\n                                            <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider\">\n                                                Premium\n                                                {type === 'premium' && (\n                                                    <ArrowDown className=\"w-3 h-3 inline ml-1 text-blue-600\" />\n                                                )}\n                                            </th>\n                                            <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider\">\n                                                Status\n                                            </th>\n                                            <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider\">\n                                                End Date\n                                            </th>\n                                            {type === 'expiring' && (\n                                                <>\n                                                    <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider\">\n                                                        Claims Status\n                                                    </th>\n                                                    <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider\">\n                                                        Quote\n                                                    </th>\n                                                </>\n                                            )}\n                                            <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider\">\n                                                View Doc\n                                            </th>\n                                        </tr>\n                                    </thead>\n                                    <tbody className=\"divide-y divide-gray-100 bg-white\">\n                                        {displayPolicies.filter(p => p.policyType === 'Motor').map(p => renderPolicyRow(p, 'Motor'))}\n                                        {displayPolicies.filter(p => p.policyType === 'Health').map(p => renderPolicyRow(p, 'Health'))}\n                                        {displayPolicies.filter(p => p.policyType === 'Commercial').map(p => renderPolicyRow(p, 'Commercial'))}\n                                        {displayPolicies.filter(p => p.policyType === 'Travel').map(p => renderPolicyRow(p, 'Travel'))}\n                                        {displayPolicies.filter(p => p.policyType === 'Life').map(p => renderPolicyRow(p, 'Life'))}\n                                        {displayPolicies.filter(p => p.policyType === 'Cyber').map(p => renderPolicyRow(p, 'Cyber'))}\n                                    </tbody>\n                                </table>\n                            </div>\n                        )}\n                    </div>\n\n                    {/* Footer */}\n                    <div className=\"p-6 border-t border-gray-200 bg-gray-50\">\n                        <p className=\"text-xs text-gray-500\">\n                            Click on a policy to view full details\n                        </p>\n                    </div>\n                </div>\n            </div>\n\n            {/* Claims Info Popup */}\n            {showClaimsInfo && (\n                <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4\">\n                    <div className=\"bg-white rounded-xl shadow-xl max-w-md w-full p-6\">\n                        <div className=\"flex items-start gap-3\">\n                            <div className=\"p-2 bg-blue-100 rounded-lg\">\n                                <Info className=\"w-5 h-5 text-blue-600\" />\n                            </div>\n                            <div className=\"flex-1\">\n                                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Claims Status</h3>\n                                <p className=\"text-sm text-gray-600\">\n                                    Please click on <span className=\"font-semibold\">Yes</span>, if you have applied for any type of claim which is under process.\n                                </p>\n                            </div>\n                        </div>\n                        <div className=\"mt-6 flex justify-end\">\n                            <button\n                                onClick={() => setShowClaimsInfo(false)}\n                                className=\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors font-medium\"\n                            >\n                                Got it\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            )}\n        </>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3515, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/forms/FormInput.tsx"],"sourcesContent":["import React from 'react';\n\ninterface FormInputProps {\n    label: string;\n    name: string;\n    type?: 'text' | 'email' | 'tel' | 'number' | 'date' | 'select' | 'textarea';\n    value: string | number;\n    onChange: (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => void;\n    onBlur?: (e: React.FocusEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => void;\n    error?: string;\n    placeholder?: string;\n    required?: boolean;\n    disabled?: boolean;\n    min?: string | number;\n    max?: string | number;\n    step?: string | number;\n    options?: { value: string | number; label: string }[];\n    rows?: number;\n    className?: string;\n}\n\nexport default function FormInput({\n    label,\n    name,\n    type = 'text',\n    value,\n    onChange,\n    onBlur,\n    error,\n    placeholder,\n    required = false,\n    disabled = false,\n    min,\n    max,\n    step,\n    options = [],\n    rows = 4,\n    className = '',\n}: FormInputProps) {\n    const baseInputClass = `\n    w-full px-4 py-2 border rounded-lg\n    focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent\n    disabled:bg-gray-100 disabled:cursor-not-allowed\n    transition-colors\n    ${error ? 'border-red-500 focus:ring-red-500' : 'border-gray-300'}\n    ${className}\n  `;\n\n    const renderInput = () => {\n        if (type === 'select') {\n            return (\n                <select\n                    id={name}\n                    name={name}\n                    value={value}\n                    onChange={onChange}\n                    onBlur={onBlur}\n                    disabled={disabled}\n                    required={required}\n                    className={baseInputClass}\n                >\n                    <option value=\"\">Select {label}</option>\n                    {options.map((option) => (\n                        <option key={option.value} value={option.value}>\n                            {option.label}\n                        </option>\n                    ))}\n                </select>\n            );\n        }\n\n        if (type === 'textarea') {\n            return (\n                <textarea\n                    id={name}\n                    name={name}\n                    value={value}\n                    onChange={onChange}\n                    onBlur={onBlur}\n                    placeholder={placeholder}\n                    disabled={disabled}\n                    required={required}\n                    rows={rows}\n                    className={baseInputClass}\n                />\n            );\n        }\n\n        return (\n            <input\n                id={name}\n                name={name}\n                type={type}\n                value={value}\n                onChange={onChange}\n                onBlur={onBlur}\n                placeholder={placeholder}\n                disabled={disabled}\n                required={required}\n                min={min}\n                max={max}\n                step={step}\n                className={baseInputClass}\n            />\n        );\n    };\n\n    return (\n        <div className=\"space-y-1\">\n            <label htmlFor={name} className=\"block text-sm font-medium text-gray-700\">\n                {label}\n                {required && <span className=\"text-red-500 ml-1\">*</span>}\n            </label>\n            {renderInput()}\n            {error && (\n                <p className=\"text-sm text-red-600 flex items-center gap-1\">\n                    <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n                    </svg>\n                    {error}\n                </p>\n            )}\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;;AAqBe,SAAS,UAAU,EAC9B,KAAK,EACL,IAAI,EACJ,OAAO,MAAM,EACb,KAAK,EACL,QAAQ,EACR,MAAM,EACN,KAAK,EACL,WAAW,EACX,WAAW,KAAK,EAChB,WAAW,KAAK,EAChB,GAAG,EACH,GAAG,EACH,IAAI,EACJ,UAAU,EAAE,EACZ,OAAO,CAAC,EACR,YAAY,EAAE,EACD;IACb,MAAM,iBAAiB,CAAC;;;;;IAKxB,EAAE,QAAQ,sCAAsC,kBAAkB;IAClE,EAAE,UAAU;EACd,CAAC;IAEC,MAAM,cAAc;QAChB,IAAI,SAAS,UAAU;YACnB,qBACI,8MAAC;gBACG,IAAI;gBACJ,MAAM;gBACN,OAAO;gBACP,UAAU;gBACV,QAAQ;gBACR,UAAU;gBACV,UAAU;gBACV,WAAW;;kCAEX,8MAAC;wBAAO,OAAM;;4BAAG;4BAAQ;;;;;;;oBACxB,QAAQ,GAAG,CAAC,CAAC,uBACV,8MAAC;4BAA0B,OAAO,OAAO,KAAK;sCACzC,OAAO,KAAK;2BADJ,OAAO,KAAK;;;;;;;;;;;QAMzC;QAEA,IAAI,SAAS,YAAY;YACrB,qBACI,8MAAC;gBACG,IAAI;gBACJ,MAAM;gBACN,OAAO;gBACP,UAAU;gBACV,QAAQ;gBACR,aAAa;gBACb,UAAU;gBACV,UAAU;gBACV,MAAM;gBACN,WAAW;;;;;;QAGvB;QAEA,qBACI,8MAAC;YACG,IAAI;YACJ,MAAM;YACN,MAAM;YACN,OAAO;YACP,UAAU;YACV,QAAQ;YACR,aAAa;YACb,UAAU;YACV,UAAU;YACV,KAAK;YACL,KAAK;YACL,MAAM;YACN,WAAW;;;;;;IAGvB;IAEA,qBACI,8MAAC;QAAI,WAAU;;0BACX,8MAAC;gBAAM,SAAS;gBAAM,WAAU;;oBAC3B;oBACA,0BAAY,8MAAC;wBAAK,WAAU;kCAAoB;;;;;;;;;;;;YAEpD;YACA,uBACG,8MAAC;gBAAE,WAAU;;kCACT,8MAAC;wBAAI,WAAU;wBAAU,MAAK;wBAAe,SAAQ;kCACjD,cAAA,8MAAC;4BAAK,UAAS;4BAAU,GAAE;4BAAoH,UAAS;;;;;;;;;;;oBAE3J;;;;;;;;;;;;;AAKrB;KAvGwB"}},
    {"offset": {"line": 3674, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/lib/storage.ts"],"sourcesContent":["import { supabase } from './supabase';\n\nexport type BucketName = 'policy-documents' | 'claim-documents' | 'rc-copies' | 'quote-documents';\n\n/**\n * Upload file to Supabase Storage\n * @param file - File to upload\n * @param bucket - Storage bucket name\n * @returns Promise<string> - Public URL of uploaded file\n */\nexport async function uploadFile(file: File, bucket: BucketName): Promise<string> {\n    try {\n        // Generate unique filename to prevent duplicates\n        const timestamp = Date.now();\n        const randomStr = Math.random().toString(36).substring(2, 8);\n        const fileExt = file.name.split('.').pop();\n        const fileName = `${timestamp}_${randomStr}.${fileExt}`;\n\n        const { data, error } = await supabase.storage\n            .from(bucket)\n            .upload(fileName, file, {\n                cacheControl: '3600',\n                upsert: true, // Allow overwriting if file exists\n            });\n\n        if (error) throw error;\n\n        // Get public URL\n        const { data: { publicUrl } } = supabase.storage\n            .from(bucket)\n            .getPublicUrl(data.path);\n\n        return publicUrl;\n    } catch (error: any) {\n        console.error('Error uploading file:', error);\n        throw new Error(error.message || 'Failed to upload file');\n    }\n}\n\n/**\n * Upload multiple files to Supabase Storage\n * @param files - Array of files to upload\n * @param bucket - Storage bucket name\n * @returns Promise<string[]> - Array of public URLs\n */\nexport async function uploadMultipleFiles(\n    files: File[],\n    bucket: BucketName\n): Promise<string[]> {\n    try {\n        const uploadPromises = files.map((file) => {\n            return uploadFile(file, bucket);\n        });\n\n        return await Promise.all(uploadPromises);\n    } catch (error: any) {\n        console.error('Error uploading multiple files:', error);\n        throw new Error(error.message || 'Failed to upload files');\n    }\n}\n\n/**\n * Delete a file from Supabase Storage\n * @param path - Full path to file in storage\n */\nexport async function deleteFile(path: string): Promise<void> {\n    try {\n        const { error } = await supabase.storage\n            .from('policy-documents')\n            .remove([path]);\n\n        if (error) throw error;\n    } catch (error: any) {\n        console.error('Error deleting file:', error);\n        throw new Error(error.message || 'Failed to delete file');\n    }\n}\n\n/**\n * Generate storage path for policy documents\n */\nexport function getPolicyStoragePath(\n    userId: string,\n    policyType: 'motor' | 'gmc' | 'commercial' | 'claims',\n    docType: string\n): string {\n    return `${policyType}_policies/${userId}/${docType}`;\n}\n\n/**\n * Create storage bucket if it doesn't exist (run once on setup)\n */\nexport async function initializeStorage(): Promise<void> {\n    try {\n        // Check if bucket exists\n        const { data: buckets } = await supabase.storage.listBuckets();\n\n        const bucketExists = buckets?.some((bucket: any) => bucket.name === 'policy-documents');\n\n        if (!bucketExists) {\n            // Create bucket\n            const { error } = await supabase.storage.createBucket('policy-documents', {\n                public: true,\n                fileSizeLimit: 52428800, // 50MB\n                allowedMimeTypes: ['application/pdf', 'image/*'],\n            });\n\n            if (error) {\n                console.error('Error creating storage bucket:', error);\n            } else {\n                console.log('Storage bucket created successfully');\n            }\n        }\n    } catch (error) {\n        console.error('Error initializing storage:', error);\n    }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;AAUO,eAAe,WAAW,IAAU,EAAE,MAAkB;IAC3D,IAAI;QACA,iDAAiD;QACjD,MAAM,YAAY,KAAK,GAAG;QAC1B,MAAM,YAAY,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC,GAAG;QAC1D,MAAM,UAAU,KAAK,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG;QACxC,MAAM,WAAW,GAAG,UAAU,CAAC,EAAE,UAAU,CAAC,EAAE,SAAS;QAEvD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,+IAAQ,CAAC,OAAO,CACzC,IAAI,CAAC,QACL,MAAM,CAAC,UAAU,MAAM;YACpB,cAAc;YACd,QAAQ;QACZ;QAEJ,IAAI,OAAO,MAAM;QAEjB,iBAAiB;QACjB,MAAM,EAAE,MAAM,EAAE,SAAS,EAAE,EAAE,GAAG,+IAAQ,CAAC,OAAO,CAC3C,IAAI,CAAC,QACL,YAAY,CAAC,KAAK,IAAI;QAE3B,OAAO;IACX,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,yBAAyB;QACvC,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI;IACrC;AACJ;AAQO,eAAe,oBAClB,KAAa,EACb,MAAkB;IAElB,IAAI;QACA,MAAM,iBAAiB,MAAM,GAAG,CAAC,CAAC;YAC9B,OAAO,WAAW,MAAM;QAC5B;QAEA,OAAO,MAAM,QAAQ,GAAG,CAAC;IAC7B,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,mCAAmC;QACjD,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI;IACrC;AACJ;AAMO,eAAe,WAAW,IAAY;IACzC,IAAI;QACA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,+IAAQ,CAAC,OAAO,CACnC,IAAI,CAAC,oBACL,MAAM,CAAC;YAAC;SAAK;QAElB,IAAI,OAAO,MAAM;IACrB,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,wBAAwB;QACtC,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI;IACrC;AACJ;AAKO,SAAS,qBACZ,MAAc,EACd,UAAqD,EACrD,OAAe;IAEf,OAAO,GAAG,WAAW,UAAU,EAAE,OAAO,CAAC,EAAE,SAAS;AACxD;AAKO,eAAe;IAClB,IAAI;QACA,yBAAyB;QACzB,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,+IAAQ,CAAC,OAAO,CAAC,WAAW;QAE5D,MAAM,eAAe,SAAS,KAAK,CAAC,SAAgB,OAAO,IAAI,KAAK;QAEpE,IAAI,CAAC,cAAc;YACf,gBAAgB;YAChB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,+IAAQ,CAAC,OAAO,CAAC,YAAY,CAAC,oBAAoB;gBACtE,QAAQ;gBACR,eAAe;gBACf,kBAAkB;oBAAC;oBAAmB;iBAAU;YACpD;YAEA,IAAI,OAAO;gBACP,QAAQ,KAAK,CAAC,kCAAkC;YACpD,OAAO;gBACH,QAAQ,GAAG,CAAC;YAChB;QACJ;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,+BAA+B;IACjD;AACJ"}},
    {"offset": {"line": 3765, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/forms/FileUpload.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef } from 'react';\nimport { Upload, X, File, CheckCircle } from 'lucide-react';\nimport { uploadFile, BucketName } from '@/lib/storage';\n\ninterface FileUploadProps {\n    label: string;\n    name: string;\n    accept?: string;\n    bucket: BucketName;\n    onUploadComplete: (url: string, fileName: string) => void;\n    existingFile?: { url: string; name: string };\n    required?: boolean;\n    maxSizeMB?: number;\n}\n\nexport default function FileUpload({\n    label,\n    name,\n    accept = '.pdf,.jpg,.jpeg,.png',\n    bucket,\n    onUploadComplete,\n    existingFile,\n    required = false,\n    maxSizeMB = 5,\n}: FileUploadProps) {\n    const [file, setFile] = useState<File | null>(null);\n    const [preview, setPreview] = useState<string | null>(existingFile?.url || null);\n    const [fileName, setFileName] = useState<string>(existingFile?.name || '');\n    const [uploading, setUploading] = useState(false);\n    const [progress, setProgress] = useState(0);\n    const [error, setError] = useState<string>('');\n    const fileInputRef = useRef<HTMLInputElement>(null);\n\n    const handleFileSelect = async (selectedFile: File) => {\n        setError('');\n\n        // Validate file size\n        if (selectedFile.size > maxSizeMB * 1024 * 1024) {\n            setError(`File size must be less than ${maxSizeMB}MB`);\n            return;\n        }\n\n        setFile(selectedFile);\n        setFileName(selectedFile.name);\n\n        // Show preview for images\n        if (selectedFile.type.startsWith('image/')) {\n            const reader = new FileReader();\n            reader.onload = (e) => {\n                setPreview(e.target?.result as string);\n            };\n            reader.readAsDataURL(selectedFile);\n        } else {\n            setPreview(null);\n        }\n\n        // Auto-upload\n        await uploadFileToStorage(selectedFile);\n    };\n\n    const uploadFileToStorage = async (fileToUpload: File) => {\n        setUploading(true);\n        setProgress(0);\n\n        try {\n            // Simulate progress\n            const progressInterval = setInterval(() => {\n                setProgress((prev) => Math.min(prev + 10, 90));\n            }, 200);\n\n            const fileUrl = await uploadFile(fileToUpload, bucket);\n\n            clearInterval(progressInterval);\n            setProgress(100);\n            setUploading(false);\n\n            onUploadComplete(fileUrl, fileToUpload.name);\n        } catch (err) {\n            console.error('Upload error:', err);\n            setError('Failed to upload file. Please try again.');\n            setUploading(false);\n            setFile(null);\n            setPreview(null);\n        }\n    };\n\n    const handleDrop = (e: React.DragEvent) => {\n        e.preventDefault();\n        const droppedFile = e.dataTransfer.files[0];\n        if (droppedFile) {\n            handleFileSelect(droppedFile);\n        }\n    };\n\n    const handleDragOver = (e: React.DragEvent) => {\n        e.preventDefault();\n    };\n\n    const handleRemove = () => {\n        setFile(null);\n        setPreview(null);\n        setFileName('');\n        setProgress(0);\n        setError('');\n        if (fileInputRef.current) {\n            fileInputRef.current.value = '';\n        }\n    };\n\n    return (\n        <div className=\"space-y-2\">\n            <label className=\"block text-sm font-medium text-gray-700\">\n                {label}\n                {required && <span className=\"text-red-500 ml-1\">*</span>}\n            </label>\n\n            {!file && !existingFile ? (\n                <div\n                    onDrop={handleDrop}\n                    onDragOver={handleDragOver}\n                    onClick={() => fileInputRef.current?.click()}\n                    className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-primary-500 transition-colors\"\n                >\n                    <Upload className=\"w-8 h-8 text-gray-400 mx-auto mb-2\" />\n                    <p className=\"text-sm text-gray-600 mb-1\">\n                        Click to upload or drag and drop\n                    </p>\n                    <p className=\"text-xs text-gray-500\">\n                        {accept.toUpperCase()} (Max {maxSizeMB}MB)\n                    </p>\n                    <input\n                        ref={fileInputRef}\n                        type=\"file\"\n                        accept={accept}\n                        onChange={(e) => e.target.files?.[0] && handleFileSelect(e.target.files[0])}\n                        className=\"hidden\"\n                    />\n                </div>\n            ) : (\n                <div className=\"border border-gray-300 rounded-lg p-4\">\n                    <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center space-x-3 flex-1\">\n                            {preview ? (\n                                <img src={preview} alt=\"Preview\" className=\"w-16 h-16 object-cover rounded\" />\n                            ) : (\n                                <File className=\"w-8 h-8 text-gray-400\" />\n                            )}\n                            <div className=\"flex-1 min-w-0 max-w-[280px]\">\n                                <p className=\"text-sm font-medium text-gray-900 truncate break-all\" title={fileName}>{fileName}</p>\n                                {uploading && (\n                                    <div className=\"mt-2\">\n                                        <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                                            <div\n                                                className=\"bg-primary-600 h-2 rounded-full transition-all\"\n                                                style={{ width: `${progress}%` }}\n                                            />\n                                        </div>\n                                        <p className=\"text-xs text-gray-500 mt-1\">Uploading... {progress}%</p>\n                                    </div>\n                                )}\n                                {!uploading && progress === 100 && (\n                                    <p className=\"text-xs text-green-600 flex items-center gap-1 mt-1\">\n                                        <CheckCircle className=\"w-3 h-3\" />\n                                        Uploaded successfully\n                                    </p>\n                                )}\n                            </div>\n                        </div>\n                        {!uploading && (\n                            <button\n                                type=\"button\"\n                                onClick={handleRemove}\n                                className=\"text-red-600 hover:text-red-800 p-1 ml-4 hover:bg-red-50 rounded-full transition-colors\"\n                            >\n                                <X className=\"w-5 h-5\" />\n                            </button>\n                        )}\n                    </div>\n                </div>\n            )}\n\n            {error && (\n                <p className=\"text-sm text-red-600 flex items-center gap-1\">\n                    <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n                    </svg>\n                    {error}\n                </p>\n            )}\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4100, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/forms/QuoteRequestForm.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport { X, Save, Loader2 } from 'lucide-react';\nimport { QuoteRequest } from '@/types';\nimport FormInput from './FormInput';\nimport FileUpload from './FileUpload';\nimport { addQuoteRequest } from '@/lib/db';\n\ninterface QuoteRequestFormProps {\n    userId: string;\n    onClose: () => void;\n    onSuccess: () => void;\n}\n\nexport default function QuoteRequestForm({ userId, onClose, onSuccess }: QuoteRequestFormProps) {\n    const [loading, setLoading] = useState(false);\n    const [errors, setErrors] = useState<Record<string, string>>({});\n\n    const [formData, setFormData] = useState({\n        lob_type: 'Motor',\n        details: '',\n        uploaded_quote: '',\n        required_documents: '',\n        has_better_quote: false\n    });\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {\n        const { name, value, type } = e.target;\n\n        if (type === 'checkbox') {\n            setFormData(prev => ({\n                ...prev,\n                [name]: (e.target as HTMLInputElement).checked\n            }));\n        } else {\n            setFormData(prev => ({\n                ...prev,\n                [name]: value\n            }));\n        }\n\n        if (errors[name]) {\n            setErrors(prev => {\n                const newErrors = { ...prev };\n                delete newErrors[name];\n                return newErrors;\n            });\n        }\n    };\n\n    const validateForm = (): boolean => {\n        const newErrors: Record<string, string> = {};\n\n        if (!formData.details) newErrors.details = 'Please provide some details about your requirement';\n\n        setErrors(newErrors);\n        return Object.keys(newErrors).length === 0;\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n\n        if (!validateForm()) return;\n\n        setLoading(true);\n        try {\n            await addQuoteRequest({\n                user_id: userId,\n                lob_type: formData.lob_type as any,\n                details: formData.details,\n                uploaded_quote: formData.uploaded_quote,\n                has_better_quote: formData.has_better_quote,\n                status: 'New'\n            });\n\n            onSuccess();\n            onClose();\n        } catch (error) {\n            console.error('Error saving quote request:', error);\n            setErrors(prev => ({ ...prev, submit: 'Failed to submit request. Please try again.' }));\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleFileUpload = (url: string) => {\n        setFormData(prev => ({\n            ...prev,\n            uploaded_quote: url\n        }));\n    };\n\n    return (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto\">\n            <div className=\"bg-white rounded-xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto\">\n                <div className=\"flex items-center justify-between p-6 border-b sticky top-0 bg-white z-10\">\n                    <h2 className=\"text-xl font-bold text-gray-900\">\n                        Request a Quote\n                    </h2>\n                    <button onClick={onClose} className=\"text-gray-500 hover:text-gray-700\">\n                        <X className=\"w-6 h-6\" />\n                    </button>\n                </div>\n\n                <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n                    {errors.submit && (\n                        <div className=\"bg-red-50 text-red-600 p-4 rounded-lg text-sm\">\n                            {errors.submit}\n                        </div>\n                    )}\n\n                    <div className=\"space-y-4\">\n                        <FormInput\n                            label=\"Insurance Type\"\n                            name=\"lob_type\"\n                            type=\"select\"\n                            value={formData.lob_type}\n                            onChange={handleChange}\n                            options={[\n                                { value: 'Motor', label: 'Motor Insurance' },\n                                { value: 'Health', label: 'Health Insurance' },\n                                { value: 'Life', label: 'Life Insurance' },\n                                { value: 'Others', label: 'Other Insurance' }\n                            ]}\n                            required\n                        />\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                                Requirement Details\n                            </label>\n                            <textarea\n                                name=\"details\"\n                                value={formData.details}\n                                onChange={handleChange}\n                                rows={4}\n                                className={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-all ${errors.details ? 'border-red-500 bg-red-50' : 'border-gray-300'\n                                    }`}\n                                placeholder=\"Describe what you are looking for (e.g., Comprehensive car insurance for Honda City 2020)...\"\n                            />\n                            {errors.details && <p className=\"text-red-500 text-xs mt-1\">{errors.details}</p>}\n                        </div>\n\n                        {/* Required Documents Upload */}\n                        <FileUpload\n                            label=\"PLEASE UPLOAD REQUIRED DOCUMENTS\"\n                            name=\"required_documents\"\n                            bucket=\"quote-documents\"\n                            onUploadComplete={(url) => setFormData(prev => ({ ...prev, required_documents: url }))}\n                            existingFile={formData.required_documents ? { url: formData.required_documents, name: 'Required Documents' } : undefined}\n                        />\n\n                        <div className=\"flex items-center space-x-2\">\n                            <input\n                                type=\"checkbox\"\n                                id=\"has_better_quote\"\n                                name=\"has_better_quote\"\n                                checked={formData.has_better_quote}\n                                onChange={handleChange}\n                                className=\"rounded border-gray-300 text-primary-600 focus:ring-primary-500\"\n                            />\n                            <label htmlFor=\"has_better_quote\" className=\"text-sm text-gray-700\">\n                                I have a quote from another insurer\n                            </label>\n                        </div>\n\n                        {formData.has_better_quote && (\n                            <FileUpload\n                                label=\"Upload Existing Quote (Optional)\"\n                                name=\"uploaded_quote\"\n                                bucket=\"quote-documents\"\n                                onUploadComplete={handleFileUpload}\n                                existingFile={formData.uploaded_quote ? { url: formData.uploaded_quote, name: 'Existing Quote' } : undefined}\n                            />\n                        )}\n                    </div>\n\n                    <div className=\"flex justify-end space-x-4 pt-6 border-t\">\n                        <button\n                            type=\"button\"\n                            onClick={onClose}\n                            className=\"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\"\n                            disabled={loading}\n                        >\n                            Cancel\n                        </button>\n                        <button\n                            type=\"submit\"\n                            className=\"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center\"\n                            disabled={loading}\n                        >\n                            {loading ? (\n                                <>\n                                    <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                                    Submitting...\n                                </>\n                            ) : (\n                                <>\n                                    <Save className=\"w-4 h-4 mr-2\" />\n                                    Submit Request\n                                </>\n                            )}\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAEA;AACA;AACA;;;AAPA;;;;;;AAee,SAAS,iBAAiB,EAAE,MAAM,EAAE,OAAO,EAAE,SAAS,EAAyB;;IAC1F,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,0LAAQ,EAAC;IACvC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,0LAAQ,EAAyB,CAAC;IAE9D,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,0LAAQ,EAAC;QACrC,UAAU;QACV,SAAS;QACT,gBAAgB;QAChB,oBAAoB;QACpB,kBAAkB;IACtB;IAEA,MAAM,eAAe,CAAC;QAClB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,EAAE,MAAM;QAEtC,IAAI,SAAS,YAAY;YACrB,YAAY,CAAA,OAAQ,CAAC;oBACjB,GAAG,IAAI;oBACP,CAAC,KAAK,EAAE,AAAC,EAAE,MAAM,CAAsB,OAAO;gBAClD,CAAC;QACL,OAAO;YACH,YAAY,CAAA,OAAQ,CAAC;oBACjB,GAAG,IAAI;oBACP,CAAC,KAAK,EAAE;gBACZ,CAAC;QACL;QAEA,IAAI,MAAM,CAAC,KAAK,EAAE;YACd,UAAU,CAAA;gBACN,MAAM,YAAY;oBAAE,GAAG,IAAI;gBAAC;gBAC5B,OAAO,SAAS,CAAC,KAAK;gBACtB,OAAO;YACX;QACJ;IACJ;IAEA,MAAM,eAAe;QACjB,MAAM,YAAoC,CAAC;QAE3C,IAAI,CAAC,SAAS,OAAO,EAAE,UAAU,OAAO,GAAG;QAE3C,UAAU;QACV,OAAO,OAAO,IAAI,CAAC,WAAW,MAAM,KAAK;IAC7C;IAEA,MAAM,eAAe,OAAO;QACxB,EAAE,cAAc;QAEhB,IAAI,CAAC,gBAAgB;QAErB,WAAW;QACX,IAAI;YACA,MAAM,IAAA,gJAAe,EAAC;gBAClB,SAAS;gBACT,UAAU,SAAS,QAAQ;gBAC3B,SAAS,SAAS,OAAO;gBACzB,gBAAgB,SAAS,cAAc;gBACvC,kBAAkB,SAAS,gBAAgB;gBAC3C,QAAQ;YACZ;YAEA;YACA;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,+BAA+B;YAC7C,UAAU,CAAA,OAAQ,CAAC;oBAAE,GAAG,IAAI;oBAAE,QAAQ;gBAA8C,CAAC;QACzF,SAAU;YACN,WAAW;QACf;IACJ;IAEA,MAAM,mBAAmB,CAAC;QACtB,YAAY,CAAA,OAAQ,CAAC;gBACjB,GAAG,IAAI;gBACP,gBAAgB;YACpB,CAAC;IACL;IAEA,qBACI,8MAAC;QAAI,WAAU;kBACX,cAAA,8MAAC;YAAI,WAAU;;8BACX,8MAAC;oBAAI,WAAU;;sCACX,8MAAC;4BAAG,WAAU;sCAAkC;;;;;;sCAGhD,8MAAC;4BAAO,SAAS;4BAAS,WAAU;sCAChC,cAAA,8MAAC,qNAAC;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAIrB,8MAAC;oBAAK,UAAU;oBAAc,WAAU;;wBACnC,OAAO,MAAM,kBACV,8MAAC;4BAAI,WAAU;sCACV,OAAO,MAAM;;;;;;sCAItB,8MAAC;4BAAI,WAAU;;8CACX,8MAAC,gKAAS;oCACN,OAAM;oCACN,MAAK;oCACL,MAAK;oCACL,OAAO,SAAS,QAAQ;oCACxB,UAAU;oCACV,SAAS;wCACL;4CAAE,OAAO;4CAAS,OAAO;wCAAkB;wCAC3C;4CAAE,OAAO;4CAAU,OAAO;wCAAmB;wCAC7C;4CAAE,OAAO;4CAAQ,OAAO;wCAAiB;wCACzC;4CAAE,OAAO;4CAAU,OAAO;wCAAkB;qCAC/C;oCACD,QAAQ;;;;;;8CAGZ,8MAAC;;sDACG,8MAAC;4CAAM,WAAU;sDAA+C;;;;;;sDAGhE,8MAAC;4CACG,MAAK;4CACL,OAAO,SAAS,OAAO;4CACvB,UAAU;4CACV,MAAM;4CACN,WAAW,CAAC,4HAA4H,EAAE,OAAO,OAAO,GAAG,6BAA6B,mBAClL;4CACN,aAAY;;;;;;wCAEf,OAAO,OAAO,kBAAI,8MAAC;4CAAE,WAAU;sDAA6B,OAAO,OAAO;;;;;;;;;;;;8CAI/E,8MAAC,iKAAU;oCACP,OAAM;oCACN,MAAK;oCACL,QAAO;oCACP,kBAAkB,CAAC,MAAQ,YAAY,CAAA,OAAQ,CAAC;gDAAE,GAAG,IAAI;gDAAE,oBAAoB;4CAAI,CAAC;oCACpF,cAAc,SAAS,kBAAkB,GAAG;wCAAE,KAAK,SAAS,kBAAkB;wCAAE,MAAM;oCAAqB,IAAI;;;;;;8CAGnH,8MAAC;oCAAI,WAAU;;sDACX,8MAAC;4CACG,MAAK;4CACL,IAAG;4CACH,MAAK;4CACL,SAAS,SAAS,gBAAgB;4CAClC,UAAU;4CACV,WAAU;;;;;;sDAEd,8MAAC;4CAAM,SAAQ;4CAAmB,WAAU;sDAAwB;;;;;;;;;;;;gCAKvE,SAAS,gBAAgB,kBACtB,8MAAC,iKAAU;oCACP,OAAM;oCACN,MAAK;oCACL,QAAO;oCACP,kBAAkB;oCAClB,cAAc,SAAS,cAAc,GAAG;wCAAE,KAAK,SAAS,cAAc;wCAAE,MAAM;oCAAiB,IAAI;;;;;;;;;;;;sCAK/G,8MAAC;4BAAI,WAAU;;8CACX,8MAAC;oCACG,MAAK;oCACL,SAAS;oCACT,WAAU;oCACV,UAAU;8CACb;;;;;;8CAGD,8MAAC;oCACG,MAAK;oCACL,WAAU;oCACV,UAAU;8CAET,wBACG;;0DACI,8MAAC,gPAAO;gDAAC,WAAU;;;;;;4CAA8B;;qEAIrD;;0DACI,8MAAC,8NAAI;gDAAC,WAAU;;;;;;4CAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUrE;GAlMwB;KAAA"}},
    {"offset": {"line": 4457, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/dashboard/StickyAddPolicy.tsx"],"sourcesContent":["import { useState } from 'react';\nimport { Plus } from 'lucide-react';\nimport QuoteRequestForm from '@/components/forms/QuoteRequestForm';\n\nexport default function StickyAddPolicy({ userId, className = '' }: { userId: string, className?: string }) {\n    const [isModalOpen, setIsModalOpen] = useState(false);\n\n    return (\n        <>\n            <div className={`relative z-50 flex flex-col items-end ${className}`}>\n                <button\n                    onClick={() => setIsModalOpen(true)}\n                    className=\"h-10 px-4 rounded-full shadow-lg shadow-primary-500/50 flex items-center justify-center text-white bg-primary-600 transition-all duration-300 hover:scale-105 hover:shadow-primary-500/70 focus:outline-none focus:ring-2 focus:ring-primary-200 animate-pulse-slow\"\n                >\n                    <Plus className=\"w-5 h-5 mr-1\" />\n                    <span className=\"font-semibold text-sm\">New</span>\n                </button>\n            </div>\n\n            {isModalOpen && (\n                <QuoteRequestForm\n                    userId={userId}\n                    onClose={() => setIsModalOpen(false)}\n                    onSuccess={() => {\n                        setIsModalOpen(false);\n                        window.location.reload();\n                    }}\n                />\n            )}\n        </>\n    );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;;AAEe,SAAS,gBAAgB,EAAE,MAAM,EAAE,YAAY,EAAE,EAA0C;;IACtG,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,0LAAQ,EAAC;IAE/C,qBACI;;0BACI,8MAAC;gBAAI,WAAW,CAAC,sCAAsC,EAAE,WAAW;0BAChE,cAAA,8MAAC;oBACG,SAAS,IAAM,eAAe;oBAC9B,WAAU;;sCAEV,8MAAC,8NAAI;4BAAC,WAAU;;;;;;sCAChB,8MAAC;4BAAK,WAAU;sCAAwB;;;;;;;;;;;;;;;;;YAI/C,6BACG,8MAAC,uKAAgB;gBACb,QAAQ;gBACR,SAAS,IAAM,eAAe;gBAC9B,WAAW;oBACP,eAAe;oBACf,OAAO,QAAQ,CAAC,MAAM;gBAC1B;;;;;;;;AAKpB;GA3BwB;KAAA"}},
    {"offset": {"line": 4533, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/lib/exportUtils.ts"],"sourcesContent":["import jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\nimport * as XLSX from 'xlsx';\nimport { DashboardSummary, MotorPolicy, HealthPolicy, CommercialPolicy } from '@/types';\nimport { formatCurrency, formatDate, calculatePolicyStatus } from './utils';\n\n// Export dashboard as PDF\nexport async function exportDashboardToPDF(\n    element: HTMLElement,\n    filename: string = 'dashboard.pdf'\n): Promise<void> {\n    try {\n        // Capture the dashboard element as canvas\n        const canvas = await html2canvas(element, {\n            scale: 2,\n            useCORS: true,\n            logging: false,\n            backgroundColor: '#ffffff'\n        });\n\n        const imgData = canvas.toDataURL('image/png');\n        const pdf = new jsPDF({\n            orientation: 'portrait',\n            unit: 'mm',\n            format: 'a4'\n        });\n\n        const imgWidth = 210; // A4 width in mm\n        const pageHeight = 297; // A4 height in mm\n        const imgHeight = (canvas.height * imgWidth) / canvas.width;\n        let heightLeft = imgHeight;\n        let position = 0;\n\n        // Add first page\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n        heightLeft -= pageHeight;\n\n        // Add additional pages if needed\n        while (heightLeft > 0) {\n            position = heightLeft - imgHeight;\n            pdf.addPage();\n            pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n            heightLeft -= pageHeight;\n        }\n\n        pdf.save(filename);\n    } catch (error) {\n        console.error('Error generating PDF:', error);\n        throw new Error('Failed to generate PDF');\n    }\n}\n\n// Export policies by type\nexport async function exportPoliciesByType(\n    policyType: 'Motor' | 'Health' | 'Travel' | 'Commercial' | 'Life' | 'Cyber',\n    policies: any[],\n    userName: string\n): Promise<void> {\n    try {\n        const pdf = new jsPDF();\n        const pageWidth = pdf.internal.pageSize.getWidth();\n        const pageHeight = pdf.internal.pageSize.getHeight();\n        let yPosition = 20;\n\n        // Add header\n        pdf.setFontSize(20);\n        pdf.setTextColor(40, 40, 40);\n        pdf.text(`${policyType} Policies`, pageWidth / 2, yPosition, { align: 'center' });\n\n        yPosition += 10;\n        pdf.setFontSize(12);\n        pdf.setTextColor(100, 100, 100);\n        pdf.text(`Report for: ${userName}`, pageWidth / 2, yPosition, { align: 'center' });\n        pdf.text(`Generated on: ${new Date().toLocaleDateString()}`, pageWidth / 2, yPosition + 5, { align: 'center' });\n\n        yPosition += 15;\n\n        // Add policies\n        pdf.setFontSize(10);\n        pdf.setTextColor(0, 0, 0);\n\n        if (policies.length === 0) {\n            pdf.text('No policies found', 20, yPosition);\n        } else {\n            policies.forEach((policy, index) => {\n                if (yPosition > pageHeight - 40) {\n                    pdf.addPage();\n                    yPosition = 20;\n                }\n\n                // Policy number\n                pdf.setFont('helvetica', 'bold');\n                pdf.text(`Policy ${index + 1}: ${policy.policy_number || 'N/A'}`, 20, yPosition);\n                yPosition += 6;\n\n                pdf.setFont('helvetica', 'normal');\n\n                // Policy details based on type\n                if (policyType === 'Motor') {\n                    pdf.text(`Vehicle: ${policy.vehicle_number || 'N/A'}`, 25, yPosition);\n                    yPosition += 5;\n                    pdf.text(`Make/Model: ${policy.make || 'N/A'} ${policy.model || 'N/A'}`, 25, yPosition);\n                    yPosition += 5;\n                } else if (policyType === 'Health') {\n                    pdf.text(`Sum Insured: ${policy.sum_insured ? formatCurrency(policy.sum_insured) : 'N/A'}`, 25, yPosition);\n                    yPosition += 5;\n                    pdf.text(`Members: ${policy.no_of_lives || 'N/A'}`, 25, yPosition);\n                    yPosition += 5;\n                }\n\n                // Common fields\n                pdf.text(`Insurer: ${policy.insurer_name || 'N/A'}`, 25, yPosition);\n                yPosition += 5;\n                pdf.text(`Premium: ${policy.premium_amount ? formatCurrency(policy.premium_amount) : 'N/A'}`, 25, yPosition);\n                yPosition += 5;\n\n                const expiryDate = policy.expiry_date || policy.policy_end_date;\n                if (expiryDate) {\n                    const status = calculatePolicyStatus(new Date(expiryDate));\n                    pdf.text(`Expiry: ${formatDate(new Date(expiryDate))} - ${status}`, 25, yPosition);\n                    yPosition += 5;\n                }\n\n                yPosition += 5; // Space between policies\n            });\n        }\n\n        // Add footer\n        const totalPages = pdf.internal.pages.length - 1;\n        for (let i = 1; i <= totalPages; i++) {\n            pdf.setPage(i);\n            pdf.setFontSize(8);\n            pdf.setTextColor(150, 150, 150);\n            pdf.text(\n                `Page ${i} of ${totalPages}`,\n                pageWidth / 2,\n                pageHeight - 10,\n                { align: 'center' }\n            );\n        }\n\n        pdf.save(`${policyType.toLowerCase()}_policies.pdf`);\n    } catch (error) {\n        console.error('Error generating policies PDF:', error);\n        throw new Error('Failed to generate policies PDF');\n    }\n}\n\n// Export policies by date range\nexport async function exportPoliciesByDate(\n    startDate: Date,\n    endDate: Date,\n    allPolicies: any[],\n    userName: string,\n    filename?: string\n): Promise<void> {\n    try {\n        // Filter policies by creation date\n        const filteredPolicies = allPolicies.filter(policy => {\n            const createdAt = new Date(policy.created_at);\n            return createdAt >= startDate && createdAt <= endDate;\n        });\n\n        const pdf = new jsPDF();\n        const pageWidth = pdf.internal.pageSize.getWidth();\n        const pageHeight = pdf.internal.pageSize.getHeight();\n        const marginLeft = 20;\n        const marginRight = 20;\n        const contentWidth = pageWidth - marginLeft - marginRight;\n        let yPosition = 20;\n\n        // Helper function to check if we need a new page\n        const checkNewPage = (requiredSpace: number) => {\n            if (yPosition + requiredSpace > pageHeight - 20) {\n                pdf.addPage();\n                yPosition = 20;\n                return true;\n            }\n            return false;\n        };\n\n        // Add header\n        pdf.setFontSize(18);\n        pdf.setFont('helvetica', 'bold');\n        pdf.setTextColor(40, 40, 40);\n        pdf.text('INSURANCE PORTFOLIO EXPORT REPORT', pageWidth / 2, yPosition, { align: 'center' });\n\n        yPosition += 10;\n        pdf.setFontSize(10);\n        pdf.setFont('helvetica', 'normal');\n        pdf.setTextColor(100, 100, 100);\n        pdf.text(`Report for: ${userName}`, pageWidth / 2, yPosition, { align: 'center' });\n        yPosition += 5;\n        pdf.text(\n            `Period: ${formatDate(startDate)} to ${formatDate(endDate)}`,\n            pageWidth / 2,\n            yPosition,\n            { align: 'center' }\n        );\n        yPosition += 5;\n        pdf.text(`Generated on: ${new Date().toLocaleDateString()}`, pageWidth / 2, yPosition, { align: 'center' });\n\n        yPosition += 12;\n\n        if (filteredPolicies.length === 0) {\n            pdf.setFontSize(11);\n            pdf.setTextColor(60, 60, 60);\n            pdf.text('No policies found for this date range', pageWidth / 2, yPosition, { align: 'center' });\n        } else {\n            // Group policies by type for summary\n            const policyGroups = filteredPolicies.reduce((acc: any, policy) => {\n                const type = policy.vehicle_number ? 'Motor' : policy.no_of_lives !== undefined ? 'Health' : policy.lob_type || 'Other';\n                if (!acc[type]) acc[type] = [];\n                acc[type].push(policy);\n                return acc;\n            }, {});\n\n            // Render each policy card\n            filteredPolicies.forEach((policy, index) => {\n                const policyType = policy.vehicle_number ? 'Motor' : policy.no_of_lives !== undefined ? 'Health' : policy.lob_type || 'Other';\n                const expiryDate = policy.expiry_date || policy.policy_end_date;\n                const status = expiryDate ? calculatePolicyStatus(new Date(expiryDate)) : 'N/A';\n\n                // Check if we need a new page (estimate ~50mm per card)\n                checkNewPage(55);\n\n                // Card header - Policy number and status\n                pdf.setFont('helvetica', 'bold');\n                pdf.setFontSize(11);\n                pdf.setTextColor(40, 40, 40);\n                pdf.text(`${policyType.toUpperCase()} POLICY #${index + 1}`, marginLeft, yPosition);\n\n                // Status badge\n                const statusColors: Record<string, [number, number, number]> = { 'Active': [34, 197, 94], 'Expiring Soon': [251, 191, 36], 'Expired': [239, 68, 68] };\n                const statusColor: [number, number, number] = statusColors[status] || [100, 100, 100];\n                pdf.setTextColor(statusColor[0], statusColor[1], statusColor[2]);\n                pdf.setFontSize(9);\n                pdf.text(`â— ${status}`, pageWidth - marginRight - 30, yPosition, { align: 'right' });\n\n                yPosition += 6;\n\n                // Draw card border\n                pdf.setDrawColor(200, 200, 200);\n                pdf.setLineWidth(0.2);\n                const cardTop = yPosition - 2;\n\n                // Policy details\n                pdf.setFontSize(9);\n                pdf.setTextColor(60, 60, 60);\n                pdf.setFont('helvetica', 'normal');\n\n                pdf.text(`Policy Number: ${policy.policy_number || 'N/A'}`, marginLeft + 2, yPosition);\n                yPosition += 5;\n                pdf.text(`Insurer: ${policy.insurer_name || 'N/A'}`, marginLeft + 2, yPosition);\n                yPosition += 6;\n\n                // Type-specific details\n                if (policyType === 'Motor') {\n                    // Vehicle Details section\n                    pdf.setFont('helvetica', 'bold');\n                    pdf.setFontSize(8.5);\n                    pdf.setTextColor(80, 80, 80);\n                    pdf.text('VEHICLE DETAILS', marginLeft + 2, yPosition);\n                    yPosition += 4;\n\n                    pdf.setFont('helvetica', 'normal');\n                    pdf.setFontSize(8);\n                    pdf.setTextColor(60, 60, 60);\n                    pdf.text(`â”œâ”€ Vehicle Number: ${policy.vehicle_number || 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 4;\n                    pdf.text(`â”œâ”€ Type: ${policy.vehicle_type || 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 4;\n                    pdf.text(`â”œâ”€ Make/Model: ${policy.manufacturer || ''} ${policy.model || ''}`.trim() || 'N/A', marginLeft + 4, yPosition);\n                    yPosition += 4;\n                    pdf.text(`â”œâ”€ Fuel Type: ${policy.fuel_type || 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 4;\n                    pdf.text(`â”œâ”€ Mfg Year: ${policy.manufacturing_year || 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 4;\n                    pdf.text(`â”œâ”€ Plate Type: ${policy.number_plate_type || 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 4;\n                    pdf.text(`â””â”€ Ownership: ${policy.ownership_type || 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 6;\n\n                    // Financial section\n                    pdf.setFont('helvetica', 'bold');\n                    pdf.setFontSize(8.5);\n                    pdf.text('FINANCIAL', marginLeft + 2, yPosition);\n                    yPosition += 4;\n                    pdf.setFont('helvetica', 'normal');\n                    pdf.setFontSize(8);\n                    pdf.text(`Premium: ${policy.premium_amount ? formatCurrency(policy.premium_amount) : 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 6;\n\n                    // Coverage Period\n                    pdf.setFont('helvetica', 'bold');\n                    pdf.setFontSize(8.5);\n                    pdf.text('COVERAGE PERIOD', marginLeft + 2, yPosition);\n                    yPosition += 4;\n                    pdf.setFont('helvetica', 'normal');\n                    pdf.setFontSize(8);\n                    pdf.text(`â”œâ”€ Start: ${policy.policy_start_date ? formatDate(new Date(policy.policy_start_date)) : 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 4;\n                    pdf.text(`â”œâ”€ End: ${policy.policy_end_date ? formatDate(new Date(policy.policy_end_date)) : 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 4;\n\n                    pdf.text(`â””â”€ Created: ${formatDate(new Date(policy.created_at))}`, marginLeft + 4, yPosition);\n                    yPosition += 2;\n\n                } else if (policyType === 'Health') {\n                    // Health/GMC Details\n                    pdf.setFont('helvetica', 'bold');\n                    pdf.setFontSize(8.5);\n                    pdf.text('COVERAGE DETAILS', marginLeft + 2, yPosition);\n                    yPosition += 4;\n\n                    pdf.setFont('helvetica', 'normal');\n                    pdf.setFontSize(8);\n                    if (policy.company_name) {\n                        pdf.text(`â”œâ”€ Company: ${policy.company_name}`, marginLeft + 4, yPosition);\n                        yPosition += 4;\n                    }\n                    pdf.text(`â”œâ”€ Sum Insured: ${policy.sum_insured ? formatCurrency(policy.sum_insured) : 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 4;\n                    pdf.text(`â””â”€ Lives Covered: ${policy.no_of_lives || 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 6;\n\n                    // Financial\n                    pdf.setFont('helvetica', 'bold');\n                    pdf.setFontSize(8.5);\n                    pdf.text('FINANCIAL', marginLeft + 2, yPosition);\n                    yPosition += 4;\n                    pdf.setFont('helvetica', 'normal');\n                    pdf.setFontSize(8);\n                    pdf.text(`Premium: ${policy.premium_amount ? formatCurrency(policy.premium_amount) : 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 6;\n\n                    // Policy Period\n                    pdf.setFont('helvetica', 'bold');\n                    pdf.setFontSize(8.5);\n                    pdf.text('POLICY PERIOD', marginLeft + 2, yPosition);\n                    yPosition += 4;\n                    pdf.setFont('helvetica', 'normal');\n                    pdf.setFontSize(8);\n                    pdf.text(`â”œâ”€ Expiry: ${expiryDate ? formatDate(new Date(expiryDate)) : 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 4;\n                    pdf.text(`â””â”€ Created: ${formatDate(new Date(policy.created_at))}`, marginLeft + 4, yPosition);\n                    yPosition += 2;\n\n                } else {\n                    // Commercial/Other\n                    pdf.setFont('helvetica', 'bold');\n                    pdf.setFontSize(8.5);\n                    pdf.text('POLICY DETAILS', marginLeft + 2, yPosition);\n                    yPosition += 4;\n\n                    pdf.setFont('helvetica', 'normal');\n                    pdf.setFontSize(8);\n                    if (policy.lob_type) {\n                        pdf.text(`â”œâ”€ LOB Type: ${policy.lob_type}`, marginLeft + 4, yPosition);\n                        yPosition += 4;\n                    }\n                    if (policy.company_name) {\n                        pdf.text(`â”œâ”€ Company: ${policy.company_name}`, marginLeft + 4, yPosition);\n                        yPosition += 4;\n                    }\n                    if (policy.policy_holder_name) {\n                        pdf.text(`â”œâ”€ Policy Holder: ${policy.policy_holder_name}`, marginLeft + 4, yPosition);\n                        yPosition += 4;\n                    }\n                    pdf.text(`â”œâ”€ Sum Insured: ${policy.sum_insured ? formatCurrency(policy.sum_insured) : 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 4;\n                    pdf.text(`â”œâ”€ Premium: ${policy.premium_amount ? formatCurrency(policy.premium_amount) : 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 4;\n                    pdf.text(`â”œâ”€ Expiry: ${expiryDate ? formatDate(new Date(expiryDate)) : 'N/A'}`, marginLeft + 4, yPosition);\n                    yPosition += 4;\n                    pdf.text(`â””â”€ Created: ${formatDate(new Date(policy.created_at))}`, marginLeft + 4, yPosition);\n                    yPosition += 2;\n                }\n\n                // Draw card border (rounded rect)\n                const cardHeight = yPosition - cardTop;\n                pdf.rect(marginLeft, cardTop, contentWidth, cardHeight);\n\n                yPosition += 6; // Space after card\n            });\n\n            // Summary section\n            checkNewPage(30);\n            yPosition += 4;\n\n            // Draw summary box\n            pdf.setDrawColor(200, 200, 200);\n            pdf.setFillColor(245, 245, 245);\n            pdf.rect(marginLeft, yPosition, contentWidth, 25, 'FD');\n\n            yPosition += 5;\n            pdf.setFont('helvetica', 'bold');\n            pdf.setFontSize(10);\n            pdf.setTextColor(40, 40, 40);\n            pdf.text('SUMMARY', marginLeft + 2, yPosition);\n            yPosition += 6;\n\n            pdf.setFont('helvetica', 'normal');\n            pdf.setFontSize(9);\n            pdf.setTextColor(60, 60, 60);\n\n            const totalPremium = filteredPolicies.reduce((sum, p) => sum + (Number(p.premium_amount) || 0), 0);\n            pdf.text(`Total Policies: ${filteredPolicies.length}`, marginLeft + 2, yPosition);\n            yPosition += 5;\n\n            // Breakdown by type\n            const typeBreakdown = Object.entries(policyGroups)\n                .map(([type, policies]: [string, any]) => `${type}: ${formatCurrency(policies.reduce((sum: number, p: any) => sum + (Number(p.premium_amount) || 0), 0))} (${policies.length} policies)`)\n                .join(' | ');\n            pdf.text(`â”œâ”€ ${typeBreakdown}`, marginLeft + 2, yPosition);\n            yPosition += 6;\n\n            pdf.setFont('helvetica', 'bold');\n            pdf.text(`Total Premium: ${formatCurrency(totalPremium)}`, marginLeft + 2, yPosition);\n        }\n\n        // Add footer to all pages\n        const totalPages = pdf.internal.pages.length - 1;\n        for (let i = 1; i <= totalPages; i++) {\n            pdf.setPage(i);\n            pdf.setFontSize(8);\n            pdf.setFont('helvetica', 'normal');\n            pdf.setTextColor(150, 150, 150);\n            pdf.text(\n                `Page ${i} of ${totalPages}`,\n                pageWidth / 2,\n                pageHeight - 10,\n                { align: 'center' }\n            );\n        }\n\n        pdf.save(filename || `policies_${startDate.toISOString().split('T')[0]}_to_${endDate.toISOString().split('T')[0]}.pdf`);\n    } catch (error) {\n        console.error('Error generating date range PDF:', error);\n        throw new Error('Failed to generate date range PDF');\n    }\n}\n\n\n// Helper to prepare data for Excel/CSV\nfunction prepareDataForExport(policies: any[]) {\n    return policies.map(policy => {\n        const expiryDate = policy.expiry_date || policy.policy_end_date;\n        const status = expiryDate ? calculatePolicyStatus(new Date(expiryDate)) : 'N/A';\n\n        // Motor specific (15 fields)\n        if (policy.vehicle_number) {\n            return {\n                'Policy Number': policy.policy_number || 'N/A',\n                'Status': status,\n                'Insurer Name': policy.insurer_name || 'N/A',\n                'Vehicle Number': policy.vehicle_number || 'N/A',\n                'Vehicle Type': policy.vehicle_type || 'N/A',\n                'Manufacturer': policy.manufacturer || 'N/A',\n                'Model': policy.model || 'N/A',\n                'Fuel Type': policy.fuel_type || 'N/A',\n                'Mfg Year': policy.manufacturing_year || 'N/A',\n                'Plate Type': policy.number_plate_type || 'N/A',\n                'Ownership': policy.ownership_type || 'N/A',\n                'Premium': policy.premium_amount ? formatCurrency(policy.premium_amount) : 'N/A',\n                'Start Date': policy.policy_start_date ? formatDate(new Date(policy.policy_start_date)) : 'N/A',\n                'End Date': policy.policy_end_date ? formatDate(new Date(policy.policy_end_date)) : 'N/A',\n                'Created On': policy.created_at ? formatDate(new Date(policy.created_at)) : 'N/A',\n            };\n        }\n\n        // Health specific (9 fields)\n        if (policy.no_of_lives !== undefined || policy.sum_insured !== undefined) {\n            return {\n                'Policy Number': policy.policy_number || 'N/A',\n                'Status': status,\n                'Insurer Name': policy.insurer_name || 'N/A',\n                'Company Name': policy.company_name || 'N/A',\n                'Sum Insured': policy.sum_insured ? formatCurrency(policy.sum_insured) : 'N/A',\n                'No. of Lives': policy.no_of_lives || 'N/A',\n                'Premium': policy.premium_amount ? formatCurrency(policy.premium_amount) : 'N/A',\n                'Expiry Date': expiryDate ? formatDate(new Date(expiryDate)) : 'N/A',\n                'Created On': policy.created_at ? formatDate(new Date(policy.created_at)) : 'N/A',\n            };\n        }\n\n        // Commercial specific (10 fields)\n        if (policy.lob_type && ['GPA', 'Fire', 'Other'].includes(policy.lob_type)) {\n            return {\n                'Policy Number': policy.policy_number || 'N/A',\n                'Status': status,\n                'LOB Type': policy.lob_type || 'N/A',\n                'Insurer Name': policy.insurer_name || 'N/A',\n                'Company Name': policy.company_name || 'N/A',\n                'Policy Holder': policy.policy_holder_name || 'N/A',\n                'Sum Insured': policy.sum_insured ? formatCurrency(policy.sum_insured) : 'N/A',\n                'Premium': policy.premium_amount ? formatCurrency(policy.premium_amount) : 'N/A',\n                'Expiry Date': expiryDate ? formatDate(new Date(expiryDate)) : 'N/A',\n                'Created On': policy.created_at ? formatDate(new Date(policy.created_at)) : 'N/A',\n            };\n        }\n\n        // Generic (Travel/Life/Cyber) - 8 fields\n        return {\n            'Policy Number': policy.policy_number || 'N/A',\n            'Status': status,\n            'Type': policy.lob_type || 'N/A',\n            'Insurer Name': policy.insurer_name || 'N/A',\n            'Sum Insured': policy.sum_insured ? formatCurrency(policy.sum_insured) : 'N/A',\n            'Premium': policy.premium_amount ? formatCurrency(policy.premium_amount) : 'N/A',\n            'Expiry Date': expiryDate ? formatDate(new Date(expiryDate)) : 'N/A',\n            'Created On': policy.created_at ? formatDate(new Date(policy.created_at)) : 'N/A',\n        };\n    });\n}\n\n// Export to Excel\nexport function exportToXLS(policies: any[], filename: string) {\n    try {\n        console.log('Exporting to XLS with filename:', filename);\n        const data = prepareDataForExport(policies);\n        const ws = XLSX.utils.json_to_sheet(data);\n        const wb = XLSX.utils.book_new();\n        XLSX.utils.book_append_sheet(wb, ws, \"Policies\");\n\n        // Generate buffer\n        const wbout = XLSX.write(wb, { bookType: 'xlsx', type: 'array' });\n\n        // Create Blob\n        const blob = new Blob([wbout], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\n\n        // Trigger download\n        const link = document.createElement(\"a\");\n        const url = URL.createObjectURL(blob);\n        link.setAttribute(\"href\", url);\n        link.setAttribute(\"download\", `${filename}.xlsx`);\n        link.style.visibility = 'hidden';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n\n        console.log('XLS download triggered');\n    } catch (error) {\n        console.error('Error exporting to Excel:', error);\n        throw new Error('Failed to export to Excel');\n    }\n}\n\n// Export to CSV\nexport function exportToCSV(policies: any[], filename: string) {\n    try {\n        console.log('Exporting to CSV with filename:', filename);\n        const data = prepareDataForExport(policies);\n        const ws = XLSX.utils.json_to_sheet(data);\n        const csv = XLSX.utils.sheet_to_csv(ws);\n\n        const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\n        const link = document.createElement(\"a\");\n        const url = URL.createObjectURL(blob);\n        link.setAttribute(\"href\", url);\n        link.setAttribute(\"download\", `${filename}.csv`);\n        link.style.visibility = 'hidden';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n\n        console.log('CSV download triggered');\n    } catch (error) {\n        console.error('Error exporting to CSV:', error);\n        throw new Error('Failed to export to CSV');\n    }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5078, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/dashboard/ExportButton.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect } from 'react';\nimport { Download, FileDown, Calendar, Filter, X, Loader2, CheckCircle2, Car, Heart, Briefcase, Plane, Umbrella, Shield, FileText, FileSpreadsheet } from 'lucide-react';\nimport { exportDashboardToPDF, exportPoliciesByType, exportPoliciesByDate, exportToCSV, exportToXLS } from '@/lib/exportUtils';\nimport { DashboardSummary } from '@/types';\n\ninterface ExportButtonProps {\n    onExportDashboard: () => void;\n    motorPolicies: any[];\n    healthPolicies: any[];\n    commercialPolicies: any[];\n    travelPolicies: any[];\n    lifePolicies: any[];\n    cyberPolicies: any[];\n    userName: string;\n}\n\ntype PolicyType = 'Motor' | 'Health' | 'Travel' | 'Commercial' | 'Life' | 'Cyber';\ntype ExportFormat = 'PDF' | 'XLS' | 'CSV';\n\nexport default function ExportButton({\n    onExportDashboard,\n    motorPolicies,\n    healthPolicies,\n    commercialPolicies,\n    travelPolicies,\n    lifePolicies,\n    cyberPolicies,\n    userName\n}: ExportButtonProps) {\n    const [isOpen, setIsOpen] = useState(false);\n    const [isExporting, setIsExporting] = useState(false);\n    const [exportSuccess, setExportSuccess] = useState(false);\n\n    // Filter States\n    const [selectedTypes, setSelectedTypes] = useState<PolicyType[]>([]);\n    const [startDate, setStartDate] = useState<string>('');\n    const [endDate, setEndDate] = useState<string>('');\n    const [selectedFormat, setSelectedFormat] = useState<ExportFormat>('PDF');\n\n    // Initialize dates\n    useEffect(() => {\n        const end = new Date();\n        const start = new Date();\n        start.setMonth(start.getMonth() - 1);\n        setEndDate(end.toISOString().split('T')[0]);\n        setStartDate(start.toISOString().split('T')[0]);\n    }, []);\n\n    const togglePolicyType = (type: PolicyType) => {\n        if (selectedTypes.includes(type)) {\n            setSelectedTypes(selectedTypes.filter(t => t !== type));\n        } else {\n            setSelectedTypes([...selectedTypes, type]);\n        }\n    };\n\n    const handleExport = async () => {\n        try {\n            setIsExporting(true);\n\n            // Collect all selected policies\n            let policiesToExport: any[] = [];\n\n            // If no types selected, assume all\n            const typesToInclude = selectedTypes.length > 0 ? selectedTypes : ['Motor', 'Health', 'Travel', 'Commercial', 'Life', 'Cyber'];\n\n            if (typesToInclude.includes('Motor')) policiesToExport = [...policiesToExport, ...motorPolicies];\n            if (typesToInclude.includes('Health')) policiesToExport = [...policiesToExport, ...healthPolicies];\n            if (typesToInclude.includes('Travel')) policiesToExport = [...policiesToExport, ...travelPolicies];\n            if (typesToInclude.includes('Commercial')) policiesToExport = [...policiesToExport, ...commercialPolicies];\n            if (typesToInclude.includes('Life')) policiesToExport = [...policiesToExport, ...lifePolicies];\n            if (typesToInclude.includes('Cyber')) policiesToExport = [...policiesToExport, ...cyberPolicies];\n\n            // Filter by date range only (removed status filter)\n            const start = new Date(startDate);\n            const end = new Date(endDate);\n            // Set end date to end of day\n            end.setHours(23, 59, 59, 999);\n\n            policiesToExport = policiesToExport.filter(p => {\n                const created = new Date(p.created_at);\n                // Filter by date only\n                return created >= start && created <= end;\n            });\n\n            // Generate descriptive filename\n            const dateRangeStr = `${startDate}_to_${endDate}`;\n            let typeStr = 'All_Policies';\n\n            if (selectedTypes.length > 0) {\n                if (selectedTypes.length === 1) {\n                    typeStr = `${selectedTypes[0]}_Policies`;\n                } else {\n                    typeStr = 'Mixed_Policies';\n                }\n            }\n\n            const filename = `${typeStr}_${dateRangeStr}`;\n\n            if (selectedFormat === 'PDF') {\n                await exportPoliciesByDate(start, end, policiesToExport, userName, `${filename}.pdf`);\n            } else if (selectedFormat === 'XLS') {\n                exportToXLS(policiesToExport, filename);\n            } else if (selectedFormat === 'CSV') {\n                exportToCSV(policiesToExport, filename);\n            }\n\n            setExportSuccess(true);\n            setTimeout(() => {\n                setExportSuccess(false);\n                setIsOpen(false);\n            }, 2000);\n\n        } catch (error) {\n            console.error('Export failed:', error);\n            alert('Failed to export data. Please try again.');\n        } finally {\n            setIsExporting(false);\n        }\n    };\n\n    const policyOptions = [\n        { type: 'Motor', icon: Car },\n        { type: 'Health', icon: Heart },\n        { type: 'Travel', icon: Plane },\n        { type: 'Commercial', icon: Briefcase },\n        { type: 'Life', icon: Umbrella },\n        { type: 'Cyber', icon: Shield },\n    ];\n\n    return (\n        <div className=\"relative\">\n            <button\n                onClick={() => setIsOpen(!isOpen)}\n                className=\"flex items-center px-4 py-2 bg-white border border-gray-300 rounded-xl shadow-sm hover:shadow-md transition-all text-gray-700 font-semibold\"\n            >\n                <Download className=\"w-5 h-5 mr-2\" />\n                Export\n            </button>\n\n            {/* Detailed Export Modal */}\n            {isOpen && (\n                <>\n                    <div className=\"fixed inset-0 bg-black/20 z-40\" onClick={() => setIsOpen(false)} />\n                    <div className=\"absolute right-0 top-full mt-2 w-[480px] bg-white rounded-2xl shadow-2xl border border-gray-200 z-50 overflow-hidden animate-in fade-in zoom-in-95 duration-200 origin-top-right\">\n                        {/* Header */}\n                        <div className=\"flex items-center justify-between px-6 py-4 border-b border-gray-100\">\n                            <h3 className=\"text-lg font-bold text-gray-900\">Export Data</h3>\n                            <button onClick={() => setIsOpen(false)} className=\"text-gray-400 hover:text-gray-600\">\n                                <X className=\"w-5 h-5\" />\n                            </button>\n                        </div>\n\n                        <div className=\"p-6 space-y-6 max-h-[70vh] overflow-y-auto\">\n                            {/* Policy Type Selection - Removed count display */}\n                            <div>\n                                <label className=\"block text-sm font-semibold text-gray-900 mb-3\">Policy Type</label>\n                                <div className=\"grid grid-cols-3 gap-3\">\n                                    {policyOptions.map((option) => {\n                                        const isSelected = selectedTypes.includes(option.type as PolicyType);\n                                        return (\n                                            <button\n                                                key={option.type}\n                                                onClick={() => togglePolicyType(option.type as PolicyType)}\n                                                className={`flex flex-col items-center justify-center p-3 rounded-xl border transition-all ${isSelected\n                                                    ? 'border-primary-600 bg-primary-50 text-primary-700 ring-1 ring-primary-600'\n                                                    : 'border-gray-200 hover:border-gray-300 hover:bg-gray-50 text-gray-600'\n                                                    }`}\n                                            >\n                                                <option.icon className={`w-6 h-6 mb-2 ${isSelected ? 'text-primary-600' : 'text-gray-500'}`} />\n                                                <span className=\"text-sm font-medium\">{option.type}</span>\n                                            </button>\n                                        );\n                                    })}\n                                </div>\n                            </div>\n\n                            {/* Date Range */}\n                            <div>\n                                <label className=\"block text-sm font-semibold text-gray-900 mb-3\">Date Range</label>\n                                <div className=\"grid grid-cols-2 gap-4\">\n                                    <div>\n                                        <label className=\"block text-xs text-gray-500 mb-1\">From</label>\n                                        <input\n                                            type=\"date\"\n                                            value={startDate}\n                                            onChange={(e) => setStartDate(e.target.value)}\n                                            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n                                        />\n                                    </div>\n                                    <div>\n                                        <label className=\"block text-xs text-gray-500 mb-1\">To</label>\n                                        <input\n                                            type=\"date\"\n                                            value={endDate}\n                                            onChange={(e) => setEndDate(e.target.value)}\n                                            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n\n                            {/* Format Selection */}\n                            <div>\n                                <label className=\"block text-sm font-semibold text-gray-900 mb-3\">Format</label>\n                                <div className=\"flex space-x-4\">\n                                    {(['PDF', 'XLS', 'CSV'] as ExportFormat[]).map((format) => (\n                                        <label key={format} className=\"flex items-center cursor-pointer group\">\n                                            <input\n                                                type=\"radio\"\n                                                name=\"format\"\n                                                value={format}\n                                                checked={selectedFormat === format}\n                                                onChange={() => setSelectedFormat(format)}\n                                                className=\"w-4 h-4 text-primary-600 border-gray-300 focus:ring-primary-500\"\n                                            />\n                                            <span className=\"ml-2 text-sm text-gray-700 group-hover:text-gray-900\">{format}</span>\n                                        </label>\n                                    ))}\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Footer */}\n                        <div className=\"p-6 border-t border-gray-100 bg-gray-50 flex justify-between items-center\">\n                            <button\n                                onClick={() => {\n                                    setSelectedTypes([]);\n                                    const end = new Date();\n                                    const start = new Date();\n                                    start.setMonth(start.getMonth() - 1);\n                                    setEndDate(end.toISOString().split('T')[0]);\n                                    setStartDate(start.toISOString().split('T')[0]);\n                                }}\n                                className=\"text-sm text-gray-500 hover:text-gray-700 font-medium\"\n                            >\n                                Clear all\n                            </button>\n                            <button\n                                onClick={handleExport}\n                                disabled={isExporting}\n                                className=\"px-6 py-2.5 bg-primary-600 hover:bg-primary-700 text-white rounded-xl font-semibold shadow-sm hover:shadow transition-all flex items-center disabled:opacity-50 disabled:cursor-not-allowed\"\n                            >\n                                {isExporting ? (\n                                    <>\n                                        <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                                        Exporting...\n                                    </>\n                                ) : (\n                                    <>\n                                        Export\n                                    </>\n                                )}\n                            </button>\n                        </div>\n                    </div>\n                </>\n            )}\n\n            {/* Success Toast */}\n            {exportSuccess && (\n                <div className=\"absolute top-full right-0 mt-4 px-4 py-3 bg-green-50 text-green-700 border border-green-200 rounded-xl shadow-lg flex items-center animate-in slide-in-from-top-2 fade-in z-50 whitespace-nowrap\">\n                    <CheckCircle2 className=\"w-5 h-5 mr-2\" />\n                    <span className=\"font-medium\">Export successful!</span>\n                </div>\n            )}\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5592, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/lib/constants.ts"],"sourcesContent":["// Insurance Companies List\nexport const INSURANCE_COMPANIES = [\n    'HDFC ERGO',\n    'GO DIGIT',\n    'ICICI LOMBARD',\n    'TATA AIG',\n    'SHRIRAM GIC',\n    'ACKO GIC',\n    'CHOLA MS',\n    'INDUSIND GIC',\n    'BAJAJ GIC',\n    'IFFCO GIC',\n    'liberty gic',\n    'Royal sundaram',\n    'magma',\n    'kotak gic',\n    'sbi gic',\n    'national insurance',\n    'oriental',\n    'united India gic',\n    'new india gic',\n    'OTHERS'\n] as const;\n\n// Car Manufacturers List\nexport const CAR_MANUFACTURERS = [\n    'Maruti Suzuki',\n    'Hyundai',\n    'Tata',\n    'Honda',\n    'Toyota',\n    'Mahindra',\n    'Kia',\n    'Volkswagen',\n    'Renault',\n    'Nissan',\n    'Ford',\n    'Skoda',\n    'MG',\n    'Jeep',\n    'BMW',\n    'Mercedes-Benz',\n    'Audi',\n    'Volvo',\n    'Others'\n] as const;\n"],"names":[],"mappings":"AAAA,2BAA2B;;;;;;;AACpB,MAAM,sBAAsB;IAC/B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACH;AAGM,MAAM,oBAAoB;IAC7B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACH"}},
    {"offset": {"line": 5649, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/lib/validation.ts"],"sourcesContent":["// Form validation utilities\n\nexport const validateVehicleNumber = (vehicleNumber: string): boolean => {\n    // Indian vehicle number format: AA00AA0000 or AA00A0000\n    const regex = /^[A-Z]{2}[0-9]{1,2}[A-Z]{1,2}[0-9]{4}$/;\n    return regex.test(vehicleNumber.replace(/\\s+/g, ''));\n};\n\nexport const validatePolicyNumber = (policyNumber: string): boolean => {\n    // Basic validation: at least 5 characters\n    return policyNumber.trim().length >= 5;\n};\n\nexport const validatePremiumAmount = (amount: number, min = 0, max = 10000000): boolean => {\n    return amount >= min && amount <= max && !isNaN(amount);\n};\n\nexport const validateDateRange = (startDate: Date, endDate: Date): boolean => {\n    return startDate < endDate;\n};\n\nexport const validatePhoneNumber = (phone: string): boolean => {\n    // Indian phone number: 10 digits, optionally starting with +91\n    const regex = /^(\\+91)?[6-9]\\d{9}$/;\n    return regex.test(phone.replace(/[\\s-]/g, ''));\n};\n\nexport const validateEmail = (email: string): boolean => {\n    const regex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return regex.test(email);\n};\n\nexport const validateGSTNumber = (gst: string): boolean => {\n    // GST format: 22 characters\n    const regex = /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;\n    return regex.test(gst);\n};\n\nexport const validatePAN = (pan: string): boolean => {\n    // PAN format: AAAAA0000A\n    const regex = /^[A-Z]{5}[0-9]{4}[A-Z]$/;\n    return regex.test(pan);\n};\n\nexport const formatCurrency = (amount: number): string => {\n    return new Intl.NumberFormat('en-IN', {\n        style: 'currency',\n        currency: 'INR',\n        maximumFractionDigits: 0,\n    }).format(amount);\n};\n\nexport const formatDate = (date: Date | string): string => {\n    const d = typeof date === 'string' ? new Date(date) : date;\n    return d.toLocaleDateString('en-IN', {\n        day: '2-digit',\n        month: '2-digit',\n        year: 'numeric',\n    });\n};\n\nexport const parseDate = (dateString: string): Date => {\n    return new Date(dateString);\n};\n\n// Get today's date in YYYY-MM-DD format for input defaults\nexport const getTodayString = (): string => {\n    return new Date().toISOString().split('T')[0];\n};\n\n// Get date one year from today\nexport const getOneYearFromNow = (): string => {\n    const date = new Date();\n    date.setFullYear(date.getFullYear() + 1);\n    return date.toISOString().split('T')[0];\n};\n\n// Validate required field\nexport const validateRequired = (value: any): boolean => {\n    if (typeof value === 'string') {\n        return value.trim().length > 0;\n    }\n    return value !== null && value !== undefined && value !== '';\n};\n\n// Error messages\nexport const getErrorMessage = (fieldName: string, validationType: string): string => {\n    const messages: Record<string, string> = {\n        required: `${fieldName} is required`,\n        vehicleNumber: 'Invalid vehicle number format (e.g., KA01AB1234)',\n        policyNumber: 'Policy number must be at least 5 characters',\n        premium: 'Invalid premium amount',\n        dateRange: 'End date must be after start date',\n        phone: 'Invalid phone number (10 digits)',\n        email: 'Invalid email address',\n        gst: 'Invalid GST number format',\n        pan: 'Invalid PAN format',\n    };\n    return messages[validationType] || `Invalid ${fieldName}`;\n};\n"],"names":[],"mappings":"AAAA,4BAA4B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAErB,MAAM,wBAAwB,CAAC;IAClC,wDAAwD;IACxD,MAAM,QAAQ;IACd,OAAO,MAAM,IAAI,CAAC,cAAc,OAAO,CAAC,QAAQ;AACpD;AAEO,MAAM,uBAAuB,CAAC;IACjC,0CAA0C;IAC1C,OAAO,aAAa,IAAI,GAAG,MAAM,IAAI;AACzC;AAEO,MAAM,wBAAwB,CAAC,QAAgB,MAAM,CAAC,EAAE,MAAM,QAAQ;IACzE,OAAO,UAAU,OAAO,UAAU,OAAO,CAAC,MAAM;AACpD;AAEO,MAAM,oBAAoB,CAAC,WAAiB;IAC/C,OAAO,YAAY;AACvB;AAEO,MAAM,sBAAsB,CAAC;IAChC,+DAA+D;IAC/D,MAAM,QAAQ;IACd,OAAO,MAAM,IAAI,CAAC,MAAM,OAAO,CAAC,UAAU;AAC9C;AAEO,MAAM,gBAAgB,CAAC;IAC1B,MAAM,QAAQ;IACd,OAAO,MAAM,IAAI,CAAC;AACtB;AAEO,MAAM,oBAAoB,CAAC;IAC9B,4BAA4B;IAC5B,MAAM,QAAQ;IACd,OAAO,MAAM,IAAI,CAAC;AACtB;AAEO,MAAM,cAAc,CAAC;IACxB,yBAAyB;IACzB,MAAM,QAAQ;IACd,OAAO,MAAM,IAAI,CAAC;AACtB;AAEO,MAAM,iBAAiB,CAAC;IAC3B,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QAClC,OAAO;QACP,UAAU;QACV,uBAAuB;IAC3B,GAAG,MAAM,CAAC;AACd;AAEO,MAAM,aAAa,CAAC;IACvB,MAAM,IAAI,OAAO,SAAS,WAAW,IAAI,KAAK,QAAQ;IACtD,OAAO,EAAE,kBAAkB,CAAC,SAAS;QACjC,KAAK;QACL,OAAO;QACP,MAAM;IACV;AACJ;AAEO,MAAM,YAAY,CAAC;IACtB,OAAO,IAAI,KAAK;AACpB;AAGO,MAAM,iBAAiB;IAC1B,OAAO,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;AACjD;AAGO,MAAM,oBAAoB;IAC7B,MAAM,OAAO,IAAI;IACjB,KAAK,WAAW,CAAC,KAAK,WAAW,KAAK;IACtC,OAAO,KAAK,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;AAC3C;AAGO,MAAM,mBAAmB,CAAC;IAC7B,IAAI,OAAO,UAAU,UAAU;QAC3B,OAAO,MAAM,IAAI,GAAG,MAAM,GAAG;IACjC;IACA,OAAO,UAAU,QAAQ,UAAU,aAAa,UAAU;AAC9D;AAGO,MAAM,kBAAkB,CAAC,WAAmB;IAC/C,MAAM,WAAmC;QACrC,UAAU,GAAG,UAAU,YAAY,CAAC;QACpC,eAAe;QACf,cAAc;QACd,SAAS;QACT,WAAW;QACX,OAAO;QACP,OAAO;QACP,KAAK;QACL,KAAK;IACT;IACA,OAAO,QAAQ,CAAC,eAAe,IAAI,CAAC,QAAQ,EAAE,WAAW;AAC7D"}},
    {"offset": {"line": 5769, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/forms/MotorPolicyForm.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { X, Save, Loader2 } from 'lucide-react';\nimport { MotorPolicy, MotorPolicyFormData } from '@/types';\nimport FormInput from './FormInput';\nimport FileUpload from './FileUpload';\nimport { addMotorPolicy, updateMotorPolicy } from '@/lib/db';\nimport { INSURANCE_COMPANIES, CAR_MANUFACTURERS } from '@/lib/constants';\nimport { formatDateForInput } from '@/lib/utils';\nimport {\n    validateVehicleNumber,\n    validatePolicyNumber,\n    validatePremiumAmount,\n    validateDateRange,\n    getTodayString,\n    getOneYearFromNow\n} from '@/lib/validation';\n\ninterface MotorPolicyFormProps {\n    userId: string;\n    initialData?: MotorPolicy;\n    onClose: () => void;\n    onSuccess: () => void;\n}\n\nexport default function MotorPolicyForm({ userId, initialData, onClose, onSuccess }: MotorPolicyFormProps) {\n    const [loading, setLoading] = useState(false);\n    const [errors, setErrors] = useState<Record<string, string>>({});\n\n    const [formData, setFormData] = useState<MotorPolicyFormData>({\n        vehicle_number: initialData?.vehicle_number || '',\n        policy_number: initialData?.policy_number || '',\n        vehicle_type: initialData?.vehicle_type || 'Car',\n        manufacturer: initialData?.manufacturer || '',\n        model: initialData?.model || '',\n        fuel_type: initialData?.fuel_type || 'Petrol',\n        manufacturing_year: initialData?.manufacturing_year || new Date().getFullYear(),\n        number_plate_type: initialData?.number_plate_type || 'White',\n        ownership_type: initialData?.ownership_type || 'Individual',\n        policy_type: initialData?.policy_type || 'Comprehensive',\n        insurer_name: initialData?.insurer_name || '',\n        premium_amount: initialData?.premium_amount || 0,\n        policy_start_date: initialData?.policy_start_date ? new Date(initialData.policy_start_date) : new Date(),\n        policy_end_date: initialData?.policy_end_date ? new Date(initialData.policy_end_date) : new Date(new Date().setFullYear(new Date().getFullYear() + 1)),\n        rc_docs: initialData?.rc_docs || [],\n        previous_policy_docs: initialData?.previous_policy_docs || [],\n        dl_docs: initialData?.dl_docs || [],\n    });\n\n    // Auto-calculate end date when start date changes (1 day before same date next year)\n    useEffect(() => {\n        if (formData.policy_start_date && !initialData) {\n            const startDate = new Date(formData.policy_start_date);\n            const endDate = new Date(startDate);\n            endDate.setFullYear(endDate.getFullYear() + 1);\n            endDate.setDate(endDate.getDate() - 1); // 1 day before\n            setFormData(prev => ({\n                ...prev,\n                policy_end_date: endDate\n            }));\n        }\n    }, [formData.policy_start_date, initialData]);\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {\n        const { name, value, type } = e.target;\n\n        setFormData(prev => ({\n            ...prev,\n            [name]: type === 'number' ? Number(value) : value\n        }));\n\n        // Clear error when user types\n        if (errors[name]) {\n            setErrors(prev => {\n                const newErrors = { ...prev };\n                delete newErrors[name];\n                return newErrors;\n            });\n        }\n    };\n\n    const handleDateChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const { name, value } = e.target;\n        setFormData(prev => ({\n            ...prev,\n            [name]: new Date(value)\n        }));\n    };\n\n    const validateForm = (): boolean => {\n        const newErrors: Record<string, string> = {};\n\n        if (!validateVehicleNumber(formData.vehicle_number || '')) {\n            newErrors.vehicle_number = 'Invalid vehicle number format (e.g., KA01AB1234)';\n        }\n\n        if (!validatePolicyNumber(formData.policy_number || '')) {\n            newErrors.policy_number = 'Policy number is required';\n        }\n\n        if (!validatePremiumAmount(formData.premium_amount || 0)) {\n            newErrors.premium_amount = 'Invalid premium amount';\n        }\n\n        if (formData.policy_start_date && formData.policy_end_date) {\n            if (!validateDateRange(formData.policy_start_date, formData.policy_end_date)) {\n                newErrors.policy_end_date = 'End date must be after start date';\n            }\n        }\n\n        if (!formData.manufacturer) newErrors.manufacturer = 'Manufacturer is required';\n        if (!formData.model) newErrors.model = 'Model is required';\n        if (!formData.insurer_name) newErrors.insurer_name = 'Insurer name is required';\n\n        setErrors(newErrors);\n        return Object.keys(newErrors).length === 0;\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n\n        if (!validateForm()) return;\n\n        setLoading(true);\n        try {\n            const policyData = {\n                ...formData,\n                user_id: userId,\n                // Ensure dates are Date objects\n                policy_start_date: new Date(formData.policy_start_date!),\n                policy_end_date: new Date(formData.policy_end_date!),\n                rc_docs: formData.rc_docs || [],\n                previous_policy_docs: formData.previous_policy_docs || [],\n                dl_docs: formData.dl_docs || []\n            };\n\n            if (initialData?.id) {\n                await updateMotorPolicy(initialData.id, policyData);\n            } else {\n                await addMotorPolicy(policyData as any);\n            }\n\n            onSuccess();\n            onClose();\n        } catch (error) {\n            console.error('Error saving policy:', error);\n            setErrors(prev => ({ ...prev, submit: 'Failed to save policy. Please try again.' }));\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleFileUpload = (field: 'rc_docs' | 'previous_policy_docs' | 'dl_docs') => (url: string) => {\n        setFormData(prev => ({\n            ...prev,\n            [field]: [...(prev[field] || []), url]\n        }));\n    };\n\n    return (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto\">\n            <div className=\"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\n                <div className=\"flex items-center justify-between p-6 border-b sticky top-0 bg-white z-10\">\n                    <h2 className=\"text-xl font-bold text-gray-900\">\n                        {initialData ? 'Edit Motor Policy' : 'Add New Motor Policy'}\n                    </h2>\n                    <button onClick={onClose} className=\"text-gray-500 hover:text-gray-700\">\n                        <X className=\"w-6 h-6\" />\n                    </button>\n                </div>\n\n                <form onSubmit={handleSubmit} className=\"p-6 space-y-8\">\n                    {errors.submit && (\n                        <div className=\"bg-red-50 text-red-600 p-4 rounded-lg text-sm\">\n                            {errors.submit}\n                        </div>\n                    )}\n\n                    {/* Vehicle Details */}\n                    <section>\n                        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Vehicle Details</h3>\n                        <div className=\"grid md:grid-cols-3 gap-6\">\n                            <FormInput\n                                label=\"Vehicle Number\"\n                                name=\"vehicle_number\"\n                                value={formData.vehicle_number || ''}\n                                onChange={handleChange}\n                                placeholder=\"KA01AB1234\"\n                                error={errors.vehicle_number}\n                                required\n                            />\n                            <FormInput\n                                label=\"Vehicle Type\"\n                                name=\"vehicle_type\"\n                                type=\"select\"\n                                value={formData.vehicle_type || 'Car'}\n                                onChange={handleChange}\n                                options={[\n                                    { value: 'Car', label: 'Car' },\n                                    { value: 'Bike', label: 'Bike' },\n                                    { value: 'Bus', label: 'Bus' },\n                                    { value: 'GCV', label: 'Goods Carrying Vehicle' },\n                                    { value: 'Misc', label: 'Miscellaneous' }\n                                ]}\n                                required\n                            />\n                            <FormInput\n                                label=\"Number Plate Type\"\n                                name=\"number_plate_type\"\n                                type=\"select\"\n                                value={formData.number_plate_type ?? ''}\n                                onChange={handleChange}\n                                required\n                                options={[\n                                    { value: 'White', label: 'White (Pvt)' },\n                                    { value: 'Yellow', label: 'Yellow (Commercial)' },\n                                    { value: 'EV', label: 'EV (Green)' },\n                                    { value: 'Others', label: 'Others' },\n                                ]}\n                            />\n                            <FormInput\n                                label=\"Ownership Type\"\n                                name=\"ownership_type\"\n                                type=\"select\"\n                                value={formData.ownership_type ?? 'Individual'}\n                                onChange={handleChange}\n                                required\n                                options={[\n                                    { value: 'Individual', label: 'Individual' },\n                                    { value: 'Company', label: 'Company' },\n                                ]}\n                            />\n                            <FormInput\n                                label=\"Policy Type\"\n                                name=\"policy_type\"\n                                type=\"select\"\n                                value={formData.policy_type ?? 'Comprehensive'}\n                                onChange={handleChange}\n                                required\n                                options={[\n                                    { value: 'Comprehensive', label: 'Comprehensive' },\n                                    { value: 'TP', label: 'TP (Third Party)' },\n                                ]}\n                            />\n                            <FormInput\n                                label=\"Manufacturer\"\n                                name=\"manufacturer\"\n                                type=\"select\"\n                                value={formData.manufacturer || ''}\n                                onChange={handleChange}\n                                options={CAR_MANUFACTURERS.map(m => ({ value: m, label: m }))}\n                                error={errors.manufacturer}\n                                required\n                            />\n                            <FormInput\n                                label=\"Model\"\n                                name=\"model\"\n                                value={formData.model || ''}\n                                onChange={handleChange}\n                                placeholder=\"e.g. Swift\"\n                                error={errors.model}\n                                required\n                            />\n                            <FormInput\n                                label=\"Fuel Type\"\n                                name=\"fuel_type\"\n                                type=\"select\"\n                                value={formData.fuel_type || 'Petrol'}\n                                onChange={handleChange}\n                                options={[\n                                    { value: 'Petrol', label: 'Petrol' },\n                                    { value: 'Diesel', label: 'Diesel' },\n                                    { value: 'CNG', label: 'CNG' },\n                                    { value: 'Electric', label: 'Electric' },\n                                    { value: 'Hybrid', label: 'Hybrid' }\n                                ]}\n                                required\n                            />\n                            <FormInput\n                                label=\"Manufacturing Year\"\n                                name=\"manufacturing_year\"\n                                type=\"number\"\n                                value={formData.manufacturing_year || new Date().getFullYear()}\n                                onChange={handleChange}\n                                min={1990}\n                                max={new Date().getFullYear()}\n                                required\n                            />\n                        </div>\n                    </section>\n\n                    {/* Policy Details */}\n                    <section>\n                        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Policy Details</h3>\n                        <div className=\"grid md:grid-cols-3 gap-6\">\n                            <FormInput\n                                label=\"Policy Number\"\n                                name=\"policy_number\"\n                                value={formData.policy_number || ''}\n                                onChange={handleChange}\n                                placeholder=\"Enter policy number\"\n                                error={errors.policy_number}\n                                required\n                            />\n                            <FormInput\n                                label=\"Insurer Name\"\n                                name=\"insurer_name\"\n                                type=\"select\"\n                                value={formData.insurer_name || ''}\n                                onChange={handleChange}\n                                options={INSURANCE_COMPANIES.map(c => ({ value: c, label: c }))}\n                                error={errors.insurer_name}\n                                required\n                            />\n                            <FormInput\n                                label=\"Premium Amount (â‚¹)\"\n                                name=\"premium_amount\"\n                                type=\"number\"\n                                value={formData.premium_amount || ''}\n                                onChange={handleChange}\n                                error={errors.premium_amount}\n                                required\n                            />\n                            <FormInput\n                                label=\"Start Date\"\n                                name=\"policy_start_date\"\n                                type=\"date\"\n                                value={formatDateForInput(formData.policy_start_date)}\n                                onChange={handleDateChange as any}\n                                required\n                            />\n                            <FormInput\n                                label=\"End Date\"\n                                name=\"policy_end_date\"\n                                type=\"date\"\n                                value={formatDateForInput(formData.policy_end_date)}\n                                onChange={handleDateChange as any}\n                                required\n                            />\n                        </div>\n                    </section>\n\n                    {/* Documents */}\n                    <section>\n                        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Documents</h3>\n                        <div className=\"grid md:grid-cols-3 gap-6\">\n                            <FileUpload\n                                label=\"RC Copy\"\n                                name=\"rc_docs\"\n                                bucket=\"rc-copies\"\n                                onUploadComplete={handleFileUpload('rc_docs')}\n                                existingFile={formData.rc_docs && formData.rc_docs.length > 0 ? { url: formData.rc_docs[0], name: 'RC Document' } : undefined}\n                            />\n                            <FileUpload\n                                label=\"Previous Policy\"\n                                name=\"previous_policy_docs\"\n                                bucket=\"policy-documents\"\n                                onUploadComplete={handleFileUpload('previous_policy_docs')}\n                                existingFile={formData.previous_policy_docs && formData.previous_policy_docs.length > 0 ? { url: formData.previous_policy_docs[0], name: 'Previous Policy' } : undefined}\n                            />\n                        </div>\n                    </section>\n\n                    <div className=\"flex justify-end space-x-4 pt-6 border-t\">\n                        <button\n                            type=\"button\"\n                            onClick={onClose}\n                            className=\"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\"\n                            disabled={loading}\n                        >\n                            Cancel\n                        </button>\n                        <button\n                            type=\"submit\"\n                            className=\"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center\"\n                            disabled={loading}\n                        >\n                            {loading ? (\n                                <>\n                                    <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                                    Saving...\n                                </>\n                            ) : (\n                                <>\n                                    <Save className=\"w-4 h-4 mr-2\" />\n                                    Save Policy\n                                </>\n                            )}\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6424, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/forms/HealthPolicyForm.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { X, Save, Loader2 } from 'lucide-react';\nimport { HealthPolicy, HealthPolicyFormData } from '@/types';\nimport FormInput from './FormInput';\nimport FileUpload from './FileUpload';\nimport { addHealthPolicy, updateHealthPolicy } from '@/lib/db';\nimport { INSURANCE_COMPANIES } from '@/lib/constants';\nimport { formatDateForInput } from '@/lib/utils';\nimport {\n    validatePolicyNumber,\n    validatePremiumAmount,\n    validateDateRange\n} from '@/lib/validation';\n\ninterface HealthPolicyFormProps {\n    userId: string;\n    initialData?: HealthPolicy;\n    onClose: () => void;\n    onSuccess: () => void;\n}\n\nexport default function HealthPolicyForm({ userId, initialData, onClose, onSuccess }: HealthPolicyFormProps) {\n    const [loading, setLoading] = useState(false);\n    const [errors, setErrors] = useState<Record<string, string>>({});\n\n    const [formData, setFormData] = useState<HealthPolicyFormData>({\n        company_name: initialData?.company_name || '',\n        policy_number: initialData?.policy_number || '',\n        insurer_name: initialData?.insurer_name || '',\n        sum_insured: initialData?.sum_insured || 0,\n        premium_amount: initialData?.premium_amount || 0,\n        expiry_date: initialData?.expiry_date ? new Date(initialData.expiry_date) : new Date(new Date().setFullYear(new Date().getFullYear() + 1)),\n        policy_docs: initialData?.policy_docs || [],\n        no_of_lives: initialData?.no_of_lives || 0,\n    });\n\n    // Auto-calculate expiry date when it's a new policy (1 year from today - 1 day)\n    useEffect(() => {\n        if (!initialData) {\n            const today = new Date();\n            const expiryDate = new Date(today);\n            expiryDate.setFullYear(expiryDate.getFullYear() + 1);\n            expiryDate.setDate(expiryDate.getDate() - 1); // 1 day before\n            setFormData(prev => ({\n                ...prev,\n                expiry_date: expiryDate\n            }));\n        }\n    }, [initialData]);\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {\n        const { name, value, type } = e.target;\n\n        setFormData(prev => ({\n            ...prev,\n            [name]: type === 'number' ? Number(value) : value\n        }));\n\n        if (errors[name]) {\n            setErrors(prev => {\n                const newErrors = { ...prev };\n                delete newErrors[name];\n                return newErrors;\n            });\n        }\n    };\n\n    const handleDateChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const { name, value } = e.target;\n        setFormData(prev => ({\n            ...prev,\n            [name]: new Date(value)\n        }));\n    };\n\n    const validateForm = (): boolean => {\n        const newErrors: Record<string, string> = {};\n\n        if (!validatePolicyNumber(formData.policy_number || '')) {\n            newErrors.policy_number = 'Policy number is required';\n        }\n\n        if (!validatePremiumAmount(formData.premium_amount || 0)) {\n            newErrors.premium_amount = 'Invalid premium amount';\n        }\n\n        if (!formData.insurer_name) newErrors.insurer_name = 'Insurer name is required';\n        if (!formData.company_name) newErrors.company_name = 'Company name is required';\n\n        setErrors(newErrors);\n        return Object.keys(newErrors).length === 0;\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n\n        if (!validateForm()) return;\n\n        setLoading(true);\n        try {\n            const policyData = {\n                ...formData,\n                user_id: userId,\n                expiry_date: new Date(formData.expiry_date!),\n                policy_number: formData.policy_number || '',\n                insurer_name: formData.insurer_name || '',\n                premium_amount: formData.premium_amount || 0,\n                policy_docs: formData.policy_docs || []\n            };\n\n            if (initialData?.id) {\n                await updateHealthPolicy(initialData.id, policyData);\n            } else {\n                await addHealthPolicy(policyData);\n            }\n\n            onSuccess();\n            onClose();\n        } catch (error) {\n            console.error('Error saving policy:', error);\n            setErrors(prev => ({ ...prev, submit: 'Failed to save policy. Please try again.' }));\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleFileUpload = (url: string) => {\n        setFormData(prev => ({\n            ...prev,\n            policy_docs: [...(prev.policy_docs || []), url]\n        }));\n    };\n\n    return (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto\">\n            <div className=\"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\n                <div className=\"flex items-center justify-between p-6 border-b sticky top-0 bg-white z-10\">\n                    <h2 className=\"text-xl font-bold text-gray-900\">\n                        {initialData ? 'Edit Health Insurance Policy' : 'Add New Health Insurance Policy'}\n                    </h2>\n                    <button onClick={onClose} className=\"text-gray-500 hover:text-gray-700\">\n                        <X className=\"w-6 h-6\" />\n                    </button>\n                </div>\n\n                <form onSubmit={handleSubmit} className=\"p-6 space-y-8\">\n                    {errors.submit && (\n                        <div className=\"bg-red-50 text-red-600 p-4 rounded-lg text-sm\">\n                            {errors.submit}\n                        </div>\n                    )}\n\n                    {/* Policy Details */}\n                    <section>\n                        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Policy Details</h3>\n                        <div className=\"grid md:grid-cols-3 gap-6\">\n                            <FormInput\n                                label=\"Company Name\"\n                                name=\"company_name\"\n                                value={formData.company_name || ''}\n                                onChange={handleChange}\n                                placeholder=\"e.g. Acme Corp\"\n                                error={errors.company_name}\n                                required\n                            />\n                            <FormInput\n                                label=\"Policy Number\"\n                                name=\"policy_number\"\n                                value={formData.policy_number || ''}\n                                onChange={handleChange}\n                                placeholder=\"Enter policy number\"\n                                error={errors.policy_number}\n                                required\n                            />\n                            <FormInput\n                                label=\"Insurer Name\"\n                                name=\"insurer_name\"\n                                type=\"select\"\n                                value={formData.insurer_name || ''}\n                                onChange={handleChange}\n                                options={INSURANCE_COMPANIES.map(c => ({ value: c, label: c }))}\n                                error={errors.insurer_name}\n                                required\n                            />\n                            <FormInput\n                                label=\"Sum Insured (â‚¹)\"\n                                name=\"sum_insured\"\n                                type=\"number\"\n                                value={formData.sum_insured || ''}\n                                onChange={handleChange}\n                                placeholder=\"e.g. 500000\"\n                            />\n                            <FormInput\n                                label=\"Premium Amount (â‚¹)\"\n                                name=\"premium_amount\"\n                                type=\"number\"\n                                value={formData.premium_amount || ''}\n                                onChange={handleChange}\n                                error={errors.premium_amount}\n                                required\n                            />\n                            <FormInput\n                                label=\"Expiry Date\"\n                                name=\"expiry_date\"\n                                type=\"date\"\n                                value={formatDateForInput(formData.expiry_date)}\n                                onChange={handleDateChange as any}\n                                required\n                            />\n                            <FormInput\n                                label=\"Number of Lives\"\n                                name=\"no_of_lives\"\n                                type=\"number\"\n                                value={formData.no_of_lives || ''}\n                                onChange={handleChange}\n                                placeholder=\"e.g. 50\"\n                            />\n                        </div>\n                    </section>\n\n                    {/* Documents */}\n                    <section>\n                        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Documents</h3>\n                        <div className=\"grid md:grid-cols-3 gap-6\">\n                            <FileUpload\n                                label=\"Policy Document\"\n                                name=\"policy_docs\"\n                                bucket=\"policy-documents\"\n                                onUploadComplete={handleFileUpload}\n                                existingFile={formData.policy_docs && formData.policy_docs.length > 0 ? { url: formData.policy_docs[0], name: 'Policy Document' } : undefined}\n                            />\n                        </div>\n                    </section>\n\n                    <div className=\"flex justify-end space-x-4 pt-6 border-t\">\n                        <button\n                            type=\"button\"\n                            onClick={onClose}\n                            className=\"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\"\n                            disabled={loading}\n                        >\n                            Cancel\n                        </button>\n                        <button\n                            type=\"submit\"\n                            className=\"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center\"\n                            disabled={loading}\n                        >\n                            {loading ? (\n                                <>\n                                    <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                                    Saving...\n                                </>\n                            ) : (\n                                <>\n                                    <Save className=\"w-4 h-4 mr-2\" />\n                                    Save Policy\n                                </>\n                            )}\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6843, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/forms/CommercialPolicyForm.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { X, Save, Loader2 } from 'lucide-react';\nimport { CommercialPolicy, CommercialPolicyFormData } from '@/types';\nimport FormInput from './FormInput';\nimport FileUpload from './FileUpload';\nimport { addCommercialPolicy, updateCommercialPolicy } from '@/lib/db';\nimport { INSURANCE_COMPANIES } from '@/lib/constants';\nimport { formatDateForInput } from '@/lib/utils';\nimport {\n    validatePolicyNumber,\n    validatePremiumAmount,\n    validateDateRange\n} from '@/lib/validation';\n\ninterface CommercialPolicyFormProps {\n    userId: string;\n    initialData?: CommercialPolicy;\n    onClose: () => void;\n    onSuccess: () => void;\n}\n\nexport default function CommercialPolicyForm({ userId, initialData, onClose, onSuccess }: CommercialPolicyFormProps) {\n    const [loading, setLoading] = useState(false);\n    const [errors, setErrors] = useState<Record<string, string>>({});\n\n    const [formData, setFormData] = useState<CommercialPolicyFormData>({\n        lob_type: initialData?.lob_type || 'GPA',\n        company_name: initialData?.company_name || '',\n        policy_holder_name: initialData?.policy_holder_name || '',\n        policy_number: initialData?.policy_number || '',\n        insurer_name: initialData?.insurer_name || '',\n        premium_amount: initialData?.premium_amount || 0,\n        sum_insured: initialData?.sum_insured || 0,\n        expiry_date: initialData?.expiry_date ? new Date(initialData.expiry_date) : new Date(new Date().setFullYear(new Date().getFullYear() + 1)),\n        policy_docs: initialData?.policy_docs || [],\n    });\n\n    // Auto-calculate expiry date when it's a new policy (1 year from today - 1 day)\n    useEffect(() => {\n        if (!initialData) {\n            const today = new Date();\n            const expiryDate = new Date(today);\n            expiryDate.setFullYear(expiryDate.getFullYear() + 1);\n            expiryDate.setDate(expiryDate.getDate() - 1); // 1 day before\n            setFormData(prev => ({\n                ...prev,\n                expiry_date: expiryDate\n            }));\n        }\n    }, [initialData]);\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {\n        const { name, value, type } = e.target;\n\n        setFormData(prev => ({\n            ...prev,\n            [name]: type === 'number' ? Number(value) : value\n        }));\n\n        if (errors[name]) {\n            setErrors(prev => {\n                const newErrors = { ...prev };\n                delete newErrors[name];\n                return newErrors;\n            });\n        }\n    };\n\n    const handleDateChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const { name, value } = e.target;\n        setFormData(prev => ({\n            ...prev,\n            [name]: new Date(value)\n        }));\n    };\n\n    const validateForm = (): boolean => {\n        const newErrors: Record<string, string> = {};\n\n        if (!validatePolicyNumber(formData.policy_number || '')) {\n            newErrors.policy_number = 'Policy number is required';\n        }\n\n        if (!validatePremiumAmount(formData.premium_amount || 0)) {\n            newErrors.premium_amount = 'Invalid premium amount';\n        }\n\n        if (!formData.insurer_name) newErrors.insurer_name = 'Insurer name is required';\n        if (!formData.lob_type) newErrors.lob_type = 'LOB Type is required';\n\n        setErrors(newErrors);\n        return Object.keys(newErrors).length === 0;\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n\n        if (!validateForm()) return;\n\n        setLoading(true);\n        try {\n            const policyData = {\n                ...formData,\n                user_id: userId,\n                expiry_date: new Date(formData.expiry_date!),\n                policy_number: formData.policy_number || '',\n                insurer_name: formData.insurer_name || '',\n                premium_amount: formData.premium_amount || 0,\n                lob_type: formData.lob_type || 'GPA',\n                policy_docs: formData.policy_docs || [],\n            };\n\n            if (initialData?.id) {\n                await updateCommercialPolicy(initialData.id, policyData);\n            } else {\n                await addCommercialPolicy(policyData);\n            }\n\n            onSuccess();\n            onClose();\n        } catch (error) {\n            console.error('Error saving policy:', error);\n            setErrors(prev => ({ ...prev, submit: 'Failed to save policy. Please try again.' }));\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleFileUpload = (url: string) => {\n        setFormData(prev => ({\n            ...prev,\n            policy_docs: [...(prev.policy_docs || []), url]\n        }));\n    };\n\n    return (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto\">\n            <div className=\"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\n                <div className=\"flex items-center justify-between p-6 border-b sticky top-0 bg-white z-10\">\n                    <h2 className=\"text-xl font-bold text-gray-900\">\n                        {initialData ? 'Edit Commercial Policy' : 'Add New Commercial Policy'}\n                    </h2>\n                    <button onClick={onClose} className=\"text-gray-500 hover:text-gray-700\">\n                        <X className=\"w-6 h-6\" />\n                    </button>\n                </div>\n\n                <form onSubmit={handleSubmit} className=\"p-6 space-y-8\">\n                    {errors.submit && (\n                        <div className=\"bg-red-50 text-red-600 p-4 rounded-lg text-sm\">\n                            {errors.submit}\n                        </div>\n                    )}\n\n                    {/* Policy Details */}\n                    <section>\n                        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Policy Details</h3>\n                        <div className=\"grid md:grid-cols-3 gap-6\">\n                            <FormInput\n                                label=\"LOB Type\"\n                                name=\"lob_type\"\n                                type=\"select\"\n                                value={formData.lob_type || 'GPA'}\n                                onChange={handleChange}\n                                options={[\n                                    { value: 'GPA', label: 'GPA' },\n                                    { value: 'Fire', label: 'Fire' },\n                                    { value: 'Other', label: 'Other' }\n                                ]}\n                                required\n                            />\n                            <FormInput\n                                label=\"Company Name\"\n                                name=\"company_name\"\n                                value={formData.company_name || ''}\n                                onChange={handleChange}\n                                placeholder=\"e.g. Acme Corp\"\n                            />\n                            <FormInput\n                                label=\"Policy Holder Name\"\n                                name=\"policy_holder_name\"\n                                value={formData.policy_holder_name || ''}\n                                onChange={handleChange}\n                                placeholder=\"e.g. John Doe\"\n                            />\n                            <FormInput\n                                label=\"Policy Number\"\n                                name=\"policy_number\"\n                                value={formData.policy_number || ''}\n                                onChange={handleChange}\n                                placeholder=\"Enter policy number\"\n                                error={errors.policy_number}\n                                required\n                            />\n                            <FormInput\n                                label=\"Insurer Name\"\n                                name=\"insurer_name\"\n                                type=\"select\"\n                                value={formData.insurer_name || ''}\n                                onChange={handleChange}\n                                options={INSURANCE_COMPANIES.map(c => ({ value: c, label: c }))}\n                                error={errors.insurer_name}\n                                required\n                            />\n                            <FormInput\n                                label=\"Sum Insured (â‚¹)\"\n                                name=\"sum_insured\"\n                                type=\"number\"\n                                value={formData.sum_insured || ''}\n                                onChange={handleChange}\n                                placeholder=\"e.g. 500000\"\n                            />\n                            <FormInput\n                                label=\"Premium Amount (â‚¹)\"\n                                name=\"premium_amount\"\n                                type=\"number\"\n                                value={formData.premium_amount || ''}\n                                onChange={handleChange}\n                                error={errors.premium_amount}\n                                required\n                            />\n                            <FormInput\n                                label=\"Expiry Date\"\n                                name=\"expiry_date\"\n                                type=\"date\"\n                                value={formatDateForInput(formData.expiry_date)}\n                                onChange={handleDateChange as any}\n                                required\n                            />\n                        </div>\n                    </section>\n\n                    {/* Documents */}\n                    <section>\n                        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Documents</h3>\n                        <div className=\"grid md:grid-cols-3 gap-6\">\n                            <FileUpload\n                                label=\"Policy Document\"\n                                name=\"policy_docs\"\n                                bucket=\"policy-documents\"\n                                onUploadComplete={handleFileUpload}\n                                existingFile={formData.policy_docs && formData.policy_docs.length > 0 ? { url: formData.policy_docs[0], name: 'Policy Document' } : undefined}\n                            />\n                        </div>\n                    </section>\n\n                    <div className=\"flex justify-end space-x-4 pt-6 border-t\">\n                        <button\n                            type=\"button\"\n                            onClick={onClose}\n                            className=\"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\"\n                            disabled={loading}\n                        >\n                            Cancel\n                        </button>\n                        <button\n                            type=\"submit\"\n                            className=\"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center\"\n                            disabled={loading}\n                        >\n                            {loading ? (\n                                <>\n                                    <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                                    Saving...\n                                </>\n                            ) : (\n                                <>\n                                    <Save className=\"w-4 h-4 mr-2\" />\n                                    Save Policy\n                                </>\n                            )}\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAVA;;;;;;;;;AAuBe,SAAS,qBAAqB,EAAE,MAAM,EAAE,WAAW,EAAE,OAAO,EAAE,SAAS,EAA6B;;IAC/G,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,0LAAQ,EAAC;IACvC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,0LAAQ,EAAyB,CAAC;IAE9D,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,0LAAQ,EAA2B;QAC/D,UAAU,aAAa,YAAY;QACnC,cAAc,aAAa,gBAAgB;QAC3C,oBAAoB,aAAa,sBAAsB;QACvD,eAAe,aAAa,iBAAiB;QAC7C,cAAc,aAAa,gBAAgB;QAC3C,gBAAgB,aAAa,kBAAkB;QAC/C,aAAa,aAAa,eAAe;QACzC,aAAa,aAAa,cAAc,IAAI,KAAK,YAAY,WAAW,IAAI,IAAI,KAAK,IAAI,OAAO,WAAW,CAAC,IAAI,OAAO,WAAW,KAAK;QACvI,aAAa,aAAa,eAAe,EAAE;IAC/C;IAEA,gFAAgF;IAChF,IAAA,2LAAS;0CAAC;YACN,IAAI,CAAC,aAAa;gBACd,MAAM,QAAQ,IAAI;gBAClB,MAAM,aAAa,IAAI,KAAK;gBAC5B,WAAW,WAAW,CAAC,WAAW,WAAW,KAAK;gBAClD,WAAW,OAAO,CAAC,WAAW,OAAO,KAAK,IAAI,eAAe;gBAC7D;sDAAY,CAAA,OAAQ,CAAC;4BACjB,GAAG,IAAI;4BACP,aAAa;wBACjB,CAAC;;YACL;QACJ;yCAAG;QAAC;KAAY;IAEhB,MAAM,eAAe,CAAC;QAClB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,EAAE,MAAM;QAEtC,YAAY,CAAA,OAAQ,CAAC;gBACjB,GAAG,IAAI;gBACP,CAAC,KAAK,EAAE,SAAS,WAAW,OAAO,SAAS;YAChD,CAAC;QAED,IAAI,MAAM,CAAC,KAAK,EAAE;YACd,UAAU,CAAA;gBACN,MAAM,YAAY;oBAAE,GAAG,IAAI;gBAAC;gBAC5B,OAAO,SAAS,CAAC,KAAK;gBACtB,OAAO;YACX;QACJ;IACJ;IAEA,MAAM,mBAAmB,CAAC;QACtB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM;QAChC,YAAY,CAAA,OAAQ,CAAC;gBACjB,GAAG,IAAI;gBACP,CAAC,KAAK,EAAE,IAAI,KAAK;YACrB,CAAC;IACL;IAEA,MAAM,eAAe;QACjB,MAAM,YAAoC,CAAC;QAE3C,IAAI,CAAC,IAAA,6JAAoB,EAAC,SAAS,aAAa,IAAI,KAAK;YACrD,UAAU,aAAa,GAAG;QAC9B;QAEA,IAAI,CAAC,IAAA,8JAAqB,EAAC,SAAS,cAAc,IAAI,IAAI;YACtD,UAAU,cAAc,GAAG;QAC/B;QAEA,IAAI,CAAC,SAAS,YAAY,EAAE,UAAU,YAAY,GAAG;QACrD,IAAI,CAAC,SAAS,QAAQ,EAAE,UAAU,QAAQ,GAAG;QAE7C,UAAU;QACV,OAAO,OAAO,IAAI,CAAC,WAAW,MAAM,KAAK;IAC7C;IAEA,MAAM,eAAe,OAAO;QACxB,EAAE,cAAc;QAEhB,IAAI,CAAC,gBAAgB;QAErB,WAAW;QACX,IAAI;YACA,MAAM,aAAa;gBACf,GAAG,QAAQ;gBACX,SAAS;gBACT,aAAa,IAAI,KAAK,SAAS,WAAW;gBAC1C,eAAe,SAAS,aAAa,IAAI;gBACzC,cAAc,SAAS,YAAY,IAAI;gBACvC,gBAAgB,SAAS,cAAc,IAAI;gBAC3C,UAAU,SAAS,QAAQ,IAAI;gBAC/B,aAAa,SAAS,WAAW,IAAI,EAAE;YAC3C;YAEA,IAAI,aAAa,IAAI;gBACjB,MAAM,IAAA,uJAAsB,EAAC,YAAY,EAAE,EAAE;YACjD,OAAO;gBACH,MAAM,IAAA,oJAAmB,EAAC;YAC9B;YAEA;YACA;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,wBAAwB;YACtC,UAAU,CAAA,OAAQ,CAAC;oBAAE,GAAG,IAAI;oBAAE,QAAQ;gBAA2C,CAAC;QACtF,SAAU;YACN,WAAW;QACf;IACJ;IAEA,MAAM,mBAAmB,CAAC;QACtB,YAAY,CAAA,OAAQ,CAAC;gBACjB,GAAG,IAAI;gBACP,aAAa;uBAAK,KAAK,WAAW,IAAI,EAAE;oBAAG;iBAAI;YACnD,CAAC;IACL;IAEA,qBACI,8MAAC;QAAI,WAAU;kBACX,cAAA,8MAAC;YAAI,WAAU;;8BACX,8MAAC;oBAAI,WAAU;;sCACX,8MAAC;4BAAG,WAAU;sCACT,cAAc,2BAA2B;;;;;;sCAE9C,8MAAC;4BAAO,SAAS;4BAAS,WAAU;sCAChC,cAAA,8MAAC,qNAAC;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAIrB,8MAAC;oBAAK,UAAU;oBAAc,WAAU;;wBACnC,OAAO,MAAM,kBACV,8MAAC;4BAAI,WAAU;sCACV,OAAO,MAAM;;;;;;sCAKtB,8MAAC;;8CACG,8MAAC;oCAAG,WAAU;8CAA2C;;;;;;8CACzD,8MAAC;oCAAI,WAAU;;sDACX,8MAAC,gKAAS;4CACN,OAAM;4CACN,MAAK;4CACL,MAAK;4CACL,OAAO,SAAS,QAAQ,IAAI;4CAC5B,UAAU;4CACV,SAAS;gDACL;oDAAE,OAAO;oDAAO,OAAO;gDAAM;gDAC7B;oDAAE,OAAO;oDAAQ,OAAO;gDAAO;gDAC/B;oDAAE,OAAO;oDAAS,OAAO;gDAAQ;6CACpC;4CACD,QAAQ;;;;;;sDAEZ,8MAAC,gKAAS;4CACN,OAAM;4CACN,MAAK;4CACL,OAAO,SAAS,YAAY,IAAI;4CAChC,UAAU;4CACV,aAAY;;;;;;sDAEhB,8MAAC,gKAAS;4CACN,OAAM;4CACN,MAAK;4CACL,OAAO,SAAS,kBAAkB,IAAI;4CACtC,UAAU;4CACV,aAAY;;;;;;sDAEhB,8MAAC,gKAAS;4CACN,OAAM;4CACN,MAAK;4CACL,OAAO,SAAS,aAAa,IAAI;4CACjC,UAAU;4CACV,aAAY;4CACZ,OAAO,OAAO,aAAa;4CAC3B,QAAQ;;;;;;sDAEZ,8MAAC,gKAAS;4CACN,OAAM;4CACN,MAAK;4CACL,MAAK;4CACL,OAAO,SAAS,YAAY,IAAI;4CAChC,UAAU;4CACV,SAAS,2JAAmB,CAAC,GAAG,CAAC,CAAA,IAAK,CAAC;oDAAE,OAAO;oDAAG,OAAO;gDAAE,CAAC;4CAC7D,OAAO,OAAO,YAAY;4CAC1B,QAAQ;;;;;;sDAEZ,8MAAC,gKAAS;4CACN,OAAM;4CACN,MAAK;4CACL,MAAK;4CACL,OAAO,SAAS,WAAW,IAAI;4CAC/B,UAAU;4CACV,aAAY;;;;;;sDAEhB,8MAAC,gKAAS;4CACN,OAAM;4CACN,MAAK;4CACL,MAAK;4CACL,OAAO,SAAS,cAAc,IAAI;4CAClC,UAAU;4CACV,OAAO,OAAO,cAAc;4CAC5B,QAAQ;;;;;;sDAEZ,8MAAC,gKAAS;4CACN,OAAM;4CACN,MAAK;4CACL,MAAK;4CACL,OAAO,IAAA,sJAAkB,EAAC,SAAS,WAAW;4CAC9C,UAAU;4CACV,QAAQ;;;;;;;;;;;;;;;;;;sCAMpB,8MAAC;;8CACG,8MAAC;oCAAG,WAAU;8CAA2C;;;;;;8CACzD,8MAAC;oCAAI,WAAU;8CACX,cAAA,8MAAC,iKAAU;wCACP,OAAM;wCACN,MAAK;wCACL,QAAO;wCACP,kBAAkB;wCAClB,cAAc,SAAS,WAAW,IAAI,SAAS,WAAW,CAAC,MAAM,GAAG,IAAI;4CAAE,KAAK,SAAS,WAAW,CAAC,EAAE;4CAAE,MAAM;wCAAkB,IAAI;;;;;;;;;;;;;;;;;sCAKhJ,8MAAC;4BAAI,WAAU;;8CACX,8MAAC;oCACG,MAAK;oCACL,SAAS;oCACT,WAAU;oCACV,UAAU;8CACb;;;;;;8CAGD,8MAAC;oCACG,MAAK;oCACL,WAAU;oCACV,UAAU;8CAET,wBACG;;0DACI,8MAAC,gPAAO;gDAAC,WAAU;;;;;;4CAA8B;;qEAIrD;;0DACI,8MAAC,8NAAI;gDAAC,WAAU;;;;;;4CAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUrE;GAhQwB;KAAA"}},
    {"offset": {"line": 7287, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/forms/LifePolicyForm.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { X, Save, Loader2 } from 'lucide-react';\nimport FormInput from './FormInput';\nimport FileUpload from './FileUpload';\nimport { addLifePolicy } from '@/lib/db';\nimport { INSURANCE_COMPANIES } from '@/lib/constants';\n\ninterface LifePolicyFormProps {\n    userId: string;\n    initialData?: any;\n    onClose: () => void;\n    onSuccess: () => void;\n}\n\nexport default function LifePolicyForm({ userId, initialData, onClose, onSuccess }: LifePolicyFormProps) {\n    const [loading, setLoading] = useState(false);\n    const [errors, setErrors] = useState<Record<string, string>>({});\n    const [formData, setFormData] = useState({\n        policy_number: initialData?.policy_number || '',\n        insurer_name: initialData?.insurer_name || '',\n        premium_amount: initialData?.premium_amount || 0,\n        sum_assured: initialData?.sum_assured || 0,\n        nominee_name: initialData?.nominee_name || '',\n        policy_start_date: initialData?.policy_start_date ? new Date(initialData.policy_start_date) : new Date(),\n        policy_end_date: initialData?.policy_end_date ? new Date(initialData.policy_end_date) : new Date(new Date().setFullYear(new Date().getFullYear() + 20)),\n        document_url: initialData?.document_url || '',\n    });\n\n    // Auto-calculate end date when start date changes (1 day before same date next year)\n    useEffect(() => {\n        if (formData.policy_start_date && !initialData) {\n            const startDate = new Date(formData.policy_start_date);\n            const endDate = new Date(startDate);\n            endDate.setFullYear(endDate.getFullYear() + 1);\n            endDate.setDate(endDate.getDate() - 1); // 1 day before\n            setFormData(prev => ({\n                ...prev,\n                policy_end_date: endDate\n            }));\n        }\n    }, [formData.policy_start_date, initialData]);\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {\n        const { name, value, type } = e.target;\n        setFormData(prev => ({\n            ...prev,\n            [name]: type === 'number' ? Number(value) : value\n        }));\n    };\n\n    const handleDateChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const { name, value } = e.target;\n        setFormData(prev => ({ ...prev, [name]: new Date(value) }));\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setLoading(true);\n        try {\n            await addLifePolicy({\n                ...formData,\n                user_id: userId,\n                status: 'Active'\n            });\n            onSuccess();\n        } catch (error) {\n            console.error('Error saving life policy:', error);\n            setErrors({ submit: 'Failed to save policy' });\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900\">Life Insurance Details</h3>\n\n            <div className=\"grid md:grid-cols-2 gap-6\">\n                <FormInput label=\"Policy Number\" name=\"policy_number\" value={formData.policy_number} onChange={handleChange} required />\n                <FormInput label=\"Policy Number\" name=\"policy_number\" value={formData.policy_number} onChange={handleChange} required />\n                <FormInput\n                    label=\"Insurer Name\"\n                    name=\"insurer_name\"\n                    type=\"select\"\n                    value={formData.insurer_name}\n                    onChange={handleChange}\n                    options={INSURANCE_COMPANIES.map(c => ({ value: c, label: c }))}\n                    required\n                />\n                <FormInput label=\"Premium Amount (â‚¹)\" name=\"premium_amount\" type=\"number\" value={formData.premium_amount} onChange={handleChange} required />\n                <FormInput label=\"Sum Assured (â‚¹)\" name=\"sum_assured\" type=\"number\" value={formData.sum_assured} onChange={handleChange} required />\n                <FormInput label=\"Nominee Name\" name=\"nominee_name\" value={formData.nominee_name} onChange={handleChange} required />\n                <FormInput label=\"Start Date\" name=\"policy_start_date\" type=\"date\" value={formData.policy_start_date.toISOString().split('T')[0]} onChange={handleDateChange as any} required />\n                <FormInput label=\"End Date\" name=\"policy_end_date\" type=\"date\" value={formData.policy_end_date.toISOString().split('T')[0]} onChange={handleDateChange as any} required />\n            </div>\n\n            <FileUpload\n                label=\"Policy Document\"\n                name=\"document_url\"\n                bucket=\"policy-documents\"\n                onUploadComplete={(url) => setFormData(prev => ({ ...prev, document_url: url }))}\n            />\n\n            <div className=\"flex justify-end space-x-4 pt-4 border-t\">\n                <button type=\"button\" onClick={onClose} className=\"px-4 py-2 border rounded-lg hover:bg-gray-50\">Cancel</button>\n                <button type=\"submit\" disabled={loading} className=\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center\">\n                    {loading ? <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" /> : <Save className=\"w-4 h-4 mr-2\" />}\n                    Save Policy\n                </button>\n            </div>\n        </form>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7568, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/forms/TravelPolicyForm.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { X, Save, Loader2 } from 'lucide-react';\nimport FormInput from './FormInput';\nimport FileUpload from './FileUpload';\nimport { addTravelPolicy } from '@/lib/db';\nimport { INSURANCE_COMPANIES } from '@/lib/constants';\n\ninterface TravelPolicyFormProps {\n    userId: string;\n    initialData?: any;\n    onClose: () => void;\n    onSuccess: () => void;\n}\n\nexport default function TravelPolicyForm({ userId, initialData, onClose, onSuccess }: TravelPolicyFormProps) {\n    const [loading, setLoading] = useState(false);\n    const [errors, setErrors] = useState<Record<string, string>>({});\n    const [formData, setFormData] = useState({\n        policy_number: initialData?.policy_number || '',\n        insurer_name: initialData?.insurer_name || '',\n        premium_amount: initialData?.premium_amount || 0,\n        destination: initialData?.destination || '',\n        trip_type: initialData?.trip_type || 'Single Trip',\n        policy_start_date: initialData?.policy_start_date ? new Date(initialData.policy_start_date) : new Date(),\n        policy_end_date: initialData?.policy_end_date ? new Date(initialData.policy_end_date) : new Date(new Date().setDate(new Date().getDate() + 7)),\n        document_url: initialData?.document_url || '',\n    });\n\n    // Auto-calculate end date when start date changes (1 day before same date next year)\n    useEffect(() => {\n        if (formData.policy_start_date && !initialData) {\n            const startDate = new Date(formData.policy_start_date);\n            const endDate = new Date(startDate);\n            endDate.setFullYear(endDate.getFullYear() + 1);\n            endDate.setDate(endDate.getDate() - 1); // 1 day before\n            setFormData(prev => ({\n                ...prev,\n                policy_end_date: endDate\n            }));\n        }\n    }, [formData.policy_start_date, initialData]);\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {\n        const { name, value, type } = e.target;\n        setFormData(prev => ({\n            ...prev,\n            [name]: type === 'number' ? Number(value) : value\n        }));\n    };\n\n    const handleDateChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const { name, value } = e.target;\n        setFormData(prev => ({ ...prev, [name]: new Date(value) }));\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setLoading(true);\n        try {\n            await addTravelPolicy({\n                ...formData,\n                user_id: userId,\n                status: 'Active'\n            });\n            onSuccess();\n        } catch (error) {\n            console.error('Error saving travel policy:', error);\n            setErrors({ submit: 'Failed to save policy' });\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900\">Travel Insurance Details</h3>\n\n            <div className=\"grid md:grid-cols-2 gap-6\">\n                <FormInput label=\"Policy Number\" name=\"policy_number\" value={formData.policy_number} onChange={handleChange} required />\n                <FormInput\n                    label=\"Insurer Name\"\n                    name=\"insurer_name\"\n                    type=\"select\"\n                    value={formData.insurer_name}\n                    onChange={handleChange}\n                    options={INSURANCE_COMPANIES.map(c => ({ value: c, label: c }))}\n                    required\n                />\n                <FormInput label=\"Premium Amount (â‚¹)\" name=\"premium_amount\" type=\"number\" value={formData.premium_amount} onChange={handleChange} required />\n                <FormInput label=\"Destination\" name=\"destination\" value={formData.destination} onChange={handleChange} required />\n                <FormInput\n                    label=\"Trip Type\"\n                    name=\"trip_type\"\n                    type=\"select\"\n                    value={formData.trip_type}\n                    onChange={handleChange}\n                    options={[{ value: 'Single Trip', label: 'Single Trip' }, { value: 'Multi Trip', label: 'Multi Trip' }]}\n                    required\n                />\n                <FormInput label=\"Start Date\" name=\"policy_start_date\" type=\"date\" value={formData.policy_start_date.toISOString().split('T')[0]} onChange={handleDateChange as any} required />\n                <FormInput label=\"End Date\" name=\"policy_end_date\" type=\"date\" value={formData.policy_end_date.toISOString().split('T')[0]} onChange={handleDateChange as any} required />\n            </div>\n\n            <FileUpload\n                label=\"Policy Document\"\n                name=\"document_url\"\n                bucket=\"policy-documents\"\n                onUploadComplete={(url) => setFormData(prev => ({ ...prev, document_url: url }))}\n            />\n\n            <div className=\"flex justify-end space-x-4 pt-4 border-t\">\n                <button type=\"button\" onClick={onClose} className=\"px-4 py-2 border rounded-lg hover:bg-gray-50\">Cancel</button>\n                <button type=\"submit\" disabled={loading} className=\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center\">\n                    {loading ? <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" /> : <Save className=\"w-4 h-4 mr-2\" />}\n                    Save Policy\n                </button>\n            </div>\n        </form>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7848, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/forms/CyberPolicyForm.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { X, Save, Loader2 } from 'lucide-react';\nimport FormInput from './FormInput';\nimport FileUpload from './FileUpload';\nimport { addCyberPolicy } from '@/lib/db';\nimport { INSURANCE_COMPANIES } from '@/lib/constants';\n\ninterface CyberPolicyFormProps {\n    userId: string;\n    initialData?: any;\n    onClose: () => void;\n    onSuccess: () => void;\n}\n\nexport default function CyberPolicyForm({ userId, initialData, onClose, onSuccess }: CyberPolicyFormProps) {\n    const [loading, setLoading] = useState(false);\n    const [errors, setErrors] = useState<Record<string, string>>({});\n    const [formData, setFormData] = useState({\n        policy_number: initialData?.policy_number || '',\n        insurer_name: initialData?.insurer_name || '',\n        premium_amount: initialData?.premium_amount || 0,\n        sum_insured: initialData?.sum_insured || 0,\n        cyber_risk_type: initialData?.cyber_risk_type || 'Personal',\n        policy_start_date: initialData?.policy_start_date ? new Date(initialData.policy_start_date) : new Date(),\n        policy_end_date: initialData?.policy_end_date ? new Date(initialData.policy_end_date) : new Date(new Date().setFullYear(new Date().getFullYear() + 1)),\n        document_url: initialData?.document_url || '',\n    });\n\n    // Auto-calculate end date when start date changes (1 day before same date next year)\n    useEffect(() => {\n        if (formData.policy_start_date && !initialData) {\n            const startDate = new Date(formData.policy_start_date);\n            const endDate = new Date(startDate);\n            endDate.setFullYear(endDate.getFullYear() + 1);\n            endDate.setDate(endDate.getDate() - 1); // 1 day before\n            setFormData(prev => ({\n                ...prev,\n                policy_end_date: endDate\n            }));\n        }\n    }, [formData.policy_start_date, initialData]);\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {\n        const { name, value, type } = e.target;\n        setFormData(prev => ({\n            ...prev,\n            [name]: type === 'number' ? Number(value) : value\n        }));\n    };\n\n    const handleDateChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const { name, value } = e.target;\n        setFormData(prev => ({ ...prev, [name]: new Date(value) }));\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setLoading(true);\n        try {\n            await addCyberPolicy({\n                ...formData,\n                user_id: userId,\n                status: 'Active'\n            });\n            onSuccess();\n        } catch (error) {\n            console.error('Error saving cyber policy:', error);\n            setErrors({ submit: 'Failed to save policy' });\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900\">Cyber Insurance Details</h3>\n\n            <div className=\"grid md:grid-cols-2 gap-6\">\n                <FormInput label=\"Policy Number\" name=\"policy_number\" value={formData.policy_number} onChange={handleChange} required />\n                <FormInput label=\"Policy Number\" name=\"policy_number\" value={formData.policy_number} onChange={handleChange} required />\n                <FormInput\n                    label=\"Insurer Name\"\n                    name=\"insurer_name\"\n                    type=\"select\"\n                    value={formData.insurer_name}\n                    onChange={handleChange}\n                    options={INSURANCE_COMPANIES.map(c => ({ value: c, label: c }))}\n                    required\n                />\n                <FormInput label=\"Premium Amount (â‚¹)\" name=\"premium_amount\" type=\"number\" value={formData.premium_amount} onChange={handleChange} required />\n                <FormInput label=\"Sum Insured (â‚¹)\" name=\"sum_insured\" type=\"number\" value={formData.sum_insured} onChange={handleChange} required />\n                <FormInput\n                    label=\"Risk Type\"\n                    name=\"cyber_risk_type\"\n                    type=\"select\"\n                    value={formData.cyber_risk_type}\n                    onChange={handleChange}\n                    options={[{ value: 'Personal', label: 'Personal' }, { value: 'Business', label: 'Business' }]}\n                    required\n                />\n                <FormInput label=\"Start Date\" name=\"policy_start_date\" type=\"date\" value={formData.policy_start_date.toISOString().split('T')[0]} onChange={handleDateChange as any} required />\n                <FormInput label=\"End Date\" name=\"policy_end_date\" type=\"date\" value={formData.policy_end_date.toISOString().split('T')[0]} onChange={handleDateChange as any} required />\n            </div>\n\n            <FileUpload\n                label=\"Policy Document\"\n                name=\"document_url\"\n                bucket=\"policy-documents\"\n                onUploadComplete={(url) => setFormData(prev => ({ ...prev, document_url: url }))}\n            />\n\n            <div className=\"flex justify-end space-x-4 pt-4 border-t\">\n                <button type=\"button\" onClick={onClose} className=\"px-4 py-2 border rounded-lg hover:bg-gray-50\">Cancel</button>\n                <button type=\"submit\" disabled={loading} className=\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center\">\n                    {loading ? <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" /> : <Save className=\"w-4 h-4 mr-2\" />}\n                    Save Policy\n                </button>\n            </div>\n        </form>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8140, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/policies/AddPolicyModal.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport { X, Car, Heart, Briefcase, ChevronRight } from 'lucide-react';\nimport MotorPolicyForm from '@/components/forms/MotorPolicyForm';\nimport HealthPolicyForm from '@/components/forms/HealthPolicyForm';\nimport CommercialPolicyForm from '@/components/forms/CommercialPolicyForm';\n\nimport LifePolicyForm from '@/components/forms/LifePolicyForm';\nimport TravelPolicyForm from '@/components/forms/TravelPolicyForm';\nimport CyberPolicyForm from '@/components/forms/CyberPolicyForm';\n\ninterface AddPolicyModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    userId: string;\n    onSuccess: () => void;\n    initialType?: PolicyType;\n}\n\nexport type PolicyType = 'Motor' | 'Health' | 'Commercial' | 'Life' | 'Travel' | 'Cyber';\n\nexport default function AddPolicyModal({ isOpen, onClose, userId, onSuccess, initialType = undefined }: AddPolicyModalProps) {\n    const [selectedType, setSelectedType] = useState<PolicyType | undefined>(initialType);\n\n    // Reset selected type when modal opens/closes or initialType changes\n    React.useEffect(() => {\n        if (isOpen) {\n            setSelectedType(initialType);\n        }\n    }, [isOpen, initialType]);\n\n    if (!isOpen) return null;\n\n    const handleSuccess = () => {\n        onSuccess();\n        onClose();\n        setSelectedType(undefined);\n    };\n\n    const renderForm = () => {\n        switch (selectedType) {\n            case 'Motor':\n                return <MotorPolicyForm userId={userId} onClose={onClose} onSuccess={handleSuccess} />;\n            case 'Health':\n                return <HealthPolicyForm userId={userId} onClose={onClose} onSuccess={handleSuccess} />;\n            case 'Commercial':\n                return <CommercialPolicyForm userId={userId} onClose={onClose} onSuccess={handleSuccess} />;\n            case 'Life':\n                return <LifePolicyForm userId={userId} onClose={onClose} onSuccess={handleSuccess} />;\n            case 'Travel':\n                return <TravelPolicyForm userId={userId} onClose={onClose} onSuccess={handleSuccess} />;\n            case 'Cyber':\n                return <CyberPolicyForm userId={userId} onClose={onClose} onSuccess={handleSuccess} />;\n            default:\n                return null;\n        }\n    };\n\n    return (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm\">\n            <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n                {selectedType ? (\n                    <div>\n                        <div className=\"flex items-center justify-between p-6 border-b border-gray-100\">\n                            <div className=\"flex items-center gap-2\">\n                                <button\n                                    onClick={() => setSelectedType(undefined)}\n                                    className=\"text-sm text-gray-500 hover:text-gray-900\"\n                                >\n                                    Select Type\n                                </button>\n                                <ChevronRight className=\"w-4 h-4 text-gray-400\" />\n                                <h3 className=\"text-lg font-bold text-gray-900\">Add {selectedType} Policy</h3>\n                            </div>\n                            <button onClick={onClose} className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\">\n                                <X className=\"w-5 h-5 text-gray-500\" />\n                            </button>\n                        </div>\n                        <div className=\"p-6\">\n                            {renderForm()}\n                        </div>\n                    </div>\n                ) : (\n                    <div className=\"p-8\">\n                        <div className=\"flex items-center justify-between mb-8\">\n                            <div>\n                                <h2 className=\"text-2xl font-bold text-gray-900\">Add New Policy</h2>\n                                <p className=\"text-gray-500 mt-1\">Select the type of policy you want to add</p>\n                            </div>\n                            <button onClick={onClose} className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\">\n                                <X className=\"w-5 h-5 text-gray-500\" />\n                            </button>\n                        </div>\n\n                        <div className=\"grid gap-4\">\n                            <button\n                                onClick={() => setSelectedType('Motor')}\n                                className=\"flex items-center p-4 border border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group text-left\"\n                            >\n                                <div className=\"p-3 bg-blue-100 text-blue-600 rounded-lg group-hover:bg-blue-200 transition-colors\">\n                                    <Car className=\"w-6 h-6\" />\n                                </div>\n                                <div className=\"ml-4\">\n                                    <h3 className=\"font-semibold text-gray-900 group-hover:text-blue-700\">Motor Insurance</h3>\n                                    <p className=\"text-sm text-gray-500\">Car, Bike, and other vehicle policies</p>\n                                </div>\n                                <ChevronRight className=\"w-5 h-5 text-gray-300 ml-auto group-hover:text-blue-500\" />\n                            </button>\n\n                            <button\n                                onClick={() => setSelectedType('Health')}\n                                className=\"flex items-center p-4 border border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition-all group text-left\"\n                            >\n                                <div className=\"p-3 bg-pink-100 text-pink-600 rounded-lg group-hover:bg-pink-200 transition-colors\">\n                                    <Heart className=\"w-6 h-6\" />\n                                </div>\n                                <div className=\"ml-4\">\n                                    <h3 className=\"font-semibold text-gray-900 group-hover:text-pink-700\">Health Insurance</h3>\n                                    <p className=\"text-sm text-gray-500\">Individual and Family Floater plans</p>\n                                </div>\n                                <ChevronRight className=\"w-5 h-5 text-gray-300 ml-auto group-hover:text-pink-500\" />\n                            </button>\n\n                            <button\n                                onClick={() => setSelectedType('Commercial')}\n                                className=\"flex items-center p-4 border border-gray-200 rounded-xl hover:border-purple-500 hover:bg-purple-50 transition-all group text-left\"\n                            >\n                                <div className=\"p-3 bg-purple-100 text-purple-600 rounded-lg group-hover:bg-purple-200 transition-colors\">\n                                    <Briefcase className=\"w-6 h-6\" />\n                                </div>\n                                <div className=\"ml-4\">\n                                    <h3 className=\"font-semibold text-gray-900 group-hover:text-purple-700\">Commercial Insurance</h3>\n                                    <p className=\"text-sm text-gray-500\">Fire, Marine, and Liability policies</p>\n                                </div>\n                                <ChevronRight className=\"w-5 h-5 text-gray-300 ml-auto group-hover:text-purple-500\" />\n                            </button>\n\n                            <button\n                                onClick={() => setSelectedType('Life')}\n                                className=\"flex items-center p-4 border border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition-all group text-left\"\n                            >\n                                <div className=\"p-3 bg-pink-100 text-pink-600 rounded-lg group-hover:bg-pink-200 transition-colors\">\n                                    <Heart className=\"w-6 h-6\" />\n                                </div>\n                                <div className=\"ml-4\">\n                                    <h3 className=\"font-semibold text-gray-900 group-hover:text-pink-700\">Life Insurance</h3>\n                                    <p className=\"text-sm text-gray-500\">Term life and endowment plans</p>\n                                </div>\n                                <ChevronRight className=\"w-5 h-5 text-gray-300 ml-auto group-hover:text-pink-500\" />\n                            </button>\n\n                            <button\n                                onClick={() => setSelectedType('Travel')}\n                                className=\"flex items-center p-4 border border-gray-200 rounded-xl hover:border-orange-500 hover:bg-orange-50 transition-all group text-left\"\n                            >\n                                <div className=\"p-3 bg-orange-100 text-orange-600 rounded-lg group-hover:bg-orange-200 transition-colors\">\n                                    <Briefcase className=\"w-6 h-6\" />\n                                </div>\n                                <div className=\"ml-4\">\n                                    <h3 className=\"font-semibold text-gray-900 group-hover:text-orange-700\">Travel Insurance</h3>\n                                    <p className=\"text-sm text-gray-500\">Domestic and International travel</p>\n                                </div>\n                                <ChevronRight className=\"w-5 h-5 text-gray-300 ml-auto group-hover:text-orange-500\" />\n                            </button>\n\n                            <button\n                                onClick={() => setSelectedType('Cyber')}\n                                className=\"flex items-center p-4 border border-gray-200 rounded-xl hover:border-indigo-500 hover:bg-indigo-50 transition-all group text-left\"\n                            >\n                                <div className=\"p-3 bg-indigo-100 text-indigo-600 rounded-lg group-hover:bg-indigo-200 transition-colors\">\n                                    <Briefcase className=\"w-6 h-6\" />\n                                </div>\n                                <div className=\"ml-4\">\n                                    <h3 className=\"font-semibold text-gray-900 group-hover:text-indigo-700\">Cyber Insurance</h3>\n                                    <p className=\"text-sm text-gray-500\">Protection against digital threats</p>\n                                </div>\n                                <ChevronRight className=\"w-5 h-5 text-gray-300 ml-auto group-hover:text-indigo-500\" />\n                            </button>\n                        </div>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;;;AAVA;;;;;;;;;AAsBe,SAAS,eAAe,EAAE,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,SAAS,EAAE,cAAc,SAAS,EAAuB;;IACvH,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,0LAAQ,EAAyB;IAEzE,qEAAqE;IACrE,yLAAK,CAAC,SAAS;oCAAC;YACZ,IAAI,QAAQ;gBACR,gBAAgB;YACpB;QACJ;mCAAG;QAAC;QAAQ;KAAY;IAExB,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,gBAAgB;QAClB;QACA;QACA,gBAAgB;IACpB;IAEA,MAAM,aAAa;QACf,OAAQ;YACJ,KAAK;gBACD,qBAAO,8MAAC,sKAAe;oBAAC,QAAQ;oBAAQ,SAAS;oBAAS,WAAW;;;;;;YACzE,KAAK;gBACD,qBAAO,8MAAC,uKAAgB;oBAAC,QAAQ;oBAAQ,SAAS;oBAAS,WAAW;;;;;;YAC1E,KAAK;gBACD,qBAAO,8MAAC,2KAAoB;oBAAC,QAAQ;oBAAQ,SAAS;oBAAS,WAAW;;;;;;YAC9E,KAAK;gBACD,qBAAO,8MAAC,qKAAc;oBAAC,QAAQ;oBAAQ,SAAS;oBAAS,WAAW;;;;;;YACxE,KAAK;gBACD,qBAAO,8MAAC,uKAAgB;oBAAC,QAAQ;oBAAQ,SAAS;oBAAS,WAAW;;;;;;YAC1E,KAAK;gBACD,qBAAO,8MAAC,sKAAe;oBAAC,QAAQ;oBAAQ,SAAS;oBAAS,WAAW;;;;;;YACzE;gBACI,OAAO;QACf;IACJ;IAEA,qBACI,8MAAC;QAAI,WAAU;kBACX,cAAA,8MAAC;YAAI,WAAU;sBACV,6BACG,8MAAC;;kCACG,8MAAC;wBAAI,WAAU;;0CACX,8MAAC;gCAAI,WAAU;;kDACX,8MAAC;wCACG,SAAS,IAAM,gBAAgB;wCAC/B,WAAU;kDACb;;;;;;kDAGD,8MAAC,0PAAY;wCAAC,WAAU;;;;;;kDACxB,8MAAC;wCAAG,WAAU;;4CAAkC;4CAAK;4CAAa;;;;;;;;;;;;;0CAEtE,8MAAC;gCAAO,SAAS;gCAAS,WAAU;0CAChC,cAAA,8MAAC,qNAAC;oCAAC,WAAU;;;;;;;;;;;;;;;;;kCAGrB,8MAAC;wBAAI,WAAU;kCACV;;;;;;;;;;;qCAIT,8MAAC;gBAAI,WAAU;;kCACX,8MAAC;wBAAI,WAAU;;0CACX,8MAAC;;kDACG,8MAAC;wCAAG,WAAU;kDAAmC;;;;;;kDACjD,8MAAC;wCAAE,WAAU;kDAAqB;;;;;;;;;;;;0CAEtC,8MAAC;gCAAO,SAAS;gCAAS,WAAU;0CAChC,cAAA,8MAAC,qNAAC;oCAAC,WAAU;;;;;;;;;;;;;;;;;kCAIrB,8MAAC;wBAAI,WAAU;;0CACX,8MAAC;gCACG,SAAS,IAAM,gBAAgB;gCAC/B,WAAU;;kDAEV,8MAAC;wCAAI,WAAU;kDACX,cAAA,8MAAC,2NAAG;4CAAC,WAAU;;;;;;;;;;;kDAEnB,8MAAC;wCAAI,WAAU;;0DACX,8MAAC;gDAAG,WAAU;0DAAwD;;;;;;0DACtE,8MAAC;gDAAE,WAAU;0DAAwB;;;;;;;;;;;;kDAEzC,8MAAC,0PAAY;wCAAC,WAAU;;;;;;;;;;;;0CAG5B,8MAAC;gCACG,SAAS,IAAM,gBAAgB;gCAC/B,WAAU;;kDAEV,8MAAC;wCAAI,WAAU;kDACX,cAAA,8MAAC,iOAAK;4CAAC,WAAU;;;;;;;;;;;kDAErB,8MAAC;wCAAI,WAAU;;0DACX,8MAAC;gDAAG,WAAU;0DAAwD;;;;;;0DACtE,8MAAC;gDAAE,WAAU;0DAAwB;;;;;;;;;;;;kDAEzC,8MAAC,0PAAY;wCAAC,WAAU;;;;;;;;;;;;0CAG5B,8MAAC;gCACG,SAAS,IAAM,gBAAgB;gCAC/B,WAAU;;kDAEV,8MAAC;wCAAI,WAAU;kDACX,cAAA,8MAAC,6OAAS;4CAAC,WAAU;;;;;;;;;;;kDAEzB,8MAAC;wCAAI,WAAU;;0DACX,8MAAC;gDAAG,WAAU;0DAA0D;;;;;;0DACxE,8MAAC;gDAAE,WAAU;0DAAwB;;;;;;;;;;;;kDAEzC,8MAAC,0PAAY;wCAAC,WAAU;;;;;;;;;;;;0CAG5B,8MAAC;gCACG,SAAS,IAAM,gBAAgB;gCAC/B,WAAU;;kDAEV,8MAAC;wCAAI,WAAU;kDACX,cAAA,8MAAC,iOAAK;4CAAC,WAAU;;;;;;;;;;;kDAErB,8MAAC;wCAAI,WAAU;;0DACX,8MAAC;gDAAG,WAAU;0DAAwD;;;;;;0DACtE,8MAAC;gDAAE,WAAU;0DAAwB;;;;;;;;;;;;kDAEzC,8MAAC,0PAAY;wCAAC,WAAU;;;;;;;;;;;;0CAG5B,8MAAC;gCACG,SAAS,IAAM,gBAAgB;gCAC/B,WAAU;;kDAEV,8MAAC;wCAAI,WAAU;kDACX,cAAA,8MAAC,6OAAS;4CAAC,WAAU;;;;;;;;;;;kDAEzB,8MAAC;wCAAI,WAAU;;0DACX,8MAAC;gDAAG,WAAU;0DAA0D;;;;;;0DACxE,8MAAC;gDAAE,WAAU;0DAAwB;;;;;;;;;;;;kDAEzC,8MAAC,0PAAY;wCAAC,WAAU;;;;;;;;;;;;0CAG5B,8MAAC;gCACG,SAAS,IAAM,gBAAgB;gCAC/B,WAAU;;kDAEV,8MAAC;wCAAI,WAAU;kDACX,cAAA,8MAAC,6OAAS;4CAAC,WAAU;;;;;;;;;;;kDAEzB,8MAAC;wCAAI,WAAU;;0DACX,8MAAC;gDAAG,WAAU;0DAA0D;;;;;;0DACxE,8MAAC;gDAAE,WAAU;0DAAwB;;;;;;;;;;;;kDAEzC,8MAAC,0PAAY;wCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQxD;GAnKwB;KAAA"}},
    {"offset": {"line": 8758, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/dashboard/PolicyTable.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useMemo } from 'react';\nimport { MotorPolicy, HealthPolicy, CommercialPolicy } from '@/types';\nimport { calculatePolicyStatus, formatCurrency } from '@/lib/utils';\nimport { Car, Heart, Briefcase, Eye, Plus, Plane, Umbrella, Shield, Search, ArrowUpDown, ArrowUp, ArrowDown } from 'lucide-react';\nimport { useRouter } from 'next/navigation';\nimport AddPolicyModal from '@/components/policies/AddPolicyModal';\n\ntype PolicyType = 'Motor' | 'Health' | 'Travel' | 'Commercial' | 'Life' | 'Cyber';\n\ninterface PolicyTableProps {\n    policyType: PolicyType;\n    motorPolicies: MotorPolicy[];\n    healthPolicies: HealthPolicy[];\n    commercialPolicies: CommercialPolicy[];\n    travelPolicies?: any[];\n    lifePolicies?: any[];\n    cyberPolicies?: any[];\n    userId: string;\n    onPolicyAdded?: () => void;\n}\n\ntype SortField = 'policy_number' | 'insurer_name' | 'premium_amount' | 'start_date' | 'end_date' | 'status' | 'vehicle_number';\ntype SortDirection = 'asc' | 'desc' | null;\n\nexport default function PolicyTable({\n    policyType,\n    motorPolicies,\n    healthPolicies,\n    commercialPolicies,\n    travelPolicies = [],\n    lifePolicies = [],\n    cyberPolicies = [],\n    userId,\n    onPolicyAdded\n}: PolicyTableProps) {\n    const router = useRouter();\n    const [isAddModalOpen, setIsAddModalOpen] = useState(false);\n    const [searchQuery, setSearchQuery] = useState('');\n    const [sortField, setSortField] = useState<SortField | null>(null);\n    const [sortDirection, setSortDirection] = useState<SortDirection>(null);\n\n    // Get policies based on type\n    const getPolicies = () => {\n        switch (policyType) {\n            case 'Motor':\n                return motorPolicies.map(p => ({ ...p, type: 'Motor' as const }));\n            case 'Health':\n                return healthPolicies.map(p => ({ ...p, type: 'Health' as const }));\n            case 'Commercial':\n                return commercialPolicies.map(p => ({ ...p, type: 'Commercial' as const }));\n            case 'Travel':\n                return travelPolicies.map(p => ({ ...p, type: 'Travel' as const }));\n            case 'Life':\n                return lifePolicies.map(p => ({ ...p, type: 'Life' as const }));\n            case 'Cyber':\n                return cyberPolicies.map(p => ({ ...p, type: 'Cyber' as const }));\n            default:\n                return [];\n        }\n    };\n\n    const allPolicies = getPolicies();\n\n    // Filter, search, and sort policies\n    const filteredAndSortedPolicies = useMemo(() => {\n        let result = allPolicies;\n\n        // Filter: Show only Active and Expiring Soon policies\n        result = result.filter(p => {\n            const isMotor = p.type === 'Motor';\n            const isHealth = p.type === 'Health';\n            const endDateValue = isMotor ? (p as any).policy_end_date :\n                isHealth ? (p as any).expiry_date :\n                    (p as any).expiry_date;\n            const endDate = endDateValue ? new Date(endDateValue) : null;\n            const status = calculatePolicyStatus(endDate);\n            return status === 'Active' || status === 'Expiring Soon';\n        });\n\n        // Search\n        if (searchQuery.trim()) {\n            const query = searchQuery.toLowerCase();\n            result = result.filter(p => {\n                const isMotor = p.type === 'Motor';\n                const isHealth = p.type === 'Health';\n\n                const startDateValue = isMotor ? (p as any).policy_start_date :\n                    isHealth ? (p as any).start_date :\n                        (p as any).start_date;\n                const endDateValue = isMotor ? (p as any).policy_end_date :\n                    isHealth ? (p as any).expiry_date :\n                        (p as any).expiry_date;\n                const endDate = endDateValue ? new Date(endDateValue) : null;\n                const status = calculatePolicyStatus(endDate);\n\n                // Convert dates to strings for search\n                const startDateStr = startDateValue ? new Date(startDateValue).toLocaleDateString('en-IN').toLowerCase() : '';\n                const endDateStr = endDateValue ? new Date(endDateValue).toLocaleDateString('en-IN').toLowerCase() : '';\n\n                // Search in common fields\n                const matchesCommon =\n                    (p as any).policy_number?.toLowerCase().includes(query) ||\n                    (p as any).insurer_name?.toLowerCase().includes(query) ||\n                    (p as any).premium_amount?.toString().includes(query) ||\n                    status?.toLowerCase().includes(query) ||\n                    startDateStr.includes(query) ||\n                    endDateStr.includes(query);\n\n                // For Motor policies, also search vehicle number\n                const matchesVehicle = isMotor && (p as any).vehicle_number?.toLowerCase().includes(query);\n\n                return matchesCommon || matchesVehicle;\n            });\n        }\n\n        // Sort\n        if (sortField && sortDirection) {\n            result = [...result].sort((a, b) => {\n                let aValue: any;\n                let bValue: any;\n\n                const isMotorA = a.type === 'Motor';\n                const isHealthA = a.type === 'Health';\n                const isMotorB = b.type === 'Motor';\n                const isHealthB = b.type === 'Health';\n\n                switch (sortField) {\n                    case 'policy_number':\n                        aValue = (a as any).policy_number || '';\n                        bValue = (b as any).policy_number || '';\n                        break;\n                    case 'insurer_name':\n                        aValue = (a as any).insurer_name || '';\n                        bValue = (b as any).insurer_name || '';\n                        break;\n                    case 'premium_amount':\n                        aValue = Number((a as any).premium_amount) || 0;\n                        bValue = Number((b as any).premium_amount) || 0;\n                        break;\n                    case 'start_date':\n                        const aStartDate = isMotorA ? (a as any).policy_start_date : (a as any).start_date;\n                        const bStartDate = isMotorB ? (b as any).policy_start_date : (b as any).start_date;\n                        aValue = aStartDate ? new Date(aStartDate).getTime() : 0;\n                        bValue = bStartDate ? new Date(bStartDate).getTime() : 0;\n                        break;\n                    case 'end_date':\n                        const aEndDate = isMotorA ? (a as any).policy_end_date : (a as any).expiry_date;\n                        const bEndDate = isMotorB ? (b as any).policy_end_date : (b as any).expiry_date;\n                        aValue = aEndDate ? new Date(aEndDate).getTime() : 0;\n                        bValue = bEndDate ? new Date(bEndDate).getTime() : 0;\n                        break;\n                    case 'status':\n                        const aEndDateForStatus = isMotorA ? (a as any).policy_end_date : (a as any).expiry_date;\n                        const bEndDateForStatus = isMotorB ? (b as any).policy_end_date : (b as any).expiry_date;\n                        aValue = calculatePolicyStatus(aEndDateForStatus ? new Date(aEndDateForStatus) : null);\n                        bValue = calculatePolicyStatus(bEndDateForStatus ? new Date(bEndDateForStatus) : null);\n                        break;\n                    case 'vehicle_number':\n                        aValue = isMotorA ? (a as any).vehicle_number || '' : '';\n                        bValue = isMotorB ? (b as any).vehicle_number || '' : '';\n                        break;\n                    default:\n                        return 0;\n                }\n\n                if (typeof aValue === 'string' && typeof bValue === 'string') {\n                    return sortDirection === 'asc'\n                        ? aValue.localeCompare(bValue)\n                        : bValue.localeCompare(aValue);\n                } else {\n                    return sortDirection === 'asc'\n                        ? aValue - bValue\n                        : bValue - aValue;\n                }\n            });\n        }\n\n        return result;\n    }, [allPolicies, searchQuery, sortField, sortDirection]);\n\n    const handleSort = (field: SortField) => {\n        if (sortField === field) {\n            // Cycle through: asc -> desc -> null\n            if (sortDirection === 'asc') {\n                setSortDirection('desc');\n            } else if (sortDirection === 'desc') {\n                setSortDirection(null);\n                setSortField(null);\n            }\n        } else {\n            setSortField(field);\n            setSortDirection('asc');\n        }\n    };\n\n    const getSortIcon = (field: SortField) => {\n        if (sortField !== field) {\n            return <ArrowUpDown className=\"w-4 h-4 ml-1 inline opacity-30\" />;\n        }\n        if (sortDirection === 'asc') {\n            return <ArrowUp className=\"w-4 h-4 ml-1 inline text-primary-600\" />;\n        }\n        if (sortDirection === 'desc') {\n            return <ArrowDown className=\"w-4 h-4 ml-1 inline text-primary-600\" />;\n        }\n        return <ArrowUpDown className=\"w-4 h-4 ml-1 inline opacity-30\" />;\n    };\n\n    const getIcon = () => {\n        switch (policyType) {\n            case 'Motor':\n                return <Car className=\"w-5 h-5 text-blue-600\" />;\n            case 'Health':\n                return <Heart className=\"w-5 h-5 text-green-600\" />;\n            case 'Commercial':\n                return <Briefcase className=\"w-5 h-5 text-orange-600\" />;\n            case 'Travel':\n                return <Plane className=\"w-5 h-5 text-purple-600\" />;\n            case 'Life':\n                return <Umbrella className=\"w-5 h-5 text-pink-600\" />;\n            case 'Cyber':\n                return <Shield className=\"w-5 h-5 text-cyan-600\" />;\n            default:\n                return null;\n        }\n    };\n\n    const getColorClass = () => {\n        switch (policyType) {\n            case 'Motor':\n                return 'bg-blue-50 border-blue-200';\n            case 'Health':\n                return 'bg-green-50 border-green-200';\n            case 'Commercial':\n                return 'bg-orange-50 border-orange-200';\n            default:\n                return 'bg-gray-50 border-gray-200';\n        }\n    };\n\n    const handleViewDetails = (policy: any) => {\n        const typeSlug = policyType.toLowerCase();\n        router.push(`/policies/${typeSlug}/${policy.id}`);\n    };\n\n    const isMotorTable = policyType === 'Motor';\n\n    return (\n        <div className=\"bg-white rounded-2xl border border-gray-200 shadow-soft overflow-hidden\">\n            {/* Header */}\n            <div className={`px-6 py-4 border-b ${getColorClass()} flex items-center justify-between`}>\n                <div className=\"flex items-center gap-3\">\n                    <div className=\"p-2 bg-white rounded-lg shadow-sm\">\n                        {getIcon()}\n                    </div>\n                    <div>\n                        <h3 className=\"text-lg font-bold text-gray-900\">{policyType} Policies</h3>\n                        <p className=\"text-sm text-gray-600\">\n                            {filteredAndSortedPolicies.length} {filteredAndSortedPolicies.length === 1 ? 'policy' : 'policies'} found\n                        </p>\n                    </div>\n                </div>\n                <button\n                    onClick={() => setIsAddModalOpen(true)}\n                    className=\"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors shadow-sm\"\n                >\n                    <Plus className=\"w-4 h-4\" />\n                    <span className=\"font-medium\">Add Policy</span>\n                </button>\n            </div>\n\n            {/* Search Bar */}\n            <div className=\"px-6 py-4 border-b border-gray-200 bg-gray-50\">\n                <div className=\"relative\">\n                    <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" />\n                    <input\n                        type=\"text\"\n                        placeholder={`Search ${policyType.toLowerCase()} policies${isMotorTable ? ' (policy number, insurer, vehicle number, etc.)' : ' (policy number, insurer, etc.)'}`}\n                        value={searchQuery}\n                        onChange={(e) => setSearchQuery(e.target.value)}\n                        className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-all\"\n                    />\n                </div>\n            </div>\n\n            {/* Table Content with Scroll */}\n            <div className=\"overflow-x-auto max-h-[400px] overflow-y-auto\">\n                {filteredAndSortedPolicies.length === 0 ? (\n                    <div className=\"text-center py-12 px-6\">\n                        <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                            {getIcon() || <Briefcase className=\"w-8 h-8 text-gray-400\" />}\n                        </div>\n                        <h4 className=\"text-lg font-semibold text-gray-900 mb-2\">\n                            {searchQuery ? 'No matching policies found' : `No ${policyType} Policies Found`}\n                        </h4>\n                        <p className=\"text-gray-500\">\n                            {searchQuery\n                                ? 'Try adjusting your search terms'\n                                : `You don't have any active ${policyType.toLowerCase()} policies yet.`\n                            }\n                        </p>\n                    </div>\n                ) : (\n                    <table className=\"w-full\">\n                        <thead className=\"bg-gray-50 border-b border-gray-200 sticky top-0\">\n                            <tr>\n                                {isMotorTable && (\n                                    <th\n                                        onClick={() => handleSort('vehicle_number')}\n                                        className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors\"\n                                    >\n                                        Vehicle Number {getSortIcon('vehicle_number')}\n                                    </th>\n                                )}\n                                <th\n                                    onClick={() => handleSort('policy_number')}\n                                    className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors\"\n                                >\n                                    Policy Number {getSortIcon('policy_number')}\n                                </th>\n                                <th\n                                    onClick={() => handleSort('insurer_name')}\n                                    className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors\"\n                                >\n                                    Insurer Name {getSortIcon('insurer_name')}\n                                </th>\n                                <th\n                                    onClick={() => handleSort('premium_amount')}\n                                    className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors\"\n                                >\n                                    Premium Amount {getSortIcon('premium_amount')}\n                                </th>\n                                <th\n                                    onClick={() => handleSort('start_date')}\n                                    className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors\"\n                                >\n                                    Start Date {getSortIcon('start_date')}\n                                </th>\n                                <th\n                                    onClick={() => handleSort('end_date')}\n                                    className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors\"\n                                >\n                                    End Date {getSortIcon('end_date')}\n                                </th>\n                                <th\n                                    onClick={() => handleSort('status')}\n                                    className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors\"\n                                >\n                                    Status {getSortIcon('status')}\n                                </th>\n                                <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                                    Actions\n                                </th>\n                            </tr>\n                        </thead>\n                        <tbody className=\"bg-white divide-y divide-gray-200\">\n                            {filteredAndSortedPolicies.map((policy: any) => {\n                                const isMotor = policy.type === 'Motor';\n                                const isHealth = policy.type === 'Health';\n\n                                // Safely handle dates\n                                const startDateValue = isMotor ? policy.policy_start_date :\n                                    isHealth ? policy.start_date :\n                                        policy.start_date;\n\n                                const endDateValue = isMotor ? policy.policy_end_date :\n                                    isHealth ? policy.expiry_date :\n                                        policy.expiry_date;\n\n                                // Create Date objects with validation\n                                const startDate = startDateValue ? new Date(startDateValue) : null;\n                                const endDate = endDateValue ? new Date(endDateValue) : null;\n\n                                // Calculate status (now handles null/invalid dates)\n                                const status = calculatePolicyStatus(endDate);\n\n                                return (\n                                    <tr key={policy.id} className=\"hover:bg-gray-50 transition-colors\">\n                                        {isMotorTable && (\n                                            <td className=\"px-6 py-4 whitespace-nowrap\">\n                                                <button\n                                                    onClick={() => handleViewDetails(policy)}\n                                                    className=\"text-sm font-medium text-primary-600 hover:text-primary-700 hover:underline\"\n                                                >\n                                                    {policy.vehicle_number}\n                                                </button>\n                                            </td>\n                                        )}\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                                            <span className=\"text-sm font-medium text-gray-900\">\n                                                {policy.policy_number}\n                                            </span>\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                                            <span className=\"text-sm text-gray-900\">\n                                                {policy.insurer_name}\n                                            </span>\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                                            <span className=\"text-sm font-semibold text-gray-900\">\n                                                {formatCurrency(policy.premium_amount)}\n                                            </span>\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                                            <span className=\"text-sm text-gray-600\">\n                                                {startDate && !isNaN(startDate.getTime())\n                                                    ? startDate.toLocaleDateString('en-IN', {\n                                                        day: '2-digit',\n                                                        month: 'short',\n                                                        year: 'numeric'\n                                                    })\n                                                    : 'N/A'}\n                                            </span>\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                                            <span className=\"text-sm text-gray-600\">\n                                                {endDate && !isNaN(endDate.getTime())\n                                                    ? endDate.toLocaleDateString('en-IN', {\n                                                        day: '2-digit',\n                                                        month: 'short',\n                                                        year: 'numeric'\n                                                    })\n                                                    : 'N/A'}\n                                            </span>\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                                            <span\n                                                className={`px-2.5 py-1 rounded-full text-xs font-medium ${status === 'Active'\n                                                    ? 'bg-green-100 text-green-800'\n                                                    : status === 'Expiring Soon'\n                                                        ? 'bg-yellow-100 text-yellow-800'\n                                                        : 'bg-red-100 text-red-800'\n                                                    }`}\n                                            >\n                                                {status}\n                                            </span>\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                                            <button\n                                                onClick={() => handleViewDetails(policy)}\n                                                className=\"inline-flex items-center gap-1.5 px-3 py-1.5 bg-primary-600 text-white text-sm font-medium rounded-lg hover:bg-primary-700 transition-colors\"\n                                            >\n                                                <Eye className=\"w-4 h-4\" />\n                                                View Details\n                                            </button>\n                                        </td>\n                                    </tr>\n                                );\n                            })}\n                        </tbody>\n                    </table>\n                )}\n            </div>\n\n            {/* Add Policy Modal */}\n            <AddPolicyModal\n                isOpen={isAddModalOpen}\n                onClose={() => setIsAddModalOpen(false)}\n                userId={userId}\n                initialType={policyType}\n                onSuccess={() => {\n                    setIsAddModalOpen(false);\n                    onPolicyAdded?.();\n                }}\n            />\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 9540, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/app/%28customer%29/dashboard/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { getCurrentUser } from '@/lib/auth';\nimport {\n    getUserMotorPolicies,\n    getUserHealthPolicies,\n    getUserCommercialPolicies,\n    getUserTravelPolicies,\n    getUserLifePolicies,\n    getUserCyberPolicies,\n    getUserClaims,\n    getUserReferrals\n} from '@/lib/db';\nimport { User, MotorPolicy, HealthPolicy, CommercialPolicy, DashboardSummary, Claim, Referral } from '@/types';\nimport { calculatePolicyStatus, formatCurrency } from '@/lib/utils';\nimport { Car, Heart, Briefcase, Plane, Shield, Umbrella, FileText, TrendingUp, AlertCircle, Calculator, ChevronRight, XCircle } from 'lucide-react';\nimport PortfolioPieChart from '@/components/dashboard/PortfolioPieChart';\nimport PolicyCategoryCard from '@/components/dashboard/PolicyCategoryCard';\nimport ClaimsOverview from '@/components/dashboard/ClaimsOverview';\nimport UpsellCard from '@/components/dashboard/UpsellCard';\nimport OffersCard from '@/components/dashboard/OffersCard';\nimport AdvertisingBanner from '@/components/dashboard/AdvertisingBanner';\nimport AnalyticsAreaChart from '@/components/dashboard/AnalyticsAreaChart';\nimport AnalyticsDonutChart from '@/components/dashboard/AnalyticsDonutChart';\nimport PolicyRenewalReminder from '@/components/dashboard/PolicyRenewalReminder';\nimport FlipCard from '@/components/dashboard/FlipCard';\nimport MonthlyActivityChart from '@/components/dashboard/MonthlyActivityChart';\nimport ProtectFamilyCard from '@/components/dashboard/ProtectFamilyCard';\nimport CoverageGapCard from '@/components/dashboard/CoverageGapCard';\nimport ReportsModal from '@/components/dashboard/ReportsModal';\nimport PolicyDetailModal from '@/components/dashboard/PolicyDetailModal';\nimport StickyAddPolicy from '@/components/dashboard/StickyAddPolicy';\nimport ExportButton from '@/components/dashboard/ExportButton';\nimport AddPolicyModal from '@/components/policies/AddPolicyModal';\nimport PolicyTable from '@/components/dashboard/PolicyTable';\n\nexport default function DashboardPage() {\n    const router = useRouter();\n    const [user, setUser] = useState<User | null>(null);\n    const [loading, setLoading] = useState(true);\n    const [summary, setSummary] = useState<DashboardSummary | null>(null);\n    const [claims, setClaims] = useState<Claim[]>([]);\n    const [referrals, setReferrals] = useState<Referral[]>([]);\n    const [isReportsOpen, setIsReportsOpen] = useState(false);\n\n    // Policy Detail Modal State\n    const [isPolicyDetailOpen, setIsPolicyDetailOpen] = useState(false);\n    const [policyDetailType, setPolicyDetailType] = useState<'total' | 'premium' | 'expiring' | 'expired'>('total');\n    const [policyDetailTitle, setPolicyDetailTitle] = useState('');\n\n    // Add Policy Modal State\n    const [selectedType, setSelectedType] = useState<'total' | 'premium' | 'expiring'>('total');\n    const [isHealthModalOpen, setIsHealthModalOpen] = useState(false);\n\n    // Store actual policy data\n    const [motorPolicies, setMotorPolicies] = useState<MotorPolicy[]>([]);\n    const [healthPolicies, setHealthPolicies] = useState<HealthPolicy[]>([]);\n    const [commercialPolicies, setCommercialPolicies] = useState<CommercialPolicy[]>([]);\n    const [travelPolicies, setTravelPolicies] = useState<any[]>([]);\n    const [lifePolicies, setLifePolicies] = useState<any[]>([]);\n    const [cyberPolicies, setCyberPolicies] = useState<any[]>([]);\n\n    // Policy Counts for Cards\n    const [policyCounts, setPolicyCounts] = useState({\n        motor: 0,\n        health: 0,\n        commercial: 0\n    });\n\n    // Selected Policy Type for Table\n    type PolicyType = 'Motor' | 'Health' | 'Travel' | 'Commercial' | 'Life' | 'Cyber' | null;\n    const [selectedPolicyType, setSelectedPolicyType] = useState<PolicyType>('Motor'); // Default to Motor\n\n    useEffect(() => {\n        const loadData = async () => {\n            try {\n                const currentUser = await getCurrentUser();\n                if (!currentUser) {\n                    router.push('/login');\n                    return;\n                }\n\n                // Redirect corporate users to corporate dashboard - REMOVED for Unified Dashboard\n                // if (currentUser.role === 'corporate_employee' || currentUser.role === 'corporate_admin') {\n                //     router.push('/dashboard/corporate');\n                //     return;\n                // }\n\n                setUser(currentUser);\n                await loadDashboardData(currentUser.id);\n            } catch (error) {\n                console.error('[Dashboard] Error loading dashboard:', error);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        loadData();\n    }, [router]);\n\n    const loadDashboardData = async (userId: string) => {\n        try {\n            const [motor, healthData, commercial, travel, life, cyber, userClaims, userReferrals] = await Promise.all([\n                getUserMotorPolicies(userId),\n                getUserHealthPolicies(userId),\n                getUserCommercialPolicies(userId),\n                getUserTravelPolicies(userId),\n                getUserLifePolicies(userId),\n                getUserCyberPolicies(userId),\n                getUserClaims(userId),\n                getUserReferrals(userId)\n            ]);\n\n            // Store policy data for modal with calculated status\n            const processPolicy = (p: any) => {\n                const endDateValue = 'policy_end_date' in p ? p.policy_end_date : p.expiry_date;\n                const status = calculatePolicyStatus(endDateValue); // Now handles null/invalid dates\n                return { ...p, status };\n            };\n\n            const processedMotor = motor.map(processPolicy);\n            const processedHealth = healthData.map(processPolicy);\n            const processedCommercial = commercial.map(processPolicy);\n            const processedTravel = travel.map(processPolicy);\n            const processedLife = life.map(processPolicy);\n            const processedCyber = cyber.map(processPolicy);\n\n            setMotorPolicies(processedMotor);\n            setHealthPolicies(processedHealth);\n            setCommercialPolicies(processedCommercial);\n            setTravelPolicies(processedTravel);\n            setLifePolicies(processedLife);\n            setCyberPolicies(processedCyber);\n\n            setClaims(userClaims);\n            setReferrals(userReferrals);\n\n            // Calculate Summary\n            // Filter active policies for Total Policies and Total Premium\n            const activePolicies = [\n                ...motor, ...healthData, ...commercial, ...travel, ...life, ...cyber\n            ].filter(p => {\n                const endDate = new Date('policy_end_date' in p ? p.policy_end_date : p.expiry_date);\n                return calculatePolicyStatus(endDate) === 'Active' || calculatePolicyStatus(endDate) === 'Expiring Soon';\n            });\n\n            const totalActivePolicies = activePolicies.length;\n\n            const totalActivePremium = activePolicies.reduce((sum, p) => sum + (Number(p.premium_amount) || 0), 0);\n\n            const expiringSoonCount = [\n                ...processedMotor, ...processedHealth, ...processedCommercial, ...processedTravel, ...processedLife, ...processedCyber\n            ].filter(p => p.status === 'Expiring Soon').length;\n\n            const expiredCount = [\n                ...processedMotor, ...processedHealth, ...processedCommercial, ...processedTravel, ...processedLife, ...processedCyber\n            ].filter(p => p.status === 'Expired').length;\n\n            // Calculate portfolio summary\n            const motorPremium = motor.reduce((sum: number, p: any) => sum + Number(p.premium_amount), 0);\n            const healthPremium = healthData.reduce((sum: number, p: any) => sum + Number(p.premium_amount), 0);\n            const travelPremium = travel.reduce((sum: number, p: any) => sum + Number(p.premium_amount), 0);\n            const commercialPremium = commercial.reduce((sum: number, p: any) => sum + Number(p.premium_amount), 0);\n            const lifePremium = life.reduce((sum: number, p: any) => sum + Number(p.premium_amount), 0);\n            const cyberPremium = cyber.reduce((sum: number, p: any) => sum + Number(p.premium_amount), 0);\n\n            const allPolicies = [...processedMotor, ...processedHealth, ...processedCommercial, ...processedTravel, ...processedLife, ...processedCyber];\n\n            // Calculate expiring soon count based on calculated status\n            const expiringCount = allPolicies.filter(p => p.status === 'Expiring Soon').length;\n\n            // Calculate Monthly Premium Trend (Area Chart)\n            const monthlyPremium = Array(12).fill(0);\n            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n\n            allPolicies.forEach(p => {\n                const date = new Date(p.created_at); // Using created_at for trend\n                const month = date.getMonth();\n                monthlyPremium[month] += Number(p.premium_amount);\n            });\n\n            const areaChartData = months.map((month, index) => ({\n                name: month,\n                value: monthlyPremium[index]\n            }));\n\n            // Calculate Monthly Activity (Bar Chart - Count of policies + claims)\n            const monthlyActivity = Array(12).fill(0);\n            allPolicies.forEach(p => {\n                const date = new Date(p.created_at);\n                monthlyActivity[date.getMonth()]++;\n            });\n            userClaims.forEach(c => {\n                const date = new Date(c.created_at);\n                monthlyActivity[date.getMonth()]++;\n            });\n\n            const barChartData = months.map((month, index) => ({\n                name: (index + 1).toString(),\n                value: monthlyActivity[index]\n            }));\n\n            setSummary({\n                total_policies: totalActivePolicies,\n                total_premium: totalActivePremium,\n                expiring_soon_count: expiringSoonCount,\n                expired_count: expiredCount,\n                portfolio_by_lob: {\n                    motor: motorPremium,\n                    health: healthPremium,\n                    travel: travelPremium,\n                    commercial: commercialPremium,\n                    life: lifePremium,\n                    cyber: cyberPremium,\n                },\n                areaChartData, // Pass to state\n                barChartData   // Pass to state\n            } as any); // Casting to any to avoid type error for now, ideally update DashboardSummary type\n        } catch (error) {\n            console.error('Error loading dashboard data:', error);\n        }\n    };\n\n    const [greeting, setGreeting] = useState('');\n\n    useEffect(() => {\n        const hour = new Date().getHours();\n        if (hour < 12) setGreeting('Good Morning');\n        else if (hour < 18) setGreeting('Good Afternoon');\n        else setGreeting('Good Evening');\n    }, []);\n\n    if (loading || !user || !summary) {\n        return (\n            <div className=\"flex items-center justify-center h-64\">\n                <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600\"></div>\n            </div>\n        );\n    }\n\n    const activeClaims = claims.filter(c => c.status === 'New' || c.status === 'In Progress').length;\n    const settledClaims = claims.filter(c => c.status === 'Settled').length;\n    const rejectedClaims = claims.filter(c => c.status === 'Rejected').length;\n\n    // Click handlers for dashboard cards\n    const handleTotalPoliciesClick = () => {\n        setPolicyDetailType('total');\n        setPolicyDetailTitle('All Policies');\n        setIsPolicyDetailOpen(true);\n    };\n\n    const handleTotalPremiumClick = () => {\n        setPolicyDetailType('premium');\n        setPolicyDetailTitle('Premium Breakdown');\n        setIsPolicyDetailOpen(true);\n    };\n\n    const handleExpiringClick = () => {\n        setPolicyDetailType('expiring');\n        setPolicyDetailTitle('Expiring Soon');\n        setIsPolicyDetailOpen(true);\n    };\n\n    const handleExpiredClick = () => {\n        setPolicyDetailType('expired');\n        setPolicyDetailTitle('Expired Policies');\n        setIsPolicyDetailOpen(true);\n    };\n\n    return (\n        <div id=\"dashboard-content\" className=\"space-y-6\">\n            {/* Header Actions - Top Right */}\n            <div className=\"flex justify-end items-center mb-6 space-x-3\">\n                <ExportButton\n                    onExportDashboard={() => { }}\n                    motorPolicies={motorPolicies}\n                    healthPolicies={healthPolicies}\n                    commercialPolicies={commercialPolicies}\n                    travelPolicies={travelPolicies}\n                    lifePolicies={lifePolicies}\n                    cyberPolicies={cyberPolicies}\n                    userName={user?.name || 'User'}\n                />\n                <StickyAddPolicy userId={user.id} className=\"relative !fixed-none !top-auto !right-auto\" />\n            </div>\n            <ReportsModal isOpen={isReportsOpen} onClose={() => setIsReportsOpen(false)} />\n            <PolicyDetailModal\n                isOpen={isPolicyDetailOpen}\n                onClose={() => setIsPolicyDetailOpen(false)}\n                title={policyDetailTitle}\n                type={policyDetailType}\n                motorPolicies={motorPolicies}\n                healthPolicies={healthPolicies}\n                commercialPolicies={commercialPolicies}\n                travelPolicies={travelPolicies}\n                lifePolicies={lifePolicies}\n                cyberPolicies={cyberPolicies}\n            />\n\n            {/* Portfolio Overview */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n                {/* Total Policies - Clickable */}\n                <div\n                    onClick={handleTotalPoliciesClick}\n                    className=\"bg-white rounded-2xl p-6 shadow-soft hover:shadow-lg transition-all cursor-pointer border border-transparent hover:border-primary-200\"\n                >\n                    <div className=\"flex justify-between items-start\">\n                        <div>\n                            <p className=\"text-sm text-gray-500 font-semibold mb-1\">Total Active Policies</p>\n                            <p className=\"text-3xl font-bold text-gray-900\">\n                                {summary ? summary.total_policies : 0}\n                            </p>\n                            <p className=\"text-xs text-green-600 mt-2\">Click to view details</p>\n                        </div>\n                        <div className=\"p-3 bg-blue-50 rounded-xl\">\n                            <FileText className=\"w-6 h-6 text-blue-600\" />\n                        </div>\n                    </div>\n                </div>\n\n                {/* Total Premium - Clickable */}\n                <div\n                    onClick={handleTotalPremiumClick}\n                    className=\"bg-white rounded-2xl p-6 shadow-soft hover:shadow-lg transition-all cursor-pointer border border-transparent hover:border-primary-200\"\n                >\n                    <div className=\"flex justify-between items-start\">\n                        <div>\n                            <p className=\"text-sm text-gray-500 font-semibold mb-1\">Total Active Premium</p>\n                            <p className=\"text-3xl font-bold text-gray-900\">\n                                {summary ? formatCurrency(summary.total_premium) : 'â‚¹0'}\n                            </p>\n                            <p className=\"text-xs text-green-600 mt-2\">Click to view breakdown</p>\n                        </div>\n                        <div className=\"p-3 bg-green-50 rounded-xl\">\n                            <TrendingUp className=\"w-6 h-6 text-green-600\" />\n                        </div>\n                    </div>\n                </div>\n\n                {/* Expiring Soon - Clickable */}\n                <div\n                    onClick={handleExpiringClick}\n                    className=\"bg-white rounded-2xl p-6 shadow-soft hover:shadow-lg transition-all cursor-pointer border border-transparent hover:border-primary-200\"\n                >\n                    <div className=\"flex justify-between items-start\">\n                        <div>\n                            <p className=\"text-sm text-gray-500 font-semibold mb-1\">Expiring Soon</p>\n                            <p className=\"text-3xl font-bold text-gray-900\">\n                                {summary ? summary.expiring_soon_count : 0}\n                            </p>\n                            <p className=\"text-xs text-orange-600 mt-2\">Click to view policies</p>\n                        </div>\n                        <div className=\"p-3 bg-orange-50 rounded-xl\">\n                            <AlertCircle className=\"w-6 h-6 text-orange-600\" />\n                        </div>\n                    </div>\n                </div>\n\n                {/* Expired Policies - Clickable */}\n                <div\n                    onClick={handleExpiredClick}\n                    className=\"bg-white rounded-2xl p-6 shadow-soft hover:shadow-lg transition-all cursor-pointer border border-transparent hover:border-primary-200\"\n                >\n                    <div className=\"flex justify-between items-start\">\n                        <div>\n                            <p className=\"text-sm text-gray-500 font-semibold mb-1\">Expired Policies</p>\n                            <p className=\"text-3xl font-bold text-gray-900\">\n                                {summary ? (summary as any).expired_count || 0 : 0}\n                            </p>\n                            <p className=\"text-xs text-red-600 mt-2\">Click to view policies</p>\n                        </div>\n                        <div className=\"p-3 bg-red-50 rounded-xl\">\n                            <XCircle className=\"w-6 h-6 text-red-600\" />\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            {/* Quick Access */}\n            <div>\n                <h2 className=\"text-lg font-bold text-gray-900 mb-4\">Quick Access</h2>\n                <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4\">\n                    <FlipCard\n                        title=\"Motor\"\n                        icon={Car}\n                        activeCount={motorPolicies.filter(p => p.status === 'Active').length}\n                        expiringSoonCount={motorPolicies.filter(p => p.status === 'Expiring Soon').length}\n                        colorClass=\"blue\"\n                        onClick={() => setSelectedPolicyType('Motor')}\n                    />\n                    <FlipCard\n                        title=\"Health\"\n                        icon={Heart}\n                        activeCount={healthPolicies.filter(p => p.status === 'Active').length}\n                        expiringSoonCount={healthPolicies.filter(p => p.status === 'Expiring Soon').length}\n                        colorClass=\"green\"\n                        onClick={() => setSelectedPolicyType('Health')}\n                    />\n                    <FlipCard\n                        title=\"Travel\"\n                        icon={Plane}\n                        activeCount={travelPolicies.filter(p => p.status === 'Active').length}\n                        expiringSoonCount={travelPolicies.filter(p => p.status === 'Expiring Soon').length}\n                        colorClass=\"purple\"\n                        onClick={() => setSelectedPolicyType('Travel')}\n                    />\n                    <FlipCard\n                        title=\"Commercial\"\n                        icon={Briefcase}\n                        activeCount={commercialPolicies.filter(p => p.status === 'Active').length}\n                        expiringSoonCount={commercialPolicies.filter(p => p.status === 'Expiring Soon').length}\n                        colorClass=\"orange\"\n                        onClick={() => setSelectedPolicyType('Commercial')}\n                    />\n                    <FlipCard\n                        title=\"Life\"\n                        icon={Umbrella}\n                        activeCount={lifePolicies.filter(p => p.status === 'Active').length}\n                        expiringSoonCount={lifePolicies.filter(p => p.status === 'Expiring Soon').length}\n                        colorClass=\"pink\"\n                        onClick={() => setSelectedPolicyType('Life')}\n                    />\n                    <FlipCard\n                        title=\"Cyber\"\n                        icon={Shield}\n                        activeCount={cyberPolicies.filter(p => p.status === 'Active').length}\n                        expiringSoonCount={cyberPolicies.filter(p => p.status === 'Expiring Soon').length}\n                        colorClass=\"cyan\"\n                        onClick={() => setSelectedPolicyType('Cyber')}\n                    />\n                </div>\n            </div>\n\n            {/* Policy Table Section - Always visible, changes based on selected type */}\n            {selectedPolicyType && (\n                <PolicyTable\n                    policyType={selectedPolicyType}\n                    motorPolicies={motorPolicies}\n                    healthPolicies={healthPolicies}\n                    commercialPolicies={commercialPolicies}\n                    travelPolicies={travelPolicies}\n                    lifePolicies={lifePolicies}\n                    cyberPolicies={cyberPolicies}\n                    userId={user?.id || ''}\n                    onPolicyAdded={async () => {\n                        // Reload dashboard data when a policy is added\n                        if (user) {\n                            await loadDashboardData(user.id);\n                        }\n                    }}\n                />\n            )}\n\n            {/* Analytics & Insights Section */}\n            <div className=\"grid lg:grid-cols-3 gap-4 md:gap-6\">\n                {/* Left Column (2/3 width on desktop) */}\n                <div className=\"lg:col-span-2 space-y-4 md:space-y-6\">\n                    {/* Monthly Activity - Stacked Bar Chart */}\n                    <div className=\"h-[400px]\">\n                        <MonthlyActivityChart\n                            data={(summary as any).areaChartData}\n                            allPolicies={[...motorPolicies, ...healthPolicies, ...commercialPolicies, ...travelPolicies, ...lifePolicies, ...cyberPolicies]}\n                        />\n                    </div>\n\n                    {/* Claims Overview and Policy Renewal Reminder - Side by side on desktop, stacked on mobile */}\n                    <div className=\"grid md:grid-cols-2 gap-6 h-[320px]\">\n                        <ClaimsOverview\n                            activeCount={activeClaims}\n                            settledCount={settledClaims}\n                            rejectedCount={rejectedClaims}\n                        />\n                        <PolicyRenewalReminder\n                            motorPolicies={motorPolicies}\n                            healthPolicies={healthPolicies}\n                            commercialPolicies={commercialPolicies}\n                            travelPolicies={travelPolicies}\n                            lifePolicies={lifePolicies}\n                            cyberPolicies={cyberPolicies}\n                        />\n                    </div>\n                </div>\n\n                {/* Right Column (1/3 width on desktop) */}\n                <div className=\"space-y-6\">\n                    {/* Source of Premium - Donut Chart */}\n                    <div className=\"h-[400px]\">\n                        <AnalyticsDonutChart data={summary.portfolio_by_lob} />\n                    </div>\n\n                    {/* Protect Family Card and Coverage Gap Card - Stacked */}\n                    <div className=\"h-[320px] flex flex-col gap-3\">\n                        <div className=\"flex-1\">\n                            <ProtectFamilyCard onGetQuote={() => setIsHealthModalOpen(true)} />\n                        </div>\n                        {/* Coverage Gap Card - Only show if Health policies are missing */}\n                        {healthPolicies.length === 0 && (\n                            <div className=\"flex-1\">\n                                <CoverageGapCard\n                                    missingPolicyType=\"Health\"\n                                    onExplore={() => setIsHealthModalOpen(true)}\n                                />\n                            </div>\n                        )}\n                    </div>\n                </div>\n            </div>\n\n            {/* Exclusive Offers & Rewards Section - Added margin-top to prevent overlap */}\n            <div className=\"mt-8\">\n                <h2 className=\"text-lg font-bold text-gray-900 mb-4\">Exclusive Offers & Rewards</h2>\n                <div className=\"grid md:grid-cols-3 gap-4\">\n                    {/* Offers content would go here */}\n                </div>\n            </div>\n\n            {/* Advertising */}\n            <div>\n                <AdvertisingBanner />\n            </div>\n\n            {/* StickyAddPolicy moved to header */}\n\n            <AddPolicyModal\n                isOpen={isHealthModalOpen}\n                onClose={() => setIsHealthModalOpen(false)}\n                userId={user.id}\n                initialType=\"Health\"\n                onSuccess={() => {\n                    setIsHealthModalOpen(false);\n                    // Trigger a reload by toggling a state or re-fetching\n                    // Since loadDashboardData is not accessible here (it's inside useEffect),\n                    // we should probably move it out or just reload the page.\n                    // For now, let's reload the page as a simple fix.\n                    window.location.reload();\n                }}\n            />\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}