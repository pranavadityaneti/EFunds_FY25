{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/lib/utils.ts"],"sourcesContent":["import { PolicyStatus } from '@/types';\n\n/**\n * Calculate policy status based on end/expiry date\n * @param endDate - Policy end/expiry date\n * @param thresholdDays - Number of days before expiry to mark as \"Expiring Soon\" (default: 15)\n * @returns PolicyStatus - 'Active', 'Expiring Soon', or 'Expired'\n */\nexport function calculatePolicyStatus(\n    endDate: Date | string | null | undefined,\n    thresholdDays: number = 15\n): PolicyStatus {\n    // Handle null, undefined, or invalid dates\n    if (!endDate) return 'Expired';\n\n    const date = typeof endDate === 'string' ? new Date(endDate) : endDate;\n\n    // Check if date is valid\n    if (isNaN(date.getTime())) return 'Expired';\n\n    const today = new Date();\n    const diffTime = date.getTime() - today.getTime();\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n\n    if (diffDays < 0) return 'Expired';\n    if (diffDays <= thresholdDays) return 'Expiring Soon';\n    return 'Active';\n}\n\n/**\n * Get Financial Year for a given date (April-March)\n * @param date - Date to get FY for\n * @returns string - FY in format \"FY 2024-25\"\n */\nexport function getFY(date: Date): string {\n    const month = date.getMonth(); // 0-indexed (0 = January)\n    const year = date.getFullYear();\n\n    if (month >= 3) {\n        // April (3) onwards\n        return `FY ${year}-${(year + 1).toString().slice(-2)}`;\n    } else {\n        return `FY ${year - 1}-${year.toString().slice(-2)}`;\n    }\n}\n\n/**\n * Check if a date falls within a specific FY\n * @param date - Date to check\n * @param fy - FY string (e.g., \"FY 2024-25\")\n * @returns boolean\n */\nexport function isDateInFY(date: Date, fy: string): boolean {\n    return getFY(date) === fy;\n}\n\n/**\n * Get start and end dates for a Financial Year\n * @param fy - FY string (e.g., \"FY 2024-25\")\n * @returns { start: Date, end: Date }\n */\nexport function getFYDates(fy: string): { start: Date; end: Date } {\n    const years = fy.match(/\\d{4}-\\d{2}/)?.[0].split('-');\n    if (!years || years.length !== 2) {\n        throw new Error('Invalid FY format');\n    }\n\n    const startYear = parseInt(years[0]);\n    const endYear = parseInt('20' + years[1]);\n\n    return {\n        start: new Date(startYear, 3, 1), // April 1st\n        end: new Date(endYear, 2, 31, 23, 59, 59), // March 31st\n    };\n}\n\n/**\n * Get current Financial Year\n * @returns string - Current FY in format \"FY 2024-25\"\n */\nexport function getCurrentFY(): string {\n    return getFY(new Date());\n}\n\n/**\n * Format currency amount\n * @param amount - Amount in number\n * @param currency - Currency symbol (default: '₹')\n * @returns string - Formatted currency\n */\nexport function formatCurrency(amount: number, currency: string = '₹'): string {\n    return `${currency}${amount.toLocaleString('en-IN', {\n        minimumFractionDigits: 0,\n        maximumFractionDigits: 0,\n    })}`;\n}\n\n/**\n * Format date to readable string\n * @param date - Date to format\n * @returns string - Formatted date (e.g., \"23 Nov 2024\")\n */\nexport function formatDate(date: Date): string {\n    return date.toLocaleDateString('en-IN', {\n        day: '2-digit',\n        month: 'short',\n        year: 'numeric',\n    });\n}\n\n/**\n * Calculate days until a date\n * @param endDate - Target date\n * @returns number - Days remaining (negative if past), or 0 if invalid date\n */\nexport function daysUntil(endDate: Date | string | null | undefined): number {\n    if (!endDate) return 0;\n\n    const date = typeof endDate === 'string' ? new Date(endDate) : endDate;\n    if (isNaN(date.getTime())) return 0;\n\n    const today = new Date();\n    const diffTime = date.getTime() - today.getTime();\n    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n}\n\n/**\n * Class names utility for conditional styling\n */\nexport function cn(...classes: (string | boolean | undefined | null)[]): string {\n    return classes.filter(Boolean).join(' ');\n}\n\n/**\n * Truncate text to specified length\n */\nexport function truncate(text: string, length: number): string {\n    if (text.length <= length) return text;\n    return text.slice(0, length) + '...';\n}\n\n/**\n * Safely format a date for HTML date input (YYYY-MM-DD)\n * @param date - Date value (Date object, string, or null/undefined)\n * @returns string - Formatted date string or empty string if invalid\n */\nexport function formatDateForInput(date: Date | string | null | undefined): string {\n    if (!date) return '';\n\n    try {\n        const dateObj = typeof date === 'string' ? new Date(date) : date;\n        if (isNaN(dateObj.getTime())) return '';\n\n        return dateObj.toISOString().split('T')[0];\n    } catch {\n        return '';\n    }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAQO,SAAS,sBACZ,OAAyC,EACzC,gBAAwB,EAAE;IAE1B,2CAA2C;IAC3C,IAAI,CAAC,SAAS,OAAO;IAErB,MAAM,OAAO,OAAO,YAAY,WAAW,IAAI,KAAK,WAAW;IAE/D,yBAAyB;IACzB,IAAI,MAAM,KAAK,OAAO,KAAK,OAAO;IAElC,MAAM,QAAQ,IAAI;IAClB,MAAM,WAAW,KAAK,OAAO,KAAK,MAAM,OAAO;IAC/C,MAAM,WAAW,KAAK,IAAI,CAAC,WAAW,CAAC,OAAO,KAAK,KAAK,EAAE;IAE1D,IAAI,WAAW,GAAG,OAAO;IACzB,IAAI,YAAY,eAAe,OAAO;IACtC,OAAO;AACX;AAOO,SAAS,MAAM,IAAU;IAC5B,MAAM,QAAQ,KAAK,QAAQ,IAAI,0BAA0B;IACzD,MAAM,OAAO,KAAK,WAAW;IAE7B,IAAI,SAAS,GAAG;QACZ,oBAAoB;QACpB,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,QAAQ,GAAG,KAAK,CAAC,CAAC,IAAI;IAC1D,OAAO;QACH,OAAO,CAAC,GAAG,EAAE,OAAO,EAAE,CAAC,EAAE,KAAK,QAAQ,GAAG,KAAK,CAAC,CAAC,IAAI;IACxD;AACJ;AAQO,SAAS,WAAW,IAAU,EAAE,EAAU;IAC7C,OAAO,MAAM,UAAU;AAC3B;AAOO,SAAS,WAAW,EAAU;IACjC,MAAM,QAAQ,GAAG,KAAK,CAAC,gBAAgB,CAAC,EAAE,CAAC,MAAM;IACjD,IAAI,CAAC,SAAS,MAAM,MAAM,KAAK,GAAG;QAC9B,MAAM,IAAI,MAAM;IACpB;IAEA,MAAM,YAAY,SAAS,KAAK,CAAC,EAAE;IACnC,MAAM,UAAU,SAAS,OAAO,KAAK,CAAC,EAAE;IAExC,OAAO;QACH,OAAO,IAAI,KAAK,WAAW,GAAG;QAC9B,KAAK,IAAI,KAAK,SAAS,GAAG,IAAI,IAAI,IAAI;IAC1C;AACJ;AAMO,SAAS;IACZ,OAAO,MAAM,IAAI;AACrB;AAQO,SAAS,eAAe,MAAc,EAAE,WAAmB,GAAG;IACjE,OAAO,GAAG,WAAW,OAAO,cAAc,CAAC,SAAS;QAChD,uBAAuB;QACvB,uBAAuB;IAC3B,IAAI;AACR;AAOO,SAAS,WAAW,IAAU;IACjC,OAAO,KAAK,kBAAkB,CAAC,SAAS;QACpC,KAAK;QACL,OAAO;QACP,MAAM;IACV;AACJ;AAOO,SAAS,UAAU,OAAyC;IAC/D,IAAI,CAAC,SAAS,OAAO;IAErB,MAAM,OAAO,OAAO,YAAY,WAAW,IAAI,KAAK,WAAW;IAC/D,IAAI,MAAM,KAAK,OAAO,KAAK,OAAO;IAElC,MAAM,QAAQ,IAAI;IAClB,MAAM,WAAW,KAAK,OAAO,KAAK,MAAM,OAAO;IAC/C,OAAO,KAAK,IAAI,CAAC,WAAW,CAAC,OAAO,KAAK,KAAK,EAAE;AACpD;AAKO,SAAS,GAAG,GAAG,OAAgD;IAClE,OAAO,QAAQ,MAAM,CAAC,SAAS,IAAI,CAAC;AACxC;AAKO,SAAS,SAAS,IAAY,EAAE,MAAc;IACjD,IAAI,KAAK,MAAM,IAAI,QAAQ,OAAO;IAClC,OAAO,KAAK,KAAK,CAAC,GAAG,UAAU;AACnC;AAOO,SAAS,mBAAmB,IAAsC;IACrE,IAAI,CAAC,MAAM,OAAO;IAElB,IAAI;QACA,MAAM,UAAU,OAAO,SAAS,WAAW,IAAI,KAAK,QAAQ;QAC5D,IAAI,MAAM,QAAQ,OAAO,KAAK,OAAO;QAErC,OAAO,QAAQ,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;IAC9C,EAAE,OAAM;QACJ,OAAO;IACX;AACJ"}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/lib/supabase.ts"],"sourcesContent":["// Supabase Configuration\n// Replace Firebase with Supabase\n\nimport { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || '';\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || '';\n\nif (!supabaseUrl || !supabaseAnonKey) {\n    console.warn('Supabase credentials not found. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY in .env.local');\n}\n\n// Prevent crash if credentials are missing\nconst createMockClient = () => {\n    const mockBuilder = {\n        select: () => mockBuilder,\n        insert: () => mockBuilder,\n        update: () => mockBuilder,\n        delete: () => mockBuilder,\n        eq: () => mockBuilder,\n        in: () => mockBuilder,\n        order: () => mockBuilder,\n        limit: () => mockBuilder,\n        single: () => Promise.resolve({ data: null, error: null }),\n        maybeSingle: () => Promise.resolve({ data: null, error: null }),\n        then: (resolve: any) => resolve({ data: [], error: null, count: 0 }),\n    };\n\n    return {\n        from: () => mockBuilder,\n        auth: {\n            signUp: () => Promise.resolve({ data: {}, error: null }),\n            signInWithPassword: () => Promise.resolve({ data: {}, error: null }),\n            signOut: () => Promise.resolve({ error: null }),\n            getUser: () => Promise.resolve({ data: { user: null }, error: null }),\n            onAuthStateChange: () => ({ data: { subscription: { unsubscribe: () => { } } } }),\n            resetPasswordForEmail: () => Promise.resolve({ data: {}, error: null }),\n        }\n    } as any;\n};\n\nexport const supabase = (supabaseUrl && supabaseAnonKey)\n    ? createClient(supabaseUrl, supabaseAnonKey)\n    : createMockClient();\n\nexport default supabase;\n"],"names":[],"mappings":"AAAA,yBAAyB;AACzB,iCAAiC;;;;;;;AAIb;AAFpB;;AAEA,MAAM,cAAc,gFAAwC;AAC5D,MAAM,kBAAkB,wPAA6C;AAErE;;AAIA,2CAA2C;AAC3C,MAAM,mBAAmB;IACrB,MAAM,cAAc;QAChB,QAAQ,IAAM;QACd,QAAQ,IAAM;QACd,QAAQ,IAAM;QACd,QAAQ,IAAM;QACd,IAAI,IAAM;QACV,IAAI,IAAM;QACV,OAAO,IAAM;QACb,OAAO,IAAM;QACb,QAAQ,IAAM,QAAQ,OAAO,CAAC;gBAAE,MAAM;gBAAM,OAAO;YAAK;QACxD,aAAa,IAAM,QAAQ,OAAO,CAAC;gBAAE,MAAM;gBAAM,OAAO;YAAK;QAC7D,MAAM,CAAC,UAAiB,QAAQ;gBAAE,MAAM,EAAE;gBAAE,OAAO;gBAAM,OAAO;YAAE;IACtE;IAEA,OAAO;QACH,MAAM,IAAM;QACZ,MAAM;YACF,QAAQ,IAAM,QAAQ,OAAO,CAAC;oBAAE,MAAM,CAAC;oBAAG,OAAO;gBAAK;YACtD,oBAAoB,IAAM,QAAQ,OAAO,CAAC;oBAAE,MAAM,CAAC;oBAAG,OAAO;gBAAK;YAClE,SAAS,IAAM,QAAQ,OAAO,CAAC;oBAAE,OAAO;gBAAK;YAC7C,SAAS,IAAM,QAAQ,OAAO,CAAC;oBAAE,MAAM;wBAAE,MAAM;oBAAK;oBAAG,OAAO;gBAAK;YACnE,mBAAmB,IAAM,CAAC;oBAAE,MAAM;wBAAE,cAAc;4BAAE,aAAa,KAAQ;wBAAE;oBAAE;gBAAE,CAAC;YAChF,uBAAuB,IAAM,QAAQ,OAAO,CAAC;oBAAE,MAAM,CAAC;oBAAG,OAAO;gBAAK;QACzE;IACJ;AACJ;AAEO,MAAM,WAAW,uCAClB,IAAA,2NAAY,EAAC,aAAa,mBAC1B;uCAES"}},
    {"offset": {"line": 197, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/lib/auth.ts"],"sourcesContent":["import { supabase } from './supabase';\nimport { User, UserRole } from '@/types';\n\n/**\n * Sign up a new user with email and password\n */\nexport async function signUp(\n    email: string,\n    password: string,\n    name: string,\n    mobile: string,\n    role: UserRole,\n    company_name?: string\n): Promise<User> {\n    try {\n        // Create auth user with Supabase\n        const { data: authData, error: authError } = await supabase.auth.signUp({\n            email,\n            password,\n        });\n\n        if (authError) throw authError;\n        if (!authData.user) throw new Error('No user returned from signup');\n\n        // Generate unique customer ID (1SV- + 6 random alphanumeric characters)\n        const customerId = '1SV-' + Math.random().toString(36).substring(2, 8).toUpperCase();\n\n        // Create user profile object\n        const newUser: Omit<User, 'created_at' | 'updated_at'> = {\n            id: authData.user.id,\n            email,\n            mobile,\n            name,\n            company_name: (role === 'corporate_employee' || role === 'corporate_admin') ? company_name : undefined,\n            role,\n            customer_id: customerId,\n        };\n\n        // Retry logic for creating user profile to handle race conditions\n        let retries = 3;\n        while (retries > 0) {\n            try {\n                // Wait for auth user to be propagated\n                await new Promise(resolve => setTimeout(resolve, 1000));\n\n                const { error: dbError } = await supabase\n                    .from('users')\n                    .insert({\n                        id: authData.user.id,\n                        email: newUser.email,\n                        mobile: newUser.mobile,\n                        name: newUser.name,\n                        company_name: newUser.company_name,\n                        role: newUser.role,\n                        customer_id: newUser.customer_id,\n                    });\n\n                if (dbError) {\n                    // If foreign key violation, throw to catch block to retry\n                    if (dbError.code === '23503') throw dbError;\n\n                    // If unique violation (409), check if profile already exists\n                    if (dbError.code === '23505') { // Postgres unique violation code\n                        console.log('User profile already exists, checking for orphan...');\n\n                        // Check if a profile exists with this email but different ID (orphaned)\n                        const { data: existingProfile, error: fetchError } = await supabase\n                            .from('users')\n                            .select('*')\n                            .eq('email', email)\n                            .maybeSingle();\n\n                        if (!fetchError && existingProfile) {\n                            // If ID matches, it's a duplicate signup attempt, just return it\n                            if (existingProfile.id === authData.user.id) {\n                                return {\n                                    ...existingProfile,\n                                    created_at: new Date(existingProfile.created_at),\n                                    updated_at: new Date(existingProfile.updated_at),\n                                };\n                            }\n\n                            // If ID doesn't match, it's an orphaned profile. Update it with new Auth ID.\n                            console.log('Found orphaned profile. Linking to new Auth ID...');\n                            const { error: updateError } = await supabase\n                                .from('users')\n                                .update({\n                                    id: authData.user.id,\n                                    updated_at: new Date().toISOString()\n                                })\n                                .eq('email', email);\n\n                            if (updateError) {\n                                console.error('Failed to link orphaned profile:', updateError);\n                                throw updateError;\n                            }\n\n                            // Return the updated profile\n                            return {\n                                ...existingProfile,\n                                id: authData.user.id, // Use new ID\n                                created_at: new Date(existingProfile.created_at),\n                                updated_at: new Date(),\n                            };\n                        }\n                    }\n\n                    // Other errors, throw immediately\n                    throw dbError;\n                }\n\n                // Success\n                break;\n            } catch (error: any) {\n                retries--;\n                if (retries === 0) {\n                    console.error('Failed to create user profile after retries:', error);\n                    throw new Error('Failed to create user profile. Please try again.');\n                }\n                console.log(`Retrying user profile creation... (${retries} attempts left)`);\n            }\n        }\n\n        return {\n            ...newUser,\n            created_at: new Date(),\n            updated_at: new Date(),\n        };\n    } catch (error: any) {\n        console.error('Signup error:', error);\n        throw new Error(error.message || 'Failed to sign up');\n    }\n}\n\n/**\n * Send password reset email\n */\nexport async function resetPassword(email: string): Promise<void> {\n    try {\n        const { error } = await supabase.auth.resetPasswordForEmail(email, {\n            redirectTo: typeof window !== 'undefined' ? `${window.location.origin}/update-password` : 'http://localhost:3000/update-password',\n        });\n        if (error) throw error;\n    } catch (error: any) {\n        console.error('Reset password error:', error);\n        throw new Error(error.message || 'Failed to send reset password email');\n    }\n}\n\n/**\n * Sign in existing user with email and password\n */\nexport async function signIn(email: string, password: string): Promise<User> {\n    try {\n        const { data: authData, error: authError } = await supabase.auth.signInWithPassword({\n            email,\n            password,\n        });\n\n        if (authError) throw authError;\n        if (!authData.user) throw new Error('No user returned from sign in');\n\n        // Fetch user data from database\n        const { data: userData, error: dbError } = await supabase\n            .from('users')\n            .select('*')\n            .eq('id', authData.user.id)\n            .maybeSingle();\n\n        if (dbError) throw dbError;\n        if (!userData) throw new Error('User profile not found. Please contact support.');\n\n        return {\n            id: userData.id,\n            email: userData.email,\n            mobile: userData.mobile,\n            name: userData.name,\n            company_name: userData.company_name,\n            role: userData.role,\n            created_at: new Date(userData.created_at),\n            updated_at: new Date(userData.updated_at),\n            rm_id: userData.rm_id,\n            customer_id: userData.customer_id,\n        };\n    } catch (error: any) {\n        console.error('Sign in error:', error);\n        throw new Error(error.message || 'Failed to sign in');\n    }\n}\n\n/**\n * Sign out current user\n */\nexport async function signOut(): Promise<void> {\n    try {\n        const { error } = await supabase.auth.signOut();\n        if (error) throw error;\n    } catch (error: any) {\n        console.error('Sign out error:', error);\n        throw new Error(error.message || 'Failed to sign out');\n    }\n}\n\n/**\n * Get current authenticated user's data from database\n */\nexport async function getCurrentUser(): Promise<User | null> {\n    try {\n        const { data: { user: authUser } } = await supabase.auth.getUser();\n\n        if (!authUser) return null;\n\n        const { data: userData, error } = await supabase\n            .from('users')\n            .select('*')\n            .eq('id', authUser.id)\n            .maybeSingle();\n\n        if (error) {\n            console.error('Error fetching user data:', error);\n            return null;\n        }\n\n        if (!userData) {\n            console.warn('User authenticated but no profile found');\n            return null;\n        }\n\n        return {\n            id: userData.id,\n            email: userData.email,\n            mobile: userData.mobile,\n            name: userData.name,\n            company_name: userData.company_name,\n            role: userData.role,\n            created_at: new Date(userData.created_at),\n            updated_at: new Date(userData.updated_at),\n            rm_id: userData.rm_id,\n            customer_id: userData.customer_id,\n        };\n    } catch (error) {\n        console.error('Error getting current user:', error);\n        return null;\n    }\n}\n\n/**\n * Get Supabase auth state change listener\n */\nexport function onAuthStateChange(callback: (user: User | null) => void) {\n    return supabase.auth.onAuthStateChange(async (event: string, session: any) => {\n        if (session?.user) {\n            const user = await getCurrentUser();\n            callback(user);\n        } else {\n            callback(null);\n        }\n    });\n}\n\n/**\n * Check if user has specific role\n */\nexport function hasRole(user: User | null, roles: UserRole[]): boolean {\n    return user ? roles.includes(user.role) : false;\n}\n\n/**\n * Check if user is admin\n */\nexport function isAdmin(user: User | null): boolean {\n    return hasRole(user, ['admin']);\n}\n\n/**\n * Check if user is customer (individual or corporate)\n */\nexport function isCustomer(user: User | null): boolean {\n    return hasRole(user, ['individual', 'corporate_employee', 'corporate_admin']);\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;;AAMO,eAAe,OAClB,KAAa,EACb,QAAgB,EAChB,IAAY,EACZ,MAAc,EACd,IAAc,EACd,YAAqB;IAErB,IAAI;QACA,iCAAiC;QACjC,MAAM,EAAE,MAAM,QAAQ,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,+IAAQ,CAAC,IAAI,CAAC,MAAM,CAAC;YACpE;YACA;QACJ;QAEA,IAAI,WAAW,MAAM;QACrB,IAAI,CAAC,SAAS,IAAI,EAAE,MAAM,IAAI,MAAM;QAEpC,wEAAwE;QACxE,MAAM,aAAa,SAAS,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC,GAAG,GAAG,WAAW;QAElF,6BAA6B;QAC7B,MAAM,UAAmD;YACrD,IAAI,SAAS,IAAI,CAAC,EAAE;YACpB;YACA;YACA;YACA,cAAc,AAAC,SAAS,wBAAwB,SAAS,oBAAqB,eAAe;YAC7F;YACA,aAAa;QACjB;QAEA,kEAAkE;QAClE,IAAI,UAAU;QACd,MAAO,UAAU,EAAG;YAChB,IAAI;gBACA,sCAAsC;gBACtC,MAAM,IAAI,QAAQ,CAAA,UAAW,WAAW,SAAS;gBAEjD,MAAM,EAAE,OAAO,OAAO,EAAE,GAAG,MAAM,+IAAQ,CACpC,IAAI,CAAC,SACL,MAAM,CAAC;oBACJ,IAAI,SAAS,IAAI,CAAC,EAAE;oBACpB,OAAO,QAAQ,KAAK;oBACpB,QAAQ,QAAQ,MAAM;oBACtB,MAAM,QAAQ,IAAI;oBAClB,cAAc,QAAQ,YAAY;oBAClC,MAAM,QAAQ,IAAI;oBAClB,aAAa,QAAQ,WAAW;gBACpC;gBAEJ,IAAI,SAAS;oBACT,0DAA0D;oBAC1D,IAAI,QAAQ,IAAI,KAAK,SAAS,MAAM;oBAEpC,6DAA6D;oBAC7D,IAAI,QAAQ,IAAI,KAAK,SAAS;wBAC1B,QAAQ,GAAG,CAAC;wBAEZ,wEAAwE;wBACxE,MAAM,EAAE,MAAM,eAAe,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,+IAAQ,CAC9D,IAAI,CAAC,SACL,MAAM,CAAC,KACP,EAAE,CAAC,SAAS,OACZ,WAAW;wBAEhB,IAAI,CAAC,cAAc,iBAAiB;4BAChC,iEAAiE;4BACjE,IAAI,gBAAgB,EAAE,KAAK,SAAS,IAAI,CAAC,EAAE,EAAE;gCACzC,OAAO;oCACH,GAAG,eAAe;oCAClB,YAAY,IAAI,KAAK,gBAAgB,UAAU;oCAC/C,YAAY,IAAI,KAAK,gBAAgB,UAAU;gCACnD;4BACJ;4BAEA,6EAA6E;4BAC7E,QAAQ,GAAG,CAAC;4BACZ,MAAM,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,+IAAQ,CACxC,IAAI,CAAC,SACL,MAAM,CAAC;gCACJ,IAAI,SAAS,IAAI,CAAC,EAAE;gCACpB,YAAY,IAAI,OAAO,WAAW;4BACtC,GACC,EAAE,CAAC,SAAS;4BAEjB,IAAI,aAAa;gCACb,QAAQ,KAAK,CAAC,oCAAoC;gCAClD,MAAM;4BACV;4BAEA,6BAA6B;4BAC7B,OAAO;gCACH,GAAG,eAAe;gCAClB,IAAI,SAAS,IAAI,CAAC,EAAE;gCACpB,YAAY,IAAI,KAAK,gBAAgB,UAAU;gCAC/C,YAAY,IAAI;4BACpB;wBACJ;oBACJ;oBAEA,kCAAkC;oBAClC,MAAM;gBACV;gBAGA;YACJ,EAAE,OAAO,OAAY;gBACjB;gBACA,IAAI,YAAY,GAAG;oBACf,QAAQ,KAAK,CAAC,gDAAgD;oBAC9D,MAAM,IAAI,MAAM;gBACpB;gBACA,QAAQ,GAAG,CAAC,CAAC,mCAAmC,EAAE,QAAQ,eAAe,CAAC;YAC9E;QACJ;QAEA,OAAO;YACH,GAAG,OAAO;YACV,YAAY,IAAI;YAChB,YAAY,IAAI;QACpB;IACJ,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,iBAAiB;QAC/B,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI;IACrC;AACJ;AAKO,eAAe,cAAc,KAAa;IAC7C,IAAI;QACA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,+IAAQ,CAAC,IAAI,CAAC,qBAAqB,CAAC,OAAO;YAC/D,YAAY,uCAAgC,GAAG,OAAO,QAAQ,CAAC,MAAM,CAAC,gBAAgB,CAAC,GAAG;QAC9F;QACA,IAAI,OAAO,MAAM;IACrB,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,yBAAyB;QACvC,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI;IACrC;AACJ;AAKO,eAAe,OAAO,KAAa,EAAE,QAAgB;IACxD,IAAI;QACA,MAAM,EAAE,MAAM,QAAQ,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,+IAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC;YAChF;YACA;QACJ;QAEA,IAAI,WAAW,MAAM;QACrB,IAAI,CAAC,SAAS,IAAI,EAAE,MAAM,IAAI,MAAM;QAEpC,gCAAgC;QAChC,MAAM,EAAE,MAAM,QAAQ,EAAE,OAAO,OAAO,EAAE,GAAG,MAAM,+IAAQ,CACpD,IAAI,CAAC,SACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,SAAS,IAAI,CAAC,EAAE,EACzB,WAAW;QAEhB,IAAI,SAAS,MAAM;QACnB,IAAI,CAAC,UAAU,MAAM,IAAI,MAAM;QAE/B,OAAO;YACH,IAAI,SAAS,EAAE;YACf,OAAO,SAAS,KAAK;YACrB,QAAQ,SAAS,MAAM;YACvB,MAAM,SAAS,IAAI;YACnB,cAAc,SAAS,YAAY;YACnC,MAAM,SAAS,IAAI;YACnB,YAAY,IAAI,KAAK,SAAS,UAAU;YACxC,YAAY,IAAI,KAAK,SAAS,UAAU;YACxC,OAAO,SAAS,KAAK;YACrB,aAAa,SAAS,WAAW;QACrC;IACJ,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,kBAAkB;QAChC,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI;IACrC;AACJ;AAKO,eAAe;IAClB,IAAI;QACA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,+IAAQ,CAAC,IAAI,CAAC,OAAO;QAC7C,IAAI,OAAO,MAAM;IACrB,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,mBAAmB;QACjC,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI;IACrC;AACJ;AAKO,eAAe;IAClB,IAAI;QACA,MAAM,EAAE,MAAM,EAAE,MAAM,QAAQ,EAAE,EAAE,GAAG,MAAM,+IAAQ,CAAC,IAAI,CAAC,OAAO;QAEhE,IAAI,CAAC,UAAU,OAAO;QAEtB,MAAM,EAAE,MAAM,QAAQ,EAAE,KAAK,EAAE,GAAG,MAAM,+IAAQ,CAC3C,IAAI,CAAC,SACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,SAAS,EAAE,EACpB,WAAW;QAEhB,IAAI,OAAO;YACP,QAAQ,KAAK,CAAC,6BAA6B;YAC3C,OAAO;QACX;QAEA,IAAI,CAAC,UAAU;YACX,QAAQ,IAAI,CAAC;YACb,OAAO;QACX;QAEA,OAAO;YACH,IAAI,SAAS,EAAE;YACf,OAAO,SAAS,KAAK;YACrB,QAAQ,SAAS,MAAM;YACvB,MAAM,SAAS,IAAI;YACnB,cAAc,SAAS,YAAY;YACnC,MAAM,SAAS,IAAI;YACnB,YAAY,IAAI,KAAK,SAAS,UAAU;YACxC,YAAY,IAAI,KAAK,SAAS,UAAU;YACxC,OAAO,SAAS,KAAK;YACrB,aAAa,SAAS,WAAW;QACrC;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO;IACX;AACJ;AAKO,SAAS,kBAAkB,QAAqC;IACnE,OAAO,+IAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC,OAAO,OAAe;QACzD,IAAI,SAAS,MAAM;YACf,MAAM,OAAO,MAAM;YACnB,SAAS;QACb,OAAO;YACH,SAAS;QACb;IACJ;AACJ;AAKO,SAAS,QAAQ,IAAiB,EAAE,KAAiB;IACxD,OAAO,OAAO,MAAM,QAAQ,CAAC,KAAK,IAAI,IAAI;AAC9C;AAKO,SAAS,QAAQ,IAAiB;IACrC,OAAO,QAAQ,MAAM;QAAC;KAAQ;AAClC;AAKO,SAAS,WAAW,IAAiB;IACxC,OAAO,QAAQ,MAAM;QAAC;QAAc;QAAsB;KAAkB;AAChF"}},
    {"offset": {"line": 425, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/components/loan/LoanSidebar.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport { usePathname, useRouter } from 'next/navigation';\nimport { useState } from 'react';\nimport {\n    LayoutDashboard,\n    Users,\n    FileText,\n    Briefcase,\n    UserCheck,\n    DollarSign,\n    FileCheck,\n    Bell,\n    UserCircle,\n    LogOut,\n    X,\n    Menu,\n    TrendingUp\n} from 'lucide-react';\nimport { User } from '@/types';\nimport { cn } from '@/lib/utils';\nimport { signOut } from '@/lib/auth';\n\ninterface LoanSidebarProps {\n    user: User;\n    isOpen: boolean;\n    onClose: () => void;\n}\n\ntype NavItem = {\n    label: string;\n    href: string;\n    icon: any;\n};\n\nexport default function LoanSidebar({ user, isOpen, onClose }: LoanSidebarProps) {\n    const pathname = usePathname();\n    const router = useRouter();\n    const [isUploadingAvatar, setIsUploadingAvatar] = useState(false);\n\n    const navItems: NavItem[] = [\n        { href: '/loan-dashboard', icon: LayoutDashboard, label: 'Dashboard' },\n        { href: '/loan-dashboard/leads', icon: TrendingUp, label: 'Leads' },\n        { href: '/loan-dashboard/applications', icon: FileText, label: 'Applications' },\n        { href: '/loan-dashboard/partners', icon: Briefcase, label: 'Partners' },\n        { href: '/loan-dashboard/employees', icon: Users, label: 'Employees' },\n        { href: '/loan-dashboard/managers', icon: UserCheck, label: 'Managers' },\n        { href: '/loan-dashboard/payouts', icon: DollarSign, label: 'Payouts' },\n        { href: '/loan-dashboard/payout-requests', icon: FileCheck, label: 'Payout Requests' },\n        { href: '/loan-dashboard/notifications', icon: Bell, label: 'Notifications' },\n    ];\n\n    return (\n        <>\n            {/* Mobile Overlay */}\n            {isOpen && (\n                <div\n                    className=\"fixed inset-0 bg-black/50 z-40 md:hidden\"\n                    onClick={onClose}\n                />\n            )}\n\n            {/* Sidebar */}\n            <aside\n                className={cn(\n                    \"fixed left-0 top-0 h-full bg-white border-r border-gray-200 flex flex-col z-50 transition-transform duration-300 ease-in-out\",\n                    \"w-72\",\n                    isOpen ? \"translate-x-0\" : \"-translate-x-full md:translate-x-0\"\n                )}\n            >\n                {/* Logo & Close Button */}\n                <div className=\"flex items-center justify-between px-6 py-6 border-b border-gray-100\">\n                    <div className=\"flex items-center\">\n                        <div className=\"w-8 h-8 bg-gradient-to-br from-loan-primary-400 to-loan-primary-600 rounded-lg flex items-center justify-center shadow-lg shadow-loan-primary-500/30\">\n                            <DollarSign className=\"w-5 h-5 text-white\" />\n                        </div>\n                        <span className=\"ml-3 text-lg font-bold text-gray-900 tracking-tight\">\n                            LoanHub\n                        </span>\n                    </div>\n                    <button\n                        onClick={onClose}\n                        className=\"md:hidden p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n                    >\n                        <X className=\"w-5 h-5 text-gray-500\" />\n                    </button>\n                </div>\n\n                {/* Navigation */}\n                <nav className=\"flex-1 px-3 py-4 space-y-1 overflow-y-auto scrollbar-hide\">\n                    {navItems.map((item) => {\n                        const isActive = pathname === item.href;\n                        const Icon = item.icon;\n\n                        return (\n                            <Link\n                                key={item.href}\n                                href={item.href}\n                                onClick={onClose}\n                                className={cn(\n                                    'flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-all duration-200 group',\n                                    isActive\n                                        ? 'bg-loan-primary-50 text-loan-primary-700 shadow-sm'\n                                        : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900'\n                                )}\n                            >\n                                <Icon\n                                    className={cn(\n                                        \"w-5 h-5 mr-3 transition-colors\",\n                                        isActive ? \"text-loan-primary-600\" : \"text-gray-400 group-hover:text-gray-600\"\n                                    )}\n                                />\n                                {item.label}\n                            </Link>\n                        );\n                    })}\n                </nav>\n\n                {/* User Profile Section (Bottom) */}\n                <div className=\"mt-auto px-4 py-4 border-t border-gray-100\">\n                    <div className=\"flex flex-col items-center text-center space-y-3\">\n                        {/* Profile Picture */}\n                        <div className=\"relative group\">\n                            <div className=\"w-16 h-16 rounded-full bg-gradient-to-br from-loan-primary-400 to-loan-primary-600 flex items-center justify-center text-white font-bold text-xl shadow-lg overflow-hidden\">\n                                {user.avatar_url ? (\n                                    <img src={user.avatar_url} alt={user.name} className=\"w-full h-full object-cover\" />\n                                ) : (\n                                    user.name.charAt(0).toUpperCase()\n                                )}\n                            </div>\n\n                            {/* Loading Overlay */}\n                            {isUploadingAvatar && (\n                                <div className=\"absolute inset-0 flex items-center justify-center bg-black/60 rounded-full\">\n                                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-white\"></div>\n                                </div>\n                            )}\n\n                            {/* Edit Overlay */}\n                            {!isUploadingAvatar && (\n                                <label\n                                    htmlFor=\"loan-avatar-upload\"\n                                    className=\"absolute inset-0 flex items-center justify-center bg-black/40 rounded-full opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer\"\n                                >\n                                    <div className=\"bg-white/20 p-1.5 rounded-full backdrop-blur-sm\">\n                                        <UserCircle className=\"w-5 h-5 text-white\" />\n                                    </div>\n                                </label>\n                            )}\n                            <input\n                                id=\"loan-avatar-upload\"\n                                type=\"file\"\n                                accept=\"image/*\"\n                                className=\"hidden\"\n                                disabled={isUploadingAvatar}\n                                onChange={async (e) => {\n                                    const file = e.target.files?.[0];\n                                    if (!file || isUploadingAvatar) return;\n\n                                    setIsUploadingAvatar(true);\n\n                                    try {\n                                        const { uploadAvatar } = await import('@/lib/db');\n                                        const url = await uploadAvatar(user.id, file);\n\n                                        if (url) {\n                                            user.avatar_url = url;\n                                            router.refresh();\n                                            setIsUploadingAvatar(false);\n                                        } else {\n                                            setIsUploadingAvatar(false);\n                                            alert('Failed to upload image.');\n                                        }\n                                    } catch (error) {\n                                        console.error('[Avatar Upload] Error:', error);\n                                        setIsUploadingAvatar(false);\n                                        alert(`Failed to upload image: ${error instanceof Error ? error.message : 'Unknown error'}`);\n                                    } finally {\n                                        e.target.value = '';\n                                    }\n                                }}\n                            />\n                        </div>\n\n                        {/* User Name */}\n                        <div className=\"w-full\">\n                            <p className=\"text-base font-bold text-gray-900 truncate\">\n                                {user.name}\n                            </p>\n                            {user.customer_id && (\n                                <p className=\"text-xs text-gray-500 mt-0.5 font-medium\">\n                                    ID: {user.customer_id}\n                                </p>\n                            )}\n                        </div>\n\n                        {/* Action Buttons */}\n                        <div className=\"flex gap-2 w-full\">\n                            <Link\n                                href=\"/profile\"\n                                className=\"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-xs font-medium text-gray-700 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors\"\n                            >\n                                <UserCircle className=\"w-3.5 h-3.5\" />\n                                Profile\n                            </Link>\n                            <button\n                                onClick={async () => {\n                                    try {\n                                        await signOut();\n                                        router.push('/');\n                                        router.refresh();\n                                    } catch (error) {\n                                        console.error('Error signing out:', error);\n                                    }\n                                }}\n                                className=\"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-xs font-medium text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition-colors\"\n                            >\n                                <LogOut className=\"w-3.5 h-3.5\" />\n                                Sign Out\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </aside>\n        </>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 823, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/hooks/useAuth.ts"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { User } from '@/types';\nimport { getCurrentUser, onAuthStateChange } from '@/lib/auth';\n\nexport function useAuth() {\n    const [user, setUser] = useState<User | null>(null);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        let mounted = true;\n\n        const initAuth = async () => {\n            try {\n                const currentUser = await getCurrentUser();\n                if (mounted) {\n                    setUser(currentUser);\n                    setLoading(false);\n                }\n            } catch (error) {\n                console.error('Error initializing auth:', error);\n                if (mounted) setLoading(false);\n            }\n        };\n\n        initAuth();\n\n        const { data: { subscription } } = onAuthStateChange((user) => {\n            if (mounted) {\n                setUser(user);\n                setLoading(false);\n            }\n        });\n\n        return () => {\n            mounted = false;\n            subscription.unsubscribe();\n        };\n    }, []);\n\n    return { user, loading };\n}\n"],"names":[],"mappings":";;;;AAEA;AAEA;;AAJA;;;AAMO,SAAS;;IACZ,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,0LAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,0LAAQ,EAAC;IAEvC,IAAA,2LAAS;6BAAC;YACN,IAAI,UAAU;YAEd,MAAM;8CAAW;oBACb,IAAI;wBACA,MAAM,cAAc,MAAM,IAAA,iJAAc;wBACxC,IAAI,SAAS;4BACT,QAAQ;4BACR,WAAW;wBACf;oBACJ,EAAE,OAAO,OAAO;wBACZ,QAAQ,KAAK,CAAC,4BAA4B;wBAC1C,IAAI,SAAS,WAAW;oBAC5B;gBACJ;;YAEA;YAEA,MAAM,EAAE,MAAM,EAAE,YAAY,EAAE,EAAE,GAAG,IAAA,oJAAiB;qCAAC,CAAC;oBAClD,IAAI,SAAS;wBACT,QAAQ;wBACR,WAAW;oBACf;gBACJ;;YAEA;qCAAO;oBACH,UAAU;oBACV,aAAa,WAAW;gBAC5B;;QACJ;4BAAG,EAAE;IAEL,OAAO;QAAE;QAAM;IAAQ;AAC3B;GApCgB"}},
    {"offset": {"line": 884, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/OneSingleView/app/%28loan%29/layout.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport LoanSidebar from '@/components/loan/LoanSidebar';\nimport { Menu } from 'lucide-react';\nimport { useAuth } from '@/hooks/useAuth';\n\nexport default function LoanLayout({ children }: { children: React.ReactNode }) {\n    const [sidebarOpen, setSidebarOpen] = useState(false);\n    const { user, loading } = useAuth();\n\n    if (loading || !user) {\n        return (\n            <div className=\"flex items-center justify-center h-screen bg-gray-50\">\n                <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-loan-primary-600\"></div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"min-h-screen bg-gray-50 flex\">\n            {/* Sidebar */}\n            <LoanSidebar user={user} isOpen={sidebarOpen} onClose={() => setSidebarOpen(false)} />\n\n            {/* Main Content */}\n            <div className=\"flex-1 md:ml-72\">\n                {/* Mobile Header with Menu Button */}\n                <div className=\"md:hidden bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between sticky top-0 z-30\">\n                    <button\n                        onClick={() => setSidebarOpen(true)}\n                        className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n                    >\n                        <Menu className=\"w-6 h-6 text-gray-700\" />\n                    </button>\n                    <span className=\"text-lg font-bold text-gray-900\">LoanHub</span>\n                    <div className=\"w-10\"></div> {/* Spacer for centering */}\n                </div>\n\n                {/* Page Content */}\n                <main className=\"p-4 md:p-8\">\n                    {children}\n                </main>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAOe,SAAS,WAAW,EAAE,QAAQ,EAAiC;;IAC1E,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,0LAAQ,EAAC;IAC/C,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,IAAA,+IAAO;IAEjC,IAAI,WAAW,CAAC,MAAM;QAClB,qBACI,8MAAC;YAAI,WAAU;sBACX,cAAA,8MAAC;gBAAI,WAAU;;;;;;;;;;;IAG3B;IAEA,qBACI,8MAAC;QAAI,WAAU;;0BAEX,8MAAC,iKAAW;gBAAC,MAAM;gBAAM,QAAQ;gBAAa,SAAS,IAAM,eAAe;;;;;;0BAG5E,8MAAC;gBAAI,WAAU;;kCAEX,8MAAC;wBAAI,WAAU;;0CACX,8MAAC;gCACG,SAAS,IAAM,eAAe;gCAC9B,WAAU;0CAEV,cAAA,8MAAC,8NAAI;oCAAC,WAAU;;;;;;;;;;;0CAEpB,8MAAC;gCAAK,WAAU;0CAAkC;;;;;;0CAClD,8MAAC;gCAAI,WAAU;;;;;;4BAAa;;;;;;;kCAIhC,8MAAC;wBAAK,WAAU;kCACX;;;;;;;;;;;;;;;;;;AAKrB;GAtCwB;;QAEM,+IAAO;;;KAFb"}}]
}