(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,21969,(e,t,r)=>{t.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},67408,(e,t,r)=>{let a,s=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];r.getSymbolSize=function(e){if(!e)throw Error('"version" cannot be null or undefined');if(e<1||e>40)throw Error('"version" should be in range from 1 to 40');return 4*e+17},r.getSymbolTotalCodewords=function(e){return s[e]},r.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},r.setToSJISFunction=function(e){if("function"!=typeof e)throw Error('"toSJISFunc" is not a valid function.');a=e},r.isKanjiModeEnabled=function(){return void 0!==a},r.toSJIS=function(e){return a(e)}},18846,(e,t,r)=>{r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2},r.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},r.from=function(e,t){if(r.isValid(e))return e;try{if("string"!=typeof e)throw Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw Error("Unknown EC Level: "+e)}}catch(e){return t}}},84906,(e,t,r)=>{function a(){this.buffer=[],this.length=0}a.prototype={get:function(e){let t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(let r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){let t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},t.exports=a},59336,(e,t,r)=>{function a(e){if(!e||e<1)throw Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}a.prototype.set=function(e,t,r,a){let s=e*this.size+t;this.data[s]=r,a&&(this.reservedBit[s]=!0)},a.prototype.get=function(e,t){return this.data[e*this.size+t]},a.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r},a.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},t.exports=a},69457,(e,t,r)=>{let a=e.r(67408).getSymbolSize;r.getRowColCoords=function(e){if(1===e)return[];let t=Math.floor(e/7)+2,r=a(e),s=145===r?26:2*Math.ceil((r-13)/(2*t-2)),n=[r-7];for(let e=1;e<t-1;e++)n[e]=n[e-1]-s;return n.push(6),n.reverse()},r.getPositions=function(e){let t=[],a=r.getRowColCoords(e),s=a.length;for(let e=0;e<s;e++)for(let r=0;r<s;r++)(0!==e||0!==r)&&(0!==e||r!==s-1)&&(e!==s-1||0!==r)&&t.push([a[e],a[r]]);return t}},27267,(e,t,r)=>{let a=e.r(67408).getSymbolSize;r.getPositions=function(e){let t=a(e);return[[0,0],[t-7,0],[0,t-7]]}},73465,(e,t,r)=>{r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};r.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},r.from=function(e){return r.isValid(e)?parseInt(e,10):void 0},r.getPenaltyN1=function(e){let t=e.size,r=0,a=0,s=0,n=null,i=null;for(let o=0;o<t;o++){a=s=0,n=i=null;for(let l=0;l<t;l++){let t=e.get(o,l);t===n?a++:(a>=5&&(r+=3+(a-5)),n=t,a=1),(t=e.get(l,o))===i?s++:(s>=5&&(r+=3+(s-5)),i=t,s=1)}a>=5&&(r+=3+(a-5)),s>=5&&(r+=3+(s-5))}return r},r.getPenaltyN2=function(e){let t=e.size,r=0;for(let a=0;a<t-1;a++)for(let s=0;s<t-1;s++){let t=e.get(a,s)+e.get(a,s+1)+e.get(a+1,s)+e.get(a+1,s+1);(4===t||0===t)&&r++}return 3*r},r.getPenaltyN3=function(e){let t=e.size,r=0,a=0,s=0;for(let n=0;n<t;n++){a=s=0;for(let i=0;i<t;i++)a=a<<1&2047|e.get(n,i),i>=10&&(1488===a||93===a)&&r++,s=s<<1&2047|e.get(i,n),i>=10&&(1488===s||93===s)&&r++}return 40*r},r.getPenaltyN4=function(e){let t=0,r=e.data.length;for(let a=0;a<r;a++)t+=e.data[a];return 10*Math.abs(Math.ceil(100*t/r/5)-10)},r.applyMask=function(e,t){let a=t.size;for(let s=0;s<a;s++)for(let n=0;n<a;n++)t.isReserved(n,s)||t.xor(n,s,function(e,t,a){switch(e){case r.Patterns.PATTERN000:return(t+a)%2==0;case r.Patterns.PATTERN001:return t%2==0;case r.Patterns.PATTERN010:return a%3==0;case r.Patterns.PATTERN011:return(t+a)%3==0;case r.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(a/3))%2==0;case r.Patterns.PATTERN101:return t*a%2+t*a%3==0;case r.Patterns.PATTERN110:return(t*a%2+t*a%3)%2==0;case r.Patterns.PATTERN111:return(t*a%3+(t+a)%2)%2==0;default:throw Error("bad maskPattern:"+e)}}(e,n,s))},r.getBestMask=function(e,t){let a=Object.keys(r.Patterns).length,s=0,n=1/0;for(let i=0;i<a;i++){t(i),r.applyMask(i,e);let a=r.getPenaltyN1(e)+r.getPenaltyN2(e)+r.getPenaltyN3(e)+r.getPenaltyN4(e);r.applyMask(i,e),a<n&&(n=a,s=i)}return s}},12707,(e,t,r)=>{let a=e.r(18846),s=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],n=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];r.getBlocksCount=function(e,t){switch(t){case a.L:return s[(e-1)*4+0];case a.M:return s[(e-1)*4+1];case a.Q:return s[(e-1)*4+2];case a.H:return s[(e-1)*4+3];default:return}},r.getTotalCodewordsCount=function(e,t){switch(t){case a.L:return n[(e-1)*4+0];case a.M:return n[(e-1)*4+1];case a.Q:return n[(e-1)*4+2];case a.H:return n[(e-1)*4+3];default:return}}},90267,(e,t,r)=>{let a=new Uint8Array(512),s=new Uint8Array(256),n=1;for(let e=0;e<255;e++)a[e]=n,s[n]=e,256&(n<<=1)&&(n^=285);for(let e=255;e<512;e++)a[e]=a[e-255];r.log=function(e){if(e<1)throw Error("log("+e+")");return s[e]},r.exp=function(e){return a[e]},r.mul=function(e,t){return 0===e||0===t?0:a[s[e]+s[t]]}},69317,(e,t,r)=>{let a=e.r(90267);r.mul=function(e,t){let r=new Uint8Array(e.length+t.length-1);for(let s=0;s<e.length;s++)for(let n=0;n<t.length;n++)r[s+n]^=a.mul(e[s],t[n]);return r},r.mod=function(e,t){let r=new Uint8Array(e);for(;r.length-t.length>=0;){let e=r[0];for(let s=0;s<t.length;s++)r[s]^=a.mul(t[s],e);let s=0;for(;s<r.length&&0===r[s];)s++;r=r.slice(s)}return r},r.generateECPolynomial=function(e){let t=new Uint8Array([1]);for(let s=0;s<e;s++)t=r.mul(t,new Uint8Array([1,a.exp(s)]));return t}},72325,(e,t,r)=>{let a=e.r(69317);function s(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}s.prototype.initialize=function(e){this.degree=e,this.genPoly=a.generateECPolynomial(this.degree)},s.prototype.encode=function(e){if(!this.genPoly)throw Error("Encoder not initialized");let t=new Uint8Array(e.length+this.degree);t.set(e);let r=a.mod(t,this.genPoly),s=this.degree-r.length;if(s>0){let e=new Uint8Array(this.degree);return e.set(r,s),e}return r},t.exports=s},11558,(e,t,r)=>{r.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},22045,(e,t,r)=>{let a="[0-9]+",s="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",n="(?:(?![A-Z0-9 $%*+\\-./:]|"+(s=s.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";r.KANJI=RegExp(s,"g"),r.BYTE_KANJI=RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),r.BYTE=RegExp(n,"g"),r.NUMERIC=RegExp(a,"g"),r.ALPHANUMERIC=RegExp("[A-Z $%*+\\-./:]+","g");let i=RegExp("^"+s+"$"),o=RegExp("^"+a+"$"),l=RegExp("^[A-Z0-9 $%*+\\-./:]+$");r.testKanji=function(e){return i.test(e)},r.testNumeric=function(e){return o.test(e)},r.testAlphanumeric=function(e){return l.test(e)}},33698,(e,t,r)=>{let a=e.r(11558),s=e.r(22045);r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(e,t){if(!e.ccBits)throw Error("Invalid mode: "+e);if(!a.isValid(t))throw Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},r.getBestModeForData=function(e){return s.testNumeric(e)?r.NUMERIC:s.testAlphanumeric(e)?r.ALPHANUMERIC:s.testKanji(e)?r.KANJI:r.BYTE},r.toString=function(e){if(e&&e.id)return e.id;throw Error("Invalid mode")},r.isValid=function(e){return e&&e.bit&&e.ccBits},r.from=function(e,t){if(r.isValid(e))return e;try{if("string"!=typeof e)throw Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw Error("Unknown mode: "+e)}}catch(e){return t}}},77474,(e,t,r)=>{let a=e.r(67408),s=e.r(12707),n=e.r(18846),i=e.r(33698),o=e.r(11558),l=a.getBCHDigit(7973);function c(e,t){return i.getCharCountIndicator(e,t)+4}r.from=function(e,t){return o.isValid(e)?parseInt(e,10):t},r.getCapacity=function(e,t,r){if(!o.isValid(e))throw Error("Invalid QR Code version");void 0===r&&(r=i.BYTE);let n=(a.getSymbolTotalCodewords(e)-s.getTotalCodewordsCount(e,t))*8;if(r===i.MIXED)return n;let l=n-c(r,e);switch(r){case i.NUMERIC:return Math.floor(l/10*3);case i.ALPHANUMERIC:return Math.floor(l/11*2);case i.KANJI:return Math.floor(l/13);case i.BYTE:default:return Math.floor(l/8)}},r.getBestVersionForData=function(e,t){let a,s=n.from(t,n.M);if(Array.isArray(e)){if(e.length>1){for(let t=1;t<=40;t++)if(function(e,t){let r=0;return e.forEach(function(e){let a=c(e.mode,t);r+=a+e.getBitsLength()}),r}(e,t)<=r.getCapacity(t,s,i.MIXED))return t;return}if(0===e.length)return 1;a=e[0]}else a=e;return function(e,t,a){for(let s=1;s<=40;s++)if(t<=r.getCapacity(s,a,e))return s}(a.mode,a.getLength(),s)},r.getEncodedBits=function(e){if(!o.isValid(e)||e<7)throw Error("Invalid QR Code version");let t=e<<12;for(;a.getBCHDigit(t)-l>=0;)t^=7973<<a.getBCHDigit(t)-l;return e<<12|t}},5150,(e,t,r)=>{let a=e.r(67408),s=a.getBCHDigit(1335);r.getEncodedBits=function(e,t){let r=e.bit<<3|t,n=r<<10;for(;a.getBCHDigit(n)-s>=0;)n^=1335<<a.getBCHDigit(n)-s;return(r<<10|n)^21522}},66732,(e,t,r)=>{let a=e.r(33698);function s(e){this.mode=a.NUMERIC,this.data=e.toString()}s.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){let t,r;for(t=0;t+3<=this.data.length;t+=3)r=parseInt(this.data.substr(t,3),10),e.put(r,10);let a=this.data.length-t;a>0&&(r=parseInt(this.data.substr(t),10),e.put(r,3*a+1))},t.exports=s},18599,(e,t,r)=>{let a=e.r(33698),s=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function n(e){this.mode=a.ALPHANUMERIC,this.data=e}n.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let r=45*s.indexOf(this.data[t]);r+=s.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(s.indexOf(this.data[t]),6)},t.exports=n},67375,(e,t,r)=>{let a=e.r(33698);function s(e){this.mode=a.BYTE,"string"==typeof e?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}s.getBitsLength=function(e){return 8*e},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){for(let t=0,r=this.data.length;t<r;t++)e.put(this.data[t],8)},t.exports=s},24762,(e,t,r)=>{let a=e.r(33698),s=e.r(67408);function n(e){this.mode=a.KANJI,this.data=e}n.getBitsLength=function(e){return 13*e},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let r=s.toSJIS(this.data[t]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");r=(r>>>8&255)*192+(255&r),e.put(r,13)}},t.exports=n},35335,(e,t,r)=>{"use strict";var a={single_source_shortest_paths:function(e,t,r){var s,n,i,o,l,c,d,u={},h={};h[t]=0;var f=a.PriorityQueue.make();for(f.push(t,0);!f.empty();)for(i in n=(s=f.pop()).value,o=s.cost,l=e[n]||{})l.hasOwnProperty(i)&&(c=o+l[i],d=h[i],(void 0===h[i]||d>c)&&(h[i]=c,f.push(i,c),u[i]=n));if(void 0!==r&&void 0===h[r])throw Error("Could not find a path from "+t+" to "+r+".");return u},extract_shortest_path_from_predecessor_list:function(e,t){for(var r=[],a=t;a;)r.push(a),e[a],a=e[a];return r.reverse(),r},find_path:function(e,t,r){var s=a.single_source_shortest_paths(e,t,r);return a.extract_shortest_path_from_predecessor_list(s,r)},PriorityQueue:{make:function(e){var t,r=a.PriorityQueue,s={};for(t in e=e||{},r)r.hasOwnProperty(t)&&(s[t]=r[t]);return s.queue=[],s.sorter=e.sorter||r.default_sorter,s},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){this.queue.push({value:e,cost:t}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};t.exports=a},15931,(e,t,r)=>{let a=e.r(33698),s=e.r(66732),n=e.r(18599),i=e.r(67375),o=e.r(24762),l=e.r(22045),c=e.r(67408),d=e.r(35335);function u(e){return unescape(encodeURIComponent(e)).length}function h(e,t,r){let a,s=[];for(;null!==(a=e.exec(r));)s.push({data:a[0],index:a.index,mode:t,length:a[0].length});return s}function f(e){let t,r,s=h(l.NUMERIC,a.NUMERIC,e),n=h(l.ALPHANUMERIC,a.ALPHANUMERIC,e);return c.isKanjiModeEnabled()?(t=h(l.BYTE,a.BYTE,e),r=h(l.KANJI,a.KANJI,e)):(t=h(l.BYTE_KANJI,a.BYTE,e),r=[]),s.concat(n,t,r).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function g(e,t){switch(t){case a.NUMERIC:return s.getBitsLength(e);case a.ALPHANUMERIC:return n.getBitsLength(e);case a.KANJI:return o.getBitsLength(e);case a.BYTE:return i.getBitsLength(e)}}function m(e,t){let r,l=a.getBestModeForData(e);if((r=a.from(t,l))!==a.BYTE&&r.bit<l.bit)throw Error('"'+e+'" cannot be encoded with mode '+a.toString(r)+".\n Suggested mode is: "+a.toString(l));switch(r===a.KANJI&&!c.isKanjiModeEnabled()&&(r=a.BYTE),r){case a.NUMERIC:return new s(e);case a.ALPHANUMERIC:return new n(e);case a.KANJI:return new o(e);case a.BYTE:return new i(e)}}r.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(m(t,null)):t.data&&e.push(m(t.data,t.mode)),e},[])},r.fromString=function(e,t){let s=function(e,t){let r={},s={start:{}},n=["start"];for(let i=0;i<e.length;i++){let o=e[i],l=[];for(let e=0;e<o.length;e++){let c=o[e],d=""+i+e;l.push(d),r[d]={node:c,lastCount:0},s[d]={};for(let e=0;e<n.length;e++){let i=n[e];r[i]&&r[i].node.mode===c.mode?(s[i][d]=g(r[i].lastCount+c.length,c.mode)-g(r[i].lastCount,c.mode),r[i].lastCount+=c.length):(r[i]&&(r[i].lastCount=c.length),s[i][d]=g(c.length,c.mode)+4+a.getCharCountIndicator(c.mode,t))}}n=l}for(let e=0;e<n.length;e++)s[n[e]].end=0;return{map:s,table:r}}(function(e){let t=[];for(let r=0;r<e.length;r++){let s=e[r];switch(s.mode){case a.NUMERIC:t.push([s,{data:s.data,mode:a.ALPHANUMERIC,length:s.length},{data:s.data,mode:a.BYTE,length:s.length}]);break;case a.ALPHANUMERIC:t.push([s,{data:s.data,mode:a.BYTE,length:s.length}]);break;case a.KANJI:t.push([s,{data:s.data,mode:a.BYTE,length:u(s.data)}]);break;case a.BYTE:t.push([{data:s.data,mode:a.BYTE,length:u(s.data)}])}}return t}(f(e,c.isKanjiModeEnabled())),t),n=d.find_path(s.map,"start","end"),i=[];for(let e=1;e<n.length-1;e++)i.push(s.table[n[e]].node);return r.fromArray(i.reduce(function(e,t){let r=e.length-1>=0?e[e.length-1]:null;return r&&r.mode===t.mode?e[e.length-1].data+=t.data:e.push(t),e},[]))},r.rawSplit=function(e){return r.fromArray(f(e,c.isKanjiModeEnabled()))}},58850,(e,t,r)=>{let a=e.r(67408),s=e.r(18846),n=e.r(84906),i=e.r(59336),o=e.r(69457),l=e.r(27267),c=e.r(73465),d=e.r(12707),u=e.r(72325),h=e.r(77474),f=e.r(5150),g=e.r(33698),m=e.r(15931);function p(e,t,r){let a,s,n=e.size,i=f.getEncodedBits(t,r);for(a=0;a<15;a++)s=(i>>a&1)==1,a<6?e.set(a,8,s,!0):a<8?e.set(a+1,8,s,!0):e.set(n-15+a,8,s,!0),a<8?e.set(8,n-a-1,s,!0):a<9?e.set(8,15-a-1+1,s,!0):e.set(8,15-a-1,s,!0);e.set(n-8,8,1,!0)}r.create=function(e,t){let r,f;if(void 0===e||""===e)throw Error("No input text");let x=s.M;return void 0!==t&&(x=s.from(t.errorCorrectionLevel,s.M),r=h.from(t.version),f=c.from(t.maskPattern),t.toSJISFunc&&a.setToSJISFunction(t.toSJISFunc)),function(e,t,r,s){let f;if(Array.isArray(e))f=m.fromArray(e);else if("string"==typeof e){let a=t;if(!a){let t=m.rawSplit(e);a=h.getBestVersionForData(t,r)}f=m.fromString(e,a||40)}else throw Error("Invalid data");let x=h.getBestVersionForData(f,r);if(!x)throw Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<x)throw Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+x+".\n")}else t=x;let y=function(e,t,r){let s=new n;r.forEach(function(t){s.put(t.mode.bit,4),s.put(t.getLength(),g.getCharCountIndicator(t.mode,e)),t.write(s)});let i=(a.getSymbolTotalCodewords(e)-d.getTotalCodewordsCount(e,t))*8;for(s.getLengthInBits()+4<=i&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(0);let o=(i-s.getLengthInBits())/8;for(let e=0;e<o;e++)s.put(e%2?17:236,8);return function(e,t,r){let s,n,i=a.getSymbolTotalCodewords(t),o=i-d.getTotalCodewordsCount(t,r),l=d.getBlocksCount(t,r),c=i%l,h=l-c,f=Math.floor(i/l),g=Math.floor(o/l),m=g+1,p=f-g,x=new u(p),y=0,b=Array(l),w=Array(l),N=0,j=new Uint8Array(e.buffer);for(let e=0;e<l;e++){let t=e<h?g:m;b[e]=j.slice(y,y+t),w[e]=x.encode(b[e]),y+=t,N=Math.max(N,t)}let v=new Uint8Array(i),E=0;for(s=0;s<N;s++)for(n=0;n<l;n++)s<b[n].length&&(v[E++]=b[n][s]);for(s=0;s<p;s++)for(n=0;n<l;n++)v[E++]=w[n][s];return v}(s,e,t)}(t,r,f),b=new i(a.getSymbolSize(t));!function(e,t){let r=e.size,a=l.getPositions(t);for(let t=0;t<a.length;t++){let s=a[t][0],n=a[t][1];for(let t=-1;t<=7;t++)if(!(s+t<=-1)&&!(r<=s+t))for(let a=-1;a<=7;a++)n+a<=-1||r<=n+a||(t>=0&&t<=6&&(0===a||6===a)||a>=0&&a<=6&&(0===t||6===t)||t>=2&&t<=4&&a>=2&&a<=4?e.set(s+t,n+a,!0,!0):e.set(s+t,n+a,!1,!0))}}(b,t);let w=b.size;for(let e=8;e<w-8;e++){let t=e%2==0;b.set(e,6,t,!0),b.set(6,e,t,!0)}return!function(e,t){let r=o.getPositions(t);for(let t=0;t<r.length;t++){let a=r[t][0],s=r[t][1];for(let t=-2;t<=2;t++)for(let r=-2;r<=2;r++)-2===t||2===t||-2===r||2===r||0===t&&0===r?e.set(a+t,s+r,!0,!0):e.set(a+t,s+r,!1,!0)}}(b,t),p(b,r,0),t>=7&&function(e,t){let r,a,s,n=e.size,i=h.getEncodedBits(t);for(let t=0;t<18;t++)r=Math.floor(t/3),a=t%3+n-8-3,s=(i>>t&1)==1,e.set(r,a,s,!0),e.set(a,r,s,!0)}(b,t),!function(e,t){let r=e.size,a=-1,s=r-1,n=7,i=0;for(let o=r-1;o>0;o-=2)for(6===o&&o--;;){for(let r=0;r<2;r++)if(!e.isReserved(s,o-r)){let a=!1;i<t.length&&(a=(t[i]>>>n&1)==1),e.set(s,o-r,a),-1==--n&&(i++,n=7)}if((s+=a)<0||r<=s){s-=a,a=-a;break}}}(b,y),isNaN(s)&&(s=c.getBestMask(b,p.bind(null,b,r))),c.applyMask(s,b),p(b,r,s),{modules:b,version:t,errorCorrectionLevel:r,maskPattern:s,segments:f}}(e,r,x,f)}},37866,(e,t,r)=>{function a(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw Error("Invalid hex color: "+e);(3===t.length||4===t.length)&&(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");let r=parseInt(t.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:255&r,hex:"#"+t.slice(0,6).join("")}}r.getOptions=function(e){e||(e={}),e.color||(e.color={});let t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,s=e.scale||4;return{width:r,scale:r?4:s,margin:t,color:{dark:a(e.color.dark||"#000000ff"),light:a(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},r.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},r.getImageWidth=function(e,t){let a=r.getScale(e,t);return Math.floor((e+2*t.margin)*a)},r.qrToImageData=function(e,t,a){let s=t.modules.size,n=t.modules.data,i=r.getScale(s,a),o=Math.floor((s+2*a.margin)*i),l=a.margin*i,c=[a.color.light,a.color.dark];for(let t=0;t<o;t++)for(let r=0;r<o;r++){let d=(t*o+r)*4,u=a.color.light;t>=l&&r>=l&&t<o-l&&r<o-l&&(u=c[+!!n[Math.floor((t-l)/i)*s+Math.floor((r-l)/i)]]),e[d++]=u.r,e[d++]=u.g,e[d++]=u.b,e[d]=u.a}}},99202,(e,t,r)=>{let a=e.r(37866);r.render=function(e,t,r){var s;let n=r,i=t;void 0!==n||t&&t.getContext||(n=t,t=void 0),t||(i=function(){try{return document.createElement("canvas")}catch(e){throw Error("You need to specify a canvas element")}}()),n=a.getOptions(n);let o=a.getImageWidth(e.modules.size,n),l=i.getContext("2d"),c=l.createImageData(o,o);return a.qrToImageData(c.data,e,n),s=i,l.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px",l.putImageData(c,0,0),i},r.renderToDataURL=function(e,t,a){let s=a;void 0!==s||t&&t.getContext||(s=t,t=void 0),s||(s={});let n=r.render(e,t,s),i=s.type||"image/png",o=s.rendererOpts||{};return n.toDataURL(i,o.quality)}},64905,(e,t,r)=>{let a=e.r(37866);function s(e,t){let r=e.a/255,a=t+'="'+e.hex+'"';return r<1?a+" "+t+'-opacity="'+r.toFixed(2).slice(1)+'"':a}function n(e,t,r){let a=e+t;return void 0!==r&&(a+=" "+r),a}r.render=function(e,t,r){let i=a.getOptions(t),o=e.modules.size,l=e.modules.data,c=o+2*i.margin,d=i.color.light.a?"<path "+s(i.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",u="<path "+s(i.color.dark,"stroke")+' d="'+function(e,t,r){let a="",s=0,i=!1,o=0;for(let l=0;l<e.length;l++){let c=Math.floor(l%t),d=Math.floor(l/t);c||i||(i=!0),e[l]?(o++,l>0&&c>0&&e[l-1]||(a+=i?n("M",c+r,.5+d+r):n("m",s,0),s=0,i=!1),c+1<t&&e[l+1]||(a+=n("h",o),o=0)):s++}return a}(l,o,i.margin)+'"/>',h='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+('viewBox="0 0 '+c+" ")+c+'" shape-rendering="crispEdges">'+d+u+"</svg>\n";return"function"==typeof r&&r(null,h),h}},73499,(e,t,r)=>{let a=e.r(21969),s=e.r(58850),n=e.r(99202),i=e.r(64905);function o(e,t,r,n,i){let o=[].slice.call(arguments,1),l=o.length,c="function"==typeof o[l-1];if(!c&&!a())throw Error("Callback required as last argument");if(c){if(l<2)throw Error("Too few arguments provided");2===l?(i=r,r=t,t=n=void 0):3===l&&(t.getContext&&void 0===i?(i=n,n=void 0):(i=n,n=r,r=t,t=void 0))}else{if(l<1)throw Error("Too few arguments provided");return 1===l?(r=t,t=n=void 0):2!==l||t.getContext||(n=r,r=t,t=void 0),new Promise(function(a,i){try{let i=s.create(r,n);a(e(i,t,n))}catch(e){i(e)}})}try{let a=s.create(r,n);i(null,e(a,t,n))}catch(e){i(e)}}r.create=s.create,r.toCanvas=o.bind(null,n.render),r.toDataURL=o.bind(null,n.renderToDataURL),r.toString=o.bind(null,function(e,t,r){return i.render(e,r)})},48820,e=>{"use strict";var t=e.i(9295),r=e.i(13428),a=e.i(45091),s=e.i(36271),n=e.i(12481),i=e.i(46800),o=e.i(65218),l=e.i(60379),c=e.i(13393),d=e.i(12123),u=e.i(36869);let h=(0,u.default)("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),f=(0,u.default)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var g=e.i(97964),m=e.i(66959);function p({isOpen:e,onClose:a,user:n,onSuccess:i}){let[o,l]=(0,r.useState)({name:n.name||"",mobile:n.mobile||"",company_name:n.company_name||"",address:n.address||""}),[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(""),f=e=>{l({...o,[e.target.name]:e.target.value})},p=async e=>{e.preventDefault(),d(!0),h("");try{let e=await (0,s.updateUserProfile)(n.id,o);i(e),a()}catch(e){h(e.message||"Failed to update profile")}finally{d(!1)}};return e?(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Profile"}),(0,t.jsx)("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",disabled:c,children:(0,t.jsx)(g.X,{className:"w-5 h-5 text-gray-500"})})]}),(0,t.jsxs)("form",{onSubmit:p,className:"p-6 space-y-6",children:[u&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:u}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsx)(m.default,{label:"Full Name",name:"name",value:o.name,onChange:f,required:!0,placeholder:"Enter your full name"}),(0,t.jsx)(m.default,{label:"Mobile Number",name:"mobile",type:"tel",value:o.mobile,onChange:f,required:!0,placeholder:"Enter your mobile number"}),(0,t.jsx)(m.default,{label:"Company Name",name:"company_name",value:o.company_name,onChange:f,placeholder:"Enter your company name (optional)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),(0,t.jsx)("textarea",{name:"address",value:o.address,onChange:f,rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter your address (optional)"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-100",children:[(0,t.jsx)("button",{type:"button",onClick:a,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:c,children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"btn-primary",disabled:c,children:c?"Saving...":"Save Changes"})]})]})]})}):null}var x=e.i(20925);let y=(0,u.default)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),b=(0,u.default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var w=e.i(95120);function N({isOpen:e,onClose:a,onSuccess:s}){let[n,i]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[o,l]=(0,r.useState)({current:!1,new:!1,confirm:!1}),[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(""),f={hasMinLength:n.newPassword.length>=8,hasUpperCase:/[A-Z]/.test(n.newPassword),hasLowerCase:/[a-z]/.test(n.newPassword),hasNumber:/[0-9]/.test(n.newPassword),hasSpecialChar:/[!@#$%^&*(),.?":{}|<>]/.test(n.newPassword)},m=f.hasMinLength&&f.hasUpperCase&&f.hasLowerCase&&f.hasNumber,p=e=>{i({...n,[e.target.name]:e.target.value}),h("")},N=async e=>{if(e.preventDefault(),d(!0),h(""),n.newPassword!==n.confirmPassword){h("New passwords do not match"),d(!1);return}if(!m){h("Password must meet all strength requirements"),d(!1);return}try{let{error:e}=await w.supabase.auth.signInWithPassword({email:(await w.supabase.auth.getUser()).data.user?.email||"",password:n.currentPassword});if(e)throw Error("Incorrect current password");let{error:t}=await w.supabase.auth.updateUser({password:n.newPassword});if(t)throw t;s(),a(),i({currentPassword:"",newPassword:"",confirmPassword:""})}catch(e){h(e.message||"Failed to change password")}finally{d(!1)}};return e?(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Change Password"}),(0,t.jsx)("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",disabled:c,children:(0,t.jsx)(g.X,{className:"w-5 h-5 text-gray-500"})})]}),(0,t.jsxs)("form",{onSubmit:N,className:"p-6 space-y-6",children:[u&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:u}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:o.current?"text":"password",name:"currentPassword",value:n.currentPassword,onChange:p,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent pr-10",placeholder:"Enter current password"}),(0,t.jsx)("button",{type:"button",onClick:()=>l({...o,current:!o.current}),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:o.current?(0,t.jsx)(y,{className:"w-5 h-5"}):(0,t.jsx)(x.Eye,{className:"w-5 h-5"})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:o.new?"text":"password",name:"newPassword",value:n.newPassword,onChange:p,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent pr-10",placeholder:"Enter new password"}),(0,t.jsx)("button",{type:"button",onClick:()=>l({...o,new:!o.new}),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:o.new?(0,t.jsx)(y,{className:"w-5 h-5"}):(0,t.jsx)(x.Eye,{className:"w-5 h-5"})})]}),n.newPassword&&(0,t.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,t.jsx)("p",{className:"text-xs font-medium text-gray-600",children:"Password must contain:"}),(0,t.jsx)("div",{className:"space-y-1",children:Object.entries({"At least 8 characters":f.hasMinLength,"One uppercase letter":f.hasUpperCase,"One lowercase letter":f.hasLowerCase,"One number":f.hasNumber}).map(([e,r])=>(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[r?(0,t.jsx)(b,{className:"w-4 h-4 text-green-500"}):(0,t.jsx)(g.X,{className:"w-4 h-4 text-gray-300"}),(0,t.jsx)("span",{className:r?"text-green-700":"text-gray-500",children:e})]},e))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:o.confirm?"text":"password",name:"confirmPassword",value:n.confirmPassword,onChange:p,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent pr-10",placeholder:"Confirm new password"}),(0,t.jsx)("button",{type:"button",onClick:()=>l({...o,confirm:!o.confirm}),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:o.confirm?(0,t.jsx)(y,{className:"w-5 h-5"}):(0,t.jsx)(x.Eye,{className:"w-5 h-5"})})]}),n.confirmPassword&&n.newPassword!==n.confirmPassword&&(0,t.jsx)("p",{className:"mt-1 text-xs text-red-600",children:"Passwords do not match"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-100",children:[(0,t.jsx)("button",{type:"button",onClick:a,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:c,children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"btn-primary",disabled:c||!m,children:c?"Changing...":"Change Password"})]})]})]})}):null}var j=e.i(15746),v=e.i(73499);function E({userId:e}){let[a,s]=(0,r.useState)(!1),[n,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)(""),[d,u]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[g,m]=(0,r.useState)(!0),[p,x]=(0,r.useState)(""),[y,N]=(0,r.useState)("");(0,r.useEffect)(()=>{E()},[]);let E=async()=>{try{let{data:e,error:t}=await w.supabase.auth.mfa.listFactors();if(t)throw t;let r=e?.totp?.[0];s(r?.status==="verified")}catch(e){console.error("Error checking MFA status:",e),x("Unable to check 2FA status. This feature may not be enabled for your account.")}finally{m(!1)}},C=async()=>{i(!0),x(""),N("");try{let{data:e,error:t}=await w.supabase.auth.mfa.enroll({factorType:"totp"});if(t)throw t;if(e){u(e.totp.secret);let t=e.totp.uri,r=await v.default.toDataURL(t);l(r)}}catch(e){x(e.message||"Failed to enable 2FA. This feature may not be available."),i(!1)}},P=async()=>{if(!h||6!==h.length)return void x("Please enter a valid 6-digit code");m(!0),x("");try{let e=await w.supabase.auth.mfa.listFactors(),t=e.data?.totp?.[0]?.id;if(!t)throw Error("No factor found");let{error:r}=await w.supabase.auth.mfa.challengeAndVerify({factorId:t,code:h});if(r)throw r;N("2FA enabled successfully!"),s(!0),i(!1),l(""),f("")}catch(e){x(e.message||"Invalid verification code")}finally{m(!1)}},A=async()=>{if(confirm("Are you sure you want to disable two-factor authentication?")){m(!0),x("");try{let e=await w.supabase.auth.mfa.listFactors(),t=e.data?.totp?.[0]?.id;if(!t)throw Error("No factor found");let{error:r}=await w.supabase.auth.mfa.unenroll({factorId:t});if(r)throw r;N("2FA disabled successfully"),s(!1)}catch(e){x(e.message||"Failed to disable 2FA")}finally{m(!1)}}};return g&&!n?(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"p-3 bg-primary-50 rounded-lg",children:(0,t.jsx)(c.Shield,{className:"w-6 h-6 text-primary-600"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Two-Factor Authentication"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Add an extra layer of security to your account by requiring a code from your authenticator app when signing in."})]})]}),p&&(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[(0,t.jsx)(j.AlertCircle,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,t.jsx)("p",{className:"text-sm text-red-700",children:p})]}),y&&(0,t.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-start gap-3",children:[(0,t.jsx)(b,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),(0,t.jsx)("p",{className:"text-sm text-green-700",children:y})]}),!a&&!n&&(0,t.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,t.jsxs)("p",{className:"text-gray-700 mb-4",children:["Two-factor authentication is currently ",(0,t.jsx)("strong",{children:"disabled"}),". Enable it to secure your account."]}),(0,t.jsx)("button",{onClick:C,className:"btn-primary",children:"Enable 2FA"})]}),n&&o&&(0,t.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-4",children:"Scan this QR code with your authenticator app:"}),(0,t.jsx)("img",{src:o,alt:"2FA QR Code",className:"mx-auto w-48 h-48"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Or enter this code manually: ",(0,t.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:d})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter Verification Code"}),(0,t.jsx)("input",{type:"text",value:h,onChange:e=>f(e.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",maxLength:6,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-center text-2xl tracking-widest"})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>{i(!1),l(""),f(""),x("")},className:"flex-1 px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,t.jsx)("button",{onClick:P,disabled:6!==h.length||g,className:"flex-1 btn-primary",children:g?"Verifying...":"Verify & Enable"})]})]}),a&&(0,t.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,t.jsx)(b,{className:"w-5 h-5 text-green-600"}),(0,t.jsxs)("p",{className:"text-green-700 font-medium",children:["Two-factor authentication is currently ",(0,t.jsx)("strong",{children:"enabled"})]})]}),(0,t.jsx)("button",{onClick:A,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",disabled:g,children:g?"Disabling...":"Disable 2FA"})]}),(0,t.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,t.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,t.jsx)("strong",{children:"Recommended apps:"})," Google Authenticator, Authy, Microsoft Authenticator"]})})]})}function C(){let[e,u]=(0,r.useState)(null),[g,m]=(0,r.useState)(null),[x,y]=(0,r.useState)(!0),[b,w]=(0,r.useState)("personal"),[j,v]=(0,r.useState)(!1),[C,P]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{try{let e=await (0,a.getCurrentUser)();if(u(e),e)try{let t=await (0,s.getUserPreferences)(e.id);m(t)}catch(t){console.error("Error loading preferences:",t),m({id:"temp-id",user_id:e.id,email_notifications:!0,sms_notifications:!0,whatsapp_notifications:!0,marketing_emails:!1,policy_expiry_alerts:!0,claim_updates:!0,created_at:new Date,updated_at:new Date})}}catch(e){console.error("Error loading user:",e)}finally{y(!1)}})()},[]);let A=async(t,r)=>{if(e&&g)try{let a=await (0,s.updateUserPreferences)(e.id,{[t]:r});m(a)}catch(e){console.error("Error updating preference:",e)}};if(x)return(0,t.jsx)("div",{className:"p-8 text-center",children:"Loading profile..."});if(!e)return(0,t.jsx)("div",{className:"p-8 text-center",children:"Please log in to view your profile."});let k=[{id:"personal",label:"Personal Info",icon:n.User},{id:"security",label:"Security",icon:d.Lock},{id:"preferences",label:"Preferences",icon:h}];return(0,t.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"My Profile"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,t.jsx)("div",{className:"md:col-span-1 space-y-2",children:k.map(e=>(0,t.jsxs)("button",{onClick:()=>w(e.id),className:`w-full flex items-center p-3 rounded-xl transition-colors ${b===e.id?"bg-primary-50 text-primary-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[(0,t.jsx)(e.icon,{className:`w-5 h-5 mr-3 ${b===e.id?"text-primary-600":"text-gray-400"}`}),e.label]},e.id))}),(0,t.jsx)("div",{className:"md:col-span-3",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:["personal"===b&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-20 h-20 rounded-full bg-primary-100 flex items-center justify-center text-primary-600 text-2xl font-bold",children:e.name.charAt(0).toUpperCase()}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:e.name}),(0,t.jsx)("p",{className:"text-gray-500",children:e.email}),(0,t.jsx)("span",{className:"inline-block mt-2 px-2 py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded-md capitalize",children:e.role})]})]}),(0,t.jsxs)("button",{onClick:()=>v(!0),className:"btn-secondary flex items-center gap-2",children:[(0,t.jsx)(f,{className:"w-4 h-4"}),"Edit Profile"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Email"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-900",children:[(0,t.jsx)(i.Mail,{className:"w-4 h-4 text-gray-400"}),(0,t.jsx)("span",{children:e.email})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Phone"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-900",children:[(0,t.jsx)(o.Phone,{className:"w-4 h-4 text-gray-400"}),(0,t.jsx)("span",{children:e.mobile||"Not provided"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Company"}),(0,t.jsx)("span",{className:"text-gray-900",children:e.company_name||"Not provided"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Customer ID"}),(0,t.jsx)("span",{className:"text-gray-900 font-mono text-sm",children:e.customer_id||"N/A"})]})]}),e.address&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Address"}),(0,t.jsxs)("div",{className:"flex items-start gap-2 text-gray-900",children:[(0,t.jsx)(l.MapPin,{className:"w-4 h-4 text-gray-400 mt-1"}),(0,t.jsx)("span",{children:e.address})]})]})]}),"security"===b&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Password"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Keep your account secure by using a strong password."}),(0,t.jsx)("button",{onClick:()=>P(!0),className:"btn-secondary",children:"Change Password"})]}),(0,t.jsx)("div",{className:"border-t border-gray-200 pt-6",children:(0,t.jsx)(E,{userId:e.id})})]}),"preferences"===b&&g&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Notification Preferences"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-100 rounded-xl",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(i.Mail,{className:"w-5 h-5 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Email Notifications"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Receive policy updates via email"})]})]}),(0,t.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:g.email_notifications,onChange:e=>A("email_notifications",e.target.checked)}),(0,t.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-100 rounded-xl",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(o.Phone,{className:"w-5 h-5 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"SMS Notifications"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Receive policy updates via SMS"})]})]}),(0,t.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:g.sms_notifications,onChange:e=>A("sms_notifications",e.target.checked)}),(0,t.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-100 rounded-xl",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(h,{className:"w-5 h-5 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Policy Expiry Alerts"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Get notified when policies are expiring"})]})]}),(0,t.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:g.policy_expiry_alerts,onChange:e=>A("policy_expiry_alerts",e.target.checked)}),(0,t.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-100 rounded-xl",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(c.Shield,{className:"w-5 h-5 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Claim Updates"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Receive updates on your claims status"})]})]}),(0,t.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:g.claim_updates,onChange:e=>A("claim_updates",e.target.checked)}),(0,t.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})]})]})]})})]}),(0,t.jsx)(p,{isOpen:j,onClose:()=>v(!1),user:e,onSuccess:e=>{u(e)}}),(0,t.jsx)(N,{isOpen:C,onClose:()=>P(!1),onSuccess:()=>{alert("Password changed successfully! Please log in again.")}})]})}e.s(["default",()=>C],48820)}]);