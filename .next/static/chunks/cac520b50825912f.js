(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,95349,e=>{"use strict";var a=e.i(9295),l=e.i(13428),t=e.i(97964),r=e.i(24581),s=e.i(35307),i=e.i(66959),n=e.i(12044),c=e.i(36271),d=e.i(83311),o=e.i(63632);function u({userId:e,initialData:u,onClose:m,onSuccess:p}){let[h,x]=(0,l.useState)(!1),[y,b]=(0,l.useState)({}),[v,g]=(0,l.useState)({vehicle_number:u?.vehicle_number||"",policy_number:u?.policy_number||"",vehicle_type:u?.vehicle_type||"Car",manufacturer:u?.manufacturer||"",model:u?.model||"",fuel_type:u?.fuel_type||"Petrol",manufacturing_year:u?.manufacturing_year||new Date().getFullYear(),number_plate_type:u?.number_plate_type||"White",ownership_type:u?.ownership_type||"Individual",insurer_name:u?.insurer_name||"",premium_amount:u?.premium_amount||0,policy_start_date:u?.policy_start_date?new Date(u.policy_start_date):new Date,policy_end_date:new Date(u?.policy_end_date?u.policy_end_date:new Date().setFullYear(new Date().getFullYear()+1)),rc_docs:u?.rc_docs||[],previous_policy_docs:u?.previous_policy_docs||[],dl_docs:u?.dl_docs||[]});(0,l.useEffect)(()=>{if(v.policy_start_date&&!u){let e=new Date(new Date(v.policy_start_date));e.setFullYear(e.getFullYear()+1),e.setDate(e.getDate()-1),g(a=>({...a,policy_end_date:e}))}},[v.policy_start_date,u]);let f=e=>{let{name:a,value:l,type:t}=e.target;g(e=>({...e,[a]:"number"===t?Number(l):l})),y[a]&&b(e=>{let l={...e};return delete l[a],l})},_=e=>{let{name:a,value:l}=e.target;g(e=>({...e,[a]:new Date(l)}))},j=async a=>{let l;if(a.preventDefault(),l={},(0,o.validateVehicleNumber)(v.vehicle_number||"")||(l.vehicle_number="Invalid vehicle number format (e.g., KA01AB1234)"),(0,o.validatePolicyNumber)(v.policy_number||"")||(l.policy_number="Policy number is required"),(0,o.validatePremiumAmount)(v.premium_amount||0)||(l.premium_amount="Invalid premium amount"),v.policy_start_date&&v.policy_end_date&&!(0,o.validateDateRange)(v.policy_start_date,v.policy_end_date)&&(l.policy_end_date="End date must be after start date"),v.manufacturer||(l.manufacturer="Manufacturer is required"),v.model||(l.model="Model is required"),v.insurer_name||(l.insurer_name="Insurer name is required"),b(l),0===Object.keys(l).length){x(!0);try{let a={...v,user_id:e,policy_start_date:new Date(v.policy_start_date),policy_end_date:new Date(v.policy_end_date),rc_docs:v.rc_docs||[],previous_policy_docs:v.previous_policy_docs||[],dl_docs:v.dl_docs||[]};u?.id?await (0,c.updateMotorPolicy)(u.id,a):await (0,c.addMotorPolicy)(a),p(),m()}catch(e){console.error("Error saving policy:",e),b(e=>({...e,submit:"Failed to save policy. Please try again."}))}finally{x(!1)}}},N=e=>a=>{g(l=>({...l,[e]:[...l[e]||[],a]}))};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b sticky top-0 bg-white z-10",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:u?"Edit Motor Policy":"Add New Motor Policy"}),(0,a.jsx)("button",{onClick:m,className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)(t.X,{className:"w-6 h-6"})})]}),(0,a.jsxs)("form",{onSubmit:j,className:"p-6 space-y-8",children:[y.submit&&(0,a.jsx)("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg text-sm",children:y.submit}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Vehicle Details"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,a.jsx)(i.default,{label:"Vehicle Number",name:"vehicle_number",value:v.vehicle_number||"",onChange:f,placeholder:"KA01AB1234",error:y.vehicle_number,required:!0}),(0,a.jsx)(i.default,{label:"Vehicle Type",name:"vehicle_type",type:"select",value:v.vehicle_type||"Car",onChange:f,options:[{value:"Car",label:"Car"},{value:"Bike",label:"Bike"},{value:"Bus",label:"Bus"},{value:"GCV",label:"Goods Carrying Vehicle"},{value:"Misc",label:"Miscellaneous"}],required:!0}),(0,a.jsx)(i.default,{label:"Number Plate Type",name:"number_plate_type",type:"select",value:v.number_plate_type??"",onChange:f,required:!0,options:[{value:"White",label:"White (Pvt)"},{value:"Yellow",label:"Yellow (Commercial)"},{value:"EV",label:"EV (Green)"}]}),(0,a.jsx)(i.default,{label:"Ownership Type",name:"ownership_type",type:"select",value:v.ownership_type??"Individual",onChange:f,required:!0,options:[{value:"Individual",label:"Individual"},{value:"Company",label:"Company"}]}),(0,a.jsx)(i.default,{label:"Manufacturer",name:"manufacturer",type:"select",value:v.manufacturer||"",onChange:f,options:d.CAR_MANUFACTURERS.map(e=>({value:e,label:e})),error:y.manufacturer,required:!0}),(0,a.jsx)(i.default,{label:"Model",name:"model",value:v.model||"",onChange:f,placeholder:"e.g. Swift",error:y.model,required:!0}),(0,a.jsx)(i.default,{label:"Fuel Type",name:"fuel_type",type:"select",value:v.fuel_type||"Petrol",onChange:f,options:[{value:"Petrol",label:"Petrol"},{value:"Diesel",label:"Diesel"},{value:"CNG",label:"CNG"},{value:"Electric",label:"Electric"},{value:"Hybrid",label:"Hybrid"}],required:!0}),(0,a.jsx)(i.default,{label:"Manufacturing Year",name:"manufacturing_year",type:"number",value:v.manufacturing_year||new Date().getFullYear(),onChange:f,min:1990,max:new Date().getFullYear(),required:!0})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Policy Details"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,a.jsx)(i.default,{label:"Policy Number",name:"policy_number",value:v.policy_number||"",onChange:f,placeholder:"Enter policy number",error:y.policy_number,required:!0}),(0,a.jsx)(i.default,{label:"Insurer Name",name:"insurer_name",type:"select",value:v.insurer_name||"",onChange:f,options:d.INSURANCE_COMPANIES.map(e=>({value:e,label:e})),error:y.insurer_name,required:!0}),(0,a.jsx)(i.default,{label:"Premium Amount (â‚¹)",name:"premium_amount",type:"number",value:v.premium_amount||"",onChange:f,error:y.premium_amount,required:!0}),(0,a.jsx)(i.default,{label:"Start Date",name:"policy_start_date",type:"date",value:v.policy_start_date?new Date(v.policy_start_date).toISOString().split("T")[0]:"",onChange:_,required:!0}),(0,a.jsx)(i.default,{label:"End Date",name:"policy_end_date",type:"date",value:v.policy_end_date?new Date(v.policy_end_date).toISOString().split("T")[0]:"",onChange:_,error:y.policy_end_date,required:!0})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Documents"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,a.jsx)(n.default,{label:"RC Copy",name:"rc_docs",bucket:"rc-copies",onUploadComplete:N("rc_docs"),existingFile:v.rc_docs&&v.rc_docs.length>0?{url:v.rc_docs[0],name:"RC Document"}:void 0}),(0,a.jsx)(n.default,{label:"Previous Policy",name:"previous_policy_docs",bucket:"policy-documents",onUploadComplete:N("previous_policy_docs"),existingFile:v.previous_policy_docs&&v.previous_policy_docs.length>0?{url:v.previous_policy_docs[0],name:"Previous Policy"}:void 0})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[(0,a.jsx)("button",{type:"button",onClick:m,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",disabled:h,children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center",disabled:h,children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Save,{className:"w-4 h-4 mr-2"}),"Save Policy"]})})]})]})]})})}e.s(["default",()=>u])},58479,e=>{"use strict";let a=(0,e.i(36869).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>a],58479)},47219,e=>{"use strict";let a=(0,e.i(36869).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>a],47219)},35307,e=>{"use strict";let a=(0,e.i(36869).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],35307)},72527,e=>{"use strict";let a=(0,e.i(36869).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],72527)},24581,e=>{"use strict";let a=(0,e.i(36869).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>a],24581)},97964,66959,e=>{"use strict";let a=(0,e.i(36869).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>a],97964);var l=e.i(9295);function t({label:e,name:a,type:t="text",value:r,onChange:s,onBlur:i,error:n,placeholder:c,required:d=!1,disabled:o=!1,min:u,max:m,step:p,options:h=[],rows:x=4,className:y=""}){let b=`
    w-full px-4 py-2 border rounded-lg
    focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent
    disabled:bg-gray-100 disabled:cursor-not-allowed
    transition-colors
    ${n?"border-red-500 focus:ring-red-500":"border-gray-300"}
    ${y}
  `;return(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("label",{htmlFor:a,className:"block text-sm font-medium text-gray-700",children:[e,d&&(0,l.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),"select"===t?(0,l.jsxs)("select",{id:a,name:a,value:r,onChange:s,onBlur:i,disabled:o,required:d,className:b,children:[(0,l.jsxs)("option",{value:"",children:["Select ",e]}),h.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))]}):"textarea"===t?(0,l.jsx)("textarea",{id:a,name:a,value:r,onChange:s,onBlur:i,placeholder:c,disabled:o,required:d,rows:x,className:b}):(0,l.jsx)("input",{id:a,name:a,type:t,value:r,onChange:s,onBlur:i,placeholder:c,disabled:o,required:d,min:u,max:m,step:p,className:b}),n&&(0,l.jsxs)("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[(0,l.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),n]})]})}e.s(["default",()=>t],66959)},12044,e=>{"use strict";var a=e.i(9295),l=e.i(13428),t=e.i(36869);let r=(0,t.default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var s=e.i(97964);let i=(0,t.default)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);var n=e.i(47219),c=e.i(95120);async function d(e,a){try{let l=Date.now(),t=Math.random().toString(36).substring(2,8),r=e.name.split(".").pop(),s=`${l}_${t}.${r}`,{data:i,error:n}=await c.supabase.storage.from(a).upload(s,e,{cacheControl:"3600",upsert:!0});if(n)throw n;let{data:{publicUrl:d}}=c.supabase.storage.from(a).getPublicUrl(i.path);return d}catch(e){throw console.error("Error uploading file:",e),Error(e.message||"Failed to upload file")}}function o({label:e,name:t,accept:c=".pdf,.jpg,.jpeg,.png",bucket:o,onUploadComplete:u,existingFile:m,required:p=!1,maxSizeMB:h=5}){let[x,y]=(0,l.useState)(null),[b,v]=(0,l.useState)(m?.url||null),[g,f]=(0,l.useState)(m?.name||""),[_,j]=(0,l.useState)(!1),[N,w]=(0,l.useState)(0),[C,k]=(0,l.useState)(""),M=(0,l.useRef)(null),S=async e=>{if(k(""),e.size>1024*h*1024)return void k(`File size must be less than ${h}MB`);if(y(e),f(e.name),e.type.startsWith("image/")){let a=new FileReader;a.onload=e=>{v(e.target?.result)},a.readAsDataURL(e)}else v(null);await D(e)},D=async e=>{j(!0),w(0);try{let a=setInterval(()=>{w(e=>Math.min(e+10,90))},200),l=await d(e,o);clearInterval(a),w(100),j(!1),u(l,e.name)}catch(e){console.error("Upload error:",e),k("Failed to upload file. Please try again."),j(!1),y(null),v(null)}};return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[e,p&&(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),x||m?(0,a.jsx)("div",{className:"border border-gray-300 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[b?(0,a.jsx)("img",{src:b,alt:"Preview",className:"w-16 h-16 object-cover rounded"}):(0,a.jsx)(i,{className:"w-8 h-8 text-gray-400"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:g}),_&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-primary-600 h-2 rounded-full transition-all",style:{width:`${N}%`}})}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Uploading... ",N,"%"]})]}),!_&&100===N&&(0,a.jsxs)("p",{className:"text-xs text-green-600 flex items-center gap-1 mt-1",children:[(0,a.jsx)(n.CheckCircle,{className:"w-3 h-3"}),"Uploaded successfully"]})]})]}),!_&&(0,a.jsx)("button",{type:"button",onClick:()=>{y(null),v(null),f(""),w(0),k(""),M.current&&(M.current.value="")},className:"text-red-600 hover:text-red-800 p-1 ml-4 hover:bg-red-50 rounded-full transition-colors",children:(0,a.jsx)(s.X,{className:"w-5 h-5"})})]})}):(0,a.jsxs)("div",{onDrop:e=>{e.preventDefault();let a=e.dataTransfer.files[0];a&&S(a)},onDragOver:e=>{e.preventDefault()},onClick:()=>M.current?.click(),className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-primary-500 transition-colors",children:[(0,a.jsx)(r,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Click to upload or drag and drop"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[c.toUpperCase()," (Max ",h,"MB)"]}),(0,a.jsx)("input",{ref:M,type:"file",accept:c,onChange:e=>e.target.files?.[0]&&S(e.target.files[0]),className:"hidden"})]}),C&&(0,a.jsxs)("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),C]})]})}e.s(["default",()=>o],12044)},83311,63632,e=>{"use strict";e.s(["CAR_MANUFACTURERS",0,["Maruti Suzuki","Hyundai","Tata","Honda","Toyota","Mahindra","Kia","Volkswagen","Renault","Nissan","Ford","Skoda","MG","Jeep","BMW","Mercedes-Benz","Audi","Volvo","Others"],"INSURANCE_COMPANIES",0,["HDFC ERGO","GO DIGIT","ICICI LOMBARD","TATA AIG","SHRIRAM GIC","ACKO GIC","CHOLA MS","INDUSIND GIC","BAJAJ GIC","IFFCO GIC","liberty gic","Royal sundaram","magma","kotak gic","sbi gic","national insurance","oriental","united India gic","new india gic","OTHERS"]],83311),e.s(["validateDateRange",0,(e,a)=>e<a,"validatePolicyNumber",0,e=>e.trim().length>=5,"validatePremiumAmount",0,(e,a=0,l=1e7)=>e>=a&&e<=l&&!isNaN(e),"validateVehicleNumber",0,e=>/^[A-Z]{2}[0-9]{1,2}[A-Z]{1,2}[0-9]{4}$/.test(e.replace(/\s+/g,""))],63632)},34108,e=>{"use strict";let a=(0,e.i(36869).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>a],34108)},66405,e=>{"use strict";var a=e.i(9295),l=e.i(13428),t=e.i(63030),r=e.i(72527),s=e.i(34108),i=e.i(58479),n=e.i(36271),c=e.i(45091),d=e.i(96534),o=e.i(95349);function u(){let e=(0,t.useRouter)(),[u,m]=(0,l.useState)([]),[p,h]=(0,l.useState)(!0),[x,y]=(0,l.useState)(!1),[b,v]=(0,l.useState)(void 0),[g,f]=(0,l.useState)(null),_=async e=>{h(!0);try{let a=(await (0,n.getUserMotorPolicies)(e)).map(e=>({...e,status:(0,d.calculatePolicyStatus)(new Date(e.policy_end_date))}));m(a)}catch(e){console.error("Error loading policies:",e)}finally{h(!1)}};(0,l.useEffect)(()=>{(async()=>{let a=await (0,c.getCurrentUser)();a?(f(a),_(a.id)):e.push("/login")})()},[e]);let j=async e=>{if(confirm("Are you sure you want to delete this policy?")&&g)try{await (0,n.deleteMotorPolicy)(e),await _(g.id)}catch(e){console.error("Error deleting policy:",e),alert("Failed to delete policy")}},N=u.length,w=u.reduce((e,a)=>e+Number(a.premium_amount),0),C=u.filter(e=>"Expiring Soon"===e.status).length;return p?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Motor/Vehicle Policies"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your vehicle insurance policies"})]}),(0,a.jsxs)("button",{onClick:()=>y(!0),className:"btn-primary",children:[(0,a.jsx)(r.Plus,{className:"w-4 h-4 mr-2"}),"Add New Policy"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"stat-card bg-blue-50 border-blue-100",children:[(0,a.jsx)("p",{className:"stat-label",children:"Total Vehicles"}),(0,a.jsx)("p",{className:"stat-value text-blue-600",children:N})]}),(0,a.jsxs)("div",{className:"stat-card bg-green-50 border-green-100",children:[(0,a.jsx)("p",{className:"stat-label",children:"Total Premium"}),(0,a.jsx)("p",{className:"stat-value text-green-600",children:(0,d.formatCurrency)(w)})]}),(0,a.jsxs)("div",{className:"stat-card bg-orange-50 border-orange-100",children:[(0,a.jsx)("p",{className:"stat-label",children:"Expiring Soon"}),(0,a.jsx)("p",{className:"stat-value text-orange-600",children:C})]})]}),0===u.length?(0,a.jsx)("div",{className:"card text-center py-12",children:(0,a.jsxs)("div",{className:"text-gray-500",children:[(0,a.jsx)("p",{className:"text-lg font-medium mb-2",children:"No motor policies yet"}),(0,a.jsx)("p",{className:"mb-6",children:"Add your first vehicle policy to get started"}),(0,a.jsxs)("button",{onClick:()=>y(!0),className:"btn-primary mx-auto",children:[(0,a.jsx)(r.Plus,{className:"w-4 h-4 mr-2"}),(0,a.jsx)("span",{children:"Add Your First Policy"})]})]})}):(0,a.jsx)("div",{className:"card overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"table",children:[(0,a.jsx)("thead",{className:"table-header",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"table-header-cell",children:"Vehicle Number"}),(0,a.jsx)("th",{className:"table-header-cell",children:"Make/Model"}),(0,a.jsx)("th",{className:"table-header-cell",children:"Insurer"}),(0,a.jsx)("th",{className:"table-header-cell",children:"Expiry Date"}),(0,a.jsx)("th",{className:"table-header-cell",children:"Premium"}),(0,a.jsx)("th",{className:"table-header-cell",children:"Status"}),(0,a.jsx)("th",{className:"table-header-cell",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:u.map(e=>(0,a.jsxs)("tr",{className:"table-row",children:[(0,a.jsx)("td",{className:"table-cell font-medium",children:e.vehicle_number}),(0,a.jsxs)("td",{className:"table-cell",children:[(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.manufacturer}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.model})]}),(0,a.jsx)("td",{className:"table-cell",children:e.insurer_name}),(0,a.jsx)("td",{className:"table-cell",children:(0,d.formatDate)(e.policy_end_date)}),(0,a.jsx)("td",{className:"table-cell",children:(0,d.formatCurrency)(e.premium_amount)}),(0,a.jsx)("td",{className:"table-cell",children:(0,a.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(e=>{switch(e){case"Active":return"bg-green-100 text-green-800";case"Expiring Soon":return"bg-orange-100 text-orange-800";case"Expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(e.status||"Active")}`,children:e.status||"Active"})}),(0,a.jsx)("td",{className:"table-cell",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{v(e),y(!0)},className:"p-1 text-gray-500 hover:text-primary-600 transition-colors",title:"Edit",children:(0,a.jsx)(s.Edit,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>j(e.id),className:"p-1 text-gray-500 hover:text-red-600 transition-colors",title:"Delete",children:(0,a.jsx)(i.Trash2,{className:"w-4 h-4"})})]})})]},e.id))})]})})}),x&&g&&(0,a.jsx)(o.default,{userId:g.id,initialData:b,onClose:()=>{y(!1),v(void 0)},onSuccess:()=>_(g.id)})]})}e.s(["default",()=>u])}]);