(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,61813,e=>{"use strict";let t=(0,e.i(36869).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],61813)},28198,e=>{"use strict";var t=e.i(9295),s=e.i(13428),r=e.i(44539),a=e.i(61813),i=e.i(45091),l=e.i(36271);function d(){let[e,d]=(0,s.useState)(null),[c,n]=(0,s.useState)([]),[x,o]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{(async()=>{o(!0);try{let e=await (0,i.getCurrentUser)();if(!e)return void o(!1);d(e);let[t,s,r]=await Promise.all([(0,l.getUserMotorPolicies)(e.id),(0,l.getUserHealthPolicies)(e.id),(0,l.getUserCommercialPolicies)(e.id)]),a=new Date,c=[...t.map(e=>({...e,type:"Motor"})),...s.map(e=>({...e,type:"Health"})),...r.map(e=>({...e,type:"Commercial"}))].filter(e=>{let t="policy_end_date"in e?e.policy_end_date:e.expiry_date;return new Date(t)<a});n(c.sort((e,t)=>{let s="policy_end_date"in e?e.policy_end_date:e.expiry_date,r="policy_end_date"in t?t.policy_end_date:t.expiry_date;return new Date(r).getTime()-new Date(s).getTime()}))}catch(e){console.error("Error fetching history:",e)}finally{o(!1)}})()},[]),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Policy History"}),(0,t.jsx)("p",{className:"text-gray-500",children:"View your expired and past insurance policies"})]}),x?(0,t.jsx)("div",{className:"flex justify-center py-12",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):0===c.length?(0,t.jsxs)("div",{className:"text-center py-12 bg-white rounded-xl border border-dashed border-gray-300",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(r.History,{className:"w-8 h-8 text-gray-400"})}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No History Found"}),(0,t.jsx)("p",{className:"text-gray-500",children:"You don't have any expired policies yet."})]}):(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-left",children:[(0,t.jsx)("thead",{className:"bg-gray-50 border-b border-gray-100",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Policy Details"}),(0,t.jsx)("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Type"}),(0,t.jsx)("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Insurer"}),(0,t.jsx)("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Expired On"}),(0,t.jsx)("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Action"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-100",children:c.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,t.jsxs)("td",{className:"px-6 py-4",children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:"Motor"===e.type?`${e.vehicle_number} - ${e.model}`:"Health"===e.type?`${e.company_name} Health`:`${e.lob_type} Policy`}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:e.policy_number})]}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:e.type})}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.insurer_name}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date("policy_end_date"in e?e.policy_end_date:e.expiry_date).toLocaleDateString()}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Expired"})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("button",{className:"text-primary-600 hover:text-primary-700 font-medium text-sm flex items-center",children:["Renew ",(0,t.jsx)(a.ArrowRight,{className:"w-4 h-4 ml-1"})]})})]},e.id))})]})})})]})}e.s(["default",()=>d])}]);