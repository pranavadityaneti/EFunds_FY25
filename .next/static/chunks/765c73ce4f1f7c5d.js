(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,64035,e=>{"use strict";var t=e.i(9295),r=e.i(13428),a=e.i(84230),n=e.i(63030),i=e.i(95120);async function s(){try{let{data:e}=await i.supabase.from("users").select("role"),t=e?.length||0,r=e?.filter(e=>"customer"===e.role).length||0,a=e?.filter(e=>"corporate"===e.role).length||0,{data:n}=await i.supabase.from("motor_policies").select("policy_start_date, policy_end_date"),{data:s}=await i.supabase.from("health_policies").select("expiry_date"),{data:l}=await i.supabase.from("commercial_policies").select("expiry_date");console.log("[AdminMetrics] Raw policy counts:",{motor:n?.length||0,health:s?.length||0,commercial:l?.length||0});let o=new Date;o.setHours(0,0,0,0);let c=n?.filter(e=>!!e.policy_end_date&&new Date(e.policy_end_date)>=o).length||0,d=s?.filter(e=>!!e.expiry_date&&new Date(e.expiry_date)>=o).length||0,u=l?.filter(e=>!!e.expiry_date&&new Date(e.expiry_date)>=o).length||0,m=(n?.length||0)+(s?.length||0)+(l?.length||0),p=c+d+u,f=m-p;console.log("[AdminMetrics] Policy breakdown:",{total:m,active:p,expired:f,motorActive:c,healthActive:d,commercialActive:u});let h=new Date;h.setDate(o.getDate()+20);let x=n?.filter(e=>{if(!e.policy_end_date)return!1;let t=new Date(e.policy_end_date);return t>=o&&t<=h}).length||0,y=s?.filter(e=>{if(!e.expiry_date)return!1;let t=new Date(e.expiry_date);return t>=o&&t<=h}).length||0,g=l?.filter(e=>{if(!e.expiry_date)return!1;let t=new Date(e.expiry_date);return t>=o&&t<=h}).length||0,b=x+y+g;console.log("[AdminMetrics] Expiring soon calculation:",{expiringSoon:b,dateRange:`${o.toLocaleDateString()} to ${h.toLocaleDateString()}`});let{data:v}=await i.supabase.from("claims").select("status, created_at"),j=v?.length||0,N=v?.filter(e=>"New"===e.status||"In Progress"===e.status).length||0,w=v?.filter(e=>"Settled"===e.status).length||0,A=v?.filter(e=>"Rejected"===e.status).length||0,S=new Date(o.getFullYear(),o.getMonth(),1),D=v?.filter(e=>new Date(e.created_at)>=S).length||0,{data:O}=await i.supabase.from("quote_requests").select("status"),P=O?.length||0,_=O?.filter(e=>"New"===e.status||"In Progress"===e.status).length||0,C=O?.filter(e=>"New"===e.status).length||0,k=O?.filter(e=>"Completed"===e.status).length||0;return{totalUsers:{total:t,individual:r,corporate:a},policies:{total:m,active:p,expired:f,expiringSoon:b},claims:{total:j,pending:N,settled:w,rejected:A,raisedThisMonth:D},quotes:{total:P,open:_,pending:C,completed:k}}}catch(e){return console.error("Error fetching admin metrics:",e),{totalUsers:{total:0,individual:0,corporate:0},policies:{total:0,active:0,expired:0,expiringSoon:0},claims:{total:0,pending:0,settled:0,rejected:0,raisedThisMonth:0},quotes:{total:0,open:0,pending:0,completed:0}}}}async function l(){try{let{data:e}=await i.supabase.from("motor_policies").select("id, policy_number, policy_end_date, user_id"),{data:t}=await i.supabase.from("health_policies").select("id, policy_number, expiry_date, user_id"),{data:r}=await i.supabase.from("commercial_policies").select("id, policy_number, expiry_date, user_id"),{data:a}=await i.supabase.from("users").select("id, name"),n=new Map(a?.map(e=>[e.id,e.name])||[]),s=new Date;s.setHours(0,0,0,0);let l=(e||[]).filter(e=>e.policy_end_date).map(e=>({id:e.id,policyNumber:e.policy_number,customerName:n.get(e.user_id)||"Unknown",lob:"Motor",expiryDate:e.policy_end_date,rmName:"Unassigned"})),o=(t||[]).filter(e=>e.expiry_date).map(e=>({id:e.id,policyNumber:e.policy_number,customerName:n.get(e.user_id)||"Unknown",lob:"Health",expiryDate:e.expiry_date,rmName:"Unassigned"})),c=(r||[]).filter(e=>e.expiry_date).map(e=>({id:e.id,policyNumber:e.policy_number,customerName:n.get(e.user_id)||"Unknown",lob:"Commercial",expiryDate:e.expiry_date,rmName:"Unassigned"})),d=[...l,...o,...c],u=new Date(s);u.setDate(s.getDate()+7);let m=new Date(s);m.setDate(s.getDate()+15);let p=new Date(s);p.setDate(s.getDate()+20);let f=d.filter(e=>{let t=new Date(e.expiryDate);return t>=s&&t<=u}).length,h=d.filter(e=>{let t=new Date(e.expiryDate);return t>u&&t<=m}).length,x=d.filter(e=>{let t=new Date(e.expiryDate);return t>m&&t<=p}).length,y=d.filter(e=>new Date(e.expiryDate)>=s).sort((e,t)=>new Date(e.expiryDate).getTime()-new Date(t.expiryDate).getTime()).slice(0,5);return{range0to7:f,range8to15:h,range16to20:x,topExpiring:y}}catch(e){return console.error("Error fetching expiry overview:",e),{range0to7:0,range8to15:0,range16to20:0,topExpiring:[]}}}async function o(){try{let{count:e}=await i.supabase.from("motor_policies").select("*",{count:"exact",head:!0}),{count:t}=await i.supabase.from("health_policies").select("*",{count:"exact",head:!0}),{count:r}=await i.supabase.from("commercial_policies").select("*",{count:"exact",head:!0});return console.log("[LOB Chart] Policy counts by line of business:",{motor:e||0,health:t||0,commercial:r||0,total:(e||0)+(t||0)+(r||0)}),[{name:"Motor",value:e||0,fill:"#3B82F6"},{name:"Health",value:t||0,fill:"#10B981"},{name:"Commercial",value:r||0,fill:"#F59E0B"},{name:"Others",value:0,fill:"#6366F1"}]}catch(e){return console.error("[LOB Chart] Error fetching policy counts:",e),[]}}async function c(){try{let{data:e}=await i.supabase.from("motor_policies").select("id, policy_number, vehicle_number, user_id").eq("status","Active");if(!e)return[];let t=[...new Set(e.map(e=>e.user_id))],{data:r}=await i.supabase.from("users").select("id, name").in("id",t),a=new Map(r?.map(e=>[e.id,e.name])||[]),n=new Map,s=[];return e.forEach(e=>{let t=a.get(e.user_id)||"Unknown";n.has(e.vehicle_number)?s.push({type:"Vehicle Number",value:e.vehicle_number,policy1:n.get(e.vehicle_number),policy2:{id:e.id,policyNumber:e.policy_number,customerName:t}}):n.set(e.vehicle_number,{id:e.id,policyNumber:e.policy_number,customerName:t})}),s}catch(e){return console.error("Error checking duplicates:",e),[]}}async function d(){try{let{data:e}=await i.supabase.from("motor_policies").select("id, policy_number, user_id, created_at").order("created_at",{ascending:!1}).limit(3);if(!e)return[];let t=e.map(e=>e.user_id),{data:r}=await i.supabase.from("users").select("id, name").in("id",t),a=new Map(r?.map(e=>[e.id,e.name])||[]);return e.map(e=>({id:e.id,customerName:a.get(e.user_id)||"Unknown",docType:"Policy Document",lob:"Motor",date:e.created_at}))}catch(e){return console.error("Error fetching doc verification:",e),[]}}async function u(){try{let{data:e}=await i.supabase.from("users").select("id, name").in("role",["rm","admin"]);if(!e||0===e.length)return null;let t=(await Promise.all(e.map(async e=>{let{count:t}=await i.supabase.from("users").select("*",{count:"exact",head:!0}).eq("rm_id",e.id);return{name:e.name,initials:e.name?e.name.substring(0,2).toUpperCase():"RM",policies:t||0,claims:0,rating:5}}))).sort((e,t)=>t.policies-e.policies);return{topPerformer:t[0],allRMs:t}}catch(e){return console.error("Error fetching RM performance:",e),null}}async function m(){try{let{data:e}=await i.supabase.from("motor_policies").select("premium_amount"),{data:t}=await i.supabase.from("health_policies").select("premium_amount"),{data:r}=await i.supabase.from("commercial_policies").select("premium_amount"),a=(e||[]).reduce((e,t)=>e+(Number(t.premium_amount)||0),0),n=(t||[]).reduce((e,t)=>e+(Number(t.premium_amount)||0),0),s=(r||[]).reduce((e,t)=>e+(Number(t.premium_amount)||0),0),l=a+n+s;return console.log("[Premium By LOB]",{motor:a,health:n,commercial:s,total:l}),[{name:"Motor",value:a,percentage:l>0?Math.round(a/l*100):0,fill:"#3B82F6"},{name:"Health",value:n,percentage:l>0?Math.round(n/l*100):0,fill:"#10B981"},{name:"Commercial",value:s,percentage:l>0?Math.round(s/l*100):0,fill:"#F59E0B"}].filter(e=>e.value>0)}catch(e){return console.error("[Premium By LOB] Error:",e),[]}}async function p(e,t,r="day"){try{let a=e.toISOString().split("T")[0],n=t.toISOString().split("T")[0],{data:s}=await i.supabase.from("motor_policies").select("created_at, premium_amount").gte("created_at",a).lte("created_at",n).order("created_at"),{data:l}=await i.supabase.from("health_policies").select("created_at, premium_amount").gte("created_at",a).lte("created_at",n).order("created_at"),{data:o}=await i.supabase.from("commercial_policies").select("created_at, premium_amount").gte("created_at",a).lte("created_at",n).order("created_at"),c=new Map,d=e=>{let t=new Date(e);if("day"===r)return t.toISOString().split("T")[0];if("week"!==r)return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-01`;{let e=new Date(t);return e.setDate(t.getDate()-t.getDay()),e.toISOString().split("T")[0]}},u=new Date(e);for(;u<=t;){let e=d(u.toISOString());c.has(e)||c.set(e,{motor:0,health:0,commercial:0}),"day"===r?u.setDate(u.getDate()+1):"week"===r?u.setDate(u.getDate()+7):u.setMonth(u.getMonth()+1)}(s||[]).forEach(e=>{let t=d(e.created_at),r=c.get(t)||{motor:0,health:0,commercial:0};r.motor+=Number(e.premium_amount)||0,c.set(t,r)}),(l||[]).forEach(e=>{let t=d(e.created_at),r=c.get(t)||{motor:0,health:0,commercial:0};r.health+=Number(e.premium_amount)||0,c.set(t,r)}),(o||[]).forEach(e=>{let t=d(e.created_at),r=c.get(t)||{motor:0,health:0,commercial:0};r.commercial+=Number(e.premium_amount)||0,c.set(t,r)});let m=Array.from(c.entries()).map(([e,t])=>({date:e,motor:t.motor,health:t.health,commercial:t.commercial,total:t.motor+t.health+t.commercial})).sort((e,t)=>e.date.localeCompare(t.date));return console.log("[Premium Trend]",{startDate:a,endDate:n,groupBy:r,dataPoints:m.length}),m}catch(e){return console.error("[Premium Trend] Error:",e),[]}}var f=e.i(90324),h=e.i(82554),x=e.i(15746),y=e.i(13393),g=e.i(60906);function b({metrics:e}){let r=[{title:"Total Users",value:e.totalUsers.total,subtext:`${e.totalUsers.individual} Ind | ${e.totalUsers.corporate} Corp`,icon:(0,t.jsx)(f.Users,{className:"w-5 h-5 text-blue-600"}),bg:"bg-blue-50",trend:"+12%"},{title:"Total Policies",value:e.policies.total,subtext:`${e.policies.active} Active`,icon:(0,t.jsx)(h.FileText,{className:"w-5 h-5 text-purple-600"}),bg:"bg-purple-50",trend:"+5%"},{title:"Expiring Soon",value:e.policies.expiringSoon,subtext:"Next 20 Days",icon:(0,t.jsx)(x.AlertCircle,{className:"w-5 h-5 text-orange-600"}),bg:"bg-orange-50",trend:"Action Req"},{title:"Claims Raised",value:e.claims.raisedThisMonth,subtext:"This Month",icon:(0,t.jsx)(y.Shield,{className:"w-5 h-5 text-red-600"}),bg:"bg-red-50",trend:`${e.claims.pending} Pending`},{title:"Open Quotes",value:e.quotes.open,subtext:`${e.quotes.pending} New`,icon:(0,t.jsx)(g.MessageSquare,{className:"w-5 h-5 text-green-600"}),bg:"bg-green-50",trend:"Pipeline"}];return(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:r.map((e,r)=>(0,t.jsxs)("div",{className:"card p-4 hover:shadow-md transition-shadow border border-gray-100",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsx)("div",{className:`p-2 rounded-lg ${e.bg}`,children:e.icon}),(0,t.jsx)("span",{className:"text-xs font-medium text-gray-500 bg-gray-50 px-2 py-1 rounded-full",children:e.trend})]}),(0,t.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:e.value}),(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e.title}),(0,t.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:e.subtext})]},r))})}var v=e.i(37284),j=e.i(61813),N=e.i(17774),w=e.i(21229),A=e.i(44256),S=e.i(85737),D=e.i(17163),O=e.i(5814),P=e.i(74405),_=e.i(49105),C=e.i(78836);function k({data:e}){let r=[{name:"0-7 Days",value:e.range0to7,color:"#DC2626",bgColor:"#FEF2F2"},{name:"8-15 Days",value:e.range8to15,color:"#EA580C",bgColor:"#FFF7ED"},{name:"16-20 Days",value:e.range16to20,color:"#CA8A04",bgColor:"#FEFCE8"}],a=e.range0to7+e.range8to15+e.range16to20;return(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(v.Calendar,{className:"w-5 h-5 text-orange-600"}),(0,t.jsx)("h3",{className:"font-bold text-gray-900",children:"Expiring Policies Overview"})]}),(0,t.jsxs)(N.default,{href:"/admin/policies?filter=expiring",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View All ",(0,t.jsx)(j.ArrowRight,{className:"w-4 h-4 ml-1"})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:a}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Policies expiring in next 20 days"})]}),(0,t.jsx)(_.ResponsiveContainer,{width:"100%",height:200,children:(0,t.jsxs)(w.BarChart,{data:r,layout:"vertical",margin:{top:5,right:30,left:80,bottom:5},children:[(0,t.jsx)(O.CartesianGrid,{strokeDasharray:"3 3",opacity:.3}),(0,t.jsx)(S.XAxis,{type:"number",allowDecimals:!1}),(0,t.jsx)(D.YAxis,{type:"category",dataKey:"name",width:70,style:{fontSize:"12px"}}),(0,t.jsx)(P.Tooltip,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},formatter:e=>[`${e} ${1===e?"policy":"policies"}`,"Count"]}),(0,t.jsx)(A.Bar,{dataKey:"value",radius:[0,8,8,0],children:r.map((e,r)=>(0,t.jsx)(C.Cell,{fill:e.color},`cell-${r}`))})]})})]})}var E=e.i(17813),M=e.i(36869);let R=(0,M.default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var T=e.i(47453),B=e.i(50944),L=e.i(73336),F=e.i(18660),I=e.i(98706),U=e.i(82644),$=e.i(9531),q=e.i(20844),z=e.i(63683);function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(){return(K=Object.assign.bind()).apply(this,arguments)}function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach(function(t){var a,n,i;a=e,n=t,i=r[t],(n=function(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=V(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V(t)?t:t+""}(n))in a?Object.defineProperty(a,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Y(e){return"string"==typeof e?parseInt(e,10):e}function G(e,t){var r=Number("".concat(t.cx||e.cx)),a=Number("".concat(t.cy||e.cy));return W(W(W({},t),e),{},{cx:r,cy:a})}function X(e){return r.default.createElement(z.Shape,K({shapeType:"sector",propTransformer:G},e))}var Q=e.i(73468),Z=e.i(95302),J=e.i(46760),ee=e.i(461),et=e.i(72429),er=e.i(58759),ea=e.i(36816),en=["shape","activeShape","activeIndex","cornerRadius"],ei=["value","background"];function es(e){return(es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function el(){return(el=Object.assign.bind()).apply(this,arguments)}function eo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function ec(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eo(Object(r),!0).forEach(function(t){eh(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eo(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ed(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function eu(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ex(a.key),a)}}function em(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(em=function(){return!!e})()}function ep(e){return(ep=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ef(e,t){return(ef=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eh(e,t,r){return(t=ex(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ex(e){var t=function(e,t){if("object"!=es(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=es(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==es(t)?t:t+""}var ey=function(e){var t,a;function n(){var e,t,r;if(!(this instanceof n))throw TypeError("Cannot call a class as a function");for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return t=n,r=[].concat(i),t=ep(t),eh(e=function(e,t){if(t&&("object"===es(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");var r=e;if(void 0===r)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(this,em()?Reflect.construct(t,r||[],ep(this).constructor):t.apply(this,r)),"state",{isAnimationFinished:!1}),eh(e,"handleAnimationEnd",function(){var t=e.props.onAnimationEnd;e.setState({isAnimationFinished:!0}),(0,q.default)(t)&&t()}),eh(e,"handleAnimationStart",function(){var t=e.props.onAnimationStart;e.setState({isAnimationFinished:!1}),(0,q.default)(t)&&t()}),e}if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&ef(n,e),t=[{key:"getDeltaAngle",value:function(){var e=this.props,t=e.startAngle,r=e.endAngle;return(0,et.mathSign)(r-t)*Math.min(Math.abs(r-t),360)}},{key:"renderSectorsStatically",value:function(e){var t=this,a=this.props,n=a.shape,i=a.activeShape,s=a.activeIndex,l=a.cornerRadius,o=ed(a,en),c=(0,Z.filterProps)(o,!1);return e.map(function(e,a){var d=a===s,u=ec(ec(ec(ec({},c),{},{cornerRadius:Y(l)},e),(0,ea.adaptEventsOfChild)(t.props,e,a)),{},{className:"recharts-radial-bar-sector ".concat(e.className),forceCornerRadius:o.forceCornerRadius,cornerIsExternal:o.cornerIsExternal,isActive:d,option:d?i:n});return r.default.createElement(X,el({},u,{key:"sector-".concat(a)}))})}},{key:"renderSectorsWithAnimation",value:function(){var e=this,t=this.props,a=t.data,n=t.isAnimationActive,i=t.animationBegin,s=t.animationDuration,l=t.animationEasing,o=t.animationId,c=this.state.prevData;return r.default.createElement(U.default,{begin:i,duration:s,isActive:n,easing:l,from:{t:0},to:{t:1},key:"radialBar-".concat(o),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(t){var n=t.t,i=a.map(function(e,t){var r=c&&c[t];if(r){var a=(0,et.interpolateNumber)(r.startAngle,e.startAngle),i=(0,et.interpolateNumber)(r.endAngle,e.endAngle);return ec(ec({},e),{},{startAngle:a(n),endAngle:i(n)})}var s=e.endAngle,l=e.startAngle,o=(0,et.interpolateNumber)(l,s);return ec(ec({},e),{},{endAngle:o(n)})});return r.default.createElement(Q.Layer,null,e.renderSectorsStatically(i))})}},{key:"renderSectors",value:function(){var e=this.props,t=e.data,r=e.isAnimationActive,a=this.state.prevData;return r&&t&&t.length&&(!a||!(0,$.default)(a,t))?this.renderSectorsWithAnimation():this.renderSectorsStatically(t)}},{key:"renderBackground",value:function(e){var t=this,a=this.props.cornerRadius,n=(0,Z.filterProps)(this.props.background,!1);return e.map(function(e,i){e.value;var s=e.background,l=ed(e,ei);if(!s)return null;var o=ec(ec(ec(ec(ec({cornerRadius:Y(a)},l),{},{fill:"#eee"},s),n),(0,ea.adaptEventsOfChild)(t.props,e,i)),{},{index:i,className:(0,I.default)("recharts-radial-bar-background-sector",null==n?void 0:n.className),option:s,isActive:!1});return r.default.createElement(X,el({},o,{key:"sector-".concat(i)}))})}},{key:"render",value:function(){var e=this.props,t=e.hide,a=e.data,n=e.className,i=e.background,s=e.isAnimationActive;if(t||!a||!a.length)return null;var l=this.state.isAnimationFinished,o=(0,I.default)("recharts-area",n);return r.default.createElement(Q.Layer,{className:o},i&&r.default.createElement(Q.Layer,{className:"recharts-radial-bar-background"},this.renderBackground(a)),r.default.createElement(Q.Layer,{className:"recharts-radial-bar-sectors"},this.renderSectors()),(!s||l)&&ee.LabelList.renderCallByParent(ec({},this.props),a))}}],a=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curData:e.data,prevData:t.curData}:e.data!==t.curData?{curData:e.data}:null}}],t&&eu(n.prototype,t),a&&eu(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n}(r.PureComponent);eh(ey,"displayName","RadialBar"),eh(ey,"defaultProps",{angleAxisId:0,radiusAxisId:0,minPointSize:0,hide:!1,legendType:"rect",data:[],isAnimationActive:!J.Global.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease",forceCornerRadius:!1,cornerIsExternal:!1}),eh(ey,"getComposedData",function(e){var t=e.item,r=e.props,a=e.radiusAxis,n=e.radiusAxisTicks,i=e.angleAxis,s=e.angleAxisTicks,l=e.displayedData,o=e.dataKey,c=e.stackedData,d=e.barPosition,u=e.bandSize,m=e.dataStartIndex,p=(0,er.findPositionOfBar)(d,t);if(!p)return null;var f=i.cx,h=i.cy,x=r.layout,y=t.props,g=y.children,b=y.minPointSize,v="radial"===x?i:a,j=c?v.scale.domain():null,N=(0,er.getBaseValueOfBar)({numericAxis:v}),w=(0,Z.findAllByType)(g,C.Cell);return{data:l.map(function(e,l){var d,y,g,v,A,S;if(c?d=(0,er.truncateByDomain)(c[m+l],j):Array.isArray(d=(0,er.getValueByDataKey)(e,o))||(d=[N,d]),"radial"===x){y=(0,er.getCateCoordinateOfBar)({axis:a,ticks:n,bandSize:u,offset:p.offset,entry:e,index:l}),A=i.scale(d[1]),v=i.scale(d[0]),g=y+p.size;var D=A-v;Math.abs(b)>0&&Math.abs(D)<Math.abs(b)&&(A+=(0,et.mathSign)(D||b)*(Math.abs(b)-Math.abs(D))),S={background:{cx:f,cy:h,innerRadius:y,outerRadius:g,startAngle:r.startAngle,endAngle:r.endAngle}}}else{y=a.scale(d[0]),g=a.scale(d[1]),A=(v=(0,er.getCateCoordinateOfBar)({axis:i,ticks:s,bandSize:u,offset:p.offset,entry:e,index:l}))+p.size;var O=g-y;Math.abs(b)>0&&Math.abs(O)<Math.abs(b)&&(g+=(0,et.mathSign)(O||b)*(Math.abs(b)-Math.abs(O)))}return ec(ec(ec(ec({},e),S),{},{payload:e,value:c?d:d[1],cx:f,cy:h,innerRadius:y,outerRadius:g,startAngle:v,endAngle:A},w&&w[l]&&w[l].props),{},{tooltipPayload:[(0,er.getTooltipItem)(t,e)],tooltipPosition:(0,F.polarToCartesian)(f,h,(y+g)/2,(v+A)/2)})}),layout:x}});var eg=(0,T.generateCategoricalChart)({chartName:"RadialBarChart",GraphicalChild:ey,legendContent:"children",defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"angleAxis",AxisComp:B.PolarAngleAxis},{axisType:"radiusAxis",AxisComp:L.PolarRadiusAxis}],formatAxisMap:F.formatAxisMap,defaultProps:{layout:"radial",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});function eb(){let[e,a]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[s,l]=(0,r.useState)(0);(0,r.useEffect)(()=>{o()},[]);let o=async()=>{i(!0);let e=await m();a(e),l(e.reduce((e,t)=>e+t.value,0)),i(!1)},c=e.map((e,t)=>({name:e.name,value:e.percentage,fill:e.fill})).reverse(),d=e=>e>=1e7?`₹${(e/1e7).toFixed(2)}Cr`:e>=1e5?`₹${(e/1e5).toFixed(2)}L`:`₹${e.toLocaleString()}`;return(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(R,{className:"w-5 h-5 text-green-600"}),(0,t.jsx)("h3",{className:"font-bold text-gray-900",children:"Premium Source"})]}),(0,t.jsx)(E.TrendingUp,{className:"w-5 h-5 text-green-600"})]}),n?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):0===e.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[(0,t.jsx)(R,{className:"w-12 h-12 mb-2 opacity-50"}),(0,t.jsx)("p",{className:"text-sm",children:"No premium data available"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:d(s)}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Total Premium"})]}),(0,t.jsx)(_.ResponsiveContainer,{width:"100%",height:220,children:(0,t.jsxs)(eg,{cx:"50%",cy:"50%",innerRadius:"30%",outerRadius:"100%",data:c,startAngle:90,endAngle:-270,children:[(0,t.jsx)(ey,{background:!0,dataKey:"value",cornerRadius:10}),(0,t.jsx)(P.Tooltip,{formatter:e=>`${e}%`,contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}})]})}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-3 mt-4",children:e.map(e=>(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center mb-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:e.fill}}),(0,t.jsx)("span",{className:"text-xs font-semibold text-gray-700",children:e.name})]}),(0,t.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:[e.percentage,"%"]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:d(e.value)})]},e.name))})]})]})}var ev=e.i(53494),ej=e.i(22290),eN=e.i(75209),ew=e.i(16022),eA=e.i(21937),eS=["layout","type","stroke","connectNulls","isRange","ref"],eD=["key"];function eO(e){return(eO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eP(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function e_(){return(e_=Object.assign.bind()).apply(this,arguments)}function eC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function ek(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eC(Object(r),!0).forEach(function(t){eB(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eC(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eE(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,eL(a.key),a)}}function eM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(eM=function(){return!!e})()}function eR(e){return(eR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eT(e,t){return(eT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eB(e,t,r){return(t=eL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eL(e){var t=function(e,t){if("object"!=eO(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=eO(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eO(t)?t:t+""}var eF=function(e){var t,a;function n(){var e,t,r;if(!(this instanceof n))throw TypeError("Cannot call a class as a function");for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return t=n,r=[].concat(i),t=eR(t),eB(e=function(e,t){if(t&&("object"===eO(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");var r=e;if(void 0===r)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(this,eM()?Reflect.construct(t,r||[],eR(this).constructor):t.apply(this,r)),"state",{isAnimationFinished:!0}),eB(e,"id",(0,et.uniqueId)("recharts-area-")),eB(e,"handleAnimationEnd",function(){var t=e.props.onAnimationEnd;e.setState({isAnimationFinished:!0}),(0,q.default)(t)&&t()}),eB(e,"handleAnimationStart",function(){var t=e.props.onAnimationStart;e.setState({isAnimationFinished:!1}),(0,q.default)(t)&&t()}),e}if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&eT(n,e),t=[{key:"renderDots",value:function(e,t,a){var i=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(i&&!s)return null;var l=this.props,o=l.dot,c=l.points,d=l.dataKey,u=(0,Z.filterProps)(this.props,!1),m=(0,Z.filterProps)(o,!0),p=c.map(function(e,t){var r=ek(ek(ek({key:"dot-".concat(t),r:3},u),m),{},{index:t,cx:e.x,cy:e.y,dataKey:d,value:e.value,payload:e.payload,points:c});return n.renderDotItem(o,r)}),f={clipPath:e?"url(#clipPath-".concat(t?"":"dots-").concat(a,")"):null};return r.default.createElement(Q.Layer,e_({className:"recharts-area-dots"},f),p)}},{key:"renderHorizontalRect",value:function(e){var t=this.props,a=t.baseLine,n=t.points,i=t.strokeWidth,s=n[0].x,l=n[n.length-1].x,o=e*Math.abs(s-l),c=(0,ev.default)(n.map(function(e){return e.y||0}));return((0,et.isNumber)(a)&&"number"==typeof a?c=Math.max(a,c):a&&Array.isArray(a)&&a.length&&(c=Math.max((0,ev.default)(a.map(function(e){return e.y||0})),c)),(0,et.isNumber)(c))?r.default.createElement("rect",{x:s<l?s:s-o,y:0,width:o,height:Math.floor(c+(i?parseInt("".concat(i),10):1))}):null}},{key:"renderVerticalRect",value:function(e){var t=this.props,a=t.baseLine,n=t.points,i=t.strokeWidth,s=n[0].y,l=n[n.length-1].y,o=e*Math.abs(s-l),c=(0,ev.default)(n.map(function(e){return e.x||0}));return((0,et.isNumber)(a)&&"number"==typeof a?c=Math.max(a,c):a&&Array.isArray(a)&&a.length&&(c=Math.max((0,ev.default)(a.map(function(e){return e.x||0})),c)),(0,et.isNumber)(c))?r.default.createElement("rect",{x:0,y:s<l?s:s-o,width:c+(i?parseInt("".concat(i),10):1),height:Math.floor(o)}):null}},{key:"renderClipRect",value:function(e){return"vertical"===this.props.layout?this.renderVerticalRect(e):this.renderHorizontalRect(e)}},{key:"renderAreaStatically",value:function(e,t,a,n){var i=this.props,s=i.layout,l=i.type,o=i.stroke,c=i.connectNulls,d=i.isRange,u=(i.ref,eP(i,eS));return r.default.createElement(Q.Layer,{clipPath:a?"url(#clipPath-".concat(n,")"):null},r.default.createElement(ew.Curve,e_({},(0,Z.filterProps)(u,!0),{points:e,connectNulls:c,type:l,baseLine:t,layout:s,stroke:"none",className:"recharts-area-area"})),"none"!==o&&r.default.createElement(ew.Curve,e_({},(0,Z.filterProps)(this.props,!1),{className:"recharts-area-curve",layout:s,type:l,connectNulls:c,fill:"none",points:e})),"none"!==o&&d&&r.default.createElement(ew.Curve,e_({},(0,Z.filterProps)(this.props,!1),{className:"recharts-area-curve",layout:s,type:l,connectNulls:c,fill:"none",points:t})))}},{key:"renderAreaWithAnimation",value:function(e,t){var a=this,n=this.props,i=n.points,s=n.baseLine,l=n.isAnimationActive,o=n.animationBegin,c=n.animationDuration,d=n.animationEasing,u=n.animationId,m=this.state,p=m.prevPoints,f=m.prevBaseLine;return r.default.createElement(U.default,{begin:o,duration:c,isActive:l,easing:d,from:{t:0},to:{t:1},key:"area-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(n){var l=n.t;if(p){var o,c=p.length/i.length,d=i.map(function(e,t){var r=Math.floor(t*c);if(p[r]){var a=p[r],n=(0,et.interpolateNumber)(a.x,e.x),i=(0,et.interpolateNumber)(a.y,e.y);return ek(ek({},e),{},{x:n(l),y:i(l)})}return e});return o=(0,et.isNumber)(s)&&"number"==typeof s?(0,et.interpolateNumber)(f,s)(l):(0,ej.default)(s)||(0,eN.default)(s)?(0,et.interpolateNumber)(f,0)(l):s.map(function(e,t){var r=Math.floor(t*c);if(f[r]){var a=f[r],n=(0,et.interpolateNumber)(a.x,e.x),i=(0,et.interpolateNumber)(a.y,e.y);return ek(ek({},e),{},{x:n(l),y:i(l)})}return e}),a.renderAreaStatically(d,o,e,t)}return r.default.createElement(Q.Layer,null,r.default.createElement("defs",null,r.default.createElement("clipPath",{id:"animationClipPath-".concat(t)},a.renderClipRect(l))),r.default.createElement(Q.Layer,{clipPath:"url(#animationClipPath-".concat(t,")")},a.renderAreaStatically(i,s,e,t)))})}},{key:"renderArea",value:function(e,t){var r=this.props,a=r.points,n=r.baseLine,i=r.isAnimationActive,s=this.state,l=s.prevPoints,o=s.prevBaseLine,c=s.totalLength;return i&&a&&a.length&&(!l&&c>0||!(0,$.default)(l,a)||!(0,$.default)(o,n))?this.renderAreaWithAnimation(e,t):this.renderAreaStatically(a,n,e,t)}},{key:"render",value:function(){var e,t=this.props,a=t.hide,n=t.dot,i=t.points,s=t.className,l=t.top,o=t.left,c=t.xAxis,d=t.yAxis,u=t.width,m=t.height,p=t.isAnimationActive,f=t.id;if(a||!i||!i.length)return null;var h=this.state.isAnimationFinished,x=1===i.length,y=(0,I.default)("recharts-area",s),g=c&&c.allowDataOverflow,b=d&&d.allowDataOverflow,v=g||b,j=(0,ej.default)(f)?this.id:f,N=null!=(e=(0,Z.filterProps)(n,!1))?e:{r:3,strokeWidth:2},w=N.r,A=N.strokeWidth,S=((0,Z.hasClipDot)(n)?n:{}).clipDot,D=void 0===S||S,O=2*(void 0===w?3:w)+(void 0===A?2:A);return r.default.createElement(Q.Layer,{className:y},g||b?r.default.createElement("defs",null,r.default.createElement("clipPath",{id:"clipPath-".concat(j)},r.default.createElement("rect",{x:g?o:o-u/2,y:b?l:l-m/2,width:g?u:2*u,height:b?m:2*m})),!D&&r.default.createElement("clipPath",{id:"clipPath-dots-".concat(j)},r.default.createElement("rect",{x:o-O/2,y:l-O/2,width:u+O,height:m+O}))):null,x?null:this.renderArea(v,j),(n||x)&&this.renderDots(v,D,j),(!p||h)&&ee.LabelList.renderCallByParent(this.props,i))}}],a=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,curBaseLine:e.baseLine,prevPoints:t.curPoints,prevBaseLine:t.curBaseLine}:e.points!==t.curPoints||e.baseLine!==t.curBaseLine?{curPoints:e.points,curBaseLine:e.baseLine}:null}}],t&&eE(n.prototype,t),a&&eE(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n}(r.PureComponent);eB(eF,"displayName","Area"),eB(eF,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!J.Global.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"}),eB(eF,"getBaseValue",function(e,t,r,a){var n=e.layout,i=e.baseValue,s=t.props.baseValue,l=null!=s?s:i;if((0,et.isNumber)(l)&&"number"==typeof l)return l;var o="horizontal"===n?a:r,c=o.scale.domain();if("number"===o.type){var d=Math.max(c[0],c[1]),u=Math.min(c[0],c[1]);return"dataMin"===l?u:"dataMax"===l||d<0?d:Math.max(Math.min(c[0],c[1]),0)}return"dataMin"===l?c[0]:"dataMax"===l?c[1]:c[0]}),eB(eF,"getComposedData",function(e){var t,r=e.props,a=e.item,n=e.xAxis,i=e.yAxis,s=e.xAxisTicks,l=e.yAxisTicks,o=e.bandSize,c=e.dataKey,d=e.stackedData,u=e.dataStartIndex,m=e.displayedData,p=e.offset,f=r.layout,h=d&&d.length,x=eF.getBaseValue(r,a,n,i),y="horizontal"===f,g=!1,b=m.map(function(e,t){h?r=d[u+t]:Array.isArray(r=(0,er.getValueByDataKey)(e,c))?g=!0:r=[x,r];var r,a=null==r[1]||h&&null==(0,er.getValueByDataKey)(e,c);return y?{x:(0,er.getCateCoordinateOfLine)({axis:n,ticks:s,bandSize:o,entry:e,index:t}),y:a?null:i.scale(r[1]),value:r,payload:e}:{x:a?null:n.scale(r[1]),y:(0,er.getCateCoordinateOfLine)({axis:i,ticks:l,bandSize:o,entry:e,index:t}),value:r,payload:e}});return t=h||g?b.map(function(e){var t=Array.isArray(e.value)?e.value[0]:null;return y?{x:e.x,y:null!=t&&null!=e.y?i.scale(t):null}:{x:null!=t?n.scale(t):null,y:e.y}}):y?i.scale(x):n.scale(x),ek({points:b,baseLine:t,layout:f,isRange:g},p)}),eB(eF,"renderDotItem",function(e,t){var a;if(r.default.isValidElement(e))a=r.default.cloneElement(e,t);else if((0,q.default)(e))a=e(t);else{var n=(0,I.default)("recharts-area-dot","boolean"!=typeof e?e.className:""),i=t.key,s=eP(t,eD);a=r.default.createElement(eA.Dot,e_({},s,{key:i,className:n}))}return a});var eI=e.i(14416),eU=(0,T.generateCategoricalChart)({chartName:"AreaChart",GraphicalChild:eF,axisComponents:[{axisType:"xAxis",AxisComp:S.XAxis},{axisType:"yAxis",AxisComp:D.YAxis}],formatAxisMap:eI.formatAxisMap});function e$(){let[e,a]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[s,l]=(0,r.useState)("1month"),[o,c]=(0,r.useState)({start:"",end:""});(0,r.useEffect)(()=>{d()},[s,o]);let d=async()=>{i(!0);let{start:e,end:t,groupBy:r}=(()=>{let e=new Date,t=new Date,r="day";if("custom"===s)return o.start&&o.end?{start:new Date(o.start),end:new Date(o.end),groupBy:"day"}:(t.setMonth(e.getMonth()-1),{start:t,end:e,groupBy:"day"});switch(s){case"1day":t.setDate(e.getDate()-1),r="day";break;case"1week":t.setDate(e.getDate()-7),r="day";break;case"15days":t.setDate(e.getDate()-15),r="day";break;case"1month":t.setMonth(e.getMonth()-1),r="day";break;case"3months":t.setMonth(e.getMonth()-3),r="week";break;case"6months":t.setMonth(e.getMonth()-6),r="week";break;case"1year":t.setFullYear(e.getFullYear()-1),r="month"}return{start:t,end:e,groupBy:r}})();a(await p(e,t,r)),i(!1)},u=e=>e>=1e7?`₹${(e/1e7).toFixed(1)}Cr`:e>=1e5?`₹${(e/1e5).toFixed(1)}L`:e>=1e3?`₹${(e/1e3).toFixed(0)}K`:`₹${e}`,m=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"}),f=e.reduce((e,t)=>e+t.total,0);return(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(E.TrendingUp,{className:"w-5 h-5 text-blue-600"}),(0,t.jsx)("h3",{className:"font-bold text-gray-900",children:"Total Premium Trend"})]})}),(0,t.jsx)("div",{className:"flex gap-3 mb-4",children:(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("select",{value:s,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white",children:[(0,t.jsx)("option",{value:"1day",children:"1 Day"}),(0,t.jsx)("option",{value:"1week",children:"1 Week"}),(0,t.jsx)("option",{value:"15days",children:"15 Days"}),(0,t.jsx)("option",{value:"1month",children:"1 Month"}),(0,t.jsx)("option",{value:"3months",children:"3 Months"}),(0,t.jsx)("option",{value:"6months",children:"6 Months"}),(0,t.jsx)("option",{value:"1year",children:"1 Year"}),(0,t.jsx)("option",{value:"custom",children:"Custom Range"})]})})}),"custom"===s&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-gray-600 mb-1 block",children:"Start Date"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(v.Calendar,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,t.jsx)("input",{type:"date",value:o.start,onChange:e=>c({...o,start:e.target.value}),className:"w-full pl-8 pr-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-gray-600 mb-1 block",children:"End Date"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(v.Calendar,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,t.jsx)("input",{type:"date",value:o.end,onChange:e=>c({...o,end:e.target.value}),className:"w-full pl-8 pr-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:u(f)}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Total premium in selected period"})]}),n?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):0===e.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[(0,t.jsx)(E.TrendingUp,{className:"w-12 h-12 mb-2 opacity-50"}),(0,t.jsx)("p",{className:"text-sm",children:"No premium data for this period"})]}):(0,t.jsx)(_.ResponsiveContainer,{width:"100%",height:220,children:(0,t.jsxs)(eU,{data:e,margin:{top:10,right:10,left:-20,bottom:0},children:[(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"colorTotal",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,t.jsx)("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.3}),(0,t.jsx)("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:0})]})}),(0,t.jsx)(O.CartesianGrid,{strokeDasharray:"3 3",opacity:.2}),(0,t.jsx)(S.XAxis,{dataKey:"date",tickFormatter:m,style:{fontSize:"11px"},tick:{fill:"#6B7280"}}),(0,t.jsx)(D.YAxis,{tickFormatter:u,style:{fontSize:"11px"},tick:{fill:"#6B7280"}}),(0,t.jsx)(P.Tooltip,{formatter:e=>[u(e),"Premium"],labelFormatter:e=>m(e),contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",fontSize:"12px"}}),(0,t.jsx)(eF,{type:"monotone",dataKey:"total",stroke:"#3B82F6",strokeWidth:2,fillOpacity:1,fill:"url(#colorTotal)"})]})})]})}var eq=e.i(31011),ez=e.i(1624),eV=e.i(89494);function eK({data:e}){return(0,t.jsxs)("div",{className:"card h-full flex flex-col",children:[(0,t.jsx)("h3",{className:"font-bold text-gray-900 mb-4",children:"Policies by LOB"}),(0,t.jsx)("div",{className:"flex-1 min-h-[250px]",children:(0,t.jsx)(_.ResponsiveContainer,{width:"100%",height:"100%",children:(0,t.jsxs)(eq.PieChart,{children:[(0,t.jsx)(ez.Pie,{data:e,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:e.map((e,r)=>(0,t.jsx)(C.Cell,{fill:e.fill},`cell-${r}`))}),(0,t.jsx)(P.Tooltip,{}),(0,t.jsx)(eV.Legend,{verticalAlign:"bottom",height:36})]})})})]})}let eH=(0,M.default)("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);function eW({metrics:e,docVerificationData:r}){return(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full",children:[(0,t.jsxs)("div",{className:"card h-full flex flex-col",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsxs)("h3",{className:"font-bold text-gray-900 flex items-center gap-2",children:[(0,t.jsx)(y.Shield,{className:"w-5 h-5 text-red-600"}),"Claims Overview"]})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4 flex-1",children:[(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg flex flex-col justify-center",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"New"}),(0,t.jsx)("p",{className:"text-xl font-bold text-gray-900",children:e.claims.pending})]}),(0,t.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg flex flex-col justify-center",children:[(0,t.jsx)("p",{className:"text-xs text-green-600",children:"Settled"}),(0,t.jsx)("p",{className:"text-xl font-bold text-green-700",children:e.claims.settled})]})]}),(0,t.jsxs)("div",{className:"space-y-3 mt-auto",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Recent Actionables"}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"CLM-2024-001"}),(0,t.jsx)("span",{className:"px-2 py-0.5 bg-yellow-100 text-yellow-800 rounded text-xs",children:"In Review"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"CLM-2024-002"}),(0,t.jsx)("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-800 rounded text-xs",children:"New"})]})]})]}),(0,t.jsxs)("div",{className:"card h-full flex flex-col",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsxs)("h3",{className:"font-bold text-gray-900 flex items-center gap-2",children:[(0,t.jsx)(g.MessageSquare,{className:"w-5 h-5 text-blue-600"}),"Quote Pipeline"]})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4 flex-1",children:[(0,t.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg flex flex-col justify-center",children:[(0,t.jsx)("p",{className:"text-xs text-blue-600",children:"New Requests"}),(0,t.jsx)("p",{className:"text-xl font-bold text-blue-700",children:e.quotes.pending})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg flex flex-col justify-center",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Completed"}),(0,t.jsx)("p",{className:"text-xl font-bold text-gray-900",children:e.quotes.completed})]})]}),(0,t.jsx)("button",{className:"w-full py-2 text-sm text-primary-600 bg-primary-50 rounded-lg hover:bg-primary-100 transition-colors mt-auto",children:"View All Requests"})]}),(0,t.jsxs)("div",{className:"card h-full flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("h3",{className:"font-bold text-gray-900 flex items-center gap-2",children:[(0,t.jsx)(eH,{className:"w-5 h-5 text-purple-600"}),"Doc Verification"]}),r.length>0&&(0,t.jsxs)("span",{className:"bg-red-100 text-red-700 text-xs font-bold px-2 py-1 rounded-full",children:[r.length," Pending"]})]}),(0,t.jsx)("div",{className:"space-y-3 flex-1 overflow-y-auto max-h-[200px] scrollbar-hide",children:0===r.length?(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"No pending verifications"})}):r.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded transition-colors cursor-pointer",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.customerName}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[e.docType," • ",e.lob]})]}),(0,t.jsx)("button",{className:"text-xs bg-purple-600 text-white px-2 py-1 rounded hover:bg-purple-700",children:"Verify"})]},e.id))})]})]})}var eY=e.i(75349),eG=e.i(35032);function eX(){let{user:e,loading:i}=(0,a.useAuth)(),m=(0,n.useRouter)(),[p,h]=(0,r.useState)(!0),[x,y]=(0,r.useState)(null),[g,v]=(0,r.useState)(null),[j,N]=(0,r.useState)([]),[w,A]=(0,r.useState)([]),[S,D]=(0,r.useState)([]),[O,P]=(0,r.useState)([]),[_,C]=(0,r.useState)(null);(0,r.useEffect)(()=>{console.log("[AdminDashboard] useEffect triggered",{loading:i,user:e?.role}),i||e&&"admin"===e.role?e?.role==="admin"&&(console.log("[AdminDashboard] Loading data..."),E()):(console.log("[AdminDashboard] Redirecting to login"),m.push("/login"))},[e,i]);let E=async()=>{try{let[e,t,r,a,n,i]=await Promise.all([s(),l(),o(),c(),d(),u()]);y(e),v(t),A(r),D(a),P(n),C(i)}catch(e){console.error("Failed to load admin dashboard:",e)}finally{h(!1)}};if(i||p||!x||!g)return(0,t.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});let M=async()=>{h(!0),await E()};return(0,t.jsxs)("div",{className:"space-y-6 pb-10",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Control Tower"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"System Overview & Health"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-500 bg-gray-50 px-3 py-1 rounded-full border border-gray-200",children:["Last updated: ",new Date().toLocaleTimeString()]}),(0,t.jsx)("button",{onClick:M,className:"p-2 text-gray-500 hover:text-primary-600 hover:bg-gray-100 rounded-full transition-colors",title:"Refresh Data",children:(0,t.jsx)(eG.RefreshCw,{className:`w-5 h-5 ${p?"animate-spin":""}`})})]})]}),(0,t.jsx)(b,{metrics:x}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsx)(k,{data:g}),(0,t.jsx)(eb,{})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsx)(e$,{})}),(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsx)(eK,{data:w})})]}),(0,t.jsx)("div",{children:(0,t.jsx)(eW,{metrics:x,docVerificationData:O})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-red-50 border border-red-100 rounded-xl p-4 flex items-start gap-4",children:[(0,t.jsx)("div",{className:"p-2 bg-white rounded-lg shadow-sm",children:(0,t.jsx)(eY.AlertTriangle,{className:"w-6 h-6 text-red-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold text-red-900",children:"Duplicate Detection"}),S.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{className:"text-sm text-red-700 mb-2",children:[S.length," possible duplicate policies detected."]}),(0,t.jsx)("button",{className:"text-xs bg-red-600 text-white px-3 py-1.5 rounded hover:bg-red-700 transition-colors",children:"Review Duplicates"})]}):(0,t.jsx)("p",{className:"text-sm text-red-700",children:"No duplicates detected. System healthy."})]})]}),_&&(0,t.jsxs)("div",{className:"bg-white border border-gray-100 rounded-xl p-4 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("h3",{className:"font-bold text-gray-900 flex items-center gap-2",children:[(0,t.jsx)(f.Users,{className:"w-5 h-5 text-blue-600"}),"RM Performance"]}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Top Performer"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center font-bold text-blue-700",children:_.topPerformer.initials}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-bold text-gray-900",children:_.topPerformer.name}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[_.topPerformer.policies," Policies • ",_.topPerformer.claims," Claims"]})]})]})]})]})]})}e.s(["default",()=>eX],64035)}]);