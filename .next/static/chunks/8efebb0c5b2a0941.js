(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,24581,e=>{"use strict";let a=(0,e.i(36869).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>a],24581)},72527,e=>{"use strict";let a=(0,e.i(36869).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],72527)},58479,e=>{"use strict";let a=(0,e.i(36869).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>a],58479)},60379,e=>{"use strict";let a=(0,e.i(36869).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>a],60379)},84435,e=>{"use strict";var a=e.i(9295),t=e.i(13428),r=e.i(9979);let s=(0,e.i(36869).default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var l=e.i(60379),i=e.i(24581),n=e.i(72527),d=e.i(58479),c=e.i(36271);function o(){let[e,o]=(0,t.useState)("general"),[x,m]=(0,t.useState)(!0),[y,g]=(0,t.useState)([]),[u,h]=(0,t.useState)([]),[p,b]=(0,t.useState)([]),[j,N]=(0,t.useState)(30),[v,f]=(0,t.useState)({title:"",image_url:"",is_active:!0,display_order:0}),[w,_]=(0,t.useState)({name:"",insurer_name:"",city:""});(0,t.useEffect)(()=>{k()},[]);let k=async()=>{m(!0);try{let[e,a,t]=await Promise.all([(0,c.getAppSettings)(),(0,c.getAllBanners)(),(0,c.getAllGarages)()]);g(e),h(a),b(t);let r=e.find(e=>"expiry_threshold_days"===e.key);r&&N(r.value)}catch(e){console.error("Failed to load settings data:",e)}finally{m(!1)}},C=async()=>{try{await (0,c.updateAppSetting)("expiry_threshold_days",j),alert("Settings saved successfully!")}catch(e){console.error("Failed to save settings:",e),alert("Failed to save settings.")}},S=async()=>{if(v.title&&v.image_url)try{await (0,c.addBanner)({title:v.title,image_url:v.image_url,link_url:v.link_url,is_active:v.is_active||!0,display_order:v.display_order||0,active_from:new Date}),f({title:"",image_url:"",is_active:!0,display_order:0}),k()}catch(e){console.error("Failed to add banner:",e)}},A=async e=>{if(confirm("Are you sure you want to delete this banner?"))try{await (0,c.deleteBanner)(e),h(u.filter(a=>a.id!==e))}catch(e){console.error("Failed to delete banner:",e)}},M=async()=>{if(w.name&&w.insurer_name&&w.city)try{await (0,c.addGarage)({name:w.name,insurer_name:w.insurer_name,city:w.city,address:w.address,contact_number:w.contact_number}),_({name:"",insurer_name:"",city:""}),k()}catch(e){console.error("Failed to add garage:",e)}},P=async e=>{if(confirm("Are you sure you want to delete this garage?"))try{await (0,c.deleteGarage)(e),b(p.filter(a=>a.id!==e))}catch(e){console.error("Failed to delete garage:",e)}};return x?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"System Configuration"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Manage application settings, banners, and directories"})]}),(0,a.jsxs)("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-xl w-fit",children:[(0,a.jsxs)("button",{onClick:()=>o("general"),className:`flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-all ${"general"===e?"bg-white text-primary-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[(0,a.jsx)(r.Settings,{className:"w-4 h-4 mr-2"}),"General"]}),(0,a.jsxs)("button",{onClick:()=>o("banners"),className:`flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-all ${"banners"===e?"bg-white text-primary-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[(0,a.jsx)(s,{className:"w-4 h-4 mr-2"}),"Banners"]}),(0,a.jsxs)("button",{onClick:()=>o("garages"),className:`flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-all ${"garages"===e?"bg-white text-primary-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[(0,a.jsx)(l.MapPin,{className:"w-4 h-4 mr-2"}),"Garages"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:["general"===e&&(0,a.jsxs)("div",{className:"space-y-6 max-w-2xl",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Policy Expiry Settings"}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-100",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Expiry Alert Threshold (Days)"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Policies expiring within this many days will be marked as 'Expiring Soon'."})]}),(0,a.jsx)("input",{type:"number",value:j,onChange:e=>N(Number(e.target.value)),className:"w-24 px-3 py-2 border border-gray-300 rounded-lg text-center"})]})]}),(0,a.jsx)("div",{className:"pt-4 border-t border-gray-100",children:(0,a.jsxs)("button",{onClick:C,className:"btn btn-primary",children:[(0,a.jsx)(i.Save,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]}),"banners"===e&&(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-100 space-y-4",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Add New Banner"}),(0,a.jsx)("input",{type:"text",placeholder:"Banner Title",value:v.title,onChange:e=>f({...v,title:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),(0,a.jsx)("input",{type:"text",placeholder:"Image URL",value:v.image_url,onChange:e=>f({...v,image_url:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),(0,a.jsx)("input",{type:"text",placeholder:"Link URL (Optional)",value:v.link_url,onChange:e=>f({...v,link_url:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),(0,a.jsxs)("button",{onClick:S,className:"btn btn-primary w-full",disabled:!v.title||!v.image_url,children:[(0,a.jsx)(n.Plus,{className:"w-4 h-4 mr-2"}),"Add Banner"]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[u.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-4 p-3 border border-gray-200 rounded-lg bg-white",children:[(0,a.jsx)("img",{src:e.image_url,alt:e.title,className:"w-24 h-16 object-cover rounded bg-gray-100"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.link_url||"No link"})]}),(0,a.jsx)("button",{onClick:()=>A(e.id),className:"text-red-500 hover:text-red-700 p-2",children:(0,a.jsx)(d.Trash2,{className:"w-4 h-4"})})]},e.id)),0===u.length&&(0,a.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No banners found."})]})]})}),"garages"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-lg border border-gray-100 items-end",children:[(0,a.jsxs)("div",{className:"md:col-span-1",children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Garage Name"}),(0,a.jsx)("input",{type:"text",value:w.name,onChange:e=>_({...w,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,a.jsxs)("div",{className:"md:col-span-1",children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Insurer"}),(0,a.jsx)("input",{type:"text",value:w.insurer_name,onChange:e=>_({...w,insurer_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,a.jsxs)("div",{className:"md:col-span-1",children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"City"}),(0,a.jsx)("input",{type:"text",value:w.city,onChange:e=>_({...w,city:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,a.jsx)("div",{className:"md:col-span-1",children:(0,a.jsxs)("button",{onClick:M,className:"btn btn-primary w-full",disabled:!w.name||!w.insurer_name||!w.city,children:[(0,a.jsx)(n.Plus,{className:"w-4 h-4 mr-2"}),"Add Garage"]})})]}),(0,a.jsxs)("div",{className:"overflow-x-auto",children:[(0,a.jsxs)("table",{className:"w-full text-left",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-50 border-b border-gray-100",children:[(0,a.jsx)("th",{className:"px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Name"}),(0,a.jsx)("th",{className:"px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Insurer"}),(0,a.jsx)("th",{className:"px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"City"}),(0,a.jsx)("th",{className:"px-4 py-3 text-xs font-semibold text-gray-500 uppercase text-right",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-100",children:p.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.insurer_name}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.city}),(0,a.jsx)("td",{className:"px-4 py-3 text-right",children:(0,a.jsx)("button",{onClick:()=>P(e.id),className:"text-red-500 hover:text-red-700",children:(0,a.jsx)(d.Trash2,{className:"w-4 h-4"})})})]},e.id))})]}),0===p.length&&(0,a.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No garages found."})]})]})]})]})}e.s(["default",()=>o],84435)}]);