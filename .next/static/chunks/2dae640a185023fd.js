(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,37284,e=>{"use strict";let a=(0,e.i(36869).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>a],37284)},61813,e=>{"use strict";let a=(0,e.i(36869).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>a],61813)},3707,e=>{"use strict";let a=(0,e.i(36869).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>a],3707)},95257,e=>{"use strict";let a=(0,e.i(36869).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);e.s(["Filter",()=>a],95257)},31685,e=>{"use strict";let a=(0,e.i(36869).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>a],31685)},47219,e=>{"use strict";let a=(0,e.i(36869).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>a],47219)},35307,e=>{"use strict";let a=(0,e.i(36869).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],35307)},72527,e=>{"use strict";let a=(0,e.i(36869).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],72527)},24581,e=>{"use strict";let a=(0,e.i(36869).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>a],24581)},97964,66959,e=>{"use strict";let a=(0,e.i(36869).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>a],97964);var t=e.i(9295);function l({label:e,name:a,type:l="text",value:r,onChange:s,onBlur:i,error:n,placeholder:o,required:d=!1,disabled:u=!1,min:c,max:m,step:p,options:y=[],rows:x=4,className:h=""}){let b=`
    w-full px-4 py-2 border rounded-lg
    focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent
    disabled:bg-gray-100 disabled:cursor-not-allowed
    transition-colors
    ${n?"border-red-500 focus:ring-red-500":"border-gray-300"}
    ${h}
  `;return(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("label",{htmlFor:a,className:"block text-sm font-medium text-gray-700",children:[e,d&&(0,t.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),"select"===l?(0,t.jsxs)("select",{id:a,name:a,value:r,onChange:s,onBlur:i,disabled:u,required:d,className:b,children:[(0,t.jsxs)("option",{value:"",children:["Select ",e]}),y.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))]}):"textarea"===l?(0,t.jsx)("textarea",{id:a,name:a,value:r,onChange:s,onBlur:i,placeholder:o,disabled:u,required:d,rows:x,className:b}):(0,t.jsx)("input",{id:a,name:a,type:l,value:r,onChange:s,onBlur:i,placeholder:o,disabled:u,required:d,min:c,max:m,step:p,className:b}),n&&(0,t.jsxs)("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),n]})]})}e.s(["default",()=>l],66959)},12044,e=>{"use strict";var a=e.i(9295),t=e.i(13428),l=e.i(36869);let r=(0,l.default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var s=e.i(97964);let i=(0,l.default)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);var n=e.i(47219),o=e.i(95120);async function d(e,a){try{let t=Date.now(),l=Math.random().toString(36).substring(2,8),r=e.name.split(".").pop(),s=`${t}_${l}.${r}`,{data:i,error:n}=await o.supabase.storage.from(a).upload(s,e,{cacheControl:"3600",upsert:!0});if(n)throw n;let{data:{publicUrl:d}}=o.supabase.storage.from(a).getPublicUrl(i.path);return d}catch(e){throw console.error("Error uploading file:",e),Error(e.message||"Failed to upload file")}}function u({label:e,name:l,accept:o=".pdf,.jpg,.jpeg,.png",bucket:u,onUploadComplete:c,existingFile:m,required:p=!1,maxSizeMB:y=5}){let[x,h]=(0,t.useState)(null),[b,g]=(0,t.useState)(m?.url||null),[_,v]=(0,t.useState)(m?.name||""),[f,j]=(0,t.useState)(!1),[N,w]=(0,t.useState)(0),[C,D]=(0,t.useState)(""),S=(0,t.useRef)(null),k=async e=>{if(D(""),e.size>1024*y*1024)return void D(`File size must be less than ${y}MB`);if(h(e),v(e.name),e.type.startsWith("image/")){let a=new FileReader;a.onload=e=>{g(e.target?.result)},a.readAsDataURL(e)}else g(null);await P(e)},P=async e=>{j(!0),w(0);try{let a=setInterval(()=>{w(e=>Math.min(e+10,90))},200),t=await d(e,u);clearInterval(a),w(100),j(!1),c(t,e.name)}catch(e){console.error("Upload error:",e),D("Failed to upload file. Please try again."),j(!1),h(null),g(null)}};return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[e,p&&(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),x||m?(0,a.jsx)("div",{className:"border border-gray-300 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[b?(0,a.jsx)("img",{src:b,alt:"Preview",className:"w-16 h-16 object-cover rounded"}):(0,a.jsx)(i,{className:"w-8 h-8 text-gray-400"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:_}),f&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-primary-600 h-2 rounded-full transition-all",style:{width:`${N}%`}})}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Uploading... ",N,"%"]})]}),!f&&100===N&&(0,a.jsxs)("p",{className:"text-xs text-green-600 flex items-center gap-1 mt-1",children:[(0,a.jsx)(n.CheckCircle,{className:"w-3 h-3"}),"Uploaded successfully"]})]})]}),!f&&(0,a.jsx)("button",{type:"button",onClick:()=>{h(null),g(null),v(""),w(0),D(""),S.current&&(S.current.value="")},className:"text-red-600 hover:text-red-800 p-1 ml-4 hover:bg-red-50 rounded-full transition-colors",children:(0,a.jsx)(s.X,{className:"w-5 h-5"})})]})}):(0,a.jsxs)("div",{onDrop:e=>{e.preventDefault();let a=e.dataTransfer.files[0];a&&k(a)},onDragOver:e=>{e.preventDefault()},onClick:()=>S.current?.click(),className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-primary-500 transition-colors",children:[(0,a.jsx)(r,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Click to upload or drag and drop"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[o.toUpperCase()," (Max ",y,"MB)"]}),(0,a.jsx)("input",{ref:S,type:"file",accept:o,onChange:e=>e.target.files?.[0]&&k(e.target.files[0]),className:"hidden"})]}),C&&(0,a.jsxs)("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),C]})]})}e.s(["default",()=>u],12044)},83311,63632,e=>{"use strict";e.s(["CAR_MANUFACTURERS",0,["Maruti Suzuki","Hyundai","Tata","Honda","Toyota","Mahindra","Kia","Volkswagen","Renault","Nissan","Ford","Skoda","MG","Jeep","BMW","Mercedes-Benz","Audi","Volvo","Others"],"INSURANCE_COMPANIES",0,["HDFC ERGO","GO DIGIT","ICICI LOMBARD","TATA AIG","SHRIRAM GIC","ACKO GIC","CHOLA MS","INDUSIND GIC","BAJAJ GIC","IFFCO GIC","liberty gic","Royal sundaram","magma","kotak gic","sbi gic","national insurance","oriental","united India gic","new india gic","OTHERS"]],83311),e.s(["validateDateRange",0,(e,a)=>e<a,"validatePolicyNumber",0,e=>e.trim().length>=5,"validatePremiumAmount",0,(e,a=0,t=1e7)=>e>=a&&e<=t&&!isNaN(e),"validateVehicleNumber",0,e=>/^[A-Z]{2}[0-9]{1,2}[A-Z]{1,2}[0-9]{4}$/.test(e.replace(/\s+/g,""))],63632)},49047,e=>{"use strict";var a=e.i(9295),t=e.i(13428),l=e.i(97964),r=e.i(24581),s=e.i(35307),i=e.i(66959),n=e.i(12044),o=e.i(36271),d=e.i(83311),u=e.i(63632);function c({userId:e,initialData:c,onClose:m,onSuccess:p}){let[y,x]=(0,t.useState)(!1),[h,b]=(0,t.useState)({}),[g,_]=(0,t.useState)({company_name:c?.company_name||"",policy_number:c?.policy_number||"",insurer_name:c?.insurer_name||"",sum_insured:c?.sum_insured||0,premium_amount:c?.premium_amount||0,expiry_date:new Date(c?.expiry_date?c.expiry_date:new Date().setFullYear(new Date().getFullYear()+1)),policy_docs:c?.policy_docs||[],no_of_lives:c?.no_of_lives||0});(0,t.useEffect)(()=>{if(!c){let e=new Date(new Date);e.setFullYear(e.getFullYear()+1),e.setDate(e.getDate()-1),_(a=>({...a,expiry_date:e}))}},[c]);let v=e=>{let{name:a,value:t,type:l}=e.target;_(e=>({...e,[a]:"number"===l?Number(t):t})),h[a]&&b(e=>{let t={...e};return delete t[a],t})},f=async a=>{let t;if(a.preventDefault(),t={},(0,u.validatePolicyNumber)(g.policy_number||"")||(t.policy_number="Policy number is required"),(0,u.validatePremiumAmount)(g.premium_amount||0)||(t.premium_amount="Invalid premium amount"),g.insurer_name||(t.insurer_name="Insurer name is required"),g.company_name||(t.company_name="Company name is required"),b(t),0===Object.keys(t).length){x(!0);try{let a={...g,user_id:e,expiry_date:new Date(g.expiry_date),policy_number:g.policy_number||"",insurer_name:g.insurer_name||"",premium_amount:g.premium_amount||0,policy_docs:g.policy_docs||[]};c?.id?await (0,o.updateHealthPolicy)(c.id,a):await (0,o.addHealthPolicy)(a),p(),m()}catch(e){console.error("Error saving policy:",e),b(e=>({...e,submit:"Failed to save policy. Please try again."}))}finally{x(!1)}}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b sticky top-0 bg-white z-10",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:c?"Edit Health Insurance Policy":"Add New Health Insurance Policy"}),(0,a.jsx)("button",{onClick:m,className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)(l.X,{className:"w-6 h-6"})})]}),(0,a.jsxs)("form",{onSubmit:f,className:"p-6 space-y-8",children:[h.submit&&(0,a.jsx)("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg text-sm",children:h.submit}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Policy Details"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,a.jsx)(i.default,{label:"Company Name",name:"company_name",value:g.company_name||"",onChange:v,placeholder:"e.g. Acme Corp",error:h.company_name,required:!0}),(0,a.jsx)(i.default,{label:"Policy Number",name:"policy_number",value:g.policy_number||"",onChange:v,placeholder:"Enter policy number",error:h.policy_number,required:!0}),(0,a.jsx)(i.default,{label:"Insurer Name",name:"insurer_name",type:"select",value:g.insurer_name||"",onChange:v,options:d.INSURANCE_COMPANIES.map(e=>({value:e,label:e})),error:h.insurer_name,required:!0}),(0,a.jsx)(i.default,{label:"Sum Insured (₹)",name:"sum_insured",type:"number",value:g.sum_insured||"",onChange:v,placeholder:"e.g. 500000"}),(0,a.jsx)(i.default,{label:"Premium Amount (₹)",name:"premium_amount",type:"number",value:g.premium_amount||"",onChange:v,error:h.premium_amount,required:!0}),(0,a.jsx)(i.default,{label:"Expiry Date",name:"expiry_date",type:"date",value:g.expiry_date?new Date(g.expiry_date).toISOString().split("T")[0]:"",onChange:e=>{let{name:a,value:t}=e.target;_(e=>({...e,[a]:new Date(t)}))},required:!0}),(0,a.jsx)(i.default,{label:"Number of Lives",name:"no_of_lives",type:"number",value:g.no_of_lives||"",onChange:v,placeholder:"e.g. 50"})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Documents"}),(0,a.jsx)("div",{className:"grid md:grid-cols-3 gap-6",children:(0,a.jsx)(n.default,{label:"Policy Document",name:"policy_docs",bucket:"policy-documents",onUploadComplete:e=>{_(a=>({...a,policy_docs:[...a.policy_docs||[],e]}))},existingFile:g.policy_docs&&g.policy_docs.length>0?{url:g.policy_docs[0],name:"Policy Document"}:void 0})})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[(0,a.jsx)("button",{type:"button",onClick:m,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",disabled:y,children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center",disabled:y,children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Save,{className:"w-4 h-4 mr-2"}),"Save Policy"]})})]})]})]})})}e.s(["default",()=>c])},43836,e=>{"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.s(["default",()=>a])},20925,e=>{"use strict";let a=(0,e.i(36869).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>a],20925)},57361,e=>{"use strict";var a=e.i(9295),t=e.i(13428),l=e.i(97964),r=e.i(24581),s=e.i(35307),i=e.i(66959),n=e.i(12044),o=e.i(36271);function d({userId:e,onClose:d,onSuccess:u}){let[c,m]=(0,t.useState)(!1),[p,y]=(0,t.useState)({}),[x,h]=(0,t.useState)({lob_type:"Motor",details:"",uploaded_quote:"",has_better_quote:!1}),b=e=>{let{name:a,value:t,type:l}=e.target;"checkbox"===l?h(t=>({...t,[a]:e.target.checked})):h(e=>({...e,[a]:t})),p[a]&&y(e=>{let t={...e};return delete t[a],t})},g=async a=>{let t;if(a.preventDefault(),t={},x.details||(t.details="Please provide some details about your requirement"),y(t),0===Object.keys(t).length){m(!0);try{await (0,o.addQuoteRequest)({user_id:e,lob_type:x.lob_type,details:x.details,uploaded_quote:x.uploaded_quote,has_better_quote:x.has_better_quote,status:"New"}),u(),d()}catch(e){console.error("Error saving quote request:",e),y(e=>({...e,submit:"Failed to submit request. Please try again."}))}finally{m(!1)}}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b sticky top-0 bg-white z-10",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Request a Quote"}),(0,a.jsx)("button",{onClick:d,className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)(l.X,{className:"w-6 h-6"})})]}),(0,a.jsxs)("form",{onSubmit:g,className:"p-6 space-y-6",children:[p.submit&&(0,a.jsx)("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg text-sm",children:p.submit}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(i.default,{label:"Insurance Type",name:"lob_type",type:"select",value:x.lob_type,onChange:b,options:[{value:"Motor",label:"Motor Insurance"},{value:"Health",label:"Health Insurance"},{value:"Life",label:"Life Insurance"},{value:"Others",label:"Other Insurance"}],required:!0}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Requirement Details"}),(0,a.jsx)("textarea",{name:"details",value:x.details,onChange:b,rows:4,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-all ${p.details?"border-red-500 bg-red-50":"border-gray-300"}`,placeholder:"Describe what you are looking for (e.g., Comprehensive car insurance for Honda City 2020)..."}),p.details&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:p.details})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"has_better_quote",name:"has_better_quote",checked:x.has_better_quote,onChange:b,className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,a.jsx)("label",{htmlFor:"has_better_quote",className:"text-sm text-gray-700",children:"I have a quote from another insurer"})]}),x.has_better_quote&&(0,a.jsx)(n.default,{label:"Upload Existing Quote (Optional)",name:"uploaded_quote",bucket:"quote-documents",onUploadComplete:e=>{h(a=>({...a,uploaded_quote:e}))},existingFile:x.uploaded_quote?{url:x.uploaded_quote,name:"Existing Quote"}:void 0})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[(0,a.jsx)("button",{type:"button",onClick:d,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",disabled:c,children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center",disabled:c,children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Submitting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Save,{className:"w-4 h-4 mr-2"}),"Submit Request"]})})]})]})]})})}e.s(["default",()=>d])},95349,e=>{"use strict";var a=e.i(9295),t=e.i(13428),l=e.i(97964),r=e.i(24581),s=e.i(35307),i=e.i(66959),n=e.i(12044),o=e.i(36271),d=e.i(83311),u=e.i(63632);function c({userId:e,initialData:c,onClose:m,onSuccess:p}){let[y,x]=(0,t.useState)(!1),[h,b]=(0,t.useState)({}),[g,_]=(0,t.useState)({vehicle_number:c?.vehicle_number||"",policy_number:c?.policy_number||"",vehicle_type:c?.vehicle_type||"Car",manufacturer:c?.manufacturer||"",model:c?.model||"",fuel_type:c?.fuel_type||"Petrol",manufacturing_year:c?.manufacturing_year||new Date().getFullYear(),number_plate_type:c?.number_plate_type||"White",ownership_type:c?.ownership_type||"Individual",insurer_name:c?.insurer_name||"",premium_amount:c?.premium_amount||0,policy_start_date:c?.policy_start_date?new Date(c.policy_start_date):new Date,policy_end_date:new Date(c?.policy_end_date?c.policy_end_date:new Date().setFullYear(new Date().getFullYear()+1)),rc_docs:c?.rc_docs||[],previous_policy_docs:c?.previous_policy_docs||[],dl_docs:c?.dl_docs||[]});(0,t.useEffect)(()=>{if(g.policy_start_date&&!c){let e=new Date(new Date(g.policy_start_date));e.setFullYear(e.getFullYear()+1),e.setDate(e.getDate()-1),_(a=>({...a,policy_end_date:e}))}},[g.policy_start_date,c]);let v=e=>{let{name:a,value:t,type:l}=e.target;_(e=>({...e,[a]:"number"===l?Number(t):t})),h[a]&&b(e=>{let t={...e};return delete t[a],t})},f=e=>{let{name:a,value:t}=e.target;_(e=>({...e,[a]:new Date(t)}))},j=async a=>{let t;if(a.preventDefault(),t={},(0,u.validateVehicleNumber)(g.vehicle_number||"")||(t.vehicle_number="Invalid vehicle number format (e.g., KA01AB1234)"),(0,u.validatePolicyNumber)(g.policy_number||"")||(t.policy_number="Policy number is required"),(0,u.validatePremiumAmount)(g.premium_amount||0)||(t.premium_amount="Invalid premium amount"),g.policy_start_date&&g.policy_end_date&&!(0,u.validateDateRange)(g.policy_start_date,g.policy_end_date)&&(t.policy_end_date="End date must be after start date"),g.manufacturer||(t.manufacturer="Manufacturer is required"),g.model||(t.model="Model is required"),g.insurer_name||(t.insurer_name="Insurer name is required"),b(t),0===Object.keys(t).length){x(!0);try{let a={...g,user_id:e,policy_start_date:new Date(g.policy_start_date),policy_end_date:new Date(g.policy_end_date),rc_docs:g.rc_docs||[],previous_policy_docs:g.previous_policy_docs||[],dl_docs:g.dl_docs||[]};c?.id?await (0,o.updateMotorPolicy)(c.id,a):await (0,o.addMotorPolicy)(a),p(),m()}catch(e){console.error("Error saving policy:",e),b(e=>({...e,submit:"Failed to save policy. Please try again."}))}finally{x(!1)}}},N=e=>a=>{_(t=>({...t,[e]:[...t[e]||[],a]}))};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b sticky top-0 bg-white z-10",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:c?"Edit Motor Policy":"Add New Motor Policy"}),(0,a.jsx)("button",{onClick:m,className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)(l.X,{className:"w-6 h-6"})})]}),(0,a.jsxs)("form",{onSubmit:j,className:"p-6 space-y-8",children:[h.submit&&(0,a.jsx)("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg text-sm",children:h.submit}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Vehicle Details"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,a.jsx)(i.default,{label:"Vehicle Number",name:"vehicle_number",value:g.vehicle_number||"",onChange:v,placeholder:"KA01AB1234",error:h.vehicle_number,required:!0}),(0,a.jsx)(i.default,{label:"Vehicle Type",name:"vehicle_type",type:"select",value:g.vehicle_type||"Car",onChange:v,options:[{value:"Car",label:"Car"},{value:"Bike",label:"Bike"},{value:"Bus",label:"Bus"},{value:"GCV",label:"Goods Carrying Vehicle"},{value:"Misc",label:"Miscellaneous"}],required:!0}),(0,a.jsx)(i.default,{label:"Number Plate Type",name:"number_plate_type",type:"select",value:g.number_plate_type??"",onChange:v,required:!0,options:[{value:"White",label:"White (Pvt)"},{value:"Yellow",label:"Yellow (Commercial)"},{value:"EV",label:"EV (Green)"}]}),(0,a.jsx)(i.default,{label:"Ownership Type",name:"ownership_type",type:"select",value:g.ownership_type??"Individual",onChange:v,required:!0,options:[{value:"Individual",label:"Individual"},{value:"Company",label:"Company"}]}),(0,a.jsx)(i.default,{label:"Manufacturer",name:"manufacturer",type:"select",value:g.manufacturer||"",onChange:v,options:d.CAR_MANUFACTURERS.map(e=>({value:e,label:e})),error:h.manufacturer,required:!0}),(0,a.jsx)(i.default,{label:"Model",name:"model",value:g.model||"",onChange:v,placeholder:"e.g. Swift",error:h.model,required:!0}),(0,a.jsx)(i.default,{label:"Fuel Type",name:"fuel_type",type:"select",value:g.fuel_type||"Petrol",onChange:v,options:[{value:"Petrol",label:"Petrol"},{value:"Diesel",label:"Diesel"},{value:"CNG",label:"CNG"},{value:"Electric",label:"Electric"},{value:"Hybrid",label:"Hybrid"}],required:!0}),(0,a.jsx)(i.default,{label:"Manufacturing Year",name:"manufacturing_year",type:"number",value:g.manufacturing_year||new Date().getFullYear(),onChange:v,min:1990,max:new Date().getFullYear(),required:!0})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Policy Details"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,a.jsx)(i.default,{label:"Policy Number",name:"policy_number",value:g.policy_number||"",onChange:v,placeholder:"Enter policy number",error:h.policy_number,required:!0}),(0,a.jsx)(i.default,{label:"Insurer Name",name:"insurer_name",type:"select",value:g.insurer_name||"",onChange:v,options:d.INSURANCE_COMPANIES.map(e=>({value:e,label:e})),error:h.insurer_name,required:!0}),(0,a.jsx)(i.default,{label:"Premium Amount (₹)",name:"premium_amount",type:"number",value:g.premium_amount||"",onChange:v,error:h.premium_amount,required:!0}),(0,a.jsx)(i.default,{label:"Start Date",name:"policy_start_date",type:"date",value:g.policy_start_date?new Date(g.policy_start_date).toISOString().split("T")[0]:"",onChange:f,required:!0}),(0,a.jsx)(i.default,{label:"End Date",name:"policy_end_date",type:"date",value:g.policy_end_date?new Date(g.policy_end_date).toISOString().split("T")[0]:"",onChange:f,error:h.policy_end_date,required:!0})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Documents"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,a.jsx)(n.default,{label:"RC Copy",name:"rc_docs",bucket:"rc-copies",onUploadComplete:N("rc_docs"),existingFile:g.rc_docs&&g.rc_docs.length>0?{url:g.rc_docs[0],name:"RC Document"}:void 0}),(0,a.jsx)(n.default,{label:"Previous Policy",name:"previous_policy_docs",bucket:"policy-documents",onUploadComplete:N("previous_policy_docs"),existingFile:g.previous_policy_docs&&g.previous_policy_docs.length>0?{url:g.previous_policy_docs[0],name:"Previous Policy"}:void 0})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[(0,a.jsx)("button",{type:"button",onClick:m,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",disabled:y,children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center",disabled:y,children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Save,{className:"w-4 h-4 mr-2"}),"Save Policy"]})})]})]})]})})}e.s(["default",()=>c])},28871,e=>{"use strict";var a=e.i(9295),t=e.i(13428),l=e.i(97964),r=e.i(24581),s=e.i(35307),i=e.i(66959),n=e.i(12044),o=e.i(36271),d=e.i(83311),u=e.i(63632);function c({userId:e,initialData:c,onClose:m,onSuccess:p}){let[y,x]=(0,t.useState)(!1),[h,b]=(0,t.useState)({}),[g,_]=(0,t.useState)({lob_type:c?.lob_type||"GPA",company_name:c?.company_name||"",policy_holder_name:c?.policy_holder_name||"",policy_number:c?.policy_number||"",insurer_name:c?.insurer_name||"",premium_amount:c?.premium_amount||0,sum_insured:c?.sum_insured||0,expiry_date:new Date(c?.expiry_date?c.expiry_date:new Date().setFullYear(new Date().getFullYear()+1)),policy_docs:c?.policy_docs||[]});(0,t.useEffect)(()=>{if(!c){let e=new Date(new Date);e.setFullYear(e.getFullYear()+1),e.setDate(e.getDate()-1),_(a=>({...a,expiry_date:e}))}},[c]);let v=e=>{let{name:a,value:t,type:l}=e.target;_(e=>({...e,[a]:"number"===l?Number(t):t})),h[a]&&b(e=>{let t={...e};return delete t[a],t})},f=async a=>{let t;if(a.preventDefault(),t={},(0,u.validatePolicyNumber)(g.policy_number||"")||(t.policy_number="Policy number is required"),(0,u.validatePremiumAmount)(g.premium_amount||0)||(t.premium_amount="Invalid premium amount"),g.insurer_name||(t.insurer_name="Insurer name is required"),g.lob_type||(t.lob_type="LOB Type is required"),b(t),0===Object.keys(t).length){x(!0);try{let a={...g,user_id:e,expiry_date:new Date(g.expiry_date),policy_number:g.policy_number||"",insurer_name:g.insurer_name||"",premium_amount:g.premium_amount||0,lob_type:g.lob_type||"GPA",policy_docs:g.policy_docs||[]};c?.id?await (0,o.updateCommercialPolicy)(c.id,a):await (0,o.addCommercialPolicy)(a),p(),m()}catch(e){console.error("Error saving policy:",e),b(e=>({...e,submit:"Failed to save policy. Please try again."}))}finally{x(!1)}}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b sticky top-0 bg-white z-10",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:c?"Edit Commercial Policy":"Add New Commercial Policy"}),(0,a.jsx)("button",{onClick:m,className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)(l.X,{className:"w-6 h-6"})})]}),(0,a.jsxs)("form",{onSubmit:f,className:"p-6 space-y-8",children:[h.submit&&(0,a.jsx)("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg text-sm",children:h.submit}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Policy Details"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,a.jsx)(i.default,{label:"LOB Type",name:"lob_type",type:"select",value:g.lob_type||"GPA",onChange:v,options:[{value:"GPA",label:"GPA"},{value:"Fire",label:"Fire"},{value:"Other",label:"Other"}],required:!0}),(0,a.jsx)(i.default,{label:"Company Name",name:"company_name",value:g.company_name||"",onChange:v,placeholder:"e.g. Acme Corp"}),(0,a.jsx)(i.default,{label:"Policy Holder Name",name:"policy_holder_name",value:g.policy_holder_name||"",onChange:v,placeholder:"e.g. John Doe"}),(0,a.jsx)(i.default,{label:"Policy Number",name:"policy_number",value:g.policy_number||"",onChange:v,placeholder:"Enter policy number",error:h.policy_number,required:!0}),(0,a.jsx)(i.default,{label:"Insurer Name",name:"insurer_name",type:"select",value:g.insurer_name||"",onChange:v,options:d.INSURANCE_COMPANIES.map(e=>({value:e,label:e})),error:h.insurer_name,required:!0}),(0,a.jsx)(i.default,{label:"Sum Insured (₹)",name:"sum_insured",type:"number",value:g.sum_insured||"",onChange:v,placeholder:"e.g. 500000"}),(0,a.jsx)(i.default,{label:"Premium Amount (₹)",name:"premium_amount",type:"number",value:g.premium_amount||"",onChange:v,error:h.premium_amount,required:!0}),(0,a.jsx)(i.default,{label:"Expiry Date",name:"expiry_date",type:"date",value:g.expiry_date?new Date(g.expiry_date).toISOString().split("T")[0]:"",onChange:e=>{let{name:a,value:t}=e.target;_(e=>({...e,[a]:new Date(t)}))},required:!0})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Documents"}),(0,a.jsx)("div",{className:"grid md:grid-cols-3 gap-6",children:(0,a.jsx)(n.default,{label:"Policy Document",name:"policy_docs",bucket:"policy-documents",onUploadComplete:e=>{_(a=>({...a,policy_docs:[...a.policy_docs||[],e]}))},existingFile:g.policy_docs&&g.policy_docs.length>0?{url:g.policy_docs[0],name:"Policy Document"}:void 0})})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[(0,a.jsx)("button",{type:"button",onClick:m,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",disabled:y,children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center",disabled:y,children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Save,{className:"w-4 h-4 mr-2"}),"Save Policy"]})})]})]})]})})}e.s(["default",()=>c])},43302,e=>{"use strict";let a=(0,e.i(36869).default)("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);e.s(["Briefcase",()=>a],43302)},28228,74468,87367,32747,e=>{"use strict";var a=e.i(9295),t=e.i(13428),l=e.i(97964),r=e.i(52187),s=e.i(87382),i=e.i(43302),n=e.i(59975),o=e.i(95349),d=e.i(49047),u=e.i(28871),c=e.i(24581),m=e.i(35307),p=e.i(66959),y=e.i(12044),x=e.i(36271),h=e.i(83311);function b({userId:e,initialData:l,onClose:r,onSuccess:s}){let[i,n]=(0,t.useState)(!1),[o,d]=(0,t.useState)({}),[u,b]=(0,t.useState)({policy_number:l?.policy_number||"",insurer_name:l?.insurer_name||"",premium_amount:l?.premium_amount||0,sum_assured:l?.sum_assured||0,nominee_name:l?.nominee_name||"",policy_start_date:l?.policy_start_date?new Date(l.policy_start_date):new Date,policy_end_date:new Date(l?.policy_end_date?l.policy_end_date:new Date().setFullYear(new Date().getFullYear()+20)),document_url:l?.document_url||""});(0,t.useEffect)(()=>{if(u.policy_start_date&&!l){let e=new Date(new Date(u.policy_start_date));e.setFullYear(e.getFullYear()+1),e.setDate(e.getDate()-1),b(a=>({...a,policy_end_date:e}))}},[u.policy_start_date,l]);let g=e=>{let{name:a,value:t,type:l}=e.target;b(e=>({...e,[a]:"number"===l?Number(t):t}))},_=e=>{let{name:a,value:t}=e.target;b(e=>({...e,[a]:new Date(t)}))},v=async a=>{a.preventDefault(),n(!0);try{await (0,x.addLifePolicy)({...u,user_id:e,status:"Active"}),s()}catch(e){console.error("Error saving life policy:",e),d({submit:"Failed to save policy"})}finally{n(!1)}};return(0,a.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Life Insurance Details"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsx)(p.default,{label:"Policy Number",name:"policy_number",value:u.policy_number,onChange:g,required:!0}),(0,a.jsx)(p.default,{label:"Policy Number",name:"policy_number",value:u.policy_number,onChange:g,required:!0}),(0,a.jsx)(p.default,{label:"Insurer Name",name:"insurer_name",type:"select",value:u.insurer_name,onChange:g,options:h.INSURANCE_COMPANIES.map(e=>({value:e,label:e})),required:!0}),(0,a.jsx)(p.default,{label:"Premium Amount (₹)",name:"premium_amount",type:"number",value:u.premium_amount,onChange:g,required:!0}),(0,a.jsx)(p.default,{label:"Sum Assured (₹)",name:"sum_assured",type:"number",value:u.sum_assured,onChange:g,required:!0}),(0,a.jsx)(p.default,{label:"Nominee Name",name:"nominee_name",value:u.nominee_name,onChange:g,required:!0}),(0,a.jsx)(p.default,{label:"Start Date",name:"policy_start_date",type:"date",value:u.policy_start_date.toISOString().split("T")[0],onChange:_,required:!0}),(0,a.jsx)(p.default,{label:"End Date",name:"policy_end_date",type:"date",value:u.policy_end_date.toISOString().split("T")[0],onChange:_,required:!0})]}),(0,a.jsx)(y.default,{label:"Policy Document",name:"document_url",bucket:"policy-documents",onUploadComplete:e=>b(a=>({...a,document_url:e}))}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[(0,a.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,a.jsxs)("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center",children:[i?(0,a.jsx)(m.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}):(0,a.jsx)(c.Save,{className:"w-4 h-4 mr-2"}),"Save Policy"]})]})]})}function g({userId:e,initialData:l,onClose:r,onSuccess:s}){let[i,n]=(0,t.useState)(!1),[o,d]=(0,t.useState)({}),[u,b]=(0,t.useState)({policy_number:l?.policy_number||"",insurer_name:l?.insurer_name||"",premium_amount:l?.premium_amount||0,destination:l?.destination||"",trip_type:l?.trip_type||"Single Trip",policy_start_date:l?.policy_start_date?new Date(l.policy_start_date):new Date,policy_end_date:new Date(l?.policy_end_date?l.policy_end_date:new Date().setDate(new Date().getDate()+7)),document_url:l?.document_url||""});(0,t.useEffect)(()=>{if(u.policy_start_date&&!l){let e=new Date(new Date(u.policy_start_date));e.setFullYear(e.getFullYear()+1),e.setDate(e.getDate()-1),b(a=>({...a,policy_end_date:e}))}},[u.policy_start_date,l]);let g=e=>{let{name:a,value:t,type:l}=e.target;b(e=>({...e,[a]:"number"===l?Number(t):t}))},_=e=>{let{name:a,value:t}=e.target;b(e=>({...e,[a]:new Date(t)}))},v=async a=>{a.preventDefault(),n(!0);try{await (0,x.addTravelPolicy)({...u,user_id:e,status:"Active"}),s()}catch(e){console.error("Error saving travel policy:",e),d({submit:"Failed to save policy"})}finally{n(!1)}};return(0,a.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Travel Insurance Details"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsx)(p.default,{label:"Policy Number",name:"policy_number",value:u.policy_number,onChange:g,required:!0}),(0,a.jsx)(p.default,{label:"Insurer Name",name:"insurer_name",type:"select",value:u.insurer_name,onChange:g,options:h.INSURANCE_COMPANIES.map(e=>({value:e,label:e})),required:!0}),(0,a.jsx)(p.default,{label:"Premium Amount (₹)",name:"premium_amount",type:"number",value:u.premium_amount,onChange:g,required:!0}),(0,a.jsx)(p.default,{label:"Destination",name:"destination",value:u.destination,onChange:g,required:!0}),(0,a.jsx)(p.default,{label:"Trip Type",name:"trip_type",type:"select",value:u.trip_type,onChange:g,options:[{value:"Single Trip",label:"Single Trip"},{value:"Multi Trip",label:"Multi Trip"}],required:!0}),(0,a.jsx)(p.default,{label:"Start Date",name:"policy_start_date",type:"date",value:u.policy_start_date.toISOString().split("T")[0],onChange:_,required:!0}),(0,a.jsx)(p.default,{label:"End Date",name:"policy_end_date",type:"date",value:u.policy_end_date.toISOString().split("T")[0],onChange:_,required:!0})]}),(0,a.jsx)(y.default,{label:"Policy Document",name:"document_url",bucket:"policy-documents",onUploadComplete:e=>b(a=>({...a,document_url:e}))}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[(0,a.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,a.jsxs)("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center",children:[i?(0,a.jsx)(m.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}):(0,a.jsx)(c.Save,{className:"w-4 h-4 mr-2"}),"Save Policy"]})]})]})}function _({userId:e,initialData:l,onClose:r,onSuccess:s}){let[i,n]=(0,t.useState)(!1),[o,d]=(0,t.useState)({}),[u,b]=(0,t.useState)({policy_number:l?.policy_number||"",insurer_name:l?.insurer_name||"",premium_amount:l?.premium_amount||0,sum_insured:l?.sum_insured||0,cyber_risk_type:l?.cyber_risk_type||"Personal",policy_start_date:l?.policy_start_date?new Date(l.policy_start_date):new Date,policy_end_date:new Date(l?.policy_end_date?l.policy_end_date:new Date().setFullYear(new Date().getFullYear()+1)),document_url:l?.document_url||""});(0,t.useEffect)(()=>{if(u.policy_start_date&&!l){let e=new Date(new Date(u.policy_start_date));e.setFullYear(e.getFullYear()+1),e.setDate(e.getDate()-1),b(a=>({...a,policy_end_date:e}))}},[u.policy_start_date,l]);let g=e=>{let{name:a,value:t,type:l}=e.target;b(e=>({...e,[a]:"number"===l?Number(t):t}))},_=e=>{let{name:a,value:t}=e.target;b(e=>({...e,[a]:new Date(t)}))},v=async a=>{a.preventDefault(),n(!0);try{await (0,x.addCyberPolicy)({...u,user_id:e,status:"Active"}),s()}catch(e){console.error("Error saving cyber policy:",e),d({submit:"Failed to save policy"})}finally{n(!1)}};return(0,a.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Cyber Insurance Details"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsx)(p.default,{label:"Policy Number",name:"policy_number",value:u.policy_number,onChange:g,required:!0}),(0,a.jsx)(p.default,{label:"Policy Number",name:"policy_number",value:u.policy_number,onChange:g,required:!0}),(0,a.jsx)(p.default,{label:"Insurer Name",name:"insurer_name",type:"select",value:u.insurer_name,onChange:g,options:h.INSURANCE_COMPANIES.map(e=>({value:e,label:e})),required:!0}),(0,a.jsx)(p.default,{label:"Premium Amount (₹)",name:"premium_amount",type:"number",value:u.premium_amount,onChange:g,required:!0}),(0,a.jsx)(p.default,{label:"Sum Insured (₹)",name:"sum_insured",type:"number",value:u.sum_insured,onChange:g,required:!0}),(0,a.jsx)(p.default,{label:"Risk Type",name:"cyber_risk_type",type:"select",value:u.cyber_risk_type,onChange:g,options:[{value:"Personal",label:"Personal"},{value:"Business",label:"Business"}],required:!0}),(0,a.jsx)(p.default,{label:"Start Date",name:"policy_start_date",type:"date",value:u.policy_start_date.toISOString().split("T")[0],onChange:_,required:!0}),(0,a.jsx)(p.default,{label:"End Date",name:"policy_end_date",type:"date",value:u.policy_end_date.toISOString().split("T")[0],onChange:_,required:!0})]}),(0,a.jsx)(y.default,{label:"Policy Document",name:"document_url",bucket:"policy-documents",onUploadComplete:e=>b(a=>({...a,document_url:e}))}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[(0,a.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,a.jsxs)("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center",children:[i?(0,a.jsx)(m.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}):(0,a.jsx)(c.Save,{className:"w-4 h-4 mr-2"}),"Save Policy"]})]})]})}function v({isOpen:e,onClose:c,userId:m,onSuccess:p,initialType:y}){let[x,h]=(0,t.useState)(y);if(t.default.useEffect(()=>{e&&h(y)},[e,y]),!e)return null;let v=()=>{p(),c(),h(void 0)};return(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:x?(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>h(void 0),className:"text-sm text-gray-500 hover:text-gray-900",children:"Select Type"}),(0,a.jsx)(n.ChevronRight,{className:"w-4 h-4 text-gray-400"}),(0,a.jsxs)("h3",{className:"text-lg font-bold text-gray-900",children:["Add ",x," Policy"]})]}),(0,a.jsx)("button",{onClick:c,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,a.jsx)(l.X,{className:"w-5 h-5 text-gray-500"})})]}),(0,a.jsx)("div",{className:"p-6",children:(()=>{switch(x){case"Motor":return(0,a.jsx)(o.default,{userId:m,onClose:c,onSuccess:v});case"Health":return(0,a.jsx)(d.default,{userId:m,onClose:c,onSuccess:v});case"Commercial":return(0,a.jsx)(u.default,{userId:m,onClose:c,onSuccess:v});case"Life":return(0,a.jsx)(b,{userId:m,onClose:c,onSuccess:v});case"Travel":return(0,a.jsx)(g,{userId:m,onClose:c,onSuccess:v});case"Cyber":return(0,a.jsx)(_,{userId:m,onClose:c,onSuccess:v});default:return null}})()})]}):(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Add New Policy"}),(0,a.jsx)("p",{className:"text-gray-500 mt-1",children:"Select the type of policy you want to add"})]}),(0,a.jsx)("button",{onClick:c,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,a.jsx)(l.X,{className:"w-5 h-5 text-gray-500"})})]}),(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("button",{onClick:()=>h("Motor"),className:"flex items-center p-4 border border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group text-left",children:[(0,a.jsx)("div",{className:"p-3 bg-blue-100 text-blue-600 rounded-lg group-hover:bg-blue-200 transition-colors",children:(0,a.jsx)(r.Car,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 group-hover:text-blue-700",children:"Motor Insurance"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Car, Bike, and other vehicle policies"})]}),(0,a.jsx)(n.ChevronRight,{className:"w-5 h-5 text-gray-300 ml-auto group-hover:text-blue-500"})]}),(0,a.jsxs)("button",{onClick:()=>h("Health"),className:"flex items-center p-4 border border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition-all group text-left",children:[(0,a.jsx)("div",{className:"p-3 bg-pink-100 text-pink-600 rounded-lg group-hover:bg-pink-200 transition-colors",children:(0,a.jsx)(s.Heart,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 group-hover:text-pink-700",children:"Health Insurance"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Individual and Family Floater plans"})]}),(0,a.jsx)(n.ChevronRight,{className:"w-5 h-5 text-gray-300 ml-auto group-hover:text-pink-500"})]}),(0,a.jsxs)("button",{onClick:()=>h("Commercial"),className:"flex items-center p-4 border border-gray-200 rounded-xl hover:border-purple-500 hover:bg-purple-50 transition-all group text-left",children:[(0,a.jsx)("div",{className:"p-3 bg-purple-100 text-purple-600 rounded-lg group-hover:bg-purple-200 transition-colors",children:(0,a.jsx)(i.Briefcase,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 group-hover:text-purple-700",children:"Commercial Insurance"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Fire, Marine, and Liability policies"})]}),(0,a.jsx)(n.ChevronRight,{className:"w-5 h-5 text-gray-300 ml-auto group-hover:text-purple-500"})]}),(0,a.jsxs)("button",{onClick:()=>h("Life"),className:"flex items-center p-4 border border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition-all group text-left",children:[(0,a.jsx)("div",{className:"p-3 bg-pink-100 text-pink-600 rounded-lg group-hover:bg-pink-200 transition-colors",children:(0,a.jsx)(s.Heart,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 group-hover:text-pink-700",children:"Life Insurance"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Term life and endowment plans"})]}),(0,a.jsx)(n.ChevronRight,{className:"w-5 h-5 text-gray-300 ml-auto group-hover:text-pink-500"})]}),(0,a.jsxs)("button",{onClick:()=>h("Travel"),className:"flex items-center p-4 border border-gray-200 rounded-xl hover:border-orange-500 hover:bg-orange-50 transition-all group text-left",children:[(0,a.jsx)("div",{className:"p-3 bg-orange-100 text-orange-600 rounded-lg group-hover:bg-orange-200 transition-colors",children:(0,a.jsx)(i.Briefcase,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 group-hover:text-orange-700",children:"Travel Insurance"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Domestic and International travel"})]}),(0,a.jsx)(n.ChevronRight,{className:"w-5 h-5 text-gray-300 ml-auto group-hover:text-orange-500"})]}),(0,a.jsxs)("button",{onClick:()=>h("Cyber"),className:"flex items-center p-4 border border-gray-200 rounded-xl hover:border-indigo-500 hover:bg-indigo-50 transition-all group text-left",children:[(0,a.jsx)("div",{className:"p-3 bg-indigo-100 text-indigo-600 rounded-lg group-hover:bg-indigo-200 transition-colors",children:(0,a.jsx)(i.Briefcase,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 group-hover:text-indigo-700",children:"Cyber Insurance"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Protection against digital threats"})]}),(0,a.jsx)(n.ChevronRight,{className:"w-5 h-5 text-gray-300 ml-auto group-hover:text-indigo-500"})]})]})]})})})}e.s(["default",()=>b],74468),e.s(["default",()=>g],87367),e.s(["default",()=>_],32747),e.s(["default",()=>v],28228)},12249,e=>{e.v(e=>Promise.resolve().then(()=>e(47792)))},67544,e=>{e.v(e=>Promise.resolve().then(()=>e(41069)))},2207,e=>{e.v(a=>Promise.all(["static/chunks/ba8fa66d4e595479.js"].map(a=>e.l(a))).then(()=>a(3793)))},32282,e=>{e.v(e=>Promise.resolve().then(()=>e(79650)))},92952,e=>{e.v(a=>Promise.all(["static/chunks/9be32793df65755c.js"].map(a=>e.l(a))).then(()=>a(79682)))},86910,e=>{e.v(a=>Promise.all(["static/chunks/b8fd26d14e387d95.js"].map(a=>e.l(a))).then(()=>a(35223)))}]);