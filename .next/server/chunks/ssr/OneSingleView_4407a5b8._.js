module.exports=[93049,a=>{"use strict";let b=(0,a.i(42077).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],93049)},61124,a=>{"use strict";let b=(0,a.i(42077).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);a.s(["Search",()=>b],61124)},1177,a=>{"use strict";let b=(0,a.i(42077).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);a.s(["Download",()=>b],1177)},51786,a=>{"use strict";let b=(0,a.i(42077).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);a.s(["Filter",()=>b],51786)},27441,a=>{"use strict";var b=a.i(72440),c=a.i(29916),d=a.i(1177),e=a.i(67665),f=a.i(51786),g=a.i(93049),h=a.i(61124),i=a.i(93022);function j(){let[a,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)({user:"",type:"all",startDate:"",endDate:""}),q=async()=>{l(!0);try{let{data:a}=await i.supabase.from("motor_policies").select("*").order("created_at",{ascending:!1}),{data:b}=await i.supabase.from("gmc_policies").select("*").order("created_at",{ascending:!1}),{data:c}=await i.supabase.from("commercial_policies").select("*").order("created_at",{ascending:!1}),d=[];(a||[]).forEach(a=>{d.push({type:"Motor",policy_number:a.policy_number,insurer_name:a.insurer_name,premium_amount:a.premium_amount,status:a.status,created_at:a.created_at,vehicle_number:a.vehicle_number,vehicle_make:a.vehicle_make,vehicle_model:a.vehicle_model,policy_type:a.policy_type,policy_start_date:a.policy_start_date,policy_end_date:a.policy_end_date})}),(b||[]).forEach(a=>{d.push({type:"Health",policy_number:a.policy_number,insurer_name:a.insurer_name,premium_amount:a.premium_amount,status:a.status,created_at:a.created_at,tpa_name:a.tpa_name,policy_type:a.policy_type,sum_insured:a.sum_insured,number_of_lives:a.number_of_lives,policy_start_date:a.policy_start_date,policy_end_date:a.policy_end_date})}),(c||[]).forEach(a=>{d.push({type:"Commercial",policy_number:a.policy_number,insurer_name:a.insurer_name,premium_amount:a.premium_amount,status:a.status,created_at:a.created_at,lob_type:a.lob_type,policy_type:a.policy_type,sum_insured:a.sum_insured,policy_start_date:a.policy_start_date,policy_end_date:a.policy_end_date})});let e=d;if("all"!==o.type){let a={motor:"Motor",health:"Health",commercial:"Commercial"};e=e.filter(b=>b.type===a[o.type])}o.startDate&&(e=e.filter(a=>new Date(a.created_at)>=new Date(o.startDate))),o.endDate&&(e=e.filter(a=>new Date(a.created_at)<=new Date(o.endDate))),n(e)}catch(a){console.error("Error fetching preview data:",a),n([])}finally{l(!1)}};(0,c.useEffect)(()=>{q()},[o]);let r=async a=>{j(!0);try{return}catch(a){console.error("Error exporting:",a)}finally{j(!1)}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Reports & Exports"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Generate and export detailed reports across all users."})]}),(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-soft border border-gray-100",children:[(0,b.jsxs)("div",{className:"grid md:grid-cols-4 gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-bold text-gray-700",children:"User"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(h.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,b.jsx)("input",{type:"text",placeholder:"Search user...",value:o.user,onChange:a=>p({...o,user:a.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-bold text-gray-700",children:"Policy Type"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(f.Filter,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,b.jsxs)("select",{value:o.type,onChange:a=>p({...o,type:a.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500 appearance-none bg-white",children:[(0,b.jsx)("option",{value:"all",children:"All Types"}),(0,b.jsx)("option",{value:"motor",children:"Motor"}),(0,b.jsx)("option",{value:"health",children:"Health"}),(0,b.jsx)("option",{value:"commercial",children:"Commercial"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-bold text-gray-700",children:"Start Date"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(g.Calendar,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,b.jsx)("input",{type:"date",value:o.startDate,onChange:a=>p({...o,startDate:a.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-bold text-gray-700",children:"End Date"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(g.Calendar,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,b.jsx)("input",{type:"date",value:o.endDate,onChange:a=>p({...o,endDate:a.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("h3",{className:"text-sm font-bold text-gray-900",children:["Data Preview (",m.length," policies)"]}),k&&(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"Loading..."})]}),(0,b.jsxs)("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:[(0,b.jsx)("div",{className:"overflow-x-auto max-h-96",children:(0,b.jsxs)("table",{className:"w-full text-xs",children:[(0,b.jsx)("thead",{className:"bg-gray-50 sticky top-0",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-2 text-left font-bold text-gray-700",children:"Policy #"}),(0,b.jsx)("th",{className:"px-4 py-2 text-left font-bold text-gray-700",children:"Type"}),(0,b.jsx)("th",{className:"px-4 py-2 text-left font-bold text-gray-700",children:"Insurer"}),(0,b.jsx)("th",{className:"px-4 py-2 text-left font-bold text-gray-700",children:"Premium"}),(0,b.jsx)("th",{className:"px-4 py-2 text-left font-bold text-gray-700",children:"Status"}),(0,b.jsx)("th",{className:"px-4 py-2 text-left font-bold text-gray-700",children:"Date"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-100",children:0===m.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:6,className:"px-4 py-8 text-center text-gray-500",children:"No policies found matching the selected filters"})}):m.slice(0,50).map((a,c)=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-4 py-2 text-gray-900",children:a.policy_number}),(0,b.jsx)("td",{className:"px-4 py-2 text-gray-600",children:a.type}),(0,b.jsx)("td",{className:"px-4 py-2 text-gray-600",children:a.insurer_name}),(0,b.jsxs)("td",{className:"px-4 py-2 text-gray-900 font-semibold",children:["â‚¹",a.premium_amount.toLocaleString()]}),(0,b.jsx)("td",{className:"px-4 py-2",children:(0,b.jsx)("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${"Active"===a.status?"bg-green-100 text-green-700":"Expired"===a.status?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:a.status})}),(0,b.jsx)("td",{className:"px-4 py-2 text-gray-600",children:new Date(a.created_at).toLocaleDateString()})]},c))})]})}),m.length>50&&(0,b.jsxs)("div",{className:"px-4 py-2 bg-gray-50 text-xs text-gray-500 border-t border-gray-200",children:["Showing first 50 of ",m.length," policies. All data will be included in export."]})]})]}),(0,b.jsxs)("div",{className:"border-t border-gray-100 pt-6",children:[(0,b.jsx)("h3",{className:"text-sm font-bold text-gray-900 mb-3",children:"Export Options"}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)("button",{onClick:()=>r("pdf"),disabled:a||0===m.length,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border border-gray-200 hover:border-red-300 hover:bg-red-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed group",children:[(0,b.jsx)("div",{className:"p-1.5 bg-red-100 text-red-600 rounded-lg group-hover:bg-red-200 transition-colors",children:(0,b.jsx)(e.FileText,{className:"w-4 h-4"})}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("p",{className:"text-sm font-bold text-gray-900",children:"PDF"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"For printing"})]})]}),(0,b.jsxs)("button",{onClick:()=>r("excel"),disabled:a||0===m.length,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border border-gray-200 hover:border-green-300 hover:bg-green-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed group",children:[(0,b.jsx)("div",{className:"p-1.5 bg-green-100 text-green-600 rounded-lg group-hover:bg-green-200 transition-colors",children:(0,b.jsx)(d.Download,{className:"w-4 h-4"})}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("p",{className:"text-sm font-bold text-gray-900",children:"Excel"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"For analysis"})]})]}),(0,b.jsxs)("button",{onClick:()=>r("csv"),disabled:a||0===m.length,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed group",children:[(0,b.jsx)("div",{className:"p-1.5 bg-blue-100 text-blue-600 rounded-lg group-hover:bg-blue-200 transition-colors",children:(0,b.jsx)(e.FileText,{className:"w-4 h-4"})}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("p",{className:"text-sm font-bold text-gray-900",children:"CSV"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Raw data"})]})]})]}),a&&(0,b.jsx)("p",{className:"mt-3 text-xs text-gray-500 text-center",children:"Generating export..."})]})]})]})}a.s(["default",()=>j])}];

//# sourceMappingURL=OneSingleView_4407a5b8._.js.map