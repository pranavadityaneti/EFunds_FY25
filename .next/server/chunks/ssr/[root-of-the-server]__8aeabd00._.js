module.exports=[3747,(a,b,c)=>{"use strict";b.exports=a.r(96853).vendored["react-ssr"].ReactDOM},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},93049,a=>{"use strict";let b=(0,a.i(42077).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],93049)},5709,a=>{"use strict";let b=(0,a.i(42077).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);a.s(["ArrowRight",()=>b],5709)},1177,a=>{"use strict";let b=(0,a.i(42077).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);a.s(["Download",()=>b],1177)},51786,a=>{"use strict";let b=(0,a.i(42077).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);a.s(["Filter",()=>b],51786)},6885,a=>{"use strict";let b=(0,a.i(42077).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);a.s(["XCircle",()=>b],6885)},11744,a=>{"use strict";let b=(0,a.i(42077).default)("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);a.s(["Briefcase",()=>b],11744)},48706,a=>{"use strict";var b=a.i(72440),c=a.i(29916),d=a.i(59204),e=a.i(14505),f=a.i(74210),g=a.i(1181),h=a.i(20219),i=a.i(90497),j=a.i(69820),k=a.i(42109);function l({userId:a,initialData:l,onClose:m,onSuccess:n}){let[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)({}),[s,t]=(0,c.useState)({lob_type:l?.lob_type||"GPA",company_name:l?.company_name||"",policy_holder_name:l?.policy_holder_name||"",policy_number:l?.policy_number||"",insurer_name:l?.insurer_name||"",premium_amount:l?.premium_amount||0,sum_insured:l?.sum_insured||0,expiry_date:new Date(l?.expiry_date?l.expiry_date:new Date().setFullYear(new Date().getFullYear()+1)),policy_docs:l?.policy_docs||[]});(0,c.useEffect)(()=>{if(!l){let a=new Date(new Date);a.setFullYear(a.getFullYear()+1),a.setDate(a.getDate()-1),t(b=>({...b,expiry_date:a}))}},[l]);let u=a=>{let{name:b,value:c,type:d}=a.target;t(a=>({...a,[b]:"number"===d?Number(c):c})),q[b]&&r(a=>{let c={...a};return delete c[b],c})},v=async b=>{let c;if(b.preventDefault(),c={},(0,k.validatePolicyNumber)(s.policy_number||"")||(c.policy_number="Policy number is required"),(0,k.validatePremiumAmount)(s.premium_amount||0)||(c.premium_amount="Invalid premium amount"),s.insurer_name||(c.insurer_name="Insurer name is required"),s.lob_type||(c.lob_type="LOB Type is required"),r(c),0===Object.keys(c).length){p(!0);try{let b={...s,user_id:a,expiry_date:new Date(s.expiry_date),policy_number:s.policy_number||"",insurer_name:s.insurer_name||"",premium_amount:s.premium_amount||0,lob_type:s.lob_type||"GPA",policy_docs:s.policy_docs||[]};l?.id?await (0,i.updateCommercialPolicy)(l.id,b):await (0,i.addCommercialPolicy)(b),n(),m()}catch(a){console.error("Error saving policy:",a),r(a=>({...a,submit:"Failed to save policy. Please try again."}))}finally{p(!1)}}};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b sticky top-0 bg-white z-10",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:l?"Edit Commercial Policy":"Add New Commercial Policy"}),(0,b.jsx)("button",{onClick:m,className:"text-gray-500 hover:text-gray-700",children:(0,b.jsx)(d.X,{className:"w-6 h-6"})})]}),(0,b.jsxs)("form",{onSubmit:v,className:"p-6 space-y-8",children:[q.submit&&(0,b.jsx)("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg text-sm",children:q.submit}),(0,b.jsxs)("section",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Policy Details"}),(0,b.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,b.jsx)(g.default,{label:"LOB Type",name:"lob_type",type:"select",value:s.lob_type||"GPA",onChange:u,options:[{value:"GPA",label:"GPA"},{value:"Fire",label:"Fire"},{value:"Other",label:"Other"}],required:!0}),(0,b.jsx)(g.default,{label:"Company Name",name:"company_name",value:s.company_name||"",onChange:u,placeholder:"e.g. Acme Corp"}),(0,b.jsx)(g.default,{label:"Policy Holder Name",name:"policy_holder_name",value:s.policy_holder_name||"",onChange:u,placeholder:"e.g. John Doe"}),(0,b.jsx)(g.default,{label:"Policy Number",name:"policy_number",value:s.policy_number||"",onChange:u,placeholder:"Enter policy number",error:q.policy_number,required:!0}),(0,b.jsx)(g.default,{label:"Insurer Name",name:"insurer_name",type:"select",value:s.insurer_name||"",onChange:u,options:j.INSURANCE_COMPANIES.map(a=>({value:a,label:a})),error:q.insurer_name,required:!0}),(0,b.jsx)(g.default,{label:"Sum Insured (₹)",name:"sum_insured",type:"number",value:s.sum_insured||"",onChange:u,placeholder:"e.g. 500000"}),(0,b.jsx)(g.default,{label:"Premium Amount (₹)",name:"premium_amount",type:"number",value:s.premium_amount||"",onChange:u,error:q.premium_amount,required:!0}),(0,b.jsx)(g.default,{label:"Expiry Date",name:"expiry_date",type:"date",value:s.expiry_date?new Date(s.expiry_date).toISOString().split("T")[0]:"",onChange:a=>{let{name:b,value:c}=a.target;t(a=>({...a,[b]:new Date(c)}))},required:!0})]})]}),(0,b.jsxs)("section",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Documents"}),(0,b.jsx)("div",{className:"grid md:grid-cols-3 gap-6",children:(0,b.jsx)(h.default,{label:"Policy Document",name:"policy_docs",bucket:"policy-documents",onUploadComplete:a=>{t(b=>({...b,policy_docs:[...b.policy_docs||[],a]}))},existingFile:s.policy_docs&&s.policy_docs.length>0?{url:s.policy_docs[0],name:"Policy Document"}:void 0})})]}),(0,b.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[(0,b.jsx)("button",{type:"button",onClick:m,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",disabled:o,children:"Cancel"}),(0,b.jsx)("button",{type:"submit",className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center",disabled:o,children:o?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.Save,{className:"w-4 h-4 mr-2"}),"Save Policy"]})})]})]})]})})}a.s(["default",()=>l])},24982,a=>{"use strict";var b=a.i(72440),c=a.i(29916),d=a.i(59204),e=a.i(14505),f=a.i(74210),g=a.i(1181),h=a.i(20219),i=a.i(90497),j=a.i(69820),k=a.i(42109);function l({userId:a,initialData:l,onClose:m,onSuccess:n}){let[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)({}),[s,t]=(0,c.useState)({vehicle_number:l?.vehicle_number||"",policy_number:l?.policy_number||"",vehicle_type:l?.vehicle_type||"Car",manufacturer:l?.manufacturer||"",model:l?.model||"",fuel_type:l?.fuel_type||"Petrol",manufacturing_year:l?.manufacturing_year||new Date().getFullYear(),number_plate_type:l?.number_plate_type||"White",ownership_type:l?.ownership_type||"Individual",insurer_name:l?.insurer_name||"",premium_amount:l?.premium_amount||0,policy_start_date:l?.policy_start_date?new Date(l.policy_start_date):new Date,policy_end_date:new Date(l?.policy_end_date?l.policy_end_date:new Date().setFullYear(new Date().getFullYear()+1)),rc_docs:l?.rc_docs||[],previous_policy_docs:l?.previous_policy_docs||[],dl_docs:l?.dl_docs||[]});(0,c.useEffect)(()=>{if(s.policy_start_date&&!l){let a=new Date(new Date(s.policy_start_date));a.setFullYear(a.getFullYear()+1),a.setDate(a.getDate()-1),t(b=>({...b,policy_end_date:a}))}},[s.policy_start_date,l]);let u=a=>{let{name:b,value:c,type:d}=a.target;t(a=>({...a,[b]:"number"===d?Number(c):c})),q[b]&&r(a=>{let c={...a};return delete c[b],c})},v=a=>{let{name:b,value:c}=a.target;t(a=>({...a,[b]:new Date(c)}))},w=async b=>{let c;if(b.preventDefault(),c={},(0,k.validateVehicleNumber)(s.vehicle_number||"")||(c.vehicle_number="Invalid vehicle number format (e.g., KA01AB1234)"),(0,k.validatePolicyNumber)(s.policy_number||"")||(c.policy_number="Policy number is required"),(0,k.validatePremiumAmount)(s.premium_amount||0)||(c.premium_amount="Invalid premium amount"),s.policy_start_date&&s.policy_end_date&&!(0,k.validateDateRange)(s.policy_start_date,s.policy_end_date)&&(c.policy_end_date="End date must be after start date"),s.manufacturer||(c.manufacturer="Manufacturer is required"),s.model||(c.model="Model is required"),s.insurer_name||(c.insurer_name="Insurer name is required"),r(c),0===Object.keys(c).length){p(!0);try{let b={...s,user_id:a,policy_start_date:new Date(s.policy_start_date),policy_end_date:new Date(s.policy_end_date),rc_docs:s.rc_docs||[],previous_policy_docs:s.previous_policy_docs||[],dl_docs:s.dl_docs||[]};l?.id?await (0,i.updateMotorPolicy)(l.id,b):await (0,i.addMotorPolicy)(b),n(),m()}catch(a){console.error("Error saving policy:",a),r(a=>({...a,submit:"Failed to save policy. Please try again."}))}finally{p(!1)}}},x=a=>b=>{t(c=>({...c,[a]:[...c[a]||[],b]}))};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b sticky top-0 bg-white z-10",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:l?"Edit Motor Policy":"Add New Motor Policy"}),(0,b.jsx)("button",{onClick:m,className:"text-gray-500 hover:text-gray-700",children:(0,b.jsx)(d.X,{className:"w-6 h-6"})})]}),(0,b.jsxs)("form",{onSubmit:w,className:"p-6 space-y-8",children:[q.submit&&(0,b.jsx)("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg text-sm",children:q.submit}),(0,b.jsxs)("section",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Vehicle Details"}),(0,b.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,b.jsx)(g.default,{label:"Vehicle Number",name:"vehicle_number",value:s.vehicle_number||"",onChange:u,placeholder:"KA01AB1234",error:q.vehicle_number,required:!0}),(0,b.jsx)(g.default,{label:"Vehicle Type",name:"vehicle_type",type:"select",value:s.vehicle_type||"Car",onChange:u,options:[{value:"Car",label:"Car"},{value:"Bike",label:"Bike"},{value:"Bus",label:"Bus"},{value:"GCV",label:"Goods Carrying Vehicle"},{value:"Misc",label:"Miscellaneous"}],required:!0}),(0,b.jsx)(g.default,{label:"Number Plate Type",name:"number_plate_type",type:"select",value:s.number_plate_type??"",onChange:u,required:!0,options:[{value:"White",label:"White (Pvt)"},{value:"Yellow",label:"Yellow (Commercial)"},{value:"EV",label:"EV (Green)"}]}),(0,b.jsx)(g.default,{label:"Ownership Type",name:"ownership_type",type:"select",value:s.ownership_type??"Individual",onChange:u,required:!0,options:[{value:"Individual",label:"Individual"},{value:"Company",label:"Company"}]}),(0,b.jsx)(g.default,{label:"Manufacturer",name:"manufacturer",type:"select",value:s.manufacturer||"",onChange:u,options:j.CAR_MANUFACTURERS.map(a=>({value:a,label:a})),error:q.manufacturer,required:!0}),(0,b.jsx)(g.default,{label:"Model",name:"model",value:s.model||"",onChange:u,placeholder:"e.g. Swift",error:q.model,required:!0}),(0,b.jsx)(g.default,{label:"Fuel Type",name:"fuel_type",type:"select",value:s.fuel_type||"Petrol",onChange:u,options:[{value:"Petrol",label:"Petrol"},{value:"Diesel",label:"Diesel"},{value:"CNG",label:"CNG"},{value:"Electric",label:"Electric"},{value:"Hybrid",label:"Hybrid"}],required:!0}),(0,b.jsx)(g.default,{label:"Manufacturing Year",name:"manufacturing_year",type:"number",value:s.manufacturing_year||new Date().getFullYear(),onChange:u,min:1990,max:new Date().getFullYear(),required:!0})]})]}),(0,b.jsxs)("section",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Policy Details"}),(0,b.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,b.jsx)(g.default,{label:"Policy Number",name:"policy_number",value:s.policy_number||"",onChange:u,placeholder:"Enter policy number",error:q.policy_number,required:!0}),(0,b.jsx)(g.default,{label:"Insurer Name",name:"insurer_name",type:"select",value:s.insurer_name||"",onChange:u,options:j.INSURANCE_COMPANIES.map(a=>({value:a,label:a})),error:q.insurer_name,required:!0}),(0,b.jsx)(g.default,{label:"Premium Amount (₹)",name:"premium_amount",type:"number",value:s.premium_amount||"",onChange:u,error:q.premium_amount,required:!0}),(0,b.jsx)(g.default,{label:"Start Date",name:"policy_start_date",type:"date",value:s.policy_start_date?new Date(s.policy_start_date).toISOString().split("T")[0]:"",onChange:v,required:!0}),(0,b.jsx)(g.default,{label:"End Date",name:"policy_end_date",type:"date",value:s.policy_end_date?new Date(s.policy_end_date).toISOString().split("T")[0]:"",onChange:v,error:q.policy_end_date,required:!0})]})]}),(0,b.jsxs)("section",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Documents"}),(0,b.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,b.jsx)(h.default,{label:"RC Copy",name:"rc_docs",bucket:"rc-copies",onUploadComplete:x("rc_docs"),existingFile:s.rc_docs&&s.rc_docs.length>0?{url:s.rc_docs[0],name:"RC Document"}:void 0}),(0,b.jsx)(h.default,{label:"Previous Policy",name:"previous_policy_docs",bucket:"policy-documents",onUploadComplete:x("previous_policy_docs"),existingFile:s.previous_policy_docs&&s.previous_policy_docs.length>0?{url:s.previous_policy_docs[0],name:"Previous Policy"}:void 0})]})]}),(0,b.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[(0,b.jsx)("button",{type:"button",onClick:m,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",disabled:o,children:"Cancel"}),(0,b.jsx)("button",{type:"submit",className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center",disabled:o,children:o?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.Save,{className:"w-4 h-4 mr-2"}),"Save Policy"]})})]})]})]})})}a.s(["default",()=>l])},40885,a=>{"use strict";let b=(0,a.i(42077).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],40885)},22734,(a,b,c)=>{b.exports=a.x("fs",()=>require("fs"))},51537,a=>{"use strict";var b=a.i(72440),c=a.i(29916),d=a.i(59204),e=a.i(14505),f=a.i(74210),g=a.i(1181),h=a.i(20219),i=a.i(90497);function j({userId:a,onClose:j,onSuccess:k}){let[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)({}),[p,q]=(0,c.useState)({lob_type:"Motor",details:"",uploaded_quote:"",has_better_quote:!1}),r=a=>{let{name:b,value:c,type:d}=a.target;"checkbox"===d?q(c=>({...c,[b]:a.target.checked})):q(a=>({...a,[b]:c})),n[b]&&o(a=>{let c={...a};return delete c[b],c})},s=async b=>{let c;if(b.preventDefault(),c={},p.details||(c.details="Please provide some details about your requirement"),o(c),0===Object.keys(c).length){m(!0);try{await (0,i.addQuoteRequest)({user_id:a,lob_type:p.lob_type,details:p.details,uploaded_quote:p.uploaded_quote,has_better_quote:p.has_better_quote,status:"New"}),k(),j()}catch(a){console.error("Error saving quote request:",a),o(a=>({...a,submit:"Failed to submit request. Please try again."}))}finally{m(!1)}}};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b sticky top-0 bg-white z-10",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Request a Quote"}),(0,b.jsx)("button",{onClick:j,className:"text-gray-500 hover:text-gray-700",children:(0,b.jsx)(d.X,{className:"w-6 h-6"})})]}),(0,b.jsxs)("form",{onSubmit:s,className:"p-6 space-y-6",children:[n.submit&&(0,b.jsx)("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg text-sm",children:n.submit}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(g.default,{label:"Insurance Type",name:"lob_type",type:"select",value:p.lob_type,onChange:r,options:[{value:"Motor",label:"Motor Insurance"},{value:"Health",label:"Health Insurance"},{value:"Life",label:"Life Insurance"},{value:"Others",label:"Other Insurance"}],required:!0}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Requirement Details"}),(0,b.jsx)("textarea",{name:"details",value:p.details,onChange:r,rows:4,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-all ${n.details?"border-red-500 bg-red-50":"border-gray-300"}`,placeholder:"Describe what you are looking for (e.g., Comprehensive car insurance for Honda City 2020)..."}),n.details&&(0,b.jsx)("p",{className:"text-red-500 text-xs mt-1",children:n.details})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"has_better_quote",name:"has_better_quote",checked:p.has_better_quote,onChange:r,className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,b.jsx)("label",{htmlFor:"has_better_quote",className:"text-sm text-gray-700",children:"I have a quote from another insurer"})]}),p.has_better_quote&&(0,b.jsx)(h.default,{label:"Upload Existing Quote (Optional)",name:"uploaded_quote",bucket:"quote-documents",onUploadComplete:a=>{q(b=>({...b,uploaded_quote:a}))},existingFile:p.uploaded_quote?{url:p.uploaded_quote,name:"Existing Quote"}:void 0})]}),(0,b.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[(0,b.jsx)("button",{type:"button",onClick:j,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",disabled:l,children:"Cancel"}),(0,b.jsx)("button",{type:"submit",className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center",disabled:l,children:l?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Submitting..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.Save,{className:"w-4 h-4 mr-2"}),"Submit Request"]})})]})]})]})})}a.s(["default",()=>j])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__8aeabd00._.js.map