module.exports=[30328,a=>{"use strict";let b=(0,a.i(42077).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],30328)},8605,1791,a=>{"use strict";var b=a.i(42077);let c=(0,b.default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);a.s(["AlertTriangle",()=>c],8605);let d=(0,b.default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);a.s(["RefreshCw",()=>d],1791)},91578,a=>{"use strict";var b=a.i(72440),c=a.i(29916),d=a.i(8605),e=a.i(1791),f=a.i(62325),g=a.i(30328),h=a.i(90497),i=a.i(29920);function j(){let[a,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(null);(0,c.useEffect)(()=>{o()},[]);let o=async()=>{j(!0);try{let[a,b,c]=await Promise.all([(0,h.getAllMotorPolicies)(),(0,h.getAllHealthPolicies)(),(0,h.getAllCommercialPolicies)()]),d=[...a.map(a=>({...a,type:"Motor",key:a.policy_number})),...b.map(a=>({...a,type:"Health",key:a.policy_number})),...c.map(a=>({...a,type:"Commercial",key:a.policy_number}))],e={},f=[];d.forEach(a=>{a.key&&(e[a.key]||(e[a.key]=[]),e[a.key].push(a))}),Object.values(e).forEach(a=>{a.length>1&&f.push({key:a[0].key,count:a.length,items:a})}),l(f),n(new Date)}catch(a){console.error("Failed to scan for duplicates:",a)}finally{j(!1)}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Duplicate Detection"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Identify and resolve duplicate policy entries"})]}),(0,b.jsxs)("button",{onClick:o,className:"btn btn-secondary flex items-center",disabled:a,children:[(0,b.jsx)(e.RefreshCw,{className:`w-4 h-4 mr-2 ${a?"animate-spin":""}`}),"Scan Now"]})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"card bg-white p-6 border border-gray-100 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("div",{className:"p-2 bg-red-50 rounded-lg text-red-600",children:(0,b.jsx)(f.Copy,{className:"w-5 h-5"})}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Potential Duplicates"})]}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:k.length})]}),(0,b.jsxs)("div",{className:"card bg-white p-6 border border-gray-100 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("div",{className:"p-2 bg-green-50 rounded-lg text-green-600",children:(0,b.jsx)(e.RefreshCw,{className:"w-5 h-5"})}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Last Scanned"})]}),(0,b.jsx)("p",{className:"text-lg font-medium text-gray-900",children:m?m.toLocaleTimeString():"Never"})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[k.map((a,c)=>(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-red-100 overflow-hidden",children:[(0,b.jsxs)("div",{className:"bg-red-50 px-6 py-3 border-b border-red-100 flex justify-between items-center",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-red-800 font-medium",children:[(0,b.jsx)(d.AlertTriangle,{className:"w-4 h-4"}),"Duplicate Policy Number: ",(0,b.jsx)("span",{className:"font-mono font-bold",children:a.key})]}),(0,b.jsxs)("span",{className:"text-xs bg-white px-2 py-1 rounded border border-red-200 text-red-600 font-bold",children:[a.count," Matches"]})]}),(0,b.jsx)("div",{className:"p-6",children:(0,b.jsx)("div",{className:"grid gap-4",children:a.items.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-100",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("span",{className:"text-xs font-bold uppercase tracking-wider text-gray-500",children:a.type}),(0,b.jsx)("span",{className:"text-xs text-gray-400",children:"â€¢"}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-900",children:a.insurer_name})]}),(0,b.jsxs)("div",{className:"text-sm text-gray-600",children:["User: ",(0,b.jsx)(i.default,{href:`/admin/users/${a.user_id}`,className:"text-primary-600 hover:underline",children:a.user_name||"Unknown"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"text-right text-xs text-gray-500",children:[(0,b.jsxs)("p",{children:["Created: ",new Date(a.created_at).toLocaleDateString()]}),(0,b.jsxs)("p",{children:["ID: ",a.id.slice(0,8),"..."]})]}),(0,b.jsx)("button",{className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Remove"})]})]},c))})})]},c)),0===k.length&&!a&&(0,b.jsxs)("div",{className:"text-center py-12 bg-white rounded-xl border border-gray-100 border-dashed",children:[(0,b.jsx)(g.CheckCircle,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"No Duplicates Found"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Your database appears to be clean!"})]})]})]})}a.s(["default",()=>j])}];

//# sourceMappingURL=OneSingleView_e5b6419e._.js.map