module.exports=[76884,a=>{"use strict";var b=a.i(72440),c=a.i(29916),d=a.i(69499),e=a.i(96968),f=a.i(93022);async function g(){try{let{data:a}=await f.supabase.from("users").select("role"),b=a?.length||0,c=a?.filter(a=>"customer"===a.role).length||0,d=a?.filter(a=>"corporate"===a.role).length||0,{data:e}=await f.supabase.from("motor_policies").select("policy_start_date, policy_end_date"),{data:g}=await f.supabase.from("health_policies").select("expiry_date"),{data:h}=await f.supabase.from("commercial_policies").select("expiry_date");console.log("[AdminMetrics] Raw policy counts:",{motor:e?.length||0,health:g?.length||0,commercial:h?.length||0});let i=new Date;i.setHours(0,0,0,0);let j=e?.filter(a=>!!a.policy_end_date&&new Date(a.policy_end_date)>=i).length||0,k=g?.filter(a=>!!a.expiry_date&&new Date(a.expiry_date)>=i).length||0,l=h?.filter(a=>!!a.expiry_date&&new Date(a.expiry_date)>=i).length||0,m=(e?.length||0)+(g?.length||0)+(h?.length||0),n=j+k+l,o=m-n;console.log("[AdminMetrics] Policy breakdown:",{total:m,active:n,expired:o,motorActive:j,healthActive:k,commercialActive:l});let p=new Date;p.setDate(i.getDate()+20);let q=e?.filter(a=>{if(!a.policy_end_date)return!1;let b=new Date(a.policy_end_date);return b>=i&&b<=p}).length||0,r=g?.filter(a=>{if(!a.expiry_date)return!1;let b=new Date(a.expiry_date);return b>=i&&b<=p}).length||0,s=h?.filter(a=>{if(!a.expiry_date)return!1;let b=new Date(a.expiry_date);return b>=i&&b<=p}).length||0,t=q+r+s;console.log("[AdminMetrics] Expiring soon calculation:",{expiringSoon:t,dateRange:`${i.toLocaleDateString()} to ${p.toLocaleDateString()}`});let{data:u}=await f.supabase.from("claims").select("status, created_at"),v=u?.length||0,w=u?.filter(a=>"New"===a.status||"In Progress"===a.status).length||0,x=u?.filter(a=>"Settled"===a.status).length||0,y=u?.filter(a=>"Rejected"===a.status).length||0,z=new Date(i.getFullYear(),i.getMonth(),1),A=u?.filter(a=>new Date(a.created_at)>=z).length||0,{data:B}=await f.supabase.from("quote_requests").select("status"),C=B?.length||0,D=B?.filter(a=>"New"===a.status||"In Progress"===a.status).length||0,E=B?.filter(a=>"New"===a.status).length||0,F=B?.filter(a=>"Completed"===a.status).length||0;return{totalUsers:{total:b,individual:c,corporate:d},policies:{total:m,active:n,expired:o,expiringSoon:t},claims:{total:v,pending:w,settled:x,rejected:y,raisedThisMonth:A},quotes:{total:C,open:D,pending:E,completed:F}}}catch(a){return console.error("Error fetching admin metrics:",a),{totalUsers:{total:0,individual:0,corporate:0},policies:{total:0,active:0,expired:0,expiringSoon:0},claims:{total:0,pending:0,settled:0,rejected:0,raisedThisMonth:0},quotes:{total:0,open:0,pending:0,completed:0}}}}async function h(){try{let{data:a}=await f.supabase.from("motor_policies").select("id, policy_number, policy_end_date, user_id"),{data:b}=await f.supabase.from("health_policies").select("id, policy_number, expiry_date, user_id"),{data:c}=await f.supabase.from("commercial_policies").select("id, policy_number, expiry_date, user_id"),{data:d}=await f.supabase.from("users").select("id, name"),e=new Map(d?.map(a=>[a.id,a.name])||[]),g=new Date;g.setHours(0,0,0,0);let h=(a||[]).filter(a=>a.policy_end_date).map(a=>({id:a.id,policyNumber:a.policy_number,customerName:e.get(a.user_id)||"Unknown",lob:"Motor",expiryDate:a.policy_end_date,rmName:"Unassigned"})),i=(b||[]).filter(a=>a.expiry_date).map(a=>({id:a.id,policyNumber:a.policy_number,customerName:e.get(a.user_id)||"Unknown",lob:"Health",expiryDate:a.expiry_date,rmName:"Unassigned"})),j=(c||[]).filter(a=>a.expiry_date).map(a=>({id:a.id,policyNumber:a.policy_number,customerName:e.get(a.user_id)||"Unknown",lob:"Commercial",expiryDate:a.expiry_date,rmName:"Unassigned"})),k=[...h,...i,...j],l=new Date(g);l.setDate(g.getDate()+7);let m=new Date(g);m.setDate(g.getDate()+15);let n=new Date(g);n.setDate(g.getDate()+20);let o=k.filter(a=>{let b=new Date(a.expiryDate);return b>=g&&b<=l}).length,p=k.filter(a=>{let b=new Date(a.expiryDate);return b>l&&b<=m}).length,q=k.filter(a=>{let b=new Date(a.expiryDate);return b>m&&b<=n}).length,r=k.filter(a=>new Date(a.expiryDate)>=g).sort((a,b)=>new Date(a.expiryDate).getTime()-new Date(b.expiryDate).getTime()).slice(0,5);return{range0to7:o,range8to15:p,range16to20:q,topExpiring:r}}catch(a){return console.error("Error fetching expiry overview:",a),{range0to7:0,range8to15:0,range16to20:0,topExpiring:[]}}}async function i(){try{let{count:a}=await f.supabase.from("motor_policies").select("*",{count:"exact",head:!0}),{count:b}=await f.supabase.from("health_policies").select("*",{count:"exact",head:!0}),{count:c}=await f.supabase.from("commercial_policies").select("*",{count:"exact",head:!0});return console.log("[LOB Chart] Policy counts by line of business:",{motor:a||0,health:b||0,commercial:c||0,total:(a||0)+(b||0)+(c||0)}),[{name:"Motor",value:a||0,fill:"#3B82F6"},{name:"Health",value:b||0,fill:"#10B981"},{name:"Commercial",value:c||0,fill:"#F59E0B"},{name:"Others",value:0,fill:"#6366F1"}]}catch(a){return console.error("[LOB Chart] Error fetching policy counts:",a),[]}}async function j(){try{let{data:a}=await f.supabase.from("motor_policies").select("id, policy_number, vehicle_number, user_id").eq("status","Active");if(!a)return[];let b=[...new Set(a.map(a=>a.user_id))],{data:c}=await f.supabase.from("users").select("id, name").in("id",b),d=new Map(c?.map(a=>[a.id,a.name])||[]),e=new Map,g=[];return a.forEach(a=>{let b=d.get(a.user_id)||"Unknown";e.has(a.vehicle_number)?g.push({type:"Vehicle Number",value:a.vehicle_number,policy1:e.get(a.vehicle_number),policy2:{id:a.id,policyNumber:a.policy_number,customerName:b}}):e.set(a.vehicle_number,{id:a.id,policyNumber:a.policy_number,customerName:b})}),g}catch(a){return console.error("Error checking duplicates:",a),[]}}async function k(){try{let{data:a}=await f.supabase.from("motor_policies").select("id, policy_number, user_id, created_at").order("created_at",{ascending:!1}).limit(3);if(!a)return[];let b=a.map(a=>a.user_id),{data:c}=await f.supabase.from("users").select("id, name").in("id",b),d=new Map(c?.map(a=>[a.id,a.name])||[]);return a.map(a=>({id:a.id,customerName:d.get(a.user_id)||"Unknown",docType:"Policy Document",lob:"Motor",date:a.created_at}))}catch(a){return console.error("Error fetching doc verification:",a),[]}}async function l(){try{let{data:a}=await f.supabase.from("users").select("id, name").in("role",["rm","admin"]);if(!a||0===a.length)return null;let b=(await Promise.all(a.map(async a=>{let{count:b}=await f.supabase.from("users").select("*",{count:"exact",head:!0}).eq("rm_id",a.id);return{name:a.name,initials:a.name?a.name.substring(0,2).toUpperCase():"RM",policies:b||0,claims:0,rating:5}}))).sort((a,b)=>b.policies-a.policies);return{topPerformer:b[0],allRMs:b}}catch(a){return console.error("Error fetching RM performance:",a),null}}async function m(){try{let{data:a}=await f.supabase.from("motor_policies").select("premium_amount"),{data:b}=await f.supabase.from("health_policies").select("premium_amount"),{data:c}=await f.supabase.from("commercial_policies").select("premium_amount"),d=(a||[]).reduce((a,b)=>a+(Number(b.premium_amount)||0),0),e=(b||[]).reduce((a,b)=>a+(Number(b.premium_amount)||0),0),g=(c||[]).reduce((a,b)=>a+(Number(b.premium_amount)||0),0),h=d+e+g;return console.log("[Premium By LOB]",{motor:d,health:e,commercial:g,total:h}),[{name:"Motor",value:d,percentage:h>0?Math.round(d/h*100):0,fill:"#3B82F6"},{name:"Health",value:e,percentage:h>0?Math.round(e/h*100):0,fill:"#10B981"},{name:"Commercial",value:g,percentage:h>0?Math.round(g/h*100):0,fill:"#F59E0B"}].filter(a=>a.value>0)}catch(a){return console.error("[Premium By LOB] Error:",a),[]}}async function n(a,b,c="day"){try{let d=a.toISOString().split("T")[0],e=b.toISOString().split("T")[0],{data:g}=await f.supabase.from("motor_policies").select("created_at, premium_amount").gte("created_at",d).lte("created_at",e).order("created_at"),{data:h}=await f.supabase.from("health_policies").select("created_at, premium_amount").gte("created_at",d).lte("created_at",e).order("created_at"),{data:i}=await f.supabase.from("commercial_policies").select("created_at, premium_amount").gte("created_at",d).lte("created_at",e).order("created_at"),j=new Map,k=a=>{let b=new Date(a);if("day"===c)return b.toISOString().split("T")[0];if("week"!==c)return`${b.getFullYear()}-${String(b.getMonth()+1).padStart(2,"0")}-01`;{let a=new Date(b);return a.setDate(b.getDate()-b.getDay()),a.toISOString().split("T")[0]}},l=new Date(a);for(;l<=b;){let a=k(l.toISOString());j.has(a)||j.set(a,{motor:0,health:0,commercial:0}),"day"===c?l.setDate(l.getDate()+1):"week"===c?l.setDate(l.getDate()+7):l.setMonth(l.getMonth()+1)}(g||[]).forEach(a=>{let b=k(a.created_at),c=j.get(b)||{motor:0,health:0,commercial:0};c.motor+=Number(a.premium_amount)||0,j.set(b,c)}),(h||[]).forEach(a=>{let b=k(a.created_at),c=j.get(b)||{motor:0,health:0,commercial:0};c.health+=Number(a.premium_amount)||0,j.set(b,c)}),(i||[]).forEach(a=>{let b=k(a.created_at),c=j.get(b)||{motor:0,health:0,commercial:0};c.commercial+=Number(a.premium_amount)||0,j.set(b,c)});let m=Array.from(j.entries()).map(([a,b])=>({date:a,motor:b.motor,health:b.health,commercial:b.commercial,total:b.motor+b.health+b.commercial})).sort((a,b)=>a.date.localeCompare(b.date));return console.log("[Premium Trend]",{startDate:d,endDate:e,groupBy:c,dataPoints:m.length}),m}catch(a){return console.error("[Premium Trend] Error:",a),[]}}var o=a.i(1400),p=a.i(67665),q=a.i(77480),r=a.i(81258),s=a.i(1692);function t({metrics:a}){let c=[{title:"Total Users",value:a.totalUsers.total,subtext:`${a.totalUsers.individual} Ind | ${a.totalUsers.corporate} Corp`,icon:(0,b.jsx)(o.Users,{className:"w-5 h-5 text-blue-600"}),bg:"bg-blue-50",trend:"+12%"},{title:"Total Policies",value:a.policies.total,subtext:`${a.policies.active} Active`,icon:(0,b.jsx)(p.FileText,{className:"w-5 h-5 text-purple-600"}),bg:"bg-purple-50",trend:"+5%"},{title:"Expiring Soon",value:a.policies.expiringSoon,subtext:"Next 20 Days",icon:(0,b.jsx)(q.AlertCircle,{className:"w-5 h-5 text-orange-600"}),bg:"bg-orange-50",trend:"Action Req"},{title:"Claims Raised",value:a.claims.raisedThisMonth,subtext:"This Month",icon:(0,b.jsx)(r.Shield,{className:"w-5 h-5 text-red-600"}),bg:"bg-red-50",trend:`${a.claims.pending} Pending`},{title:"Open Quotes",value:a.quotes.open,subtext:`${a.quotes.pending} New`,icon:(0,b.jsx)(s.MessageSquare,{className:"w-5 h-5 text-green-600"}),bg:"bg-green-50",trend:"Pipeline"}];return(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:c.map((a,c)=>(0,b.jsxs)("div",{className:"card p-4 hover:shadow-md transition-shadow border border-gray-100",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,b.jsx)("div",{className:`p-2 rounded-lg ${a.bg}`,children:a.icon}),(0,b.jsx)("span",{className:"text-xs font-medium text-gray-500 bg-gray-50 px-2 py-1 rounded-full",children:a.trend})]}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:a.value}),(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:a.title}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:a.subtext})]},c))})}var u=a.i(93049),v=a.i(5709),w=a.i(29920),x=a.i(20190),y=a.i(16269),z=a.i(25160),A=a.i(71073),B=a.i(75122),C=a.i(28293),D=a.i(81959),E=a.i(37324);function F({data:a}){let c=[{name:"0-7 Days",value:a.range0to7,color:"#DC2626",bgColor:"#FEF2F2"},{name:"8-15 Days",value:a.range8to15,color:"#EA580C",bgColor:"#FFF7ED"},{name:"16-20 Days",value:a.range16to20,color:"#CA8A04",bgColor:"#FEFCE8"}],d=a.range0to7+a.range8to15+a.range16to20;return(0,b.jsxs)("div",{className:"card",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(u.Calendar,{className:"w-5 h-5 text-orange-600"}),(0,b.jsx)("h3",{className:"font-bold text-gray-900",children:"Expiring Policies Overview"})]}),(0,b.jsxs)(w.default,{href:"/admin/policies?filter=expiring",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View All ",(0,b.jsx)(v.ArrowRight,{className:"w-4 h-4 ml-1"})]})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:d}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Policies expiring in next 20 days"})]}),(0,b.jsx)(D.ResponsiveContainer,{width:"100%",height:200,children:(0,b.jsxs)(x.BarChart,{data:c,layout:"vertical",margin:{top:5,right:30,left:80,bottom:5},children:[(0,b.jsx)(B.CartesianGrid,{strokeDasharray:"3 3",opacity:.3}),(0,b.jsx)(z.XAxis,{type:"number",allowDecimals:!1}),(0,b.jsx)(A.YAxis,{type:"category",dataKey:"name",width:70,style:{fontSize:"12px"}}),(0,b.jsx)(C.Tooltip,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},formatter:a=>[`${a} ${1===a?"policy":"policies"}`,"Count"]}),(0,b.jsx)(y.Bar,{dataKey:"value",radius:[0,8,8,0],children:c.map((a,c)=>(0,b.jsx)(E.Cell,{fill:a.color},`cell-${c}`))})]})})]})}var G=a.i(98341),H=a.i(42077);let I=(0,H.default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var J=a.i(52060),K=a.i(35887),L=a.i(39510),M=a.i(59280),N=a.i(93137),O=a.i(95134),P=a.i(19988),Q=a.i(53265),R=a.i(8216);function S(a){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function T(){return(T=Object.assign.bind()).apply(this,arguments)}function U(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function V(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?U(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=S(a)||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=S(d))return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==S(b)?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):U(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function W(a){return"string"==typeof a?parseInt(a,10):a}function X(a,b){var c=Number("".concat(b.cx||a.cx)),d=Number("".concat(b.cy||a.cy));return V(V(V({},b),a),{},{cx:c,cy:d})}function Y(a){return c.default.createElement(R.Shape,T({shapeType:"sector",propTransformer:X},a))}var Z=a.i(51738),$=a.i(92405),_=a.i(91221),aa=a.i(71570),ab=a.i(90583),ac=a.i(2299),ad=a.i(23045),ae=["shape","activeShape","activeIndex","cornerRadius"],af=["value","background"];function ag(a){return(ag="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function ah(){return(ah=Object.assign.bind()).apply(this,arguments)}function ai(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function aj(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?ai(Object(c),!0).forEach(function(b){ap(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):ai(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function ak(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d)){if(b.indexOf(d)>=0)continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],!(b.indexOf(c)>=0)&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}function al(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,aq(d.key),d)}}function am(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(a){}return(am=function(){return!!a})()}function an(a){return(an=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function ao(a,b){return(ao=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){return a.__proto__=b,a})(a,b)}function ap(a,b,c){return(b=aq(b))in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function aq(a){var b=function(a,b){if("object"!=ag(a)||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=ag(d))return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==ag(b)?b:b+""}var ar=function(a){var b,d;function e(){var a,b,c;if(!(this instanceof e))throw TypeError("Cannot call a class as a function");for(var d=arguments.length,f=Array(d),g=0;g<d;g++)f[g]=arguments[g];return b=e,c=[].concat(f),b=an(b),ap(a=function(a,b){if(b&&("object"===ag(b)||"function"==typeof b))return b;if(void 0!==b)throw TypeError("Derived constructors may only return object or undefined");var c=a;if(void 0===c)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return c}(this,am()?Reflect.construct(b,c||[],an(this).constructor):b.apply(this,c)),"state",{isAnimationFinished:!1}),ap(a,"handleAnimationEnd",function(){var b=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),(0,Q.default)(b)&&b()}),ap(a,"handleAnimationStart",function(){var b=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),(0,Q.default)(b)&&b()}),a}if("function"!=typeof a&&null!==a)throw TypeError("Super expression must either be null or a function");return e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),a&&ao(e,a),b=[{key:"getDeltaAngle",value:function(){var a=this.props,b=a.startAngle,c=a.endAngle;return(0,ab.mathSign)(c-b)*Math.min(Math.abs(c-b),360)}},{key:"renderSectorsStatically",value:function(a){var b=this,d=this.props,e=d.shape,f=d.activeShape,g=d.activeIndex,h=d.cornerRadius,i=ak(d,ae),j=(0,$.filterProps)(i,!1);return a.map(function(a,d){var k=d===g,l=aj(aj(aj(aj({},j),{},{cornerRadius:W(h)},a),(0,ad.adaptEventsOfChild)(b.props,a,d)),{},{className:"recharts-radial-bar-sector ".concat(a.className),forceCornerRadius:i.forceCornerRadius,cornerIsExternal:i.cornerIsExternal,isActive:k,option:k?f:e});return c.default.createElement(Y,ah({},l,{key:"sector-".concat(d)}))})}},{key:"renderSectorsWithAnimation",value:function(){var a=this,b=this.props,d=b.data,e=b.isAnimationActive,f=b.animationBegin,g=b.animationDuration,h=b.animationEasing,i=b.animationId,j=this.state.prevData;return c.default.createElement(O.default,{begin:f,duration:g,isActive:e,easing:h,from:{t:0},to:{t:1},key:"radialBar-".concat(i),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(b){var e=b.t,f=d.map(function(a,b){var c=j&&j[b];if(c){var d=(0,ab.interpolateNumber)(c.startAngle,a.startAngle),f=(0,ab.interpolateNumber)(c.endAngle,a.endAngle);return aj(aj({},a),{},{startAngle:d(e),endAngle:f(e)})}var g=a.endAngle,h=a.startAngle,i=(0,ab.interpolateNumber)(h,g);return aj(aj({},a),{},{endAngle:i(e)})});return c.default.createElement(Z.Layer,null,a.renderSectorsStatically(f))})}},{key:"renderSectors",value:function(){var a=this.props,b=a.data,c=a.isAnimationActive,d=this.state.prevData;return c&&b&&b.length&&(!d||!(0,P.default)(d,b))?this.renderSectorsWithAnimation():this.renderSectorsStatically(b)}},{key:"renderBackground",value:function(a){var b=this,d=this.props.cornerRadius,e=(0,$.filterProps)(this.props.background,!1);return a.map(function(a,f){a.value;var g=a.background,h=ak(a,af);if(!g)return null;var i=aj(aj(aj(aj(aj({cornerRadius:W(d)},h),{},{fill:"#eee"},g),e),(0,ad.adaptEventsOfChild)(b.props,a,f)),{},{index:f,className:(0,N.default)("recharts-radial-bar-background-sector",null==e?void 0:e.className),option:g,isActive:!1});return c.default.createElement(Y,ah({},i,{key:"sector-".concat(f)}))})}},{key:"render",value:function(){var a=this.props,b=a.hide,d=a.data,e=a.className,f=a.background,g=a.isAnimationActive;if(b||!d||!d.length)return null;var h=this.state.isAnimationFinished,i=(0,N.default)("recharts-area",e);return c.default.createElement(Z.Layer,{className:i},f&&c.default.createElement(Z.Layer,{className:"recharts-radial-bar-background"},this.renderBackground(d)),c.default.createElement(Z.Layer,{className:"recharts-radial-bar-sectors"},this.renderSectors()),(!g||h)&&aa.LabelList.renderCallByParent(aj({},this.props),d))}}],d=[{key:"getDerivedStateFromProps",value:function(a,b){return a.animationId!==b.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:b.curData}:a.data!==b.curData?{curData:a.data}:null}}],b&&al(e.prototype,b),d&&al(e,d),Object.defineProperty(e,"prototype",{writable:!1}),e}(c.PureComponent);ap(ar,"displayName","RadialBar"),ap(ar,"defaultProps",{angleAxisId:0,radiusAxisId:0,minPointSize:0,hide:!1,legendType:"rect",data:[],isAnimationActive:!_.Global.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease",forceCornerRadius:!1,cornerIsExternal:!1}),ap(ar,"getComposedData",function(a){var b=a.item,c=a.props,d=a.radiusAxis,e=a.radiusAxisTicks,f=a.angleAxis,g=a.angleAxisTicks,h=a.displayedData,i=a.dataKey,j=a.stackedData,k=a.barPosition,l=a.bandSize,m=a.dataStartIndex,n=(0,ac.findPositionOfBar)(k,b);if(!n)return null;var o=f.cx,p=f.cy,q=c.layout,r=b.props,s=r.children,t=r.minPointSize,u="radial"===q?f:d,v=j?u.scale.domain():null,w=(0,ac.getBaseValueOfBar)({numericAxis:u}),x=(0,$.findAllByType)(s,E.Cell);return{data:h.map(function(a,h){var k,r,s,u,y,z;if(j?k=(0,ac.truncateByDomain)(j[m+h],v):Array.isArray(k=(0,ac.getValueByDataKey)(a,i))||(k=[w,k]),"radial"===q){r=(0,ac.getCateCoordinateOfBar)({axis:d,ticks:e,bandSize:l,offset:n.offset,entry:a,index:h}),y=f.scale(k[1]),u=f.scale(k[0]),s=r+n.size;var A=y-u;Math.abs(t)>0&&Math.abs(A)<Math.abs(t)&&(y+=(0,ab.mathSign)(A||t)*(Math.abs(t)-Math.abs(A))),z={background:{cx:o,cy:p,innerRadius:r,outerRadius:s,startAngle:c.startAngle,endAngle:c.endAngle}}}else{r=d.scale(k[0]),s=d.scale(k[1]),y=(u=(0,ac.getCateCoordinateOfBar)({axis:f,ticks:g,bandSize:l,offset:n.offset,entry:a,index:h}))+n.size;var B=s-r;Math.abs(t)>0&&Math.abs(B)<Math.abs(t)&&(s+=(0,ab.mathSign)(B||t)*(Math.abs(t)-Math.abs(B)))}return aj(aj(aj(aj({},a),z),{},{payload:a,value:j?k:k[1],cx:o,cy:p,innerRadius:r,outerRadius:s,startAngle:u,endAngle:y},x&&x[h]&&x[h].props),{},{tooltipPayload:[(0,ac.getTooltipItem)(b,a)],tooltipPosition:(0,M.polarToCartesian)(o,p,(r+s)/2,(u+y)/2)})}),layout:q}});var as=(0,J.generateCategoricalChart)({chartName:"RadialBarChart",GraphicalChild:ar,legendContent:"children",defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"angleAxis",AxisComp:K.PolarAngleAxis},{axisType:"radiusAxis",AxisComp:L.PolarRadiusAxis}],formatAxisMap:M.formatAxisMap,defaultProps:{layout:"radial",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});function at(){let[a,d]=(0,c.useState)([]),[e,f]=(0,c.useState)(!0),[g,h]=(0,c.useState)(0);(0,c.useEffect)(()=>{i()},[]);let i=async()=>{f(!0);let a=await m();d(a),h(a.reduce((a,b)=>a+b.value,0)),f(!1)},j=a.map((a,b)=>({name:a.name,value:a.percentage,fill:a.fill})).reverse(),k=a=>a>=1e7?`₹${(a/1e7).toFixed(2)}Cr`:a>=1e5?`₹${(a/1e5).toFixed(2)}L`:`₹${a.toLocaleString()}`;return(0,b.jsxs)("div",{className:"card",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(I,{className:"w-5 h-5 text-green-600"}),(0,b.jsx)("h3",{className:"font-bold text-gray-900",children:"Premium Source"})]}),(0,b.jsx)(G.TrendingUp,{className:"w-5 h-5 text-green-600"})]}),e?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):0===a.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[(0,b.jsx)(I,{className:"w-12 h-12 mb-2 opacity-50"}),(0,b.jsx)("p",{className:"text-sm",children:"No premium data available"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"text-center mb-6",children:[(0,b.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:k(g)}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Total Premium"})]}),(0,b.jsx)(D.ResponsiveContainer,{width:"100%",height:220,children:(0,b.jsxs)(as,{cx:"50%",cy:"50%",innerRadius:"30%",outerRadius:"100%",data:j,startAngle:90,endAngle:-270,children:[(0,b.jsx)(ar,{background:!0,dataKey:"value",cornerRadius:10}),(0,b.jsx)(C.Tooltip,{formatter:a=>`${a}%`,contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}})]})}),(0,b.jsx)("div",{className:"grid grid-cols-3 gap-3 mt-4",children:a.map(a=>(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsxs)("div",{className:"flex items-center justify-center mb-1",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:a.fill}}),(0,b.jsx)("span",{className:"text-xs font-semibold text-gray-700",children:a.name})]}),(0,b.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:[a.percentage,"%"]}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:k(a.value)})]},a.name))})]})]})}var au=a.i(48995),av=a.i(28231),aw=a.i(23641),ax=a.i(67465),ay=a.i(65175),az=["layout","type","stroke","connectNulls","isRange","ref"],aA=["key"];function aB(a){return(aB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function aC(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d)){if(b.indexOf(d)>=0)continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],!(b.indexOf(c)>=0)&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}function aD(){return(aD=Object.assign.bind()).apply(this,arguments)}function aE(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function aF(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?aE(Object(c),!0).forEach(function(b){aK(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):aE(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function aG(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,aL(d.key),d)}}function aH(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(a){}return(aH=function(){return!!a})()}function aI(a){return(aI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function aJ(a,b){return(aJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){return a.__proto__=b,a})(a,b)}function aK(a,b,c){return(b=aL(b))in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function aL(a){var b=function(a,b){if("object"!=aB(a)||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=aB(d))return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==aB(b)?b:b+""}var aM=function(a){var b,d;function e(){var a,b,c;if(!(this instanceof e))throw TypeError("Cannot call a class as a function");for(var d=arguments.length,f=Array(d),g=0;g<d;g++)f[g]=arguments[g];return b=e,c=[].concat(f),b=aI(b),aK(a=function(a,b){if(b&&("object"===aB(b)||"function"==typeof b))return b;if(void 0!==b)throw TypeError("Derived constructors may only return object or undefined");var c=a;if(void 0===c)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return c}(this,aH()?Reflect.construct(b,c||[],aI(this).constructor):b.apply(this,c)),"state",{isAnimationFinished:!0}),aK(a,"id",(0,ab.uniqueId)("recharts-area-")),aK(a,"handleAnimationEnd",function(){var b=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),(0,Q.default)(b)&&b()}),aK(a,"handleAnimationStart",function(){var b=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),(0,Q.default)(b)&&b()}),a}if("function"!=typeof a&&null!==a)throw TypeError("Super expression must either be null or a function");return e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),a&&aJ(e,a),b=[{key:"renderDots",value:function(a,b,d){var f=this.props.isAnimationActive,g=this.state.isAnimationFinished;if(f&&!g)return null;var h=this.props,i=h.dot,j=h.points,k=h.dataKey,l=(0,$.filterProps)(this.props,!1),m=(0,$.filterProps)(i,!0),n=j.map(function(a,b){var c=aF(aF(aF({key:"dot-".concat(b),r:3},l),m),{},{index:b,cx:a.x,cy:a.y,dataKey:k,value:a.value,payload:a.payload,points:j});return e.renderDotItem(i,c)}),o={clipPath:a?"url(#clipPath-".concat(b?"":"dots-").concat(d,")"):null};return c.default.createElement(Z.Layer,aD({className:"recharts-area-dots"},o),n)}},{key:"renderHorizontalRect",value:function(a){var b=this.props,d=b.baseLine,e=b.points,f=b.strokeWidth,g=e[0].x,h=e[e.length-1].x,i=a*Math.abs(g-h),j=(0,au.default)(e.map(function(a){return a.y||0}));return((0,ab.isNumber)(d)&&"number"==typeof d?j=Math.max(d,j):d&&Array.isArray(d)&&d.length&&(j=Math.max((0,au.default)(d.map(function(a){return a.y||0})),j)),(0,ab.isNumber)(j))?c.default.createElement("rect",{x:g<h?g:g-i,y:0,width:i,height:Math.floor(j+(f?parseInt("".concat(f),10):1))}):null}},{key:"renderVerticalRect",value:function(a){var b=this.props,d=b.baseLine,e=b.points,f=b.strokeWidth,g=e[0].y,h=e[e.length-1].y,i=a*Math.abs(g-h),j=(0,au.default)(e.map(function(a){return a.x||0}));return((0,ab.isNumber)(d)&&"number"==typeof d?j=Math.max(d,j):d&&Array.isArray(d)&&d.length&&(j=Math.max((0,au.default)(d.map(function(a){return a.x||0})),j)),(0,ab.isNumber)(j))?c.default.createElement("rect",{x:0,y:g<h?g:g-i,width:j+(f?parseInt("".concat(f),10):1),height:Math.floor(i)}):null}},{key:"renderClipRect",value:function(a){return"vertical"===this.props.layout?this.renderVerticalRect(a):this.renderHorizontalRect(a)}},{key:"renderAreaStatically",value:function(a,b,d,e){var f=this.props,g=f.layout,h=f.type,i=f.stroke,j=f.connectNulls,k=f.isRange,l=(f.ref,aC(f,az));return c.default.createElement(Z.Layer,{clipPath:d?"url(#clipPath-".concat(e,")"):null},c.default.createElement(ax.Curve,aD({},(0,$.filterProps)(l,!0),{points:a,connectNulls:j,type:h,baseLine:b,layout:g,stroke:"none",className:"recharts-area-area"})),"none"!==i&&c.default.createElement(ax.Curve,aD({},(0,$.filterProps)(this.props,!1),{className:"recharts-area-curve",layout:g,type:h,connectNulls:j,fill:"none",points:a})),"none"!==i&&k&&c.default.createElement(ax.Curve,aD({},(0,$.filterProps)(this.props,!1),{className:"recharts-area-curve",layout:g,type:h,connectNulls:j,fill:"none",points:b})))}},{key:"renderAreaWithAnimation",value:function(a,b){var d=this,e=this.props,f=e.points,g=e.baseLine,h=e.isAnimationActive,i=e.animationBegin,j=e.animationDuration,k=e.animationEasing,l=e.animationId,m=this.state,n=m.prevPoints,o=m.prevBaseLine;return c.default.createElement(O.default,{begin:i,duration:j,isActive:h,easing:k,from:{t:0},to:{t:1},key:"area-".concat(l),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(e){var h=e.t;if(n){var i,j=n.length/f.length,k=f.map(function(a,b){var c=Math.floor(b*j);if(n[c]){var d=n[c],e=(0,ab.interpolateNumber)(d.x,a.x),f=(0,ab.interpolateNumber)(d.y,a.y);return aF(aF({},a),{},{x:e(h),y:f(h)})}return a});return i=(0,ab.isNumber)(g)&&"number"==typeof g?(0,ab.interpolateNumber)(o,g)(h):(0,av.default)(g)||(0,aw.default)(g)?(0,ab.interpolateNumber)(o,0)(h):g.map(function(a,b){var c=Math.floor(b*j);if(o[c]){var d=o[c],e=(0,ab.interpolateNumber)(d.x,a.x),f=(0,ab.interpolateNumber)(d.y,a.y);return aF(aF({},a),{},{x:e(h),y:f(h)})}return a}),d.renderAreaStatically(k,i,a,b)}return c.default.createElement(Z.Layer,null,c.default.createElement("defs",null,c.default.createElement("clipPath",{id:"animationClipPath-".concat(b)},d.renderClipRect(h))),c.default.createElement(Z.Layer,{clipPath:"url(#animationClipPath-".concat(b,")")},d.renderAreaStatically(f,g,a,b)))})}},{key:"renderArea",value:function(a,b){var c=this.props,d=c.points,e=c.baseLine,f=c.isAnimationActive,g=this.state,h=g.prevPoints,i=g.prevBaseLine,j=g.totalLength;return f&&d&&d.length&&(!h&&j>0||!(0,P.default)(h,d)||!(0,P.default)(i,e))?this.renderAreaWithAnimation(a,b):this.renderAreaStatically(d,e,a,b)}},{key:"render",value:function(){var a,b=this.props,d=b.hide,e=b.dot,f=b.points,g=b.className,h=b.top,i=b.left,j=b.xAxis,k=b.yAxis,l=b.width,m=b.height,n=b.isAnimationActive,o=b.id;if(d||!f||!f.length)return null;var p=this.state.isAnimationFinished,q=1===f.length,r=(0,N.default)("recharts-area",g),s=j&&j.allowDataOverflow,t=k&&k.allowDataOverflow,u=s||t,v=(0,av.default)(o)?this.id:o,w=null!=(a=(0,$.filterProps)(e,!1))?a:{r:3,strokeWidth:2},x=w.r,y=w.strokeWidth,z=((0,$.hasClipDot)(e)?e:{}).clipDot,A=void 0===z||z,B=2*(void 0===x?3:x)+(void 0===y?2:y);return c.default.createElement(Z.Layer,{className:r},s||t?c.default.createElement("defs",null,c.default.createElement("clipPath",{id:"clipPath-".concat(v)},c.default.createElement("rect",{x:s?i:i-l/2,y:t?h:h-m/2,width:s?l:2*l,height:t?m:2*m})),!A&&c.default.createElement("clipPath",{id:"clipPath-dots-".concat(v)},c.default.createElement("rect",{x:i-B/2,y:h-B/2,width:l+B,height:m+B}))):null,q?null:this.renderArea(u,v),(e||q)&&this.renderDots(u,A,v),(!n||p)&&aa.LabelList.renderCallByParent(this.props,f))}}],d=[{key:"getDerivedStateFromProps",value:function(a,b){return a.animationId!==b.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,curBaseLine:a.baseLine,prevPoints:b.curPoints,prevBaseLine:b.curBaseLine}:a.points!==b.curPoints||a.baseLine!==b.curBaseLine?{curPoints:a.points,curBaseLine:a.baseLine}:null}}],b&&aG(e.prototype,b),d&&aG(e,d),Object.defineProperty(e,"prototype",{writable:!1}),e}(c.PureComponent);aK(aM,"displayName","Area"),aK(aM,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!_.Global.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"}),aK(aM,"getBaseValue",function(a,b,c,d){var e=a.layout,f=a.baseValue,g=b.props.baseValue,h=null!=g?g:f;if((0,ab.isNumber)(h)&&"number"==typeof h)return h;var i="horizontal"===e?d:c,j=i.scale.domain();if("number"===i.type){var k=Math.max(j[0],j[1]),l=Math.min(j[0],j[1]);return"dataMin"===h?l:"dataMax"===h||k<0?k:Math.max(Math.min(j[0],j[1]),0)}return"dataMin"===h?j[0]:"dataMax"===h?j[1]:j[0]}),aK(aM,"getComposedData",function(a){var b,c=a.props,d=a.item,e=a.xAxis,f=a.yAxis,g=a.xAxisTicks,h=a.yAxisTicks,i=a.bandSize,j=a.dataKey,k=a.stackedData,l=a.dataStartIndex,m=a.displayedData,n=a.offset,o=c.layout,p=k&&k.length,q=aM.getBaseValue(c,d,e,f),r="horizontal"===o,s=!1,t=m.map(function(a,b){p?c=k[l+b]:Array.isArray(c=(0,ac.getValueByDataKey)(a,j))?s=!0:c=[q,c];var c,d=null==c[1]||p&&null==(0,ac.getValueByDataKey)(a,j);return r?{x:(0,ac.getCateCoordinateOfLine)({axis:e,ticks:g,bandSize:i,entry:a,index:b}),y:d?null:f.scale(c[1]),value:c,payload:a}:{x:d?null:e.scale(c[1]),y:(0,ac.getCateCoordinateOfLine)({axis:f,ticks:h,bandSize:i,entry:a,index:b}),value:c,payload:a}});return b=p||s?t.map(function(a){var b=Array.isArray(a.value)?a.value[0]:null;return r?{x:a.x,y:null!=b&&null!=a.y?f.scale(b):null}:{x:null!=b?e.scale(b):null,y:a.y}}):r?f.scale(q):e.scale(q),aF({points:t,baseLine:b,layout:o,isRange:s},n)}),aK(aM,"renderDotItem",function(a,b){var d;if(c.default.isValidElement(a))d=c.default.cloneElement(a,b);else if((0,Q.default)(a))d=a(b);else{var e=(0,N.default)("recharts-area-dot","boolean"!=typeof a?a.className:""),f=b.key,g=aC(b,aA);d=c.default.createElement(ay.Dot,aD({},g,{key:f,className:e}))}return d});var aN=a.i(43582),aO=(0,J.generateCategoricalChart)({chartName:"AreaChart",GraphicalChild:aM,axisComponents:[{axisType:"xAxis",AxisComp:z.XAxis},{axisType:"yAxis",AxisComp:A.YAxis}],formatAxisMap:aN.formatAxisMap});function aP(){let[a,d]=(0,c.useState)([]),[e,f]=(0,c.useState)(!0),[g,h]=(0,c.useState)("1month"),[i,j]=(0,c.useState)({start:"",end:""});(0,c.useEffect)(()=>{k()},[g,i]);let k=async()=>{f(!0);let{start:a,end:b,groupBy:c}=(()=>{let a=new Date,b=new Date,c="day";if("custom"===g)return i.start&&i.end?{start:new Date(i.start),end:new Date(i.end),groupBy:"day"}:(b.setMonth(a.getMonth()-1),{start:b,end:a,groupBy:"day"});switch(g){case"1day":b.setDate(a.getDate()-1),c="day";break;case"1week":b.setDate(a.getDate()-7),c="day";break;case"15days":b.setDate(a.getDate()-15),c="day";break;case"1month":b.setMonth(a.getMonth()-1),c="day";break;case"3months":b.setMonth(a.getMonth()-3),c="week";break;case"6months":b.setMonth(a.getMonth()-6),c="week";break;case"1year":b.setFullYear(a.getFullYear()-1),c="month"}return{start:b,end:a,groupBy:c}})();d(await n(a,b,c)),f(!1)},l=a=>a>=1e7?`₹${(a/1e7).toFixed(1)}Cr`:a>=1e5?`₹${(a/1e5).toFixed(1)}L`:a>=1e3?`₹${(a/1e3).toFixed(0)}K`:`₹${a}`,m=a=>new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric"}),o=a.reduce((a,b)=>a+b.total,0);return(0,b.jsxs)("div",{className:"card",children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(G.TrendingUp,{className:"w-5 h-5 text-blue-600"}),(0,b.jsx)("h3",{className:"font-bold text-gray-900",children:"Total Premium Trend"})]})}),(0,b.jsx)("div",{className:"flex gap-3 mb-4",children:(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsxs)("select",{value:g,onChange:a=>h(a.target.value),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white",children:[(0,b.jsx)("option",{value:"1day",children:"1 Day"}),(0,b.jsx)("option",{value:"1week",children:"1 Week"}),(0,b.jsx)("option",{value:"15days",children:"15 Days"}),(0,b.jsx)("option",{value:"1month",children:"1 Month"}),(0,b.jsx)("option",{value:"3months",children:"3 Months"}),(0,b.jsx)("option",{value:"6months",children:"6 Months"}),(0,b.jsx)("option",{value:"1year",children:"1 Year"}),(0,b.jsx)("option",{value:"custom",children:"Custom Range"})]})})}),"custom"===g&&(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-gray-600 mb-1 block",children:"Start Date"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(u.Calendar,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,b.jsx)("input",{type:"date",value:i.start,onChange:a=>j({...i,start:a.target.value}),className:"w-full pl-8 pr-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-gray-600 mb-1 block",children:"End Date"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(u.Calendar,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,b.jsx)("input",{type:"date",value:i.end,onChange:a=>j({...i,end:a.target.value}),className:"w-full pl-8 pr-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:l(o)}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Total premium in selected period"})]}),e?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):0===a.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[(0,b.jsx)(G.TrendingUp,{className:"w-12 h-12 mb-2 opacity-50"}),(0,b.jsx)("p",{className:"text-sm",children:"No premium data for this period"})]}):(0,b.jsx)(D.ResponsiveContainer,{width:"100%",height:220,children:(0,b.jsxs)(aO,{data:a,margin:{top:10,right:10,left:-20,bottom:0},children:[(0,b.jsx)("defs",{children:(0,b.jsxs)("linearGradient",{id:"colorTotal",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,b.jsx)("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.3}),(0,b.jsx)("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:0})]})}),(0,b.jsx)(B.CartesianGrid,{strokeDasharray:"3 3",opacity:.2}),(0,b.jsx)(z.XAxis,{dataKey:"date",tickFormatter:m,style:{fontSize:"11px"},tick:{fill:"#6B7280"}}),(0,b.jsx)(A.YAxis,{tickFormatter:l,style:{fontSize:"11px"},tick:{fill:"#6B7280"}}),(0,b.jsx)(C.Tooltip,{formatter:a=>[l(a),"Premium"],labelFormatter:a=>m(a),contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",fontSize:"12px"}}),(0,b.jsx)(aM,{type:"monotone",dataKey:"total",stroke:"#3B82F6",strokeWidth:2,fillOpacity:1,fill:"url(#colorTotal)"})]})})]})}var aQ=a.i(1118),aR=a.i(20564),aS=a.i(99432);function aT({data:a}){return(0,b.jsxs)("div",{className:"card h-full flex flex-col",children:[(0,b.jsx)("h3",{className:"font-bold text-gray-900 mb-4",children:"Policies by LOB"}),(0,b.jsx)("div",{className:"flex-1 min-h-[250px]",children:(0,b.jsx)(D.ResponsiveContainer,{width:"100%",height:"100%",children:(0,b.jsxs)(aQ.PieChart,{children:[(0,b.jsx)(aR.Pie,{data:a,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:a.map((a,c)=>(0,b.jsx)(E.Cell,{fill:a.fill},`cell-${c}`))}),(0,b.jsx)(C.Tooltip,{}),(0,b.jsx)(aS.Legend,{verticalAlign:"bottom",height:36})]})})})]})}let aU=(0,H.default)("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);function aV({metrics:a,docVerificationData:c}){return(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full",children:[(0,b.jsxs)("div",{className:"card h-full flex flex-col",children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,b.jsxs)("h3",{className:"font-bold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)(r.Shield,{className:"w-5 h-5 text-red-600"}),"Claims Overview"]})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4 flex-1",children:[(0,b.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg flex flex-col justify-center",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"New"}),(0,b.jsx)("p",{className:"text-xl font-bold text-gray-900",children:a.claims.pending})]}),(0,b.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg flex flex-col justify-center",children:[(0,b.jsx)("p",{className:"text-xs text-green-600",children:"Settled"}),(0,b.jsx)("p",{className:"text-xl font-bold text-green-700",children:a.claims.settled})]})]}),(0,b.jsxs)("div",{className:"space-y-3 mt-auto",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Recent Actionables"}),(0,b.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"CLM-2024-001"}),(0,b.jsx)("span",{className:"px-2 py-0.5 bg-yellow-100 text-yellow-800 rounded text-xs",children:"In Review"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"CLM-2024-002"}),(0,b.jsx)("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-800 rounded text-xs",children:"New"})]})]})]}),(0,b.jsxs)("div",{className:"card h-full flex flex-col",children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,b.jsxs)("h3",{className:"font-bold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)(s.MessageSquare,{className:"w-5 h-5 text-blue-600"}),"Quote Pipeline"]})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4 flex-1",children:[(0,b.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg flex flex-col justify-center",children:[(0,b.jsx)("p",{className:"text-xs text-blue-600",children:"New Requests"}),(0,b.jsx)("p",{className:"text-xl font-bold text-blue-700",children:a.quotes.pending})]}),(0,b.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg flex flex-col justify-center",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Completed"}),(0,b.jsx)("p",{className:"text-xl font-bold text-gray-900",children:a.quotes.completed})]})]}),(0,b.jsx)("button",{className:"w-full py-2 text-sm text-primary-600 bg-primary-50 rounded-lg hover:bg-primary-100 transition-colors mt-auto",children:"View All Requests"})]}),(0,b.jsxs)("div",{className:"card h-full flex flex-col",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("h3",{className:"font-bold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)(aU,{className:"w-5 h-5 text-purple-600"}),"Doc Verification"]}),c.length>0&&(0,b.jsxs)("span",{className:"bg-red-100 text-red-700 text-xs font-bold px-2 py-1 rounded-full",children:[c.length," Pending"]})]}),(0,b.jsx)("div",{className:"space-y-3 flex-1 overflow-y-auto max-h-[200px] scrollbar-hide",children:0===c.length?(0,b.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"No pending verifications"})}):c.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded transition-colors cursor-pointer",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:a.customerName}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:[a.docType," • ",a.lob]})]}),(0,b.jsx)("button",{className:"text-xs bg-purple-600 text-white px-2 py-1 rounded hover:bg-purple-700",children:"Verify"})]},a.id))})]})]})}var aW=a.i(8605),aX=a.i(1791);function aY(){let{user:a,loading:f}=(0,d.useAuth)(),m=(0,e.useRouter)(),[n,p]=(0,c.useState)(!0),[q,r]=(0,c.useState)(null),[s,u]=(0,c.useState)(null),[v,w]=(0,c.useState)([]),[x,y]=(0,c.useState)([]),[z,A]=(0,c.useState)([]),[B,C]=(0,c.useState)([]),[D,E]=(0,c.useState)(null);(0,c.useEffect)(()=>{console.log("[AdminDashboard] useEffect triggered",{loading:f,user:a?.role}),f||a&&"admin"===a.role?a?.role==="admin"&&(console.log("[AdminDashboard] Loading data..."),G()):(console.log("[AdminDashboard] Redirecting to login"),m.push("/login"))},[a,f]);let G=async()=>{try{let[a,b,c,d,e,f]=await Promise.all([g(),h(),i(),j(),k(),l()]);r(a),u(b),y(c),A(d),C(e),E(f)}catch(a){console.error("Failed to load admin dashboard:",a)}finally{p(!1)}};if(f||n||!q||!s)return(0,b.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});let H=async()=>{p(!0),await G()};return(0,b.jsxs)("div",{className:"space-y-6 pb-10",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Control Tower"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"System Overview & Health"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("div",{className:"text-sm text-gray-500 bg-gray-50 px-3 py-1 rounded-full border border-gray-200",children:["Last updated: ",new Date().toLocaleTimeString()]}),(0,b.jsx)("button",{onClick:H,className:"p-2 text-gray-500 hover:text-primary-600 hover:bg-gray-100 rounded-full transition-colors",title:"Refresh Data",children:(0,b.jsx)(aX.RefreshCw,{className:`w-5 h-5 ${n?"animate-spin":""}`})})]})]}),(0,b.jsx)(t,{metrics:q}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsx)(F,{data:s}),(0,b.jsx)(at,{})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsx)("div",{className:"lg:col-span-2",children:(0,b.jsx)(aP,{})}),(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsx)(aT,{data:x})})]}),(0,b.jsx)("div",{children:(0,b.jsx)(aV,{metrics:q,docVerificationData:B})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"bg-red-50 border border-red-100 rounded-xl p-4 flex items-start gap-4",children:[(0,b.jsx)("div",{className:"p-2 bg-white rounded-lg shadow-sm",children:(0,b.jsx)(aW.AlertTriangle,{className:"w-6 h-6 text-red-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-red-900",children:"Duplicate Detection"}),z.length>0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("p",{className:"text-sm text-red-700 mb-2",children:[z.length," possible duplicate policies detected."]}),(0,b.jsx)("button",{className:"text-xs bg-red-600 text-white px-3 py-1.5 rounded hover:bg-red-700 transition-colors",children:"Review Duplicates"})]}):(0,b.jsx)("p",{className:"text-sm text-red-700",children:"No duplicates detected. System healthy."})]})]}),D&&(0,b.jsxs)("div",{className:"bg-white border border-gray-100 rounded-xl p-4 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("h3",{className:"font-bold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)(o.Users,{className:"w-5 h-5 text-blue-600"}),"RM Performance"]}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"Top Performer"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center font-bold text-blue-700",children:D.topPerformer.initials}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-bold text-gray-900",children:D.topPerformer.name}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:[D.topPerformer.policies," Policies • ",D.topPerformer.claims," Claims"]})]})]})]})]})]})}a.s(["default",()=>aY],76884)}];

//# sourceMappingURL=OneSingleView_app_%28admin%29_admin_dashboard_page_tsx_65a78b79._.js.map