module.exports=[5709,a=>{"use strict";let b=(0,a.i(42077).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);a.s(["ArrowRight",()=>b],5709)},45,a=>{"use strict";var b=a.i(72440),c=a.i(29916),d=a.i(17659),e=a.i(5709),f=a.i(8490),g=a.i(90497);function h(){let[a,h]=(0,c.useState)(null),[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!0);return(0,c.useEffect)(()=>{(async()=>{l(!0);try{let a=await (0,f.getCurrentUser)();if(!a)return void l(!1);h(a);let[b,c,d]=await Promise.all([(0,g.getUserMotorPolicies)(a.id),(0,g.getUserHealthPolicies)(a.id),(0,g.getUserCommercialPolicies)(a.id)]),e=new Date,i=[...b.map(a=>({...a,type:"Motor"})),...c.map(a=>({...a,type:"Health"})),...d.map(a=>({...a,type:"Commercial"}))].filter(a=>{let b="policy_end_date"in a?a.policy_end_date:a.expiry_date;return new Date(b)<e});j(i.sort((a,b)=>{let c="policy_end_date"in a?a.policy_end_date:a.expiry_date,d="policy_end_date"in b?b.policy_end_date:b.expiry_date;return new Date(d).getTime()-new Date(c).getTime()}))}catch(a){console.error("Error fetching history:",a)}finally{l(!1)}})()},[]),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Policy History"}),(0,b.jsx)("p",{className:"text-gray-500",children:"View your expired and past insurance policies"})]}),k?(0,b.jsx)("div",{className:"flex justify-center py-12",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):0===i.length?(0,b.jsxs)("div",{className:"text-center py-12 bg-white rounded-xl border border-dashed border-gray-300",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(d.History,{className:"w-8 h-8 text-gray-400"})}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No History Found"}),(0,b.jsx)("p",{className:"text-gray-500",children:"You don't have any expired policies yet."})]}):(0,b.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-left",children:[(0,b.jsx)("thead",{className:"bg-gray-50 border-b border-gray-100",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Policy Details"}),(0,b.jsx)("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Type"}),(0,b.jsx)("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Insurer"}),(0,b.jsx)("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Expired On"}),(0,b.jsx)("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Status"}),(0,b.jsx)("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Action"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-100",children:i.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,b.jsxs)("td",{className:"px-6 py-4",children:[(0,b.jsx)("div",{className:"font-medium text-gray-900",children:"Motor"===a.type?`${a.vehicle_number} - ${a.model}`:"Health"===a.type?`${a.company_name} Health`:`${a.lob_type} Policy`}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a.policy_number})]}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:a.type})}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:a.insurer_name}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date("policy_end_date"in a?a.policy_end_date:a.expiry_date).toLocaleDateString()}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Expired"})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("button",{className:"text-primary-600 hover:text-primary-700 font-medium text-sm flex items-center",children:["Renew ",(0,b.jsx)(e.ArrowRight,{className:"w-4 h-4 ml-1"})]})})]},a.id))})]})})})]})}a.s(["default",()=>h])}];

//# sourceMappingURL=OneSingleView_843df487._.js.map